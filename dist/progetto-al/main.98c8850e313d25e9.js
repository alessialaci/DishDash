(self.webpackChunkProgettoAL=self.webpackChunkProgettoAL||[]).push([[179],{2011:(Tt,ce,H)=>{"use strict";H.d(ce,{Dh:()=>ye,GT:()=>ve,cc:()=>Fe,hO:()=>nt,on:()=>Y,pX:()=>de,xv:()=>Ee});var c=H(4650),B=H(9260),j=H(2122);Tt=H.hmd(Tt);const fe=["ngOnDestroy"],de=(pe,Ge,Et,We={})=>new Proxy(pe,{get:(xe,Ce)=>Et.runOutsideAngular(()=>{var st;if(pe[Ce])return!(null===(st=We?.spy)||void 0===st)&&st.get&&We.spy.get(Ce,pe[Ce]),pe[Ce];if(fe.indexOf(Ce)>-1)return()=>{};const Xe=Ge.toPromise().then(_e=>{const K=_e&&_e[Ce];return"function"==typeof K?K.bind(_e):K&&K.then?K.then(Qe=>Et.run(()=>Qe)):Et.run(()=>K)});return new Proxy(()=>{},{get:(_e,K)=>Xe[K],apply:(_e,K,Qe)=>Xe.then(rt=>{var Vt;const at=rt&&rt(...Qe);return!(null===(Vt=We?.spy)||void 0===Vt)&&Vt.apply&&We.spy.apply(Ce,Qe,at),at})})})}),ve=(pe,Ge)=>{Ge.forEach(Et=>{Object.getOwnPropertyNames(Et.prototype||Et).forEach(We=>{Object.defineProperty(pe.prototype,We,Object.getOwnPropertyDescriptor(Et.prototype||Et,We))})})};class ue{constructor(Ge){return Ge}}const ye=new c.OlP("angularfire2.app.options"),Ee=new c.OlP("angularfire2.app.name");function Y(pe,Ge,Et){const xe="object"==typeof Et&&Et||{};xe.name=xe.name||"string"==typeof Et&&Et||"[DEFAULT]";const st=B.Z.apps.filter(Xe=>Xe&&Xe.name===xe.name)[0]||Ge.runOutsideAngular(()=>B.Z.initializeApp(pe,xe));try{JSON.stringify(pe)!==JSON.stringify(st.options)&&J("error",`${st.name} Firebase App already initialized with different options${Tt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new ue(st)}const J=(pe,...Ge)=>{(0,c.X6Q)()&&typeof console<"u"&&console[pe](...Ge)},te={provide:ue,useFactory:Y,deps:[ye,c.R0b,[new c.FiY,Ee]]};let nt=(()=>{class pe{constructor(Et){B.Z.registerVersion("angularfire",j.q4.full,"core"),B.Z.registerVersion("angularfire",j.q4.full,"app-compat"),B.Z.registerVersion("angular",c.q4F.full,Et.toString())}static initializeApp(Et,We){return{ngModule:pe,providers:[{provide:ye,useValue:Et},{provide:Ee,useValue:We}]}}}return pe.\u0275fac=function(Et){return new(Et||pe)(c.LFG(c.Lbi))},pe.\u0275mod=c.oAB({type:pe}),pe.\u0275inj=c.cJS({providers:[te]}),pe})();function Fe(pe,Ge,Et,We,xe){const[,Ce,st]=globalThis.\u0275AngularfireInstanceCache.find(Xe=>Xe[0]===pe)||[];if(Ce)return function Me(pe,Ge){try{return pe.toString()===Ge.toString()}catch{return pe===Ge}}(xe,st)||(Ae("error",`${Ge} was already initialized on the ${Et} Firebase App with different settings.${ot?" You may need to reload as Firebase is not HMR aware.":""}`),Ae("warn",{is:xe,was:st})),Ce;{const Xe=We();return globalThis.\u0275AngularfireInstanceCache.push([pe,Xe,xe]),Xe}}const ot=!!Tt.hot,Ae=(pe,...Ge)=>{(0,c.X6Q)()&&typeof console<"u"&&console[pe](...Ge)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},2122:(Tt,ce,H)=>{"use strict";H.d(ce,{q4:()=>Sa,iC:()=>pr,fc:()=>El,HU:()=>ss,vb:()=>kr,JM:()=>_t});var c=H(4650),B=H(259),j=H(5861),fe=H(9681),de=H(2090),ve=H(4859),ue=H(1877),ye=H(8766);const Ee="@firebase/installations",Y="0.6.4",te=`w:${Y}`,nt="FIS_v2",Ge=new de.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Et(S){return S instanceof de.ZR&&S.code.includes("request-failed")}function We({projectId:S}){return`https://firebaseinstallations.googleapis.com/v1/projects/${S}/installations`}function xe(S){return{token:S.token,requestStatus:2,expiresIn:rt(S.expiresIn),creationTime:Date.now()}}function Ce(S,R){return st.apply(this,arguments)}function st(){return(st=(0,j.Z)(function*(S,R){const z=(yield R.json()).error;return Ge.create("request-failed",{requestName:S,serverCode:z.code,serverMessage:z.message,serverStatus:z.status})})).apply(this,arguments)}function Xe({apiKey:S}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":S})}function _e(S,{refreshToken:R}){const L=Xe(S);return L.append("Authorization",function Vt(S){return`${nt} ${S}`}(R)),L}function K(S){return Qe.apply(this,arguments)}function Qe(){return(Qe=(0,j.Z)(function*(S){const R=yield S();return R.status>=500&&R.status<600?S():R})).apply(this,arguments)}function rt(S){return Number(S.replace("s","000"))}function at(S,R){return he.apply(this,arguments)}function he(){return(he=(0,j.Z)(function*({appConfig:S,heartbeatServiceProvider:R},{fid:L}){const z=We(S),re=Xe(S),le=R.getImmediate({optional:!0});if(le){const Rt=yield le.getHeartbeatsHeader();Rt&&re.append("x-firebase-client",Rt)}const ft={method:"POST",headers:re,body:JSON.stringify({fid:L,authVersion:nt,appId:S.appId,sdkVersion:te})},It=yield K(()=>fetch(z,ft));if(It.ok){const Rt=yield It.json();return{fid:Rt.fid||L,registrationStatus:2,refreshToken:Rt.refreshToken,authToken:xe(Rt.authToken)}}throw yield Ce("Create Installation",It)})).apply(this,arguments)}function De(S){return new Promise(R=>{setTimeout(R,S)})}const Ue=/^[cdef][\w-]{21}$/;function Pe(){try{const S=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(S),S[0]=112+S[0]%16;const L=function At(S){return function Re(S){return btoa(String.fromCharCode(...S)).replace(/\+/g,"-").replace(/\//g,"_")}(S).substr(0,22)}(S);return Ue.test(L)?L:""}catch{return""}}function Yt(S){return`${S.appName}!${S.appId}`}const Pt=new Map;function qe(S,R){const L=Yt(S);ln(L,R),function hn(S,R){const L=function qn(){return!Rn&&"BroadcastChannel"in self&&(Rn=new BroadcastChannel("[Firebase] FID Change"),Rn.onmessage=S=>{ln(S.data.key,S.data.fid)}),Rn}();L&&L.postMessage({key:S,fid:R}),function ri(){0===Pt.size&&Rn&&(Rn.close(),Rn=null)}()}(L,R)}function ln(S,R){const L=Pt.get(S);if(L)for(const z of L)z(R)}let Rn=null;const Yn="firebase-installations-store";let pi=null;function jn(){return pi||(pi=(0,ye.X3)("firebase-installations-database",1,{upgrade:(S,R)=>{0===R&&S.createObjectStore(Yn)}})),pi}function it(S,R){return mr.apply(this,arguments)}function mr(){return(mr=(0,j.Z)(function*(S,R){const L=Yt(S),re=(yield jn()).transaction(Yn,"readwrite"),le=re.objectStore(Yn),Be=yield le.get(L);return yield le.put(R,L),yield re.done,(!Be||Be.fid!==R.fid)&&qe(S,R.fid),R})).apply(this,arguments)}function Gr(S){return En.apply(this,arguments)}function En(){return(En=(0,j.Z)(function*(S){const R=Yt(S),z=(yield jn()).transaction(Yn,"readwrite");yield z.objectStore(Yn).delete(R),yield z.done})).apply(this,arguments)}function Qi(S,R){return _s.apply(this,arguments)}function _s(){return(_s=(0,j.Z)(function*(S,R){const L=Yt(S),re=(yield jn()).transaction(Yn,"readwrite"),le=re.objectStore(Yn),Be=yield le.get(L),ft=R(Be);return void 0===ft?yield le.delete(L):yield le.put(ft,L),yield re.done,ft&&(!Be||Be.fid!==ft.fid)&&qe(S,ft.fid),ft})).apply(this,arguments)}function Un(S){return $n.apply(this,arguments)}function $n(){return($n=(0,j.Z)(function*(S){let R;const L=yield Qi(S.appConfig,z=>{const re=Zn(z),le=vt(S,re);return R=le.registrationPromise,le.installationEntry});return""===L.fid?{installationEntry:yield R}:{installationEntry:L,registrationPromise:R}})).apply(this,arguments)}function Zn(S){return Wt(S||{fid:Pe(),registrationStatus:0})}function vt(S,R){if(0===R.registrationStatus){if(!navigator.onLine)return{installationEntry:R,registrationPromise:Promise.reject(Ge.create("app-offline"))};const L={fid:R.fid,registrationStatus:1,registrationTime:Date.now()},z=function Ze(S,R){return Mn.apply(this,arguments)}(S,L);return{installationEntry:L,registrationPromise:z}}return 1===R.registrationStatus?{installationEntry:R,registrationPromise:$i(S)}:{installationEntry:R}}function Mn(){return(Mn=(0,j.Z)(function*(S,R){try{const L=yield at(S,R);return it(S.appConfig,L)}catch(L){throw Et(L)&&409===L.customData.serverCode?yield Gr(S.appConfig):yield it(S.appConfig,{fid:R.fid,registrationStatus:0}),L}})).apply(this,arguments)}function $i(S){return xr.apply(this,arguments)}function xr(){return(xr=(0,j.Z)(function*(S){let R=yield nr(S.appConfig);for(;1===R.registrationStatus;)yield De(100),R=yield nr(S.appConfig);if(0===R.registrationStatus){const{installationEntry:L,registrationPromise:z}=yield Un(S);return z||L}return R})).apply(this,arguments)}function nr(S){return Qi(S,R=>{if(!R)throw Ge.create("installation-not-found");return Wt(R)})}function Wt(S){return function ii(S){return 1===S.registrationStatus&&S.registrationTime+1e4<Date.now()}(S)?{fid:S.fid,registrationStatus:0}:S}function bn(S,R){return ys.apply(this,arguments)}function ys(){return(ys=(0,j.Z)(function*({appConfig:S,heartbeatServiceProvider:R},L){const z=_n(S,L),re=_e(S,L),le=R.getImmediate({optional:!0});if(le){const Rt=yield le.getHeartbeatsHeader();Rt&&re.append("x-firebase-client",Rt)}const ft={method:"POST",headers:re,body:JSON.stringify({installation:{sdkVersion:te,appId:S.appId}})},It=yield K(()=>fetch(z,ft));if(It.ok)return xe(yield It.json());throw yield Ce("Generate Auth Token",It)})).apply(this,arguments)}function _n(S,{fid:R}){return`${We(S)}/${R}/authTokens:generate`}function Wr(S){return Fr.apply(this,arguments)}function Fr(){return(Fr=(0,j.Z)(function*(S,R=!1){let L;const z=yield Qi(S.appConfig,le=>{if(!pn(le))throw Ge.create("not-registered");const Be=le.authToken;if(!R&&rr(Be))return le;if(1===Be.requestStatus)return L=dt(S,R),le;{if(!navigator.onLine)throw Ge.create("app-offline");const ft=W(le);return L=Gt(S,ft),ft}});return L?yield L:z.authToken})).apply(this,arguments)}function dt(S,R){return ke.apply(this,arguments)}function ke(){return(ke=(0,j.Z)(function*(S,R){let L=yield ht(S.appConfig);for(;1===L.authToken.requestStatus;)yield De(100),L=yield ht(S.appConfig);const z=L.authToken;return 0===z.requestStatus?Wr(S,R):z})).apply(this,arguments)}function ht(S){return Qi(S,R=>{if(!pn(R))throw Ge.create("not-registered");return function ne(S){return 1===S.requestStatus&&S.requestTime+1e4<Date.now()}(R.authToken)?Object.assign(Object.assign({},R),{authToken:{requestStatus:0}}):R})}function Gt(S,R){return Ht.apply(this,arguments)}function Ht(){return(Ht=(0,j.Z)(function*(S,R){try{const L=yield bn(S,R),z=Object.assign(Object.assign({},R),{authToken:L});return yield it(S.appConfig,z),L}catch(L){if(!Et(L)||401!==L.customData.serverCode&&404!==L.customData.serverCode){const z=Object.assign(Object.assign({},R),{authToken:{requestStatus:0}});yield it(S.appConfig,z)}else yield Gr(S.appConfig);throw L}})).apply(this,arguments)}function pn(S){return void 0!==S&&2===S.registrationStatus}function rr(S){return 2===S.requestStatus&&!function q(S){const R=Date.now();return R<S.creationTime||S.creationTime+S.expiresIn<R+36e5}(S)}function W(S){const R={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},S),{authToken:R})}function se(){return(se=(0,j.Z)(function*(S){const R=S,{installationEntry:L,registrationPromise:z}=yield Un(R);return z?z.catch(console.error):Wr(R).catch(console.error),L.fid})).apply(this,arguments)}function jt(){return(jt=(0,j.Z)(function*(S,R=!1){const L=S;return yield tn(L),(yield Wr(L,R)).token})).apply(this,arguments)}function tn(S){return Cn.apply(this,arguments)}function Cn(){return(Cn=(0,j.Z)(function*(S){const{registrationPromise:R}=yield Un(S);R&&(yield R)})).apply(this,arguments)}function lr(S){return Ge.create("missing-app-config-values",{valueName:S})}const Fs="installations",Us=S=>{const R=S.getProvider("app").getImmediate(),L=function In(S){if(!S||!S.options)throw lr("App Configuration");if(!S.name)throw lr("App Name");const R=["projectId","apiKey","appId"];for(const L of R)if(!S.options[L])throw lr(L);return{appName:S.name,projectId:S.options.projectId,apiKey:S.options.apiKey,appId:S.options.appId}}(R);return{app:R,appConfig:L,heartbeatServiceProvider:(0,fe._getProvider)(R,"heartbeat"),_delete:()=>Promise.resolve()}},Vs=S=>{const R=S.getProvider("app").getImmediate(),L=(0,fe._getProvider)(R,Fs).getImmediate();return{getId:()=>function ge(S){return se.apply(this,arguments)}(L),getToken:re=>function lt(S){return jt.apply(this,arguments)}(L,re)}};(function Za(){(0,fe._registerComponent)(new ve.wA(Fs,Us,"PUBLIC")),(0,fe._registerComponent)(new ve.wA("installations-internal",Vs,"PRIVATE"))})(),(0,fe.registerVersion)(Ee,Y),(0,fe.registerVersion)(Ee,Y,"esm2017");const Ji="@firebase/remote-config",yr=new de.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Yl{constructor(R,L,z,re){this.client=R,this.storage=L,this.storageCache=z,this.logger=re}isCachedDataFresh(R,L){if(!L)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const z=Date.now()-L,re=z<=R;return this.logger.debug(`Config fetch cache check. Cache age millis: ${z}. Cache max age millis (minimumFetchIntervalMillis setting): ${R}. Is cache hit: ${re}.`),re}fetch(R){var L=this;return(0,j.Z)(function*(){const[z,re]=yield Promise.all([L.storage.getLastSuccessfulFetchTimestampMillis(),L.storage.getLastSuccessfulFetchResponse()]);if(re&&L.isCachedDataFresh(R.cacheMaxAgeMillis,z))return re;R.eTag=re&&re.eTag;const le=yield L.client.fetch(R),Be=[L.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===le.status&&Be.push(L.storage.setLastSuccessfulFetchResponse(le)),yield Promise.all(Be),le})()}}function Ja(S=navigator){return S.languages&&S.languages[0]||S.language}class cd{constructor(R,L,z,re,le,Be){this.firebaseInstallations=R,this.sdkVersion=L,this.namespace=z,this.projectId=re,this.apiKey=le,this.appId=Be}fetch(R){var L=this;return(0,j.Z)(function*(){const[z,re]=yield Promise.all([L.firebaseInstallations.getId(),L.firebaseInstallations.getToken()]),Be=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${L.projectId}/namespaces/${L.namespace}:fetch?key=${L.apiKey}`,ft={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":R.eTag||"*"},It={sdk_version:L.sdkVersion,app_instance_id:z,app_instance_id_token:re,app_id:L.appId,language_code:Ja()},Rt={method:"POST",headers:ft,body:JSON.stringify(It)},Xt=fetch(Be,Rt),Ot=new Promise((Li,Xn)=>{R.signal.addEventListener(()=>{const yu=new Error("The operation was aborted.");yu.name="AbortError",Xn(yu)})});let Oi;try{yield Promise.race([Xt,Ot]),Oi=yield Xt}catch(Li){let Xn="fetch-client-network";throw"AbortError"===Li?.name&&(Xn="fetch-timeout"),yr.create(Xn,{originalErrorMessage:Li?.message})}let Yr=Oi.status;const Jo=Oi.headers.get("ETag")||void 0;let os,wi;if(200===Oi.status){let Li;try{Li=yield Oi.json()}catch(Xn){throw yr.create("fetch-client-parse",{originalErrorMessage:Xn?.message})}os=Li.entries,wi=Li.state}if("INSTANCE_STATE_UNSPECIFIED"===wi?Yr=500:"NO_CHANGE"===wi?Yr=304:("NO_TEMPLATE"===wi||"EMPTY_CONFIG"===wi)&&(os={}),304!==Yr&&200!==Yr)throw yr.create("fetch-status",{httpStatus:Yr});return{status:Yr,eTag:Jo,config:os}})()}}class qu{constructor(R,L){this.client=R,this.storage=L}fetch(R){var L=this;return(0,j.Z)(function*(){const z=(yield L.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return L.attemptFetch(R,z)})()}attemptFetch(R,{throttleEndTimeMillis:L,backoffCount:z}){var re=this;return(0,j.Z)(function*(){yield function Si(S,R){return new Promise((L,z)=>{const re=Math.max(R-Date.now(),0),le=setTimeout(L,re);S.addEventListener(()=>{clearTimeout(le),z(yr.create("fetch-throttle",{throttleEndTimeMillis:R}))})})}(R.signal,L);try{const le=yield re.client.fetch(R);return yield re.storage.deleteThrottleMetadata(),le}catch(le){if(!function Ql(S){if(!(S instanceof de.ZR&&S.customData))return!1;const R=Number(S.customData.httpStatus);return 429===R||500===R||503===R||504===R}(le))throw le;const Be={throttleEndTimeMillis:Date.now()+(0,de.$s)(z),backoffCount:z+1};return yield re.storage.setThrottleMetadata(Be),re.attemptFetch(R,Be)}})()}}class Jl{constructor(R,L,z,re,le){this.app=R,this._client=L,this._storageCache=z,this._storage=re,this._logger=le,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function fa(S,R){const L=S.target.error||void 0;return yr.create(R,{originalErrorMessage:L&&L?.message})}const Bs="app_namespace_store";class _h{constructor(R,L,z,re=function Yu(){return new Promise((S,R)=>{try{const L=indexedDB.open("firebase_remote_config",1);L.onerror=z=>{R(fa(z,"storage-open"))},L.onsuccess=z=>{S(z.target.result)},L.onupgradeneeded=z=>{0===z.oldVersion&&z.target.result.createObjectStore(Bs,{keyPath:"compositeKey"})}}catch(L){R(yr.create("storage-open",{originalErrorMessage:L?.message}))}})}()){this.appId=R,this.appName=L,this.namespace=z,this.openDbPromise=re}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(R){return this.set("last_fetch_status",R)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(R){return this.set("last_successful_fetch_timestamp_millis",R)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(R){return this.set("last_successful_fetch_response",R)}getActiveConfig(){return this.get("active_config")}setActiveConfig(R){return this.set("active_config",R)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(R){return this.set("active_config_etag",R)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(R){return this.set("throttle_metadata",R)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(R){var L=this;return(0,j.Z)(function*(){const z=yield L.openDbPromise;return new Promise((re,le)=>{const ft=z.transaction([Bs],"readonly").objectStore(Bs),It=L.createCompositeKey(R);try{const Rt=ft.get(It);Rt.onerror=Xt=>{le(fa(Xt,"storage-get"))},Rt.onsuccess=Xt=>{const Ot=Xt.target.result;re(Ot?Ot.value:void 0)}}catch(Rt){le(yr.create("storage-get",{originalErrorMessage:Rt?.message}))}})})()}set(R,L){var z=this;return(0,j.Z)(function*(){const re=yield z.openDbPromise;return new Promise((le,Be)=>{const It=re.transaction([Bs],"readwrite").objectStore(Bs),Rt=z.createCompositeKey(R);try{const Xt=It.put({compositeKey:Rt,value:L});Xt.onerror=Ot=>{Be(fa(Ot,"storage-set"))},Xt.onsuccess=()=>{le()}}catch(Xt){Be(yr.create("storage-set",{originalErrorMessage:Xt?.message}))}})})()}delete(R){var L=this;return(0,j.Z)(function*(){const z=yield L.openDbPromise;return new Promise((re,le)=>{const ft=z.transaction([Bs],"readwrite").objectStore(Bs),It=L.createCompositeKey(R);try{const Rt=ft.delete(It);Rt.onerror=Xt=>{le(fa(Xt,"storage-delete"))},Rt.onsuccess=()=>{re()}}catch(Rt){le(yr.create("storage-delete",{originalErrorMessage:Rt?.message}))}})})()}createCompositeKey(R){return[this.appId,this.appName,this.namespace,R].join()}}class Qu{constructor(R){this.storage=R}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var R=this;return(0,j.Z)(function*(){const L=R.storage.getLastFetchStatus(),z=R.storage.getLastSuccessfulFetchTimestampMillis(),re=R.storage.getActiveConfig(),le=yield L;le&&(R.lastFetchStatus=le);const Be=yield z;Be&&(R.lastSuccessfulFetchTimestampMillis=Be);const ft=yield re;ft&&(R.activeConfig=ft)})()}setLastFetchStatus(R){return this.lastFetchStatus=R,this.storage.setLastFetchStatus(R)}setLastSuccessfulFetchTimestampMillis(R){return this.lastSuccessfulFetchTimestampMillis=R,this.storage.setLastSuccessfulFetchTimestampMillis(R)}setActiveConfig(R){return this.activeConfig=R,this.storage.setActiveConfig(R)}}function Hs(){return po.apply(this,arguments)}function po(){return(po=(0,j.Z)(function*(){if(!(0,de.hl)())return!1;try{return yield(0,de.eu)()}catch{return!1}})).apply(this,arguments)}!function Ju(){(0,fe._registerComponent)(new ve.wA("remote-config",function S(R,{instanceIdentifier:L}){const z=R.getProvider("app").getImmediate(),re=R.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw yr.create("registration-window");if(!(0,de.hl)())throw yr.create("indexed-db-unavailable");const{projectId:le,apiKey:Be,appId:ft}=z.options;if(!le)throw yr.create("registration-project-id");if(!Be)throw yr.create("registration-api-key");if(!ft)throw yr.create("registration-app-id");const It=new _h(ft,z.name,L=L||"firebase"),Rt=new Qu(It),Xt=new ue.Yd(Ji);Xt.logLevel=ue.in.ERROR;const Ot=new cd(re,fe.SDK_VERSION,L,le,Be,ft),Oi=new qu(Ot,It),Yr=new Yl(Oi,It,Rt,Xt),Jo=new Jl(z,Yr,Rt,It,Xt);return function Kn(S){const R=(0,de.m9)(S);R._initializePromise||(R._initializePromise=R._storageCache.loadFromStorage().then(()=>{R._isInitializationComplete=!0}))}(Jo),Jo},"PUBLIC").setMultipleInstances(!0)),(0,fe.registerVersion)(Ji,"0.4.4"),(0,fe.registerVersion)(Ji,"0.4.4","esm2017")}();const js="/firebase-messaging-sw.js",zi="/firebase-cloud-messaging-push-scope",tl="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",nl="google.c.a.c_id",pa="google.c.a.c_l",Xu="google.c.a.ts",rl="google.c.a.e";var es=(()=>{return(S=es||(es={})).PUSH_RECEIVED="push-received",S.NOTIFICATION_CLICKED="notification-clicked",es;var S})();function Gi(S){const R=new Uint8Array(S);return btoa(String.fromCharCode(...R)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function wr(S){const L=(S+"=".repeat((4-S.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),z=atob(L),re=new Uint8Array(z.length);for(let le=0;le<z.length;++le)re[le]=z.charCodeAt(le);return re}const ga="fcm_token_details_db",bs="fcm_token_object_Store";function wp(S){return zs.apply(this,arguments)}function zs(){return zs=(0,j.Z)(function*(S){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(le=>le.name).includes(ga))return null;let R=null;return(yield(0,ye.X3)(ga,5,{upgrade:(z=(0,j.Z)(function*(re,le,Be,ft){var It;if(le<2||!re.objectStoreNames.contains(bs))return;const Rt=ft.objectStore(bs),Xt=yield Rt.index("fcmSenderId").get(S);if(yield Rt.clear(),Xt)if(2===le){const Ot=Xt;if(!Ot.auth||!Ot.p256dh||!Ot.endpoint)return;R={token:Ot.fcmToken,createTime:null!==(It=Ot.createTime)&&void 0!==It?It:Date.now(),subscriptionOptions:{auth:Ot.auth,p256dh:Ot.p256dh,endpoint:Ot.endpoint,swScope:Ot.swScope,vapidKey:"string"==typeof Ot.vapidKey?Ot.vapidKey:Gi(Ot.vapidKey)}}}else if(3===le){const Ot=Xt;R={token:Ot.fcmToken,createTime:Ot.createTime,subscriptionOptions:{auth:Gi(Ot.auth),p256dh:Gi(Ot.p256dh),endpoint:Ot.endpoint,swScope:Ot.swScope,vapidKey:Gi(Ot.vapidKey)}}}else if(4===le){const Ot=Xt;R={token:Ot.fcmToken,createTime:Ot.createTime,subscriptionOptions:{auth:Gi(Ot.auth),p256dh:Gi(Ot.p256dh),endpoint:Ot.endpoint,swScope:Ot.swScope,vapidKey:Gi(Ot.vapidKey)}}}}),function(le,Be,ft,It){return z.apply(this,arguments)})})).close(),yield(0,ye.Lj)(ga),yield(0,ye.Lj)("fcm_vapid_details_db"),yield(0,ye.Lj)("undefined"),kn(R)?R:null;var z}),zs.apply(this,arguments)}function kn(S){if(!S||!S.subscriptionOptions)return!1;const{subscriptionOptions:R}=S;return"number"==typeof S.createTime&&S.createTime>0&&"string"==typeof S.token&&S.token.length>0&&"string"==typeof R.auth&&R.auth.length>0&&"string"==typeof R.p256dh&&R.p256dh.length>0&&"string"==typeof R.endpoint&&R.endpoint.length>0&&"string"==typeof R.swScope&&R.swScope.length>0&&"string"==typeof R.vapidKey&&R.vapidKey.length>0}const _i="firebase-messaging-store";let Rr=null;function _a(){return Rr||(Rr=(0,ye.X3)("firebase-messaging-database",1,{upgrade:(S,R)=>{0===R&&S.createObjectStore(_i)}})),Rr}function ya(S){return xi.apply(this,arguments)}function xi(){return(xi=(0,j.Z)(function*(S){const R=Ri(S),z=yield(yield _a()).transaction(_i).objectStore(_i).get(R);if(z)return z;{const re=yield wp(S.appConfig.senderId);if(re)return yield Mr(S,re),re}})).apply(this,arguments)}function Mr(S,R){return va.apply(this,arguments)}function va(){return(va=(0,j.Z)(function*(S,R){const L=Ri(S),re=(yield _a()).transaction(_i,"readwrite");return yield re.objectStore(_i).put(R,L),yield re.done,R})).apply(this,arguments)}function wa(S){return Go.apply(this,arguments)}function Go(){return(Go=(0,j.Z)(function*(S){const R=Ri(S),z=(yield _a()).transaction(_i,"readwrite");yield z.objectStore(_i).delete(R),yield z.done})).apply(this,arguments)}function Ri({appConfig:S}){return S.appId}const ir=new de.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Ft(S,R){return go.apply(this,arguments)}function go(){return(go=(0,j.Z)(function*(S,R){const L=yield ba(S),z=Oe(R),re={method:"POST",headers:L,body:JSON.stringify(z)};let le;try{le=yield(yield fetch(Wo(S.appConfig),re)).json()}catch(Be){throw ir.create("token-subscribe-failed",{errorInfo:Be?.toString()})}if(le.error)throw ir.create("token-subscribe-failed",{errorInfo:le.error.message});if(!le.token)throw ir.create("token-subscribe-no-token");return le.token})).apply(this,arguments)}function Gs(S,R){return eu.apply(this,arguments)}function eu(){return(eu=(0,j.Z)(function*(S,R){const L=yield ba(S),z=Oe(R.subscriptionOptions),re={method:"PATCH",headers:L,body:JSON.stringify(z)};let le;try{le=yield(yield fetch(`${Wo(S.appConfig)}/${R.token}`,re)).json()}catch(Be){throw ir.create("token-update-failed",{errorInfo:Be?.toString()})}if(le.error)throw ir.create("token-update-failed",{errorInfo:le.error.message});if(!le.token)throw ir.create("token-update-no-token");return le.token})).apply(this,arguments)}function tu(S,R){return nu.apply(this,arguments)}function nu(){return(nu=(0,j.Z)(function*(S,R){const z={method:"DELETE",headers:yield ba(S)};try{const le=yield(yield fetch(`${Wo(S.appConfig)}/${R}`,z)).json();if(le.error)throw ir.create("token-unsubscribe-failed",{errorInfo:le.error.message})}catch(re){throw ir.create("token-unsubscribe-failed",{errorInfo:re?.toString()})}})).apply(this,arguments)}function Wo({projectId:S}){return`https://fcmregistrations.googleapis.com/v1/projects/${S}/registrations`}function ba(S){return il.apply(this,arguments)}function il(){return(il=(0,j.Z)(function*({appConfig:S,installations:R}){const L=yield R.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":S.apiKey,"x-goog-firebase-installations-auth":`FIS ${L}`})})).apply(this,arguments)}function Oe({p256dh:S,auth:R,endpoint:L,vapidKey:z}){const re={web:{endpoint:L,auth:R,p256dh:S}};return z!==tl&&(re.web.applicationPubKey=z),re}const on=6048e5;function ru(S){return Ws.apply(this,arguments)}function Ws(){return(Ws=(0,j.Z)(function*(S){const R=yield iu(S.swRegistration,S.vapidKey),L={vapidKey:S.vapidKey,swScope:S.swRegistration.scope,endpoint:R.endpoint,auth:Gi(R.getKey("auth")),p256dh:Gi(R.getKey("p256dh"))},z=yield ya(S.firebaseDependencies);if(z){if(vh(z.subscriptionOptions,L))return Date.now()>=z.createTime+on?qs(S,{token:z.token,createTime:Date.now(),subscriptionOptions:L}):z.token;try{yield tu(S.firebaseDependencies,z.token)}catch(re){console.warn(re)}return Zo(S.firebaseDependencies,L)}return Zo(S.firebaseDependencies,L)})).apply(this,arguments)}function sr(S){return qo.apply(this,arguments)}function qo(){return(qo=(0,j.Z)(function*(S){const R=yield ya(S.firebaseDependencies);R&&(yield tu(S.firebaseDependencies,R.token),yield wa(S.firebaseDependencies));const L=yield S.swRegistration.pushManager.getSubscription();return!L||L.unsubscribe()})).apply(this,arguments)}function qs(S,R){return si.apply(this,arguments)}function si(){return(si=(0,j.Z)(function*(S,R){try{const L=yield Gs(S.firebaseDependencies,R),z=Object.assign(Object.assign({},R),{token:L,createTime:Date.now()});return yield Mr(S.firebaseDependencies,z),L}catch(L){throw yield sr(S),L}})).apply(this,arguments)}function Zo(S,R){return Ko.apply(this,arguments)}function Ko(){return(Ko=(0,j.Z)(function*(S,R){const z={token:yield Ft(S,R),createTime:Date.now(),subscriptionOptions:R};return yield Mr(S,z),z.token})).apply(this,arguments)}function iu(S,R){return On.apply(this,arguments)}function On(){return(On=(0,j.Z)(function*(S,R){return(yield S.pushManager.getSubscription())||S.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:wr(R)})})).apply(this,arguments)}function vh(S,R){return R.vapidKey===S.vapidKey&&R.endpoint===S.endpoint&&R.auth===S.auth&&R.p256dh===S.p256dh}function Yo(S){const R={from:S.from,collapseKey:S.collapse_key,messageId:S.fcmMessageId};return function oi(S,R){if(!R.notification)return;S.notification={};const L=R.notification.title;L&&(S.notification.title=L);const z=R.notification.body;z&&(S.notification.body=z);const re=R.notification.image;re&&(S.notification.image=re);const le=R.notification.icon;le&&(S.notification.icon=le)}(R,S),function ts(S,R){!R.data||(S.data=R.data)}(R,S),function Ea(S,R){var L,z,re,le,Be;if(!(R.fcmOptions||null!==(L=R.notification)&&void 0!==L&&L.click_action))return;S.fcmOptions={};const ft=null!==(re=null===(z=R.fcmOptions)||void 0===z?void 0:z.link)&&void 0!==re?re:null===(le=R.notification)||void 0===le?void 0:le.click_action;ft&&(S.fcmOptions.link=ft);const It=null===(Be=R.fcmOptions)||void 0===Be?void 0:Be.analytics_label;It&&(S.fcmOptions.analyticsLabel=It)}(R,S),R}function ns(S){return"object"==typeof S&&!!S&&nl in S}function Mi(S,R){const L=[];for(let z=0;z<S.length;z++)L.push(S.charAt(z)),z<R.length&&L.push(R.charAt(z));return L.join("")}function su(S){return ir.create("missing-app-config-values",{valueName:S})}Mi("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Mi("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class ec{constructor(R,L,z){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const re=function Ca(S){if(!S||!S.options)throw su("App Configuration Object");if(!S.name)throw su("App Name");const R=["projectId","apiKey","appId","messagingSenderId"],{options:L}=S;for(const z of R)if(!L[z])throw su(z);return{appName:S.name,projectId:L.projectId,apiKey:L.apiKey,appId:L.appId,senderId:L.messagingSenderId}}(R);this.firebaseDependencies={app:R,appConfig:re,installations:L,analyticsProvider:z}}_delete(){return Promise.resolve()}}function sl(S){return mo.apply(this,arguments)}function mo(){return(mo=(0,j.Z)(function*(S){try{S.swRegistration=yield navigator.serviceWorker.register(js,{scope:zi}),S.swRegistration.update().catch(()=>{})}catch(R){throw ir.create("failed-service-worker-registration",{browserErrorMessage:R?.message})}})).apply(this,arguments)}function ou(S,R){return Zs.apply(this,arguments)}function Zs(){return(Zs=(0,j.Z)(function*(S,R){if(!R&&!S.swRegistration&&(yield sl(S)),R||!S.swRegistration){if(!(R instanceof ServiceWorkerRegistration))throw ir.create("invalid-sw-registration");S.swRegistration=R}})).apply(this,arguments)}function Ks(S,R){return Ia.apply(this,arguments)}function Ia(){return(Ia=(0,j.Z)(function*(S,R){R?S.vapidKey=R:S.vapidKey||(S.vapidKey=tl)})).apply(this,arguments)}function Ys(){return(Ys=(0,j.Z)(function*(S,R){if(!navigator)throw ir.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw ir.create("permission-blocked");return yield Ks(S,R?.vapidKey),yield ou(S,R?.serviceWorkerRegistration),ru(S)})).apply(this,arguments)}function lu(S,R,L){return Da.apply(this,arguments)}function Da(){return(Da=(0,j.Z)(function*(S,R,L){const z=tc(R);(yield S.firebaseDependencies.analyticsProvider.get()).logEvent(z,{message_id:L[nl],message_name:L[pa],message_time:L[Xu],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function tc(S){switch(S){case es.NOTIFICATION_CLICKED:return"notification_open";case es.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Qs(){return(Qs=(0,j.Z)(function*(S,R){const L=R.data;if(!L.isFirebaseMessaging)return;S.onMessageHandler&&L.messageType===es.PUSH_RECEIVED&&("function"==typeof S.onMessageHandler?S.onMessageHandler(Yo(L)):S.onMessageHandler.next(Yo(L)));const z=L.data;ns(z)&&"1"===z[rl]&&(yield lu(S,L.messageType,z))})).apply(this,arguments)}const dd="@firebase/messaging",Vr=S=>{const R=new ec(S.getProvider("app").getImmediate(),S.getProvider("installations-internal").getImmediate(),S.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",L=>function ol(S,R){return Qs.apply(this,arguments)}(R,L)),R},Js=S=>{const R=S.getProvider("messaging").getImmediate();return{getToken:z=>function au(S,R){return Ys.apply(this,arguments)}(R,z)}};function nc(){return al.apply(this,arguments)}function al(){return(al=(0,j.Z)(function*(){try{yield(0,de.eu)()}catch{return!1}return typeof window<"u"&&(0,de.hl)()&&(0,de.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function zn(){(0,fe._registerComponent)(new ve.wA("messaging",Vr,"PUBLIC")),(0,fe._registerComponent)(new ve.wA("messaging-internal",Js,"PRIVATE")),(0,fe.registerVersion)(dd,"0.12.4"),(0,fe.registerVersion)(dd,"0.12.4","esm2017")}();const cl="analytics",pd="firebase_id",bh="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",to="https://www.googletagmanager.com/gtag/js",Jn=new ue.Yd("@firebase/analytics"),yi=new de.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function rs(S){if(!S.startsWith(to)){const R=yi.create("invalid-gtag-resource",{gtagURL:S});return Jn.warn(R.message),""}return S}function no(S){return Promise.all(S.map(R=>R.catch(L=>L)))}function uu(S,R){const L=function dl(S,R){let L;return window.trustedTypes&&(L=window.trustedTypes.createPolicy(S,R)),L}("firebase-js-sdk-policy",{createScriptURL:rs}),z=document.createElement("script"),re=`${to}?l=${S}&id=${R}`;z.src=L?L?.createScriptURL(re):re,z.async=!0,document.head.appendChild(z)}function oc(S,R,L,z,re,le){return _o.apply(this,arguments)}function _o(){return(_o=(0,j.Z)(function*(S,R,L,z,re,le){const Be=z[re];try{if(Be)yield R[Be];else{const It=(yield no(L)).find(Rt=>Rt.measurementId===re);It&&(yield R[It.appId])}}catch(ft){Jn.error(ft)}S("config",re,le)})).apply(this,arguments)}function gd(S,R,L,z,re){return cu.apply(this,arguments)}function cu(){return(cu=(0,j.Z)(function*(S,R,L,z,re){try{let le=[];if(re&&re.send_to){let Be=re.send_to;Array.isArray(Be)||(Be=[Be]);const ft=yield no(L);for(const It of Be){const Rt=ft.find(Ot=>Ot.measurementId===It),Xt=Rt&&R[Rt.appId];if(!Xt){le=[];break}le.push(Xt)}}0===le.length&&(le=Object.values(R)),yield Promise.all(le),S("event",z,re||{})}catch(le){Jn.error(le)}})).apply(this,arguments)}function T(S){const R=window.document.getElementsByTagName("script");for(const L of Object.values(R))if(L.src&&L.src.includes(to)&&L.src.includes(S))return L;return null}const wt=new class Ie{constructor(R={},L=1e3){this.throttleMetadata=R,this.intervalMillis=L}getThrottleMetadata(R){return this.throttleMetadata[R]}setThrottleMetadata(R,L){this.throttleMetadata[R]=L}deleteThrottleMetadata(R){delete this.throttleMetadata[R]}};function Dn(S){return new Headers({Accept:"application/json","x-goog-api-key":S})}function Zr(S){return Nn.apply(this,arguments)}function Nn(){return(Nn=(0,j.Z)(function*(S){var R;const{appId:L,apiKey:z}=S,re={method:"GET",headers:Dn(z)},le=bh.replace("{app-id}",L),Be=yield fetch(le,re);if(200!==Be.status&&304!==Be.status){let ft="";try{const It=yield Be.json();null!==(R=It.error)&&void 0!==R&&R.message&&(ft=It.error.message)}catch{}throw yi.create("config-fetch-failed",{httpStatus:Be.status,responseMessage:ft})}return Be.json()})).apply(this,arguments)}function yo(S){return is.apply(this,arguments)}function is(){return(is=(0,j.Z)(function*(S,R=wt,L){const{appId:z,apiKey:re,measurementId:le}=S.options;if(!z)throw yi.create("no-app-id");if(!re){if(le)return{measurementId:le,appId:z};throw yi.create("no-api-key")}const Be=R.getThrottleMetadata(z)||{backoffCount:0,throttleEndTimeMillis:Date.now()},ft=new du;return setTimeout((0,j.Z)(function*(){ft.abort()}),void 0!==L?L:6e4),fl({appId:z,apiKey:re,measurementId:le},Be,ft,R)})).apply(this,arguments)}function fl(S,R,L){return Ta.apply(this,arguments)}function Ta(){return(Ta=(0,j.Z)(function*(S,{throttleEndTimeMillis:R,backoffCount:L},z,re=wt){var le;const{appId:Be,measurementId:ft}=S;try{yield ac(z,R)}catch(It){if(ft)return Jn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${ft} provided in the "measurementId" field in the local Firebase config. [${It?.message}]`),{appId:Be,measurementId:ft};throw It}try{const It=yield Zr(S);return re.deleteThrottleMetadata(Be),It}catch(It){const Rt=It;if(!Aa(Rt)){if(re.deleteThrottleMetadata(Be),ft)return Jn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${ft} provided in the "measurementId" field in the local Firebase config. [${Rt?.message}]`),{appId:Be,measurementId:ft};throw It}const Xt=503===Number(null===(le=Rt?.customData)||void 0===le?void 0:le.httpStatus)?(0,de.$s)(L,re.intervalMillis,30):(0,de.$s)(L,re.intervalMillis),Ot={throttleEndTimeMillis:Date.now()+Xt,backoffCount:L+1};return re.setThrottleMetadata(Be,Ot),Jn.debug(`Calling attemptFetch again in ${Xt} millis`),fl(S,Ot,z,re)}})).apply(this,arguments)}function ac(S,R){return new Promise((L,z)=>{const re=Math.max(R-Date.now(),0),le=setTimeout(L,re);S.addEventListener(()=>{clearTimeout(le),z(yi.create("fetch-throttle",{throttleEndTimeMillis:R}))})})}function Aa(S){if(!(S instanceof de.ZR&&S.customData))return!1;const R=Number(S.customData.httpStatus);return 429===R||500===R||503===R||504===R}class du{constructor(){this.listeners=[]}addEventListener(R){this.listeners.push(R)}abort(){this.listeners.forEach(R=>R())}}let hu,ur;function pl(){return(pl=(0,j.Z)(function*(S,R,L,z,re){if(re&&re.global)S("event",L,z);else{const le=yield R;S("event",L,Object.assign(Object.assign({},z),{send_to:le}))}})).apply(this,arguments)}function _d(S){ur=S}function _l(S){hu=S}function yd(){return fu.apply(this,arguments)}function fu(){return(fu=(0,j.Z)(function*(){if(!(0,de.hl)())return Jn.warn(yi.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,de.eu)()}catch(S){return Jn.warn(yi.create("indexeddb-unavailable",{errorInfo:S?.toString()}).message),!1}return!0})).apply(this,arguments)}function wo(){return(wo=(0,j.Z)(function*(S,R,L,z,re,le,Be){var ft;const It=yo(S);It.then(Yr=>{L[Yr.measurementId]=Yr.appId,S.options.measurementId&&Yr.measurementId!==S.options.measurementId&&Jn.warn(`The measurement ID in the local Firebase config (${S.options.measurementId}) does not match the measurement ID fetched from the server (${Yr.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Yr=>Jn.error(Yr)),R.push(It);const Rt=yd().then(Yr=>{if(Yr)return z.getId()}),[Xt,Ot]=yield Promise.all([It,Rt]);T(le)||uu(le,Xt.measurementId),ur&&(re("consent","default",ur),_d(void 0)),re("js",new Date);const Oi=null!==(ft=Be?.config)&&void 0!==ft?ft:{};return Oi.origin="firebase",Oi.update=!0,null!=Ot&&(Oi[pd]=Ot),re("config",Xt.measurementId,Oi),hu&&(re("set",hu),_l(void 0)),Xt.measurementId})).apply(this,arguments)}class yl{constructor(R){this.app=R}_delete(){return delete ki[this.app.options.appId],Promise.resolve()}}let ki={},vl=[];const pu={};let vd,an,Ni="dataLayer",dc=!1;function Ch(S,R,L){!function Nv(){const S=[];if((0,de.ru)()&&S.push("This is a browser extension environment."),(0,de.zI)()||S.push("Cookies are not available."),S.length>0){const R=S.map((z,re)=>`(${re+1}) ${z}`).join(" "),L=yi.create("invalid-analytics-context",{errorInfo:R});Jn.warn(L.message)}}();const z=S.options.appId;if(!z)throw yi.create("no-app-id");if(!S.options.apiKey){if(!S.options.measurementId)throw yi.create("no-api-key");Jn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${S.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=ki[z])throw yi.create("already-exists",{id:z});if(!dc){!function hl(S){let R=[];Array.isArray(window[S])?R=window[S]:window[S]=R}(Ni);const{wrappedGtag:le,gtagCore:Be}=function I(S,R,L,z,re){let le=function(...Be){window[z].push(arguments)};return window[re]&&"function"==typeof window[re]&&(le=window[re]),window[re]=function ro(S,R,L,z){function le(){return(le=(0,j.Z)(function*(Be,ft,It){try{"event"===Be?yield gd(S,R,L,ft,It):"config"===Be?yield oc(S,R,L,z,ft,It):"consent"===Be?S("consent","update",It):S("set",ft)}catch(Rt){Jn.error(Rt)}})).apply(this,arguments)}return function re(Be,ft,It){return le.apply(this,arguments)}}(le,S,R,L),{gtagCore:le,wrappedGtag:window[re]}}(ki,vl,pu,Ni,"gtag");an=le,vd=Be,dc=!0}return ki[z]=function Eh(S,R,L,z,re,le,Be){return wo.apply(this,arguments)}(S,vl,pu,R,vd,Ni,L),new yl(S)}function Ip(){return wl.apply(this,arguments)}function wl(){return(wl=(0,j.Z)(function*(){if((0,de.ru)()||!(0,de.zI)()||!(0,de.hl)())return!1;try{return yield(0,de.eu)()}catch{return!1}})).apply(this,arguments)}const ai="@firebase/analytics";!function Dp(){(0,fe._registerComponent)(new ve.wA(cl,(R,{options:L})=>Ch(R.getProvider("app").getImmediate(),R.getProvider("installations-internal").getImmediate(),L),"PUBLIC")),(0,fe._registerComponent)(new ve.wA("analytics-internal",function S(R){try{const L=R.getProvider(cl).getImmediate();return{logEvent:(z,re,le)=>function n_(S,R,L,z){S=(0,de.m9)(S),function bp(S,R,L,z,re){return pl.apply(this,arguments)}(an,ki[S.app.options.appId],R,L,z).catch(re=>Jn.error(re))}(L,z,re,le)}}catch(L){throw yi.create("interop-component-reg-failed",{reason:L})}},"PRIVATE")),(0,fe.registerVersion)(ai,"0.9.5"),(0,fe.registerVersion)(ai,"0.9.5","esm2017")}();var gu=H(4408),Ih=H(7565);const i_=new class r_ extends Ih.v{}(class fc extends gu.o{constructor(R,L){super(R,L),this.scheduler=R,this.work=L}schedule(R,L=0){return L>0?super.schedule(R,L):(this.delay=L,this.state=R,this.scheduler.flush(this),this)}execute(R,L){return L>0||this.closed?super.execute(R,L):this._execute(R,L)}requestAsyncId(R,L,z=0){return null!=z&&z>0||null==z&&this.delay>0?super.requestAsyncId(R,L,z):(R.flush(this),0)}});var s_=H(4986),Tp=H(8505),Pi=H(5363),Dh=H(9468);const Sa=new c.GfV("7.5.0"),Ap="__angularfire_symbol__analyticsIsSupportedValue",mu="__angularfire_symbol__analyticsIsSupported",Th="__angularfire_symbol__remoteConfigIsSupportedValue",pc="__angularfire_symbol__remoteConfigIsSupported",Ah="__angularfire_symbol__messagingIsSupportedValue",gc="__angularfire_symbol__messagingIsSupported";function _t(S,R,L){if(R){if(1===R.length)return R[0];const le=R.filter(Be=>Be.app===L);if(1===le.length)return le[0]}return L.container.getProvider(S).getImmediate({optional:!0})}globalThis[mu]||(globalThis[mu]=Ip().then(S=>globalThis[Ap]=S).catch(()=>globalThis[Ap]=!1)),globalThis[gc]||(globalThis[gc]=nc().then(S=>globalThis[Ah]=S).catch(()=>globalThis[Ah]=!1)),globalThis[pc]||(globalThis[pc]=Hs().then(S=>globalThis[Th]=S).catch(()=>globalThis[Th]=!1));const kr=(S,R)=>{const L=R?[R]:(0,B.C6)(),z=[];return L.forEach(re=>{re.container.getProvider(S).instances.forEach(Be=>{z.includes(Be)||z.push(Be)})}),z};function br(){}class _u{constructor(R,L=i_){this.zone=R,this.delegate=L}now(){return this.delegate.now()}schedule(R,L,z){const re=this.zone;return this.delegate.schedule(function(Be){re.runGuarded(()=>{R.apply(this,[Be])})},L,z)}}class mc{constructor(R){this.zone=R,this.task=null}call(R,L){const z=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",br,{},br,br)),L.pipe((0,Tp.b)({next:z,complete:z,error:z})).subscribe(R).add(z)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let ss=(()=>{class S{constructor(L){this.ngZone=L,this.outsideAngular=L.runOutsideAngular(()=>new _u(Zone.current)),this.insideAngular=L.run(()=>new _u(Zone.current,s_.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return S.\u0275fac=function(L){return new(L||S)(c.LFG(c.R0b))},S.\u0275prov=c.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"}),S})();function bo(){const S=globalThis.\u0275AngularFireScheduler;if(!S)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return S}function El(S){return S.pipe((0,Pi.Q)(bo().outsideAngular))}function pr(S){return bo(),function Eo(S){return function(L){return(L=L.lift(new mc(S.ngZone))).pipe((0,Dh.R)(S.outsideAngular),(0,Pi.Q)(S.insideAngular))}}(bo())(S)}},2090:(Tt,ce,H)=>{"use strict";H.d(ce,{$s:()=>Gt,BH:()=>Ce,DV:()=>pi,Dv:()=>xr,G6:()=>Ue,GJ:()=>hr,L:()=>Ee,LL:()=>qe,Pz:()=>xe,Sg:()=>st,UG:()=>K,UI:()=>it,US:()=>ve,Wj:()=>ii,Wl:()=>hn,Yr:()=>Re,ZB:()=>te,ZR:()=>Pt,aH:()=>We,b$:()=>Vt,cI:()=>ln,dS:()=>ys,eu:()=>Pe,g5:()=>j,gK:()=>nr,gQ:()=>$n,h$:()=>ye,hl:()=>Ve,hu:()=>B,jU:()=>Qe,lb:()=>bn,m9:()=>rr,ne:()=>Zn,p$:()=>J,pd:()=>Un,r3:()=>Yn,ru:()=>rt,tV:()=>Y,uI:()=>_e,ug:()=>_n,vZ:()=>mr,w1:()=>he,w9:()=>Bt,xO:()=>Qi,xb:()=>jn,z$:()=>Xe,zI:()=>At,zd:()=>_s});const B=function(q,W){if(!q)throw j(W)},j=function(q){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+q)},fe=function(q){const W=[];let ne=0;for(let ge=0;ge<q.length;ge++){let se=q.charCodeAt(ge);se<128?W[ne++]=se:se<2048?(W[ne++]=se>>6|192,W[ne++]=63&se|128):55296==(64512&se)&&ge+1<q.length&&56320==(64512&q.charCodeAt(ge+1))?(se=65536+((1023&se)<<10)+(1023&q.charCodeAt(++ge)),W[ne++]=se>>18|240,W[ne++]=se>>12&63|128,W[ne++]=se>>6&63|128,W[ne++]=63&se|128):(W[ne++]=se>>12|224,W[ne++]=se>>6&63|128,W[ne++]=63&se|128)}return W},ve={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(q,W){if(!Array.isArray(q))throw Error("encodeByteArray takes an array as a parameter");this.init_();const ne=W?this.byteToCharMapWebSafe_:this.byteToCharMap_,ge=[];for(let se=0;se<q.length;se+=3){const lt=q[se],jt=se+1<q.length,tn=jt?q[se+1]:0,Cn=se+2<q.length,Je=Cn?q[se+2]:0;let Qn=(15&tn)<<2|Je>>6,_r=63&Je;Cn||(_r=64,jt||(Qn=64)),ge.push(ne[lt>>2],ne[(3&lt)<<4|tn>>4],ne[Qn],ne[_r])}return ge.join("")},encodeString(q,W){return this.HAS_NATIVE_SUPPORT&&!W?btoa(q):this.encodeByteArray(fe(q),W)},decodeString(q,W){return this.HAS_NATIVE_SUPPORT&&!W?atob(q):function(q){const W=[];let ne=0,ge=0;for(;ne<q.length;){const se=q[ne++];if(se<128)W[ge++]=String.fromCharCode(se);else if(se>191&&se<224){const lt=q[ne++];W[ge++]=String.fromCharCode((31&se)<<6|63&lt)}else if(se>239&&se<365){const Cn=((7&se)<<18|(63&q[ne++])<<12|(63&q[ne++])<<6|63&q[ne++])-65536;W[ge++]=String.fromCharCode(55296+(Cn>>10)),W[ge++]=String.fromCharCode(56320+(1023&Cn))}else{const lt=q[ne++],jt=q[ne++];W[ge++]=String.fromCharCode((15&se)<<12|(63&lt)<<6|63&jt)}}return W.join("")}(this.decodeStringToByteArray(q,W))},decodeStringToByteArray(q,W){this.init_();const ne=W?this.charToByteMapWebSafe_:this.charToByteMap_,ge=[];for(let se=0;se<q.length;){const lt=ne[q.charAt(se++)],tn=se<q.length?ne[q.charAt(se)]:0;++se;const Je=se<q.length?ne[q.charAt(se)]:64;++se;const xt=se<q.length?ne[q.charAt(se)]:64;if(++se,null==lt||null==tn||null==Je||null==xt)throw new ue;ge.push(lt<<2|tn>>4),64!==Je&&(ge.push(tn<<4&240|Je>>2),64!==xt&&ge.push(Je<<6&192|xt))}return ge},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let q=0;q<this.ENCODED_VALS.length;q++)this.byteToCharMap_[q]=this.ENCODED_VALS.charAt(q),this.charToByteMap_[this.byteToCharMap_[q]]=q,this.byteToCharMapWebSafe_[q]=this.ENCODED_VALS_WEBSAFE.charAt(q),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[q]]=q,q>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(q)]=q,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(q)]=q)}}};class ue extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ye=function(q){const W=fe(q);return ve.encodeByteArray(W,!0)},Ee=function(q){return ye(q).replace(/\./g,"")},Y=function(q){try{return ve.decodeString(q,!0)}catch(W){console.error("base64Decode failed: ",W)}return null};function J(q){return te(void 0,q)}function te(q,W){if(!(W instanceof Object))return W;switch(W.constructor){case Date:return new Date(W.getTime());case Object:void 0===q&&(q={});break;case Array:q=[];break;default:return W}for(const ne in W)!W.hasOwnProperty(ne)||!nt(ne)||(q[ne]=te(q[ne],W[ne]));return q}function nt(q){return"__proto__"!==q}const pe=()=>{try{return function Fe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const q=process.env.__FIREBASE_DEFAULTS__;return q?JSON.parse(q):void 0})()||(()=>{if(typeof document>"u")return;let q;try{q=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const W=q&&Y(q[1]);return W&&JSON.parse(W)})()}catch(q){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${q}`)}},We=()=>{var q;return null===(q=pe())||void 0===q?void 0:q.config},xe=q=>{var W;return null===(W=pe())||void 0===W?void 0:W[`_${q}`]};class Ce{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((W,ne)=>{this.resolve=W,this.reject=ne})}wrapCallback(W){return(ne,ge)=>{ne?this.reject(ne):this.resolve(ge),"function"==typeof W&&(this.promise.catch(()=>{}),1===W.length?W(ne):W(ne,ge))}}}function st(q,W){if(q.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const ge=W||"demo-project",se=q.iat||0,lt=q.sub||q.user_id;if(!lt)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const jt=Object.assign({iss:`https://securetoken.google.com/${ge}`,aud:ge,iat:se,exp:se+3600,auth_time:se,sub:lt,user_id:lt,firebase:{sign_in_provider:"custom",identities:{}}},q);return[Ee(JSON.stringify({alg:"none",type:"JWT"})),Ee(JSON.stringify(jt)),""].join(".")}function Xe(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function _e(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Xe())}function K(){var q;const W=null===(q=pe())||void 0===q?void 0:q.forceEnvironment;if("node"===W)return!0;if("browser"===W)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Qe(){return"object"==typeof self&&self.self===self}function rt(){const q="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof q&&void 0!==q.id}function Vt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function he(){const q=Xe();return q.indexOf("MSIE ")>=0||q.indexOf("Trident/")>=0}function Re(){return!1}function Ue(){return!K()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ve(){try{return"object"==typeof indexedDB}catch{return!1}}function Pe(){return new Promise((q,W)=>{try{let ne=!0;const ge="validate-browser-context-for-indexeddb-analytics-module",se=self.indexedDB.open(ge);se.onsuccess=()=>{se.result.close(),ne||self.indexedDB.deleteDatabase(ge),q(!0)},se.onupgradeneeded=()=>{ne=!1},se.onerror=()=>{var lt;W((null===(lt=se.error)||void 0===lt?void 0:lt.message)||"")}}catch(ne){W(ne)}})}function At(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class Pt extends Error{constructor(W,ne,ge){super(ne),this.code=W,this.customData=ge,this.name="FirebaseError",Object.setPrototypeOf(this,Pt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,qe.prototype.create)}}class qe{constructor(W,ne,ge){this.service=W,this.serviceName=ne,this.errors=ge}create(W,...ne){const ge=ne[0]||{},se=`${this.service}/${W}`,lt=this.errors[W],jt=lt?function qt(q,W){return q.replace(Zt,(ne,ge)=>{const se=W[ge];return null!=se?String(se):`<${ge}?>`})}(lt,ge):"Error";return new Pt(se,`${this.serviceName}: ${jt} (${se}).`,ge)}}const Zt=/\{\$([^}]+)}/g;function ln(q){return JSON.parse(q)}function hn(q){return JSON.stringify(q)}const Rn=function(q){let W={},ne={},ge={},se="";try{const lt=q.split(".");W=ln(Y(lt[0])||""),ne=ln(Y(lt[1])||""),se=lt[2],ge=ne.d||{},delete ne.d}catch{}return{header:W,claims:ne,data:ge,signature:se}},Bt=function(q){const ne=Rn(q).claims;return!!ne&&"object"==typeof ne&&ne.hasOwnProperty("iat")},hr=function(q){const W=Rn(q).claims;return"object"==typeof W&&!0===W.admin};function Yn(q,W){return Object.prototype.hasOwnProperty.call(q,W)}function pi(q,W){if(Object.prototype.hasOwnProperty.call(q,W))return q[W]}function jn(q){for(const W in q)if(Object.prototype.hasOwnProperty.call(q,W))return!1;return!0}function it(q,W,ne){const ge={};for(const se in q)Object.prototype.hasOwnProperty.call(q,se)&&(ge[se]=W.call(ne,q[se],se,q));return ge}function mr(q,W){if(q===W)return!0;const ne=Object.keys(q),ge=Object.keys(W);for(const se of ne){if(!ge.includes(se))return!1;const lt=q[se],jt=W[se];if(Gr(lt)&&Gr(jt)){if(!mr(lt,jt))return!1}else if(lt!==jt)return!1}for(const se of ge)if(!ne.includes(se))return!1;return!0}function Gr(q){return null!==q&&"object"==typeof q}function Qi(q){const W=[];for(const[ne,ge]of Object.entries(q))Array.isArray(ge)?ge.forEach(se=>{W.push(encodeURIComponent(ne)+"="+encodeURIComponent(se))}):W.push(encodeURIComponent(ne)+"="+encodeURIComponent(ge));return W.length?"&"+W.join("&"):""}function _s(q){const W={};return q.replace(/^\?/,"").split("&").forEach(ge=>{if(ge){const[se,lt]=ge.split("=");W[decodeURIComponent(se)]=decodeURIComponent(lt)}}),W}function Un(q){const W=q.indexOf("?");if(!W)return"";const ne=q.indexOf("#",W);return q.substring(W,ne>0?ne:void 0)}class $n{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let W=1;W<this.blockSize;++W)this.pad_[W]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(W,ne){ne||(ne=0);const ge=this.W_;if("string"==typeof W)for(let xt=0;xt<16;xt++)ge[xt]=W.charCodeAt(ne)<<24|W.charCodeAt(ne+1)<<16|W.charCodeAt(ne+2)<<8|W.charCodeAt(ne+3),ne+=4;else for(let xt=0;xt<16;xt++)ge[xt]=W[ne]<<24|W[ne+1]<<16|W[ne+2]<<8|W[ne+3],ne+=4;for(let xt=16;xt<80;xt++){const Qn=ge[xt-3]^ge[xt-8]^ge[xt-14]^ge[xt-16];ge[xt]=4294967295&(Qn<<1|Qn>>>31)}let Je,yt,se=this.chain_[0],lt=this.chain_[1],jt=this.chain_[2],tn=this.chain_[3],Cn=this.chain_[4];for(let xt=0;xt<80;xt++){xt<40?xt<20?(Je=tn^lt&(jt^tn),yt=1518500249):(Je=lt^jt^tn,yt=1859775393):xt<60?(Je=lt&jt|tn&(lt|jt),yt=2400959708):(Je=lt^jt^tn,yt=3395469782);const Qn=(se<<5|se>>>27)+Je+Cn+yt+ge[xt]&4294967295;Cn=tn,tn=jt,jt=4294967295&(lt<<30|lt>>>2),lt=se,se=Qn}this.chain_[0]=this.chain_[0]+se&4294967295,this.chain_[1]=this.chain_[1]+lt&4294967295,this.chain_[2]=this.chain_[2]+jt&4294967295,this.chain_[3]=this.chain_[3]+tn&4294967295,this.chain_[4]=this.chain_[4]+Cn&4294967295}update(W,ne){if(null==W)return;void 0===ne&&(ne=W.length);const ge=ne-this.blockSize;let se=0;const lt=this.buf_;let jt=this.inbuf_;for(;se<ne;){if(0===jt)for(;se<=ge;)this.compress_(W,se),se+=this.blockSize;if("string"==typeof W){for(;se<ne;)if(lt[jt]=W.charCodeAt(se),++jt,++se,jt===this.blockSize){this.compress_(lt),jt=0;break}}else for(;se<ne;)if(lt[jt]=W[se],++jt,++se,jt===this.blockSize){this.compress_(lt),jt=0;break}}this.inbuf_=jt,this.total_+=ne}digest(){const W=[];let ne=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let se=this.blockSize-1;se>=56;se--)this.buf_[se]=255&ne,ne/=256;this.compress_(this.buf_);let ge=0;for(let se=0;se<5;se++)for(let lt=24;lt>=0;lt-=8)W[ge]=this.chain_[se]>>lt&255,++ge;return W}}function Zn(q,W){const ne=new vt(q,W);return ne.subscribe.bind(ne)}class vt{constructor(W,ne){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=ne,this.task.then(()=>{W(this)}).catch(ge=>{this.error(ge)})}next(W){this.forEachObserver(ne=>{ne.next(W)})}error(W){this.forEachObserver(ne=>{ne.error(W)}),this.close(W)}complete(){this.forEachObserver(W=>{W.complete()}),this.close()}subscribe(W,ne,ge){let se;if(void 0===W&&void 0===ne&&void 0===ge)throw new Error("Missing Observer.");se=function Mn(q,W){if("object"!=typeof q||null===q)return!1;for(const ne of W)if(ne in q&&"function"==typeof q[ne])return!0;return!1}(W,["next","error","complete"])?W:{next:W,error:ne,complete:ge},void 0===se.next&&(se.next=$i),void 0===se.error&&(se.error=$i),void 0===se.complete&&(se.complete=$i);const lt=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?se.error(this.finalError):se.complete()}catch{}}),this.observers.push(se),lt}unsubscribeOne(W){void 0===this.observers||void 0===this.observers[W]||(delete this.observers[W],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(W){if(!this.finalized)for(let ne=0;ne<this.observers.length;ne++)this.sendOne(ne,W)}sendOne(W,ne){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[W])try{ne(this.observers[W])}catch(ge){typeof console<"u"&&console.error&&console.error(ge)}})}close(W){this.finalized||(this.finalized=!0,void 0!==W&&(this.finalError=W),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function $i(){}const xr=function(q,W,ne,ge){let se;if(ge<W?se="at least "+W:ge>ne&&(se=0===ne?"none":"no more than "+ne),se)throw new Error(q+" failed: Was called with "+ge+(1===ge?" argument.":" arguments.")+" Expects "+se+".")};function nr(q,W){return`${q} failed: ${W} argument `}function ii(q,W,ne,ge){if((!ge||ne)&&"function"!=typeof ne)throw new Error(nr(q,W)+"must be a valid function.")}function bn(q,W,ne,ge){if((!ge||ne)&&("object"!=typeof ne||null===ne))throw new Error(nr(q,W)+"must be a valid context object.")}const ys=function(q){const W=[];let ne=0;for(let ge=0;ge<q.length;ge++){let se=q.charCodeAt(ge);if(se>=55296&&se<=56319){const lt=se-55296;ge++,B(ge<q.length,"Surrogate pair missing trail surrogate."),se=65536+(lt<<10)+(q.charCodeAt(ge)-56320)}se<128?W[ne++]=se:se<2048?(W[ne++]=se>>6|192,W[ne++]=63&se|128):se<65536?(W[ne++]=se>>12|224,W[ne++]=se>>6&63|128,W[ne++]=63&se|128):(W[ne++]=se>>18|240,W[ne++]=se>>12&63|128,W[ne++]=se>>6&63|128,W[ne++]=63&se|128)}return W},_n=function(q){let W=0;for(let ne=0;ne<q.length;ne++){const ge=q.charCodeAt(ne);ge<128?W++:ge<2048?W+=2:ge>=55296&&ge<=56319?(W+=4,ne++):W+=3}return W};function Gt(q,W=1e3,ne=2){const ge=W*Math.pow(ne,q),se=Math.round(.5*ge*(Math.random()-.5)*2);return Math.min(144e5,ge+se)}function rr(q){return q&&q._delegate?q._delegate:q}},7008:(Tt,ce,H)=>{"use strict";var c=H(4650);let B=null;function j(){return B}const ue=new c.OlP("DocumentToken");let ye=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:function(){return function Ee(){return(0,c.LFG)(J)}()},providedIn:"platform"}),n})();const Y=new c.OlP("Location Initialized");let J=(()=>{class n extends ye{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return j().getBaseHref(this._doc)}onPopState(t){const r=j().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=j().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){te()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){te()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ue))},n.\u0275prov=c.Yz7({token:n,factory:function(){return function nt(){return new J((0,c.LFG)(ue))}()},providedIn:"platform"}),n})();function te(){return!!window.history.pushState}function Fe(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Me(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function ot(n){return n&&"?"!==n[0]?"?"+n:n}let Ae=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:function(){return(0,c.f3M)(Ge)},providedIn:"root"}),n})();const pe=new c.OlP("appBaseHref");let Ge=(()=>{class n extends Ae{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,c.f3M)(ue).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Fe(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+ot(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){const l=this.prepareExternalUrl(i+ot(s));this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,s){const l=this.prepareExternalUrl(i+ot(s));this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ye),c.LFG(pe,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Et=(()=>{class n extends Ae{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Fe(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,s){let l=this.prepareExternalUrl(i+ot(s));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,s){let l=this.prepareExternalUrl(i+ot(s));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ye),c.LFG(pe,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),We=(()=>{class n{constructor(t){this._subject=new c.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._baseHref=Me(st(r)),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+ot(r))}normalize(t){return n.stripTrailingSlash(function Ce(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,st(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ot(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ot(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=ot,n.joinWithSlash=Fe,n.stripTrailingSlash=Me,n.\u0275fac=function(t){return new(t||n)(c.LFG(Ae))},n.\u0275prov=c.Yz7({token:n,factory:function(){return function xe(){return new We((0,c.LFG)(Ae))}()},providedIn:"root"}),n})();function st(n){return n.replace(/\/index.html$/,"")}var _e=(()=>((_e=_e||{})[_e.Decimal=0]="Decimal",_e[_e.Percent=1]="Percent",_e[_e.Currency=2]="Currency",_e[_e.Scientific=3]="Scientific",_e))(),at=(()=>((at=at||{})[at.Decimal=0]="Decimal",at[at.Group=1]="Group",at[at.List=2]="List",at[at.PercentSign=3]="PercentSign",at[at.PlusSign=4]="PlusSign",at[at.MinusSign=5]="MinusSign",at[at.Exponential=6]="Exponential",at[at.SuperscriptingExponent=7]="SuperscriptingExponent",at[at.PerMille=8]="PerMille",at[at.Infinity=9]="Infinity",at[at.NaN=10]="NaN",at[at.TimeSeparator=11]="TimeSeparator",at[at.CurrencyDecimal=12]="CurrencyDecimal",at[at.CurrencyGroup=13]="CurrencyGroup",at))();function Zt(n,e){const t=(0,c.cg1)(n),r=t[c.wAp.NumberSymbols][e];if(typeof r>"u"){if(e===at.CurrencyDecimal)return t[c.wAp.NumberSymbols][at.Decimal];if(e===at.CurrencyGroup)return t[c.wAp.NumberSymbols][at.Group]}return r}const tn=/^(\d+)?\.((\d+)(-(\d+))?)?$/;function fr(n){const e=parseInt(n);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+n);return e}function Ka(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,s]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}let un=(()=>{class n{constructor(t,r,i,s){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=i,this._renderer=s,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&((0,c.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachChangedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachRemovedItem(r=>{r.previousValue&&this._toggleClass(r.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(r=>{if("string"!=typeof r.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,c.AaK)(r.item)}`);this._toggleClass(r.item,!0)}),t.forEachRemovedItem(r=>this._toggleClass(r.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!0)):Object.keys(t).forEach(r=>this._toggleClass(r,!!t[r])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!1)):Object.keys(t).forEach(r=>this._toggleClass(r,!1)))}_toggleClass(t,r){(t=t.trim())&&t.split(/\s+/g).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.ZZ4),c.Y36(c.aQg),c.Y36(c.SBq),c.Y36(c.Qsj))},n.\u0275dir=c.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),n})();class Pn{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Ai=(()=>{class n{constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,s,l)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new Pn(i.item,this._ngForOf,-1,-1),null===l?void 0:l);else if(null==l)r.remove(null===s?void 0:s);else if(null!==s){const d=r.get(s);r.move(d,l),$o(d,i)}});for(let i=0,s=r.length;i<s;i++){const d=r.get(i).context;d.index=i,d.count=s,d.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{$o(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.s_b),c.Y36(c.Rgc),c.Y36(c.ZZ4))},n.\u0275dir=c.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function $o(n,e){n.context.$implicit=e.item}let Kn=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new Wu,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){vr("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){vr("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.s_b),c.Y36(c.Rgc))},n.\u0275dir=c.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class Wu{constructor(){this.$implicit=null,this.ngIf=null}}function vr(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,c.AaK)(e)}'.`)}let Yl=(()=>{class n{constructor(t,r,i){this._ngEl=t,this._differs=r,this._renderer=i,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){const t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,r){const[i,s]=t.split("."),l=-1===i.indexOf("-")?void 0:c.JOm.DashCase;null!=r?this._renderer.setStyle(this._ngEl.nativeElement,i,s?`${r}${s}`:r,l):this._renderer.removeStyle(this._ngEl.nativeElement,i,l)}_applyChanges(t){t.forEachRemovedItem(r=>this._setStyle(r.key,null)),t.forEachAddedItem(r=>this._setStyle(r.key,r.currentValue)),t.forEachChangedItem(r=>this._setStyle(r.key,r.currentValue))}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.SBq),c.Y36(c.aQg),c.Y36(c.Qsj))},n.\u0275dir=c.lG2({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0}),n})(),Ja=(()=>{class n{constructor(t){this._viewContainerRef=t,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(t){if(t.ngTemplateOutlet||t.ngTemplateOutletInjector){const r=this._viewContainerRef;if(this._viewRef&&r.remove(r.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:i,ngTemplateOutletContext:s,ngTemplateOutletInjector:l}=this;this._viewRef=r.createEmbeddedView(i,s,l?{injector:l}:void 0)}else this._viewRef=null}else this._viewRef&&t.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.s_b))},n.\u0275dir=c.lG2({type:n,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[c.TTD]}),n})();let zi=(()=>{class n{constructor(t){this._locale=t}transform(t,r,i){if(!function nl(n){return!(null==n||""===n||n!=n)}(t))return null;i=i||this._locale;try{return function Jt(n,e,t){return function In(n,e,t,r,i,s,l=!1){let d="",f=!1;if(isFinite(n)){let y=function Za(n){let r,i,s,l,d,e=Math.abs(n)+"",t=0;for((i=e.indexOf("."))>-1&&(e=e.replace(".","")),(s=e.search(/e/i))>0?(i<0&&(i=s),i+=+e.slice(s+1),e=e.substring(0,s)):i<0&&(i=e.length),s=0;"0"===e.charAt(s);s++);if(s===(d=e.length))r=[0],i=1;else{for(d--;"0"===e.charAt(d);)d--;for(i-=s,r=[],l=0;s<=d;s++,l++)r[l]=Number(e.charAt(s))}return i>22&&(r=r.splice(0,21),t=i-1,i=1),{digits:r,exponent:t,integerLen:i}}(n);l&&(y=function Vs(n){if(0===n.digits[0])return n;const e=n.digits.length-n.integerLen;return n.exponent?n.exponent+=2:(0===e?n.digits.push(0,0):1===e&&n.digits.push(0),n.integerLen+=2),n}(y));let w=e.minInt,D=e.minFrac,x=e.maxFrac;if(s){const Le=s.match(tn);if(null===Le)throw new Error(`${s} is not a valid digit info`);const je=Le[1],Ye=Le[3],St=Le[5];null!=je&&(w=fr(je)),null!=Ye&&(D=fr(Ye)),null!=St?x=fr(St):null!=Ye&&D>x&&(x=D)}!function Ji(n,e,t){if(e>t)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${t}).`);let r=n.digits,i=r.length-n.integerLen;const s=Math.min(Math.max(e,i),t);let l=s+n.integerLen,d=r[l];if(l>0){r.splice(Math.max(n.integerLen,l));for(let D=l;D<r.length;D++)r[D]=0}else{i=Math.max(0,i),n.integerLen=1,r.length=Math.max(1,l=s+1),r[0]=0;for(let D=1;D<l;D++)r[D]=0}if(d>=5)if(l-1<0){for(let D=0;D>l;D--)r.unshift(0),n.integerLen++;r.unshift(1),n.integerLen++}else r[l-1]++;for(;i<Math.max(0,s);i++)r.push(0);let f=0!==s;const y=e+n.integerLen,w=r.reduceRight(function(D,x,N,U){return U[N]=(x+=D)<10?x:x-10,f&&(0===U[N]&&N>=y?U.pop():f=!1),x>=10?1:0},0);w&&(r.unshift(w),n.integerLen++)}(y,D,x);let N=y.digits,U=y.integerLen;const Q=y.exponent;let X=[];for(f=N.every(Le=>!Le);U<w;U++)N.unshift(0);for(;U<0;U++)N.unshift(0);U>0?X=N.splice(U,N.length):(X=N,N=[0]);const ae=[];for(N.length>=e.lgSize&&ae.unshift(N.splice(-e.lgSize,N.length).join(""));N.length>e.gSize;)ae.unshift(N.splice(-e.gSize,N.length).join(""));N.length&&ae.unshift(N.join("")),d=ae.join(Zt(t,r)),X.length&&(d+=Zt(t,i)+X.join("")),Q&&(d+=Zt(t,at.Exponential)+"+"+Q)}else d=Zt(t,at.Infinity);return d=n<0&&!f?e.negPre+d+e.negSuf:e.posPre+d+e.posSuf,d}(n,function Us(n,e="-"){const t={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=n.split(";"),i=r[0],s=r[1],l=-1!==i.indexOf(".")?i.split("."):[i.substring(0,i.lastIndexOf("0")+1),i.substring(i.lastIndexOf("0")+1)],d=l[0],f=l[1]||"";t.posPre=d.substring(0,d.indexOf("#"));for(let w=0;w<f.length;w++){const D=f.charAt(w);"0"===D?t.minFrac=t.maxFrac=w+1:"#"===D?t.maxFrac=w+1:t.posSuf+=D}const y=d.split(",");if(t.gSize=y[1]?y[1].length:0,t.lgSize=y[2]||y[1]?(y[2]||y[1]).length:0,s){const w=i.length-t.posPre.length-t.posSuf.length,D=s.indexOf("#");t.negPre=s.substring(0,D).replace(/'/g,""),t.negSuf=s.slice(D+w).replace(/'/g,"")}else t.negPre=e+t.posPre,t.negSuf=t.posSuf;return t}(function ln(n,e){return(0,c.cg1)(n)[c.wAp.NumberFormats][e]}(e,_e.Decimal),Zt(e,at.MinusSign)),e,at.Group,at.Decimal,t)}(function pa(n){if("string"==typeof n&&!isNaN(Number(n)-parseFloat(n)))return Number(n);if("number"!=typeof n)throw new Error(`${n} is not a number`);return n}(t),i,r)}catch(s){throw function Si(n,e){return new c.vHH(2100,!1)}()}}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.soG,16))},n.\u0275pipe=c.Yjl({name:"number",type:n,pure:!0,standalone:!0}),n})();let Xl=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})();function bs(n){return"server"===n}let zo=(()=>{class n{}return n.\u0275prov=(0,c.Yz7)({token:n,providedIn:"root",factory:()=>new ma((0,c.LFG)(ue),window)}),n})();class ma{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Rr(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const s=i.shadowRoot;if(s){const l=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(l)return l}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=_i(this.window.history)||_i(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function _i(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class ya{}class no extends class rs extends class ve{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function de(n){B||(B=n)}(new no)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function uu(){return dl=dl||document.querySelector("base"),dl?dl.getAttribute("href"):null}();return null==t?null:function oc(n){hl=hl||document.createElement("a"),hl.setAttribute("href",n);const e=hl.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){dl=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Ka(document.cookie,e)}}let hl,dl=null;const _o=new c.OlP("TRANSITION_ID"),cu=[{provide:c.ip1,useFactory:function gd(n,e,t){return()=>{t.get(c.CZH).donePromise.then(()=>{const r=j(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let s=0;s<i.length;s++)r.remove(i[s])})}},deps:[_o,ue,c.zs3],multi:!0}];let I=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const T=new c.OlP("EventManagerPlugins");let P=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let s=0;s<i.length;s++){const l=i[s];if(l.supports(t))return this._eventNameToPlugin.set(t,l),l}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(T),c.LFG(c.R0b))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();class G{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=j().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let Ie=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),wt=(()=>{class n extends Ie{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(s=>{const l=this._doc.createElement("style");l.textContent=s,i.push(r.appendChild(l))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Dn),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Dn))}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ue))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();function Dn(n){j().remove(n)}const Zr={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Nn=/%COMP%/g;function du(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?du(n,i,t):(i=i.replace(Nn,n),t.push(i))}return t}function hu(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let pl=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new md(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case c.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new Ep(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case c.ifc.ShadowDom:return new uc(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=du(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(P),c.LFG(wt),c.LFG(c.AFp))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();class md{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(Zr[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(vi(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(vi(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const s=Zr[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=Zr[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(c.JOm.DashCase|c.JOm.Important)?e.style.setProperty(t,r,i&c.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&c.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,hu(r)):this.eventManager.addEventListener(e,t,hu(r))}}function vi(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class Ep extends md{constructor(e,t,r,i){super(e),this.component=r;const s=du(i+"-"+r.id,r.styles,[]);t.addStyles(s),this.contentAttr=function ac(n){return"_ngcontent-%COMP%".replace(Nn,n)}(i+"-"+r.id),this.hostAttr=function Aa(n){return"_nghost-%COMP%".replace(Nn,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class uc extends md{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=du(i.id,i.styles,[]);for(let l=0;l<s.length;l++){const d=document.createElement("style");d.textContent=s[l],this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let ml=(()=>{class n extends G{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ue))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const vo=["alt","control","meta","shift"],ur={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},_d={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let _l=(()=>{class n extends G{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const s=n.parseEventName(r),l=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>j().onAndCancel(t,s.domEventName,l))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const s=n._normalizeKey(r.pop());let l="",d=r.indexOf("code");if(d>-1&&(r.splice(d,1),l="code."),vo.forEach(y=>{const w=r.indexOf(y);w>-1&&(r.splice(w,1),l+=y+".")}),l+=s,0!=r.length||0===s.length)return null;const f={};return f.domEventName=i,f.fullKey=l,f}static matchEventFullKeyCode(t,r){let i=ur[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),vo.forEach(l=>{l!==i&&(0,_d[l])(t)&&(s+=l+".")}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ue))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const cc=(0,c.eFA)(c._c5,"browser",[{provide:c.Lbi,useValue:"browser"},{provide:c.g9A,useValue:function ki(){no.makeCurrent()},multi:!0},{provide:ue,useFactory:function pu(){return(0,c.RDi)(document),document},deps:[]}]),vd=new c.OlP(""),an=[{provide:c.rWj,useClass:class ro{addToWindow(e){c.dqk.getAngularTestability=(r,i=!0)=>{const s=e.findTestabilityInTree(r,i);if(null==s)throw new Error("Could not find testability for element.");return s},c.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),c.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),c.dqk.frameworkStabilizers||(c.dqk.frameworkStabilizers=[]),c.dqk.frameworkStabilizers.push(r=>{const i=c.dqk.getAllAngularTestabilities();let s=i.length,l=!1;const d=function(f){l=l||f,s--,0==s&&r(l)};i.forEach(function(f){f.whenStable(d)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?j().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:c.lri,useClass:c.dDg,deps:[c.R0b,c.eoX,c.rWj]},{provide:c.dDg,useClass:c.dDg,deps:[c.R0b,c.eoX,c.rWj]}],dc=[{provide:c.zSh,useValue:"root"},{provide:c.qLn,useFactory:function vl(){return new c.qLn},deps:[]},{provide:T,useClass:ml,multi:!0,deps:[ue,c.R0b,c.Lbi]},{provide:T,useClass:_l,multi:!0,deps:[ue]},{provide:pl,useClass:pl,deps:[P,wt,c.AFp]},{provide:c.FYo,useExisting:pl},{provide:Ie,useExisting:wt},{provide:wt,useClass:wt,deps:[ue]},{provide:P,useClass:P,deps:[T,c.R0b]},{provide:ya,useClass:I,deps:[]},[]];let Cp=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:c.AFp,useValue:t.appId},{provide:_o,useExisting:c.AFp},cu]}}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(vd,12))},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[...dc,...an],imports:[Xl,c.hGG]}),n})(),Ip=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ue))},n.\u0275prov=c.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function t_(){return new Ip((0,c.LFG)(ue))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;var Tn=H(8996),Ds=H(7669);function _t(...n){const e=(0,Ds.yG)(n);return(0,Tn.D)(n,e)}var kr=H(7579);class br extends kr.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const mc=(0,H(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var ss=H(9751);const{isArray:bo}=Array,{getPrototypeOf:Ed,prototype:Ts,keys:El}=Object;function Cd(n){if(1===n.length){const e=n[0];if(bo(e))return{args:e,keys:null};if(function pr(n){return n&&"object"==typeof n&&Ed(n)===Ts}(e)){const t=El(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var Eo=H(4671),Ct=H(4004);const{isArray:_c}=Array;function R(n){return(0,Ct.U)(e=>function S(n,e){return _c(e)?n(...e):n(e)}(n,e))}function L(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}var z=H(5403),re=H(9672);function le(...n){const e=(0,Ds.yG)(n),t=(0,Ds.jO)(n),{args:r,keys:i}=Cd(n);if(0===r.length)return(0,Tn.D)([],e);const s=new ss.y(function Be(n,e,t=Eo.y){return r=>{ft(e,()=>{const{length:i}=n,s=new Array(i);let l=i,d=i;for(let f=0;f<i;f++)ft(e,()=>{const y=(0,Tn.D)(n[f],e);let w=!1;y.subscribe((0,z.x)(r,D=>{s[f]=D,w||(w=!0,d--),d||r.next(t(s.slice()))},()=>{--l||r.complete()}))},r)},r)}}(r,e,i?l=>L(i,l):Eo.y));return t?s.pipe(R(t)):s}function ft(n,e,t){n?(0,re.f)(t,n,e):e()}var It=H(8189);function Xt(...n){return function Rt(){return(0,It.J)(1)}()((0,Tn.D)(n,(0,Ds.yG)(n)))}var Ot=H(8421);function Oi(n){return new ss.y(e=>{(0,Ot.Xf)(n()).subscribe(e)})}var Yr=H(9635),Jo=H(576);function os(n,e){const t=(0,Jo.m)(n)?n:()=>n,r=i=>i.error(t());return new ss.y(e?i=>e.schedule(r,0,i):r)}var wi=H(515),Li=H(727),Xn=H(4482);function yu(){return(0,Xn.e)((n,e)=>{let t=null;n._refCount++;const r=(0,z.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,s=t;t=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class Sh extends ss.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Xn.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Li.w0;const t=this.getSubject();e.add(this.source.subscribe((0,z.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Li.w0.EMPTY)}return e}refCount(){return yu()(this)}}function Br(n,e){return(0,Xn.e)((t,r)=>{let i=null,s=0,l=!1;const d=()=>l&&!i&&r.complete();t.subscribe((0,z.x)(r,f=>{i?.unsubscribe();let y=0;const w=s++;(0,Ot.Xf)(n(f,w)).subscribe(i=(0,z.x)(r,D=>r.next(e?e(f,D,w,y++):D),()=>{i=null,d()}))},()=>{l=!0,d()}))})}function vu(n){return n<=0?()=>wi.E:(0,Xn.e)((e,t)=>{let r=0;e.subscribe((0,z.x)(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function wu(...n){const e=(0,Ds.yG)(n);return(0,Xn.e)((t,r)=>{(e?Xt(n,t,e):Xt(n,t)).subscribe(r)})}function as(n,e){return(0,Xn.e)((t,r)=>{let i=0;t.subscribe((0,z.x)(r,s=>n.call(e,s,i++)&&r.next(s)))})}var Qr=H(5577);function bu(n){return(0,Xn.e)((e,t)=>{let r=!1;e.subscribe((0,z.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function o_(n=xp){return(0,Xn.e)((e,t)=>{let r=!1;e.subscribe((0,z.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function xp(){return new mc}function xa(n,e){const t=arguments.length>=2;return r=>r.pipe(n?as((i,s)=>n(i,s,r)):Eo.y,vu(1),t?bu(e):o_(()=>new mc))}function Xo(n,e){return(0,Jo.m)(e)?(0,Qr.z)(n,e,1):(0,Qr.z)(n,1)}var Wi=H(8505);function Ra(n){return(0,Xn.e)((e,t)=>{let s,r=null,i=!1;r=e.subscribe((0,z.x)(t,void 0,void 0,l=>{s=(0,Ot.Xf)(n(l,Ra(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function Rp(n,e,t,r,i){return(s,l)=>{let d=t,f=e,y=0;s.subscribe((0,z.x)(l,w=>{const D=y++;f=d?n(f,w,D):(d=!0,w),r&&l.next(f)},i&&(()=>{d&&l.next(f),l.complete()})))}}function Ma(n,e){return(0,Xn.e)(Rp(n,e,arguments.length>=2,!0))}function a_(n){return n<=0?()=>wi.E:(0,Xn.e)((e,t)=>{let r=[];e.subscribe((0,z.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Ov(n,e){const t=arguments.length>=2;return r=>r.pipe(n?as((i,s)=>n(i,s,r)):Eo.y,a_(1),t?bu(e):o_(()=>new mc))}function l_(n){return(0,Xn.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const cn="primary",xh=Symbol("RouteTitle");class Mp{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function yc(n){return new Mp(n)}function u_(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let s=0;s<r.length;s++){const l=r[s],d=n[s];if(l.startsWith(":"))i[l.substring(1)]=d;else if(l!==d.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Co(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!Np(n[i],e[i]))return!1;return!0}function Np(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}return n===e}function Pp(n){return Array.prototype.concat.apply([],n)}function Io(n){return n.length>0?n[n.length-1]:null}function Jr(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Cl(n){return(0,c.CqO)(n)?n:(0,c.QGY)(n)?(0,Tn.D)(Promise.resolve(n)):_t(n)}const Lv={exact:function h_(n,e,t){if(!Il(n.segments,e.segments)||!Eu(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!h_(n.children[r],e.children[r],t))return!1;return!0},subset:Fi},c_={exact:function d_(n,e){return Co(n,e)},subset:function Fv(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Np(n[t],e[t]))},ignored:()=>!0};function Lp(n,e,t){return Lv[t.paths](n.root,e.root,t.matrixParams)&&c_[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function Fi(n,e,t){return Mh(n,e,e.segments,t)}function Mh(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!Il(i,t)||e.hasChildren()||!Eu(i,t,r))}if(n.segments.length===t.length){if(!Il(n.segments,t)||!Eu(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!Fi(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!!(Il(n.segments,i)&&Eu(n.segments,i,r)&&n.children[cn])&&Mh(n.children[cn],e,s,r)}}function Eu(n,e,t){return e.every((r,i)=>c_[t](n[i].parameters,r.parameters))}class Do{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=yc(this.queryParams)),this._queryParamMap}toString(){return Vv.serialize(this)}}class $t{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Jr(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return vc(this)}}class To{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=yc(this.parameters)),this._parameterMap}toString(){return p_(this)}}function Il(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let Dd=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:function(){return new Fp},providedIn:"root"}),n})();class Fp{parse(e){const t=new Vp(e);return new Do(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Cu(e.root,!0)}`,r=function g_(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${Ad(t)}=${Ad(i)}`).join("&"):`${Ad(t)}=${Ad(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function kh(n){return encodeURI(n)}(e.fragment)}`:""}`}}const Vv=new Fp;function vc(n){return n.segments.map(e=>p_(e)).join("/")}function Cu(n,e){if(!n.hasChildren())return vc(n);if(e){const t=n.children[cn]?Cu(n.children[cn],!1):"",r=[];return Jr(n.children,(i,s)=>{s!==cn&&r.push(`${s}:${Cu(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function Uv(n,e){let t=[];return Jr(n.children,(r,i)=>{i===cn&&(t=t.concat(e(r,i)))}),Jr(n.children,(r,i)=>{i!==cn&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===cn?[Cu(n.children[cn],!1)]:[`${i}:${Cu(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[cn]?`${vc(n)}/${t[0]}`:`${vc(n)}/(${t.join("//")})`}}function Td(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Ad(n){return Td(n).replace(/%3B/gi,";")}function Sd(n){return Td(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Nh(n){return decodeURIComponent(n)}function Up(n){return Nh(n.replace(/\+/g,"%20"))}function p_(n){return`${Sd(n.path)}${function xd(n){return Object.keys(n).map(e=>`;${Sd(e)}=${Sd(n[e])}`).join("")}(n.parameters)}`}const Bv=/^[^\/()?;=#]+/;function Rd(n){const e=n.match(Bv);return e?e[0]:""}const ka=/^[^=?&#]+/,gC=/^[^&#]+/;class Vp{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new $t([],{}):new $t([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[cn]=new $t(e,t)),r}parseSegment(){const e=Rd(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new c.vHH(4009,!1);return this.capture(e),new To(Nh(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Rd(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=Rd(this.remaining);i&&(r=i,this.capture(r))}e[Nh(t)]=Nh(r)}parseQueryParam(e){const t=function m_(n){const e=n.match(ka);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const l=function Dl(n){const e=n.match(gC);return e?e[0]:""}(this.remaining);l&&(r=l,this.capture(r))}const i=Up(t),s=Up(r);if(e.hasOwnProperty(i)){let l=e[i];Array.isArray(l)||(l=[l],e[i]=l),l.push(s)}else e[i]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Rd(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new c.vHH(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=cn);const l=this.parseChildren();t[s]=1===Object.keys(l).length?l[cn]:new $t([],l),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new c.vHH(4011,!1)}}function wc(n){return n.segments.length>0?new $t([],{[cn]:n}):n}function Ph(n){const e={};for(const r of Object.keys(n.children)){const s=Ph(n.children[r]);(s.segments.length>0||s.hasChildren())&&(e[r]=s)}return function Bp(n){if(1===n.numberOfChildren&&n.children[cn]){const e=n.children[cn];return new $t(n.segments.concat(e.segments),e.children)}return n}(new $t(n.segments,e))}function Na(n){return n instanceof Do}function jv(n,e,t,r,i){if(0===t.length)return Du(e.root,e.root,e.root,r,i);const s=function __(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new Oh(!0,0,n);let e=0,t=!1;const r=n.reduce((i,s,l)=>{if("object"==typeof s&&null!=s){if(s.outlets){const d={};return Jr(s.outlets,(f,y)=>{d[y]="string"==typeof f?f.split("/"):f}),[...i,{outlets:d}]}if(s.segmentPath)return[...i,s.segmentPath]}return"string"!=typeof s?[...i,s]:0===l?(s.split("/").forEach((d,f)=>{0==f&&"."===d||(0==f&&""===d?t=!0:".."===d?e++:""!=d&&i.push(d))}),i):[...i,s]},[]);return new Oh(t,e,r)}(t);return s.toRoot()?Du(e.root,e.root,new $t([],{}),r,i):function l(f){const y=function Pa(n,e,t,r){if(n.isAbsolute)return new Tu(e.root,!0,0);if(-1===r)return new Tu(t,t===e.root,0);return function $p(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new c.vHH(4005,!1);i=r.segments.length}return new Tu(r,!1,i-s)}(t,r+(bc(n.commands[0])?0:1),n.numberOfDoubleDots)}(s,e,n.snapshot?._urlSegment,f),w=y.processChildren?Fh(y.segmentGroup,y.index,s.commands):Ec(y.segmentGroup,y.index,s.commands);return Du(e.root,y.segmentGroup,w,r,i)}(n.snapshot?._lastPathIndex)}function bc(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Iu(n){return"object"==typeof n&&null!=n&&n.outlets}function Du(n,e,t,r,i){let l,s={};r&&Jr(r,(f,y)=>{s[y]=Array.isArray(f)?f.map(w=>`${w}`):`${f}`}),l=n===e?t:Md(n,e,t);const d=wc(Ph(l));return new Do(d,s,i)}function Md(n,e,t){const r={};return Jr(n.children,(i,s)=>{r[s]=i===e?t:Md(i,e,t)}),new $t(n.segments,r)}class Oh{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&bc(r[0]))throw new c.vHH(4003,!1);const i=r.find(Iu);if(i&&i!==Io(r))throw new c.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Tu{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function Ec(n,e,t){if(n||(n=new $t([],{})),0===n.segments.length&&n.hasChildren())return Fh(n,e,t);const r=function Uh(n,e,t){let r=0,i=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;const l=n.segments[i],d=t[r];if(Iu(d))break;const f=`${d}`,y=r<t.length-1?t[r+1]:null;if(i>0&&void 0===f)break;if(f&&y&&"object"==typeof y&&void 0===y.outlets){if(!qp(f,y,l))return s;r+=2}else{if(!qp(f,{},l))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const s=new $t(n.segments.slice(0,r.pathIndex),{});return s.children[cn]=new $t(n.segments.slice(r.pathIndex),n.children),Fh(s,0,i)}return r.match&&0===i.length?new $t(n.segments,{}):r.match&&!n.hasChildren()?zp(n,e,t):r.match?Fh(n,0,i):zp(n,e,t)}function Fh(n,e,t){if(0===t.length)return new $t(n.segments,{});{const r=function y_(n){return Iu(n[0])?n[0].outlets:{[cn]:n}}(t),i={};return Jr(r,(s,l)=>{"string"==typeof s&&(s=[s]),null!==s&&(i[l]=Ec(n.children[l],e,s))}),Jr(n.children,(s,l)=>{void 0===r[l]&&(i[l]=s)}),new $t(n.segments,i)}}function zp(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const s=t[i];if(Iu(s)){const f=Gp(s.outlets);return new $t(r,f)}if(0===i&&bc(t[0])){r.push(new To(n.segments[e].path,Wp(t[0]))),i++;continue}const l=Iu(s)?s.outlets[cn]:`${s}`,d=i<t.length-1?t[i+1]:null;l&&d&&bc(d)?(r.push(new To(l,Wp(d))),i+=2):(r.push(new To(l,{})),i++)}return new $t(r,{})}function Gp(n){const e={};return Jr(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=zp(new $t([],{}),0,t))}),e}function Wp(n){const e={};return Jr(n,(t,r)=>e[r]=`${t}`),e}function qp(n,e,t){return n==t.path&&Co(e,t.parameters)}class Ao{constructor(e,t){this.id=e,this.url=t}}class Vh extends Ao{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class ls extends Ao{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Au extends Ao{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Bh extends Ao{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Zp extends Ao{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Kp extends Ao{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Yp extends Ao{constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class kd extends Ao{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class v_ extends Ao{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Hh{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Qp{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class w_{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class b_{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Nd{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class jh{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ui{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class Jp{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Xp(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=Xp(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=$h(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return $h(e,this._root).map(t=>t.value)}}function Xp(n,e){if(n===e.value)return e;for(const t of e.children){const r=Xp(n,t);if(r)return r}return null}function $h(n,e){if(n===e.value)return[e];for(const t of e.children){const r=$h(n,t);if(r.length)return r.unshift(e),r}return[]}class xo{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Tl(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class eg extends Jp{constructor(e,t){super(e),this.snapshot=t,Vi(this,e)}toString(){return this.snapshot.toString()}}function tg(n,e){const t=function Ro(n,e){const l=new Pd([],{},{},"",{},cn,e,null,n.root,-1,{});return new zh("",new xo(l,[]))}(n,e),r=new br([new To("",{})]),i=new br({}),s=new br({}),l=new br({}),d=new br(""),f=new Mo(r,i,l,d,s,cn,e,t.root);return f.snapshot=t.root,new eg(new xo(f,[]),t)}class Mo{constructor(e,t,r,i,s,l,d,f){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=l,this.component=d,this.title=this.data?.pipe((0,Ct.U)(y=>y[xh]))??_t(void 0),this._futureSnapshot=f}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Ct.U)(e=>yc(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Ct.U)(e=>yc(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function ng(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],s=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(s.component)break;r--}}return function E_(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Pd{constructor(e,t,r,i,s,l,d,f,y,w,D,x){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=l,this.component=d,this.title=this.data?.[xh],this.routeConfig=f,this._urlSegment=y,this._lastPathIndex=w,this._correctedLastPathIndex=x??w,this._resolve=D}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=yc(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=yc(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class zh extends Jp{constructor(e,t){super(t),this.url=e,Vi(this,t)}toString(){return Gh(this._root)}}function Vi(n,e){e.value._routerState=n,e.children.forEach(t=>Vi(n,t))}function Gh(n){const e=n.children.length>0?` { ${n.children.map(Gh).join(", ")} } `:"";return`${n.value}${e}`}function Od(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Co(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Co(e.params,t.params)||n.params.next(t.params),function kp(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Co(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Co(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function rg(n,e){const t=Co(n.params,e.params)&&function f_(n,e){return Il(n,e)&&n.every((t,r)=>Co(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||rg(n.parent,e.parent))}function Bi(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function Cc(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Bi(n,r,i);return Bi(n,r)})}(n,e,t);return new xo(r,i)}{if(n.shouldAttach(e.value)){const s=n.retrieve(e.value);if(null!==s){const l=s.route;return l.value._futureSnapshot=e.value,l.children=e.children.map(d=>Bi(n,d)),l}}const r=function C_(n){return new Mo(new br(n.url),new br(n.params),new br(n.queryParams),new br(n.fragment),new br(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(s=>Bi(n,s));return new xo(r,i)}}const I_="ngNavigationCancelingError";function ig(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=Na(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=$v(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function $v(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[I_]=!0,r.cancellationCode=e,t&&(r.url=t),r}function zv(n){return Gv(n)&&Na(n.url)}function Gv(n){return n&&n[I_]}class D_{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new v,this.attachRef=null}}let v=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new D_,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const g=!1;let m=(()=>{class n{constructor(t,r,i,s,l){this.parentContexts=t,this.location=r,this.changeDetector=s,this.environmentInjector=l,this.activated=null,this._activatedRoute=null,this.activateEvents=new c.vpe,this.deactivateEvents=new c.vpe,this.attachEvents=new c.vpe,this.detachEvents=new c.vpe,this.name=i||cn,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new c.vHH(4012,g);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new c.vHH(4012,g);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new c.vHH(4012,g);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new c.vHH(4013,g);this._activatedRoute=t;const i=this.location,l=t._futureSnapshot.component,d=this.parentContexts.getOrCreateContext(this.name).children,f=new E(t,d,i.injector);if(r&&function M(n){return!!n.resolveComponentFactory}(r)){const y=r.resolveComponentFactory(l);this.activated=i.createComponent(y,i.length,f)}else this.activated=i.createComponent(l,{index:i.length,injector:f,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(v),c.Y36(c.s_b),c.$8M("name"),c.Y36(c.sBO),c.Y36(c.lqb))},n.\u0275dir=c.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),n})();class E{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Mo?this.route:e===v?this.childContexts:this.parent.get(e,t)}}let O=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[c.jDz],decls:1,vars:0,template:function(t,r){1&t&&c._UZ(0,"router-outlet")},dependencies:[m],encapsulation:2}),n})();function Z(n,e){return n.providers&&!n._injector&&(n._injector=(0,c.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function sg(n){const e=n.children&&n.children.map(sg),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==cn&&(t.component=O),t}function Ss(n){return n.outlet||cn}function Wh(n,e){const t=n.filter(r=>Ss(r)===e);return t.push(...n.filter(r=>Ss(r)!==e)),t}function Dc(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class T_{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Od(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=Tl(t);e.children.forEach(s=>{const l=s.value.outlet;this.deactivateRoutes(s,i[l],r),delete i[l]}),Jr(i,(s,l)=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(i===s)if(i.component){const l=r.getContext(i.outlet);l&&this.deactivateChildRoutes(e,t,l.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Tl(e);for(const l of Object.keys(s))this.deactivateRouteAndItsChildren(s[l],i);if(r&&r.outlet){const l=r.outlet.detach(),d=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:l,route:e,contexts:d})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Tl(e);for(const l of Object.keys(s))this.deactivateRouteAndItsChildren(s[l],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=Tl(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new jh(s.value.snapshot))}),e.children.length&&this.forwardEvent(new b_(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(Od(i),i===s)if(i.component){const l=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,l.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const l=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const d=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),l.children.onOutletReAttached(d.contexts),l.attachRef=d.componentRef,l.route=d.route.value,l.outlet&&l.outlet.attach(d.componentRef,d.route.value),Od(d.route.value),this.activateChildRoutes(e,null,l.children)}else{const d=Dc(i.snapshot),f=d?.get(c._Vd)??null;l.attachRef=null,l.route=i,l.resolver=f,l.injector=d,l.outlet&&l.outlet.activateWith(i,l.injector),this.activateChildRoutes(e,null,l.children)}}else this.activateChildRoutes(e,null,r)}}class ag{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Su{constructor(e,t){this.component=e,this.route=t}}function Ld(n,e,t){const r=n._root;return Fd(r,e?e._root:null,t,[r.value])}function ea(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,c.Z0I)(n)?e.get(n):n:r}function Fd(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=Tl(e);return n.children.forEach(l=>{(function li(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,l=e?e.value:null,d=t?t.getContext(n.value.outlet):null;if(l&&s.routeConfig===l.routeConfig){const f=function Cx(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Il(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Il(n.url,e.url)||!Co(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!rg(n,e)||!Co(n.queryParams,e.queryParams);default:return!rg(n,e)}}(l,s,s.routeConfig.runGuardsAndResolvers);f?i.canActivateChecks.push(new ag(r)):(s.data=l.data,s._resolvedData=l._resolvedData),Fd(n,e,s.component?d?d.children:null:t,r,i),f&&d&&d.outlet&&d.outlet.isActivated&&i.canDeactivateChecks.push(new Su(d.outlet.component,l))}else l&&lg(e,d,i),i.canActivateChecks.push(new ag(r)),Fd(n,null,s.component?d?d.children:null:t,r,i)})(l,s[l.value.outlet],t,r.concat([l.value]),i),delete s[l.value.outlet]}),Jr(s,(l,d)=>lg(l,t.getContext(d),i)),i}function lg(n,e,t){const r=Tl(n),i=n.value;Jr(r,(s,l)=>{lg(s,i.component?e?e.children.getContext(l):null:e,t)}),t.canDeactivateChecks.push(new Su(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function Ud(n){return"function"==typeof n}function Vd(n){return n instanceof mc||"EmptyError"===n?.name}const qh=Symbol("INITIAL_VALUE");function Bd(){return Br(n=>le(n.map(e=>e.pipe(vu(1),wu(qh)))).pipe((0,Ct.U)(e=>{for(const t of e)if(!0!==t){if(t===qh)return qh;if(!1===t||t instanceof Do)return t}return!0}),as(e=>e!==qh),vu(1)))}function Kv(n){return(0,Yr.z)((0,Wi.b)(e=>{if(Na(e))throw ig(0,e)}),(0,Ct.U)(e=>!0===e))}const xu={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function CC(n,e,t,r,i){const s=ug(n,e,t);return s.matched?function EC(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?_t(i.map(l=>{const d=ea(l,n);return Cl(function Sx(n){return n&&Ud(n.canMatch)}(d)?d.canMatch(e,t):n.runInContext(()=>d(e,t)))})).pipe(Bd(),Kv()):_t(!0)}(r=Z(e,r),e,t).pipe((0,Ct.U)(l=>!0===l?s:{...xu})):_t(s)}function ug(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...xu}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||u_)(t,n,e);if(!i)return{...xu};const s={};Jr(i.posParams,(d,f)=>{s[f]=d.path});const l=i.consumed.length>0?{...s,...i.consumed[i.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:l,positionalParamSegments:i.posParams??{}}}function Hd(n,e,t,r,i="corrected"){if(t.length>0&&function A_(n,e,t){return t.some(r=>cg(n,e,r)&&Ss(r)!==cn)}(n,t,r)){const l=new $t(e,function Yv(n,e,t,r){const i={};i[cn]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const s of t)if(""===s.path&&Ss(s)!==cn){const l=new $t([],{});l._sourceSegment=n,l._segmentIndexShift=e.length,i[Ss(s)]=l}return i}(n,e,r,new $t(t,n.children)));return l._sourceSegment=n,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:[]}}if(0===t.length&&function jd(n,e,t){return t.some(r=>cg(n,e,r))}(n,t,r)){const l=new $t(n.segments,function Mx(n,e,t,r,i,s){const l={};for(const d of r)if(cg(n,t,d)&&!i[Ss(d)]){const f=new $t([],{});f._sourceSegment=n,f._segmentIndexShift="legacy"===s?n.segments.length:e.length,l[Ss(d)]=f}return{...i,...l}}(n,e,t,r,n.children,i));return l._sourceSegment=n,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:t}}const s=new $t(n.segments,n.children);return s._sourceSegment=n,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:t}}function cg(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function S_(n,e,t,r){return!!(Ss(n)===r||r!==cn&&cg(e,t,n))&&("**"===n.path||ug(e,n,t).matched)}function IC(n,e,t){return 0===e.length&&!n.children[t]}const x_=!1;class dg{constructor(e){this.segmentGroup=e||null}}class $d{constructor(e){this.urlTree=e}}function hg(n){return os(new dg(n))}function DC(n){return os(new $d(n))}class Px{constructor(e,t,r,i,s){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=s,this.allowRedirects=!0}apply(){const e=Hd(this.urlTree.root,[],[],this.config).segmentGroup,t=new $t(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,cn).pipe((0,Ct.U)(s=>this.createUrlTree(Ph(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Ra(s=>{if(s instanceof $d)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof dg?this.noMatchError(s):s}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,cn).pipe((0,Ct.U)(i=>this.createUrlTree(Ph(i),e.queryParams,e.fragment))).pipe(Ra(i=>{throw i instanceof dg?this.noMatchError(i):i}))}noMatchError(e){return new c.vHH(4002,x_)}createUrlTree(e,t,r){const i=wc(e);return new Do(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,Ct.U)(s=>new $t([],s))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const s of Object.keys(r.children))"primary"===s?i.unshift(s):i.push(s);return(0,Tn.D)(i).pipe(Xo(s=>{const l=r.children[s],d=Wh(t,s);return this.expandSegmentGroup(e,d,l,s).pipe((0,Ct.U)(f=>({segment:f,outlet:s})))}),Ma((s,l)=>(s[l.outlet]=l.segment,s),{}),Ov())}expandSegment(e,t,r,i,s,l){return(0,Tn.D)(r).pipe(Xo(d=>this.expandSegmentAgainstRoute(e,t,r,d,i,s,l).pipe(Ra(y=>{if(y instanceof dg)return _t(null);throw y}))),xa(d=>!!d),Ra((d,f)=>{if(Vd(d))return IC(t,i,s)?_t(new $t([],{})):hg(t);throw d}))}expandSegmentAgainstRoute(e,t,r,i,s,l,d){return S_(i,t,s,l)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,s,l):d&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,l):hg(t):hg(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,l){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,l):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,l)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const s=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?DC(s):this.lineralizeSegments(r,s).pipe((0,Qr.z)(l=>{const d=new $t(l,{});return this.expandSegment(e,d,t,l,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,l){const{matched:d,consumedSegments:f,remainingSegments:y,positionalParamSegments:w}=ug(t,i,s);if(!d)return hg(t);const D=this.applyRedirectCommands(f,i.redirectTo,w);return i.redirectTo.startsWith("/")?DC(D):this.lineralizeSegments(i,D).pipe((0,Qr.z)(x=>this.expandSegment(e,t,r,x.concat(y),l,!1)))}matchSegmentAgainstRoute(e,t,r,i,s){return"**"===r.path?(e=Z(r,e),r.loadChildren?(r._loadedRoutes?_t({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,Ct.U)(d=>(r._loadedRoutes=d.routes,r._loadedInjector=d.injector,new $t(i,{})))):_t(new $t(i,{}))):CC(t,r,i,e).pipe(Br(({matched:l,consumedSegments:d,remainingSegments:f})=>l?this.getChildConfig(e=r._injector??e,r,i).pipe((0,Qr.z)(w=>{const D=w.injector??e,x=w.routes,{segmentGroup:N,slicedSegments:U}=Hd(t,d,f,x),Q=new $t(N.segments,N.children);if(0===U.length&&Q.hasChildren())return this.expandChildren(D,x,Q).pipe((0,Ct.U)(je=>new $t(d,je)));if(0===x.length&&0===U.length)return _t(new $t(d,{}));const X=Ss(r)===s;return this.expandSegment(D,Q,x,U,X?cn:s,!0).pipe((0,Ct.U)(Le=>new $t(d.concat(Le.segments),Le.children)))})):hg(t)))}getChildConfig(e,t,r){return t.children?_t({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?_t({routes:t._loadedRoutes,injector:t._loadedInjector}):function Zv(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?_t(!0):_t(i.map(l=>{const d=ea(l,n);return Cl(function Ix(n){return n&&Ud(n.canLoad)}(d)?d.canLoad(e,t):n.runInContext(()=>d(e,t)))})).pipe(Bd(),Kv())}(e,t,r).pipe((0,Qr.z)(i=>i?this.configLoader.loadChildren(e,t).pipe((0,Wi.b)(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):function Nx(n){return os($v(x_,3))}())):_t({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return _t(r);if(i.numberOfChildren>1||!i.children[cn])return os(new c.vHH(4e3,x_));i=i.children[cn]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const s=this.createSegmentGroup(e,t.root,r,i);return new Do(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Jr(e,(i,s)=>{if("string"==typeof i&&i.startsWith(":")){const d=i.substring(1);r[s]=t[d]}else r[s]=i}),r}createSegmentGroup(e,t,r,i){const s=this.createSegments(e,t.segments,r,i);let l={};return Jr(t.children,(d,f)=>{l[f]=this.createSegmentGroup(e,d,r,i)}),new $t(s,l)}createSegments(e,t,r,i){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new c.vHH(4001,x_);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}class AC{}class fg{constructor(e,t,r,i,s,l,d,f){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=i,this.url=s,this.paramsInheritanceStrategy=l,this.relativeLinkResolution=d,this.urlSerializer=f}recognize(){const e=Hd(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,cn).pipe((0,Ct.U)(t=>{if(null===t)return null;const r=new Pd([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},cn,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new xo(r,t),s=new zh(this.url,i);return this.inheritParamsAndData(s._root),s}))}inheritParamsAndData(e){const t=e.value,r=ng(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i)}processChildren(e,t,r){return(0,Tn.D)(Object.keys(r.children)).pipe(Xo(i=>{const s=r.children[i],l=Wh(t,i);return this.processSegmentGroup(e,l,s,i)}),Ma((i,s)=>i&&s?(i.push(...s),i):null),function Id(n,e=!1){return(0,Xn.e)((t,r)=>{let i=0;t.subscribe((0,z.x)(r,s=>{const l=n(s,i++);(l||e)&&r.next(s),!l&&r.complete()}))})}(i=>null!==i),bu(null),Ov(),(0,Ct.U)(i=>{if(null===i)return null;const s=SC(i);return function Lx(n){n.sort((e,t)=>e.value.outlet===cn?-1:t.value.outlet===cn?1:e.value.outlet.localeCompare(t.value.outlet))}(s),s}))}processSegment(e,t,r,i,s){return(0,Tn.D)(t).pipe(Xo(l=>this.processSegmentAgainstRoute(l._injector??e,l,r,i,s)),xa(l=>!!l),Ra(l=>{if(Vd(l))return IC(r,i,s)?_t([]):_t(null);throw l}))}processSegmentAgainstRoute(e,t,r,i,s){if(t.redirectTo||!S_(t,r,i,s))return _t(null);let l;if("**"===t.path){const d=i.length>0?Io(i).parameters:{},f=xC(r)+i.length;l=_t({snapshot:new Pd(i,d,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,MC(t),Ss(t),t.component??t._loadedComponent??null,t,Jv(r),f,Xv(t),f),consumedSegments:[],remainingSegments:[]})}else l=CC(r,t,i,e).pipe((0,Ct.U)(({matched:d,consumedSegments:f,remainingSegments:y,parameters:w})=>{if(!d)return null;const D=xC(r)+f.length;return{snapshot:new Pd(f,w,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,MC(t),Ss(t),t.component??t._loadedComponent??null,t,Jv(r),D,Xv(t),D),consumedSegments:f,remainingSegments:y}}));return l.pipe(Br(d=>{if(null===d)return _t(null);const{snapshot:f,consumedSegments:y,remainingSegments:w}=d;e=t._injector??e;const D=t._loadedInjector??e,x=function Zh(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:N,slicedSegments:U}=Hd(r,y,w,x.filter(X=>void 0===X.redirectTo),this.relativeLinkResolution);if(0===U.length&&N.hasChildren())return this.processChildren(D,x,N).pipe((0,Ct.U)(X=>null===X?null:[new xo(f,X)]));if(0===x.length&&0===U.length)return _t([new xo(f,[])]);const Q=Ss(t)===s;return this.processSegment(D,x,N,U,Q?cn:s).pipe((0,Ct.U)(X=>null===X?null:[new xo(f,X)]))}))}}function pg(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function SC(n){const e=[],t=new Set;for(const r of n){if(!pg(r)){e.push(r);continue}const i=e.find(s=>r.value.routeConfig===s.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=SC(r.children);e.push(new xo(r.value,i))}return e.filter(r=>!t.has(r))}function Jv(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function xC(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function MC(n){return n.data||{}}function Xv(n){return n.resolve||{}}function NC(n){return"string"==typeof n.title||null===n.title}function rw(n){return Br(e=>{const t=n(e);return t?(0,Tn.D)(t).pipe((0,Ct.U)(()=>e)):_t(e)})}let PC=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===cn);return r}getResolvedTitleForRoute(t){return t.data[xh]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:function(){return(0,c.f3M)(OC)},providedIn:"root"}),n})(),OC=(()=>{class n extends PC{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Ip))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class Ux{}class Kh extends class Vx{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const M_=new c.OlP("",{providedIn:"root",factory:()=>({})}),FC=new c.OlP("ROUTES");let UC=(()=>{class n{constructor(t,r){this.injector=t,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return _t(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=Cl(t.loadComponent()).pipe((0,Wi.b)(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),l_(()=>{this.componentLoaders.delete(t)})),i=new Sh(r,()=>new kr.x).pipe(yu());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return _t({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const s=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,Ct.U)(d=>{this.onLoadEndListener&&this.onLoadEndListener(r);let f,y,w=!1;Array.isArray(d)?y=d:(f=d.create(t).injector,y=Pp(f.get(FC,[],c.XFs.Self|c.XFs.Optional)));return{routes:y.map(sg),injector:f}}),l_(()=>{this.childrenLoaders.delete(r)})),l=new Sh(s,()=>new kr.x).pipe(yu());return this.childrenLoaders.set(r,l),l}loadModuleFactoryOrRoutes(t){return Cl(t()).pipe((0,Qr.z)(r=>r instanceof c.YKP||Array.isArray(r)?_t(r):(0,Tn.D)(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(c.zs3),c.LFG(c.Sil))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class VC{}class WL{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function qL(n){throw n}function BC(n,e,t){return e.parse("/")}const Bx={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},HC={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function jC(){const n=(0,c.f3M)(Dd),e=(0,c.f3M)(v),t=(0,c.f3M)(We),r=(0,c.f3M)(c.zs3),i=(0,c.f3M)(c.Sil),s=(0,c.f3M)(FC,{optional:!0})??[],l=(0,c.f3M)(M_,{optional:!0})??{},d=(0,c.f3M)(OC),f=(0,c.f3M)(PC,{optional:!0}),y=(0,c.f3M)(VC,{optional:!0}),w=(0,c.f3M)(Ux,{optional:!0}),D=new er(null,n,e,t,r,i,Pp(s));return y&&(D.urlHandlingStrategy=y),w&&(D.routeReuseStrategy=w),D.titleStrategy=f??d,function Hx(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(l,D),D}let er=(()=>{class n{constructor(t,r,i,s,l,d,f){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=s,this.config=f,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new kr.x,this.errorHandler=qL,this.malformedUriErrorHandler=BC,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>_t(void 0),this.urlHandlingStrategy=new WL,this.routeReuseStrategy=new Kh,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=l.get(UC),this.configLoader.onLoadEndListener=x=>this.triggerEvent(new Qp(x)),this.configLoader.onLoadStartListener=x=>this.triggerEvent(new Hh(x)),this.ngModule=l.get(c.h0i),this.console=l.get(c.c2e);const D=l.get(c.R0b);this.isNgZoneEnabled=D instanceof c.R0b&&c.R0b.isInAngularZone(),this.resetConfig(f),this.currentUrlTree=function Op(){return new Do(new $t([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=tg(this.currentUrlTree,this.rootComponentType),this.transitions=new br({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(as(i=>0!==i.id),(0,Ct.U)(i=>({...i,extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),Br(i=>{let s=!1,l=!1;return _t(i).pipe((0,Wi.b)(d=>{this.currentNavigation={id:d.id,initialUrl:d.rawUrl,extractedUrl:d.extractedUrl,trigger:d.source,extras:d.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Br(d=>{const f=this.browserUrlTree.toString(),y=!this.navigated||d.extractedUrl.toString()!==f||f!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||y)&&this.urlHandlingStrategy.shouldProcessUrl(d.rawUrl))return iw(d.source)&&(this.browserUrlTree=d.extractedUrl),_t(d).pipe(Br(D=>{const x=this.transitions.getValue();return r.next(new Vh(D.id,this.serializeUrl(D.extractedUrl),D.source,D.restoredState)),x!==this.transitions.getValue()?wi.E:Promise.resolve(D)}),function TC(n,e,t,r){return Br(i=>function Qv(n,e,t,r,i){return new Px(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,Ct.U)(s=>({...i,urlAfterRedirects:s}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Wi.b)(D=>{this.currentNavigation={...this.currentNavigation,finalUrl:D.urlAfterRedirects},i.urlAfterRedirects=D.urlAfterRedirects}),function kC(n,e,t,r,i,s){return(0,Qr.z)(l=>function Ox(n,e,t,r,i,s,l="emptyOnly",d="legacy"){return new fg(n,e,t,r,i,l,d,s).recognize().pipe(Br(f=>null===f?function $L(n){return new ss.y(e=>e.error(n))}(new AC):_t(f)))}(n,e,t,l.urlAfterRedirects,r.serialize(l.urlAfterRedirects),r,i,s).pipe((0,Ct.U)(d=>({...l,targetSnapshot:d}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Wi.b)(D=>{if(i.targetSnapshot=D.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!D.extras.skipLocationChange){const N=this.urlHandlingStrategy.merge(D.urlAfterRedirects,D.rawUrl);this.setBrowserUrl(N,D)}this.browserUrlTree=D.urlAfterRedirects}const x=new Zp(D.id,this.serializeUrl(D.extractedUrl),this.serializeUrl(D.urlAfterRedirects),D.targetSnapshot);r.next(x)}));if(y&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:x,extractedUrl:N,source:U,restoredState:Q,extras:X}=d,ae=new Vh(x,this.serializeUrl(N),U,Q);r.next(ae);const Le=tg(N,this.rootComponentType).snapshot;return _t(i={...d,targetSnapshot:Le,urlAfterRedirects:N,extras:{...X,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=d.rawUrl,d.resolve(null),wi.E}),(0,Wi.b)(d=>{const f=new Kp(d.id,this.serializeUrl(d.extractedUrl),this.serializeUrl(d.urlAfterRedirects),d.targetSnapshot);this.triggerEvent(f)}),(0,Ct.U)(d=>i={...d,guards:Ld(d.targetSnapshot,d.currentSnapshot,this.rootContexts)}),function yC(n,e){return(0,Qr.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:l}}=t;return 0===l.length&&0===s.length?_t({...t,guardsResult:!0}):function vC(n,e,t,r){return(0,Tn.D)(n).pipe((0,Qr.z)(i=>function Rx(n,e,t,r,i){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?_t(s.map(d=>{const f=Dc(e)??i,y=ea(d,f);return Cl(function Ax(n){return n&&Ud(n.canDeactivate)}(y)?y.canDeactivate(n,e,t,r):f.runInContext(()=>y(n,e,t,r))).pipe(xa())})).pipe(Bd()):_t(!0)}(i.component,i.route,t,e,r)),xa(i=>!0!==i,!0))}(l,r,i,n).pipe((0,Qr.z)(d=>d&&function _C(n){return"boolean"==typeof n}(d)?function xx(n,e,t,r){return(0,Tn.D)(e).pipe(Xo(i=>Xt(function bC(n,e){return null!==n&&e&&e(new w_(n)),_t(!0)}(i.route.parent,r),function wC(n,e){return null!==n&&e&&e(new Nd(n)),_t(!0)}(i.route,r),function jL(n,e,t){const r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(l=>function Wv(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(l)).filter(l=>null!==l).map(l=>Oi(()=>_t(l.guards.map(f=>{const y=Dc(l.node)??t,w=ea(f,y);return Cl(function Tx(n){return n&&Ud(n.canActivateChild)}(w)?w.canActivateChild(r,n):y.runInContext(()=>w(r,n))).pipe(xa())})).pipe(Bd())));return _t(s).pipe(Bd())}(n,i.path,t),function qv(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return _t(!0);const i=r.map(s=>Oi(()=>{const l=Dc(e)??t,d=ea(s,l);return Cl(function Dx(n){return n&&Ud(n.canActivate)}(d)?d.canActivate(e,n):l.runInContext(()=>d(e,n))).pipe(xa())}));return _t(i).pipe(Bd())}(n,i.route,t))),xa(i=>!0!==i,!0))}(r,s,n,e):_t(d)),(0,Ct.U)(d=>({...t,guardsResult:d})))})}(this.ngModule.injector,d=>this.triggerEvent(d)),(0,Wi.b)(d=>{if(i.guardsResult=d.guardsResult,Na(d.guardsResult))throw ig(0,d.guardsResult);const f=new Yp(d.id,this.serializeUrl(d.extractedUrl),this.serializeUrl(d.urlAfterRedirects),d.targetSnapshot,!!d.guardsResult);this.triggerEvent(f)}),as(d=>!!d.guardsResult||(this.restoreHistory(d),this.cancelNavigationTransition(d,"",3),!1)),rw(d=>{if(d.guards.canActivateChecks.length)return _t(d).pipe((0,Wi.b)(f=>{const y=new kd(f.id,this.serializeUrl(f.extractedUrl),this.serializeUrl(f.urlAfterRedirects),f.targetSnapshot);this.triggerEvent(y)}),Br(f=>{let y=!1;return _t(f).pipe(function ew(n,e){return(0,Qr.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return _t(t);let s=0;return(0,Tn.D)(i).pipe(Xo(l=>function tw(n,e,t,r){const i=n.routeConfig,s=n._resolve;return void 0!==i?.title&&!NC(i)&&(s[xh]=i.title),function Fx(n,e,t,r){const i=function nw(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return _t({});const s={};return(0,Tn.D)(i).pipe((0,Qr.z)(l=>function gg(n,e,t,r){const i=Dc(e)??r,s=ea(n,i);return Cl(s.resolve?s.resolve(e,t):i.runInContext(()=>s(e,t)))}(n[l],e,t,r).pipe(xa(),(0,Wi.b)(d=>{s[l]=d}))),a_(1),function fC(n){return(0,Ct.U)(()=>n)}(s),Ra(l=>Vd(l)?wi.E:os(l)))}(s,n,e,r).pipe((0,Ct.U)(l=>(n._resolvedData=l,n.data=ng(n,t).resolve,i&&NC(i)&&(n.data[xh]=i.title),null)))}(l.route,r,n,e)),(0,Wi.b)(()=>s++),a_(1),(0,Qr.z)(l=>s===i.length?_t(t):wi.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Wi.b)({next:()=>y=!0,complete:()=>{y||(this.restoreHistory(f),this.cancelNavigationTransition(f,"",2))}}))}),(0,Wi.b)(f=>{const y=new v_(f.id,this.serializeUrl(f.extractedUrl),this.serializeUrl(f.urlAfterRedirects),f.targetSnapshot);this.triggerEvent(y)}))}),rw(d=>{const f=y=>{const w=[];y.routeConfig?.loadComponent&&!y.routeConfig._loadedComponent&&w.push(this.configLoader.loadComponent(y.routeConfig).pipe((0,Wi.b)(D=>{y.component=D}),(0,Ct.U)(()=>{})));for(const D of y.children)w.push(...f(D));return w};return le(f(d.targetSnapshot.root)).pipe(bu(),vu(1))}),rw(()=>this.afterPreactivation()),(0,Ct.U)(d=>{const f=function Oa(n,e,t){const r=Bi(n,e._root,t?t._root:void 0);return new eg(r,e)}(this.routeReuseStrategy,d.targetSnapshot,d.currentRouterState);return i={...d,targetRouterState:f}}),(0,Wi.b)(d=>{this.currentUrlTree=d.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(d.urlAfterRedirects,d.rawUrl),this.routerState=d.targetRouterState,"deferred"===this.urlUpdateStrategy&&(d.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,d),this.browserUrlTree=d.urlAfterRedirects)}),((n,e,t)=>(0,Ct.U)(r=>(new T_(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,d=>this.triggerEvent(d)),(0,Wi.b)({next(){s=!0},complete(){s=!0}}),l_(()=>{s||l||this.cancelNavigationTransition(i,"",1),this.currentNavigation?.id===i.id&&(this.currentNavigation=null)}),Ra(d=>{if(l=!0,Gv(d)){zv(d)||(this.navigated=!0,this.restoreHistory(i,!0));const f=new Au(i.id,this.serializeUrl(i.extractedUrl),d.message,d.cancellationCode);if(r.next(f),zv(d)){const y=this.urlHandlingStrategy.merge(d.url,this.rawUrlTree),w={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||iw(i.source)};this.scheduleNavigation(y,"imperative",null,w,{resolve:i.resolve,reject:i.reject,promise:i.promise})}else i.resolve(!1)}else{this.restoreHistory(i,!0);const f=new Bh(i.id,this.serializeUrl(i.extractedUrl),d,i.targetSnapshot??void 0);r.next(f);try{i.resolve(this.errorHandler(d))}catch(y){i.reject(y)}}return wi.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next({...this.transitions.value,...t})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{const i={replaceUrl:!0},s=t.state?.navigationId?t.state:null;if(s){const d={...s};delete d.navigationId,delete d.\u0275routerPageId,0!==Object.keys(d).length&&(i.state=d)}const l=this.parseUrl(t.url);this.scheduleNavigation(l,r,s,i)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){this.config=t.map(sg),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:s,fragment:l,queryParamsHandling:d,preserveFragment:f}=r,y=i||this.routerState.root,w=f?this.currentUrlTree.fragment:l;let D=null;switch(d){case"merge":D={...this.currentUrlTree.queryParams,...s};break;case"preserve":D=this.currentUrlTree.queryParams;break;default:D=s||null}return null!==D&&(D=this.removeEmptyProps(D)),jv(y,this.currentUrlTree,t,D,w??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=Na(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function jx(n){for(let e=0;e<n.length;e++){if(null==n[e])throw new c.vHH(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...Bx}:!1===r?{...HC}:r,Na(t))return Lp(this.currentUrlTree,t,i);const s=this.parseUrl(t);return Lp(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const s=t[i];return null!=s&&(r[i]=s),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new ls(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,s,l){if(this.disposed)return Promise.resolve(!1);let d,f,y;l?(d=l.resolve,f=l.reject,y=l.promise):y=new Promise((x,N)=>{d=x,f=N});const w=++this.navigationId;let D;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),D=i&&i.\u0275routerPageId?i.\u0275routerPageId:s.replaceUrl||s.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):D=0,this.setTransition({id:w,targetPageId:D,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:s,resolve:d,reject:f,promise:y,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),y.catch(x=>Promise.reject(x))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),s={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",s):this.location.go(i,"",s)}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const i=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===i?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===i&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(i)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r,i){const s=new Au(t.id,this.serializeUrl(t.extractedUrl),r,i);this.triggerEvent(s),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){c.$Z()},n.\u0275prov=c.Yz7({token:n,factory:function(){return jC()},providedIn:"root"}),n})();function iw(n){return"imperative"!==n}let sw=(()=>{class n{constructor(t,r,i,s,l){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=s,this.el=l,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.onChanges=new kr.x,this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(t){this._preserveFragment=(0,c.D6c)(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=(0,c.D6c)(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=(0,c.D6c)(t)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const r=this.renderer,i=this.el.nativeElement;null!==t?r.setAttribute(i,"tabindex",t):r.removeAttribute(i,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){return null===this.urlTree||this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(er),c.Y36(Mo),c.$8M("tabindex"),c.Y36(c.Qsj),c.Y36(c.SBq))},n.\u0275dir=c.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,r){1&t&&c.NdJ("click",function(){return r.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[c.TTD]}),n})(),La=(()=>{class n{constructor(t,r,i){this.router=t,this.route=r,this.locationStrategy=i,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.href=null,this.onChanges=new kr.x,this.subscription=t.events.subscribe(s=>{s instanceof ls&&this.updateTargetUrlAndHref()})}set preserveFragment(t){this._preserveFragment=(0,c.D6c)(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=(0,c.D6c)(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=(0,c.D6c)(t)}get replaceUrl(){return this._replaceUrl}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,r,i,s,l){return!!(0!==t||r||i||s||l||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!1)}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(er),c.Y36(Mo),c.Y36(Ae))},n.\u0275dir=c.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,r){1&t&&c.NdJ("click",function(s){return r.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),2&t&&c.uIk("target",r.target)("href",r.href,c.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[c.TTD]}),n})(),$C=(()=>{class n{constructor(t,r,i,s,l,d){this.router=t,this.element=r,this.renderer=i,this.cdr=s,this.link=l,this.linkWithHref=d,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new c.vpe,this.routerEventsSubscription=t.events.subscribe(f=>{f instanceof ls&&this.update()})}ngAfterContentInit(){_t(this.links.changes,this.linksWithHrefs.changes,_t(null)).pipe((0,It.J)()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const t=[...this.links.toArray(),...this.linksWithHrefs.toArray(),this.link,this.linkWithHref].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=(0,Tn.D)(t).pipe((0,It.J)()).subscribe(r=>{this.isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(t){const r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.linksWithHrefs||!this.router.navigated||Promise.resolve().then(()=>{const t=this.hasActiveLinks();this.isActive!==t&&(this.isActive=t,this.cdr.markForCheck(),this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),t&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(t))})}isLinkActive(t){const r=function $x(n){return!!n.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>!!i.urlTree&&t.isActive(i.urlTree,r)}hasActiveLinks(){const t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.linkWithHref&&t(this.linkWithHref)||this.links.some(t)||this.linksWithHrefs.some(t)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(er),c.Y36(c.SBq),c.Y36(c.Qsj),c.Y36(c.sBO),c.Y36(sw,8),c.Y36(La,8))},n.\u0275dir=c.lG2({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(t,r,i){if(1&t&&(c.Suo(i,sw,5),c.Suo(i,La,5)),2&t){let s;c.iGM(s=c.CRH())&&(r.links=s),c.iGM(s=c.CRH())&&(r.linksWithHrefs=s)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[c.TTD]}),n})();class ow{}let zx=(()=>{class n{constructor(t,r,i,s,l){this.router=t,this.injector=i,this.preloadingStrategy=s,this.loader=l}setUpPreloading(){this.subscription=this.router.events.pipe(as(t=>t instanceof ls),Xo(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const s of r){s.providers&&!s._injector&&(s._injector=(0,c.MMx)(s.providers,t,`Route: ${s.path}`));const l=s._injector??t,d=s._loadedInjector??l;s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent?i.push(this.preloadConfig(l,s)):(s.children||s._loadedRoutes)&&i.push(this.processRoutes(d,s.children??s._loadedRoutes))}return(0,Tn.D)(i).pipe((0,It.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):_t(null);const s=i.pipe((0,Qr.z)(l=>null===l?_t(void 0):(r._loadedRoutes=l.routes,r._loadedInjector=l.injector,this.processRoutes(l.injector??t,l.routes))));if(r.loadComponent&&!r._loadedComponent){const l=this.loader.loadComponent(r);return(0,Tn.D)([s,l]).pipe((0,It.J)())}return s})}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(er),c.LFG(c.Sil),c.LFG(c.lqb),c.LFG(ow),c.LFG(UC))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const en=new c.OlP("");let aw=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Vh?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof ls&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Ui&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new Ui(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){c.$Z()},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();function Yh(n,e){return{\u0275kind:n,\u0275providers:e}}function k_(n){return[{provide:FC,multi:!0,useValue:n}]}function lw(){const n=(0,c.f3M)(c.zs3);return e=>{const t=n.get(c.z2F);if(e!==t.components[0])return;const r=n.get(er),i=n.get(GC);1===n.get(uw)&&r.initialNavigation(),n.get(Tc,null,c.XFs.Optional)?.setUpPreloading(),n.get(en,null,c.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.unsubscribe())}}const GC=new c.OlP("",{factory:()=>new kr.x}),uw=new c.OlP("",{providedIn:"root",factory:()=>1});const Tc=new c.OlP("");function Wx(n){return Yh(0,[{provide:Tc,useExisting:zx},{provide:ow,useExisting:n}])}const qx=new c.OlP("ROUTER_FORROOT_GUARD"),XL=[We,{provide:Dd,useClass:Fp},{provide:er,useFactory:jC},v,{provide:Mo,useFactory:function zC(n){return n.routerState.root},deps:[er]},UC];function eF(){return new c.PXZ("Router",er)}let KC=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[XL,[],k_(t),{provide:qx,useFactory:Jh,deps:[[er,new c.FiY,new c.tp0]]},{provide:M_,useValue:r||{}},r?.useHash?{provide:Ae,useClass:Et}:{provide:Ae,useClass:Ge},{provide:en,useFactory:()=>{const n=(0,c.f3M)(er),e=(0,c.f3M)(zo),t=(0,c.f3M)(M_);return t.scrollOffset&&e.setOffset(t.scrollOffset),new aw(n,e,t)}},r?.preloadingStrategy?Wx(r.preloadingStrategy).\u0275providers:[],{provide:c.PXZ,multi:!0,useFactory:eF},r?.initialNavigation?Kx(r):[],[{provide:cw,useFactory:lw},{provide:c.tb,multi:!0,useExisting:cw}]]}}static forChild(t){return{ngModule:n,providers:[k_(t)]}}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(qx,8))},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[O]}),n})();function Jh(n){return"guarded"}function Kx(n){return["disabled"===n.initialNavigation?Yh(3,[{provide:c.ip1,multi:!0,useFactory:()=>{const e=(0,c.f3M)(er);return()=>{e.setUpLocationChangeListener()}}},{provide:uw,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Yh(2,[{provide:uw,useValue:0},{provide:c.ip1,multi:!0,deps:[c.zs3],useFactory:e=>{const t=e.get(Y,Promise.resolve());let r=!1;return()=>t.then(()=>new Promise(s=>{const l=e.get(er),d=e.get(GC);(function i(s){e.get(er).events.pipe(as(d=>d instanceof ls||d instanceof Au||d instanceof Bh),(0,Ct.U)(d=>d instanceof ls||d instanceof Au&&(0===d.code||1===d.code)&&null),as(d=>null!==d),vu(1)).subscribe(()=>{s()})})(()=>{s(!0),r=!0}),l.afterPreactivation=()=>(s(!0),r||d.closed?_t(void 0):d),l.initialNavigation()}))}}]).\u0275providers:[]]}const cw=new c.OlP("");class dw{}class QC{}class Fa{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),s=i.toLowerCase(),l=t.slice(r+1).trim();this.maybeSetNormalizedName(i,s),this.headers.has(s)?this.headers.get(s).push(l):this.headers.set(s,[l])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let r=e[t];const i=t.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(i,r),this.maybeSetNormalizedName(t,i))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof Fa?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new Fa;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof Fa?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const s=e.value;if(s){let l=this.headers.get(t);if(!l)return;l=l.filter(d=>-1===s.indexOf(d)),0===l.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,l)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class Yx{encodeKey(e){return hw(e)}encodeValue(e){return hw(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const JC=/%(\d[a-f0-9])/gi,Jx={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function hw(n){return encodeURIComponent(n).replace(JC,(e,t)=>Jx[t]??e)}function yg(n){return`${n}`}class ta{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new Yx,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function Qx(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const s=i.indexOf("="),[l,d]=-1==s?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,s)),e.decodeValue(i.slice(s+1))],f=t.get(l)||[];f.push(d),t.set(l,f)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t],i=Array.isArray(r)?r.map(yg):[yg(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(s=>{t.push({param:r,value:s,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new ta({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(yg(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(yg(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class fw{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function eR(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function zd(n){return typeof Blob<"u"&&n instanceof Blob}function pw(n){return typeof FormData<"u"&&n instanceof FormData}class Ac{constructor(e,t,r,i){let s;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function Xx(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,s=i):s=r,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params)),this.headers||(this.headers=new Fa),this.context||(this.context=new fw),this.params){const l=this.params.toString();if(0===l.length)this.urlWithParams=t;else{const d=t.indexOf("?");this.urlWithParams=t+(-1===d?"?":d<t.length-1?"&":"")+l}}else this.params=new ta,this.urlWithParams=t}serializeBody(){return null===this.body?null:eR(this.body)||zd(this.body)||pw(this.body)||function XC(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof ta?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||pw(this.body)?null:zd(this.body)?this.body.type||null:eR(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof ta?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,s=void 0!==e.body?e.body:this.body,l=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,d=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let f=e.headers||this.headers,y=e.params||this.params;const w=e.context??this.context;return void 0!==e.setHeaders&&(f=Object.keys(e.setHeaders).reduce((D,x)=>D.set(x,e.setHeaders[x]),f)),e.setParams&&(y=Object.keys(e.setParams).reduce((D,x)=>D.set(x,e.setParams[x]),y)),new Ac(t,r,s,{params:y,headers:f,context:w,reportProgress:d,responseType:i,withCredentials:l})}}var Gn=(()=>((Gn=Gn||{})[Gn.Sent=0]="Sent",Gn[Gn.UploadProgress=1]="UploadProgress",Gn[Gn.ResponseHeader=2]="ResponseHeader",Gn[Gn.DownloadProgress=3]="DownloadProgress",Gn[Gn.Response=4]="Response",Gn[Gn.User=5]="User",Gn))();class P_{constructor(e,t=200,r="OK"){this.headers=e.headers||new Fa,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class gw extends P_{constructor(e={}){super(e),this.type=Gn.ResponseHeader}clone(e={}){return new gw({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Xh extends P_{constructor(e={}){super(e),this.type=Gn.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new Xh({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Al extends P_{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function vg(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let ef=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let s;if(t instanceof Ac)s=t;else{let f,y;f=i.headers instanceof Fa?i.headers:new Fa(i.headers),i.params&&(y=i.params instanceof ta?i.params:new ta({fromObject:i.params})),s=new Ac(t,r,void 0!==i.body?i.body:null,{headers:f,context:i.context,params:y,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const l=_t(s).pipe(Xo(f=>this.handler.handle(f)));if(t instanceof Ac||"events"===i.observe)return l;const d=l.pipe(as(f=>f instanceof Xh));switch(i.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return d.pipe((0,Ct.U)(f=>{if(null!==f.body&&!(f.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return f.body}));case"blob":return d.pipe((0,Ct.U)(f=>{if(null!==f.body&&!(f.body instanceof Blob))throw new Error("Response is not a Blob.");return f.body}));case"text":return d.pipe((0,Ct.U)(f=>{if(null!==f.body&&"string"!=typeof f.body)throw new Error("Response is not a string.");return f.body}));default:return d.pipe((0,Ct.U)(f=>f.body))}case"response":return d;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new ta).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,vg(i,r))}post(t,r,i={}){return this.request("POST",t,vg(i,r))}put(t,r,i={}){return this.request("PUT",t,vg(i,r))}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(dw))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();class O_{constructor(e,t){this.next=e,this.interceptor=t}handle(e){return this.interceptor.intercept(e,this.next)}}const tR=new c.OlP("HTTP_INTERCEPTORS");let eI=(()=>{class n{intercept(t,r){return r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const nR=/^\)\]\}',?\n/;let yw=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new ss.y(r=>{const i=this.xhrFactory.build();if(i.open(t.method,t.urlWithParams),t.withCredentials&&(i.withCredentials=!0),t.headers.forEach((N,U)=>i.setRequestHeader(N,U.join(","))),t.headers.has("Accept")||i.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const N=t.detectContentTypeHeader();null!==N&&i.setRequestHeader("Content-Type",N)}if(t.responseType){const N=t.responseType.toLowerCase();i.responseType="json"!==N?N:"text"}const s=t.serializeBody();let l=null;const d=()=>{if(null!==l)return l;const N=i.statusText||"OK",U=new Fa(i.getAllResponseHeaders()),Q=function rR(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(i)||t.url;return l=new gw({headers:U,status:i.status,statusText:N,url:Q}),l},f=()=>{let{headers:N,status:U,statusText:Q,url:X}=d(),ae=null;204!==U&&(ae=typeof i.response>"u"?i.responseText:i.response),0===U&&(U=ae?200:0);let Le=U>=200&&U<300;if("json"===t.responseType&&"string"==typeof ae){const je=ae;ae=ae.replace(nR,"");try{ae=""!==ae?JSON.parse(ae):null}catch(Ye){ae=je,Le&&(Le=!1,ae={error:Ye,text:ae})}}Le?(r.next(new Xh({body:ae,headers:N,status:U,statusText:Q,url:X||void 0})),r.complete()):r.error(new Al({error:ae,headers:N,status:U,statusText:Q,url:X||void 0}))},y=N=>{const{url:U}=d(),Q=new Al({error:N,status:i.status||0,statusText:i.statusText||"Unknown Error",url:U||void 0});r.error(Q)};let w=!1;const D=N=>{w||(r.next(d()),w=!0);let U={type:Gn.DownloadProgress,loaded:N.loaded};N.lengthComputable&&(U.total=N.total),"text"===t.responseType&&!!i.responseText&&(U.partialText=i.responseText),r.next(U)},x=N=>{let U={type:Gn.UploadProgress,loaded:N.loaded};N.lengthComputable&&(U.total=N.total),r.next(U)};return i.addEventListener("load",f),i.addEventListener("error",y),i.addEventListener("timeout",y),i.addEventListener("abort",y),t.reportProgress&&(i.addEventListener("progress",D),null!==s&&i.upload&&i.upload.addEventListener("progress",x)),i.send(s),r.next({type:Gn.Sent}),()=>{i.removeEventListener("error",y),i.removeEventListener("abort",y),i.removeEventListener("load",f),i.removeEventListener("timeout",y),t.reportProgress&&(i.removeEventListener("progress",D),null!==s&&i.upload&&i.upload.removeEventListener("progress",x)),i.readyState!==i.DONE&&i.abort()}})}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ya))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const iI=new c.OlP("XSRF_COOKIE_NAME"),vw=new c.OlP("XSRF_HEADER_NAME");class iR{}let sI=(()=>{class n{constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=Ka(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ue),c.LFG(c.Lbi),c.LFG(iI))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),L_=(()=>{class n{constructor(t,r){this.tokenService=t,this.headerName=r}intercept(t,r){const i=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||i.startsWith("http://")||i.startsWith("https://"))return r.handle(t);const s=this.tokenService.getToken();return null!==s&&!t.headers.has(this.headerName)&&(t=t.clone({headers:t.headers.set(this.headerName,s)})),r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(iR),c.LFG(vw))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),sR=(()=>{class n{constructor(t,r){this.backend=t,this.injector=r,this.chain=null}handle(t){if(null===this.chain){const r=this.injector.get(tR,[]);this.chain=r.reduceRight((i,s)=>new O_(i,s),this.backend)}return this.chain.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(QC),c.LFG(c.zs3))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),oF=(()=>{class n{static disable(){return{ngModule:n,providers:[{provide:L_,useClass:eI}]}}static withOptions(t={}){return{ngModule:n,providers:[t.cookieName?{provide:iI,useValue:t.cookieName}:[],t.headerName?{provide:vw,useValue:t.headerName}:[]]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[L_,{provide:tR,useExisting:L_,multi:!0},{provide:iR,useClass:sI},{provide:iI,useValue:"XSRF-TOKEN"},{provide:vw,useValue:"X-XSRF-TOKEN"}]}),n})(),aF=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[ef,{provide:dw,useClass:sR},yw,{provide:QC,useExisting:yw}],imports:[oF.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]}),n})(),ww=(()=>{class n{constructor(t){this.http=t}getRecipes(t){const r=(new Fa).set("Content-Type","application/json"),i=new ta({fromObject:{q:t,type:"public",app_id:"d84b34a5",app_key:"1163caf9de0e70fb5c44bd3e655467c0",field:["calories","cuisineType","dishType","image","ingredients","label","healthLabels","mealType","source","totalTime","tags","uri","url"],page:"1"}});return this.http.get("https://api.edamam.com/api/recipes/v2",{headers:r,params:i})}getFilteredRecipes(t){const r=(new Fa).set("Content-Type","application/json");return this.http.get("https://api.edamam.com/api/recipes/v2",{headers:r,params:t})}getRecipeById(t){return this.http.get(`https://api.edamam.com/api/recipes/v2/${t}?type=public&app_id=d84b34a5&app_key=1163caf9de0e70fb5c44bd3e655467c0`)}addFavRecipe(t){return this.http.post("https://64493726b88a78a8f001273f.mockapi.io/api/v1/users",t)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ef))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var lF=H(5226),Gd=H.n(lF),aI=H(6451),bw=H(5363),Sc=H(6063);class Ew extends kr.x{constructor(e=1/0,t=1/0,r=Sc.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:s,_windowTime:l}=this;t||(r.push(e),!i&&r.push(s.now()+l)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,s=i.slice();for(let l=0;l<s.length&&!e.closed;l+=r?1:2)e.next(s[l]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,s=(i?1:2)*e;if(e<1/0&&s<r.length&&r.splice(0,r.length-s),!i){const l=t.now();let d=0;for(let f=1;f<r.length&&r[f]<=l;f+=2)d=f;d&&r.splice(0,d+1)}}}var lI=H(3099);function Cw(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,(0,lI.B)({connector:()=>new Ew(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function F_(n,e){return(0,Jo.m)(e)?Br(()=>n,e):Br(()=>n)}var U_=H(9468),An=H(2122),bi=H(2011);H(259);var Se=H(5861),xs=H(9681),Sl=H(4859),V=H(2090),na=H(1877);const Sw=new Map,xw={activated:!1,tokenObservers:[]},fI={initialized:!1,enabled:!1};function Xr(n){return Sw.get(n)||Object.assign({},xw)}function Eg(){return fI}class hR{constructor(e,t,r,i,s){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,Se.Z)(function*(){t.stop();try{t.pending=new V.BH,yield function fR(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new V.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const qi=new V.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function gI(n){if(!Xr(n).activated)throw qi.create("use-before-activation",{appName:n.name})}function V_(n,e){return Pw.apply(this,arguments)}function Pw(){return(Pw=(0,Se.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const D=yield i.getHeartbeatsHeader();D&&(r["X-Firebase-Client"]=D)}const s={method:"POST",body:JSON.stringify(e),headers:r};let l,d;try{l=yield fetch(n,s)}catch(D){throw qi.create("fetch-network-error",{originalErrorMessage:D?.message})}if(200!==l.status)throw qi.create("fetch-status-error",{httpStatus:l.status});try{d=yield l.json()}catch(D){throw qi.create("fetch-parse-error",{originalErrorMessage:D?.message})}const f=d.ttl.match(/^([\d.]+)(s)$/);if(!f||!f[2]||isNaN(Number(f[1])))throw qi.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${d.ttl}`});const y=1e3*Number(f[1]),w=Date.now();return{token:d.token,expireTimeMillis:w+y,issuedAtTimeMillis:w}})).apply(this,arguments)}function pR(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const nf="firebase-app-check-store";let B_=null;function _I(){return B_||(B_=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(qi.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(nf,{keyPath:"compositeKey"})}}catch(t){e(qi.create("storage-open",{originalErrorMessage:t?.message}))}}),B_)}function rf(){return(rf=(0,Se.Z)(function*(n,e){const r=(yield _I()).transaction(nf,"readwrite"),s=r.objectStore(nf).put({compositeKey:n,value:e});return new Promise((l,d)=>{s.onsuccess=f=>{l()},r.onerror=f=>{var y;d(qi.create("storage-set",{originalErrorMessage:null===(y=f.target.error)||void 0===y?void 0:y.message}))}})})).apply(this,arguments)}const sf=new na.Yd("@firebase/app-check");function z_(n,e){return(0,V.hl)()?function mR(n,e){return function j_(n,e){return rf.apply(this,arguments)}(function vR(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{sf.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function Tg(){return Eg().enabled}function Ag(){return Wd.apply(this,arguments)}function Wd(){return(Wd=(0,Se.Z)(function*(){const n=Eg();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const Uw={error:"UNKNOWN_ERROR"};function vI(n){return V.US.encodeString(JSON.stringify(n),!1)}function G_(n){return Vw.apply(this,arguments)}function Vw(){return(Vw=(0,Se.Z)(function*(n,e=!1){const t=n.app;gI(t);const r=Xr(t);let s,i=r.token;if(i&&!af(i)&&(r.token=void 0,i=void 0),!i){const f=yield r.cachedTokenPromise;f&&(af(f)?i=f:yield z_(t,void 0))}if(!e&&i&&af(i))return{token:i.token};let d,l=!1;if(Tg()){r.exchangeTokenPromise||(r.exchangeTokenPromise=V_(pR(t,yield Ag()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),l=!0);const f=yield r.exchangeTokenPromise;return yield z_(t,f),r.token=f,{token:f.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),l=!0),i=yield Xr(t).exchangeTokenPromise}catch(f){"appCheck/throttled"===f.code?sf.warn(f.message):sf.error(f),s=f}return i?s?d=af(i)?{token:i.token,internalError:s}:wI(s):(d={token:i.token},r.token=i,yield z_(t,i)):d=wI(s),l&&CR(t,d),d})).apply(this,arguments)}function Bw(n,e){const t=Xr(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function bR(n){const{app:e}=n,t=Xr(e);let r=t.tokenRefresher;r||(r=function ER(n){const{app:e}=n;return new hR((0,Se.Z)(function*(){let r;if(r=Xr(e).token?yield G_(n,!0):yield G_(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=Xr(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function CR(n,e){const t=Xr(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}function af(n){return n.expireTimeMillis-Date.now()>0}function wI(n){return{token:vI(Uw),error:n}}class IR{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Xr(this.app);for(const t of e)Bw(this.app,t.next);return Promise.resolve()}}const Kd="app-check-internal";!function cf(){(0,xs._registerComponent)(new Sl.wA("app-check",n=>function bI(n,e){return new IR(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(Kd).initialize()})),(0,xs._registerComponent)(new Sl.wA(Kd,n=>function Hw(n){return{getToken:e=>G_(n,e),addTokenListener:e=>function qd(n,e,t,r){const{app:i}=n,s=Xr(i);if(s.tokenObservers=[...s.tokenObservers,{next:t,error:r,type:e}],s.token&&af(s.token)){const d=s.token;Promise.resolve().then(()=>{t({token:d.token}),bR(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>bR(n))}(n,"INTERNAL",e),removeTokenListener:e=>Bw(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,xs.registerVersion)("@firebase/app-check","0.6.5")}();class Rl{constructor(){return(0,An.vb)("app-check")}}typeof window<"u"&&window;var Ng=H(9260);const Pg=new c.OlP("angularfire2.auth.use-emulator"),Gw=new c.OlP("angularfire2.auth.settings"),df=new c.OlP("angularfire2.auth.tenant-id"),hf=new c.OlP("angularfire2.auth.langugage-code"),Og=new c.OlP("angularfire2.auth.use-device-language"),Ww=new c.OlP("angularfire.auth.persistence"),ff=(n,e,t,r,i,s,l,d)=>(0,bi.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const f=e.runOutsideAngular(()=>n.auth());if(t&&f.useEmulator(...t),r&&(f.tenantId=r),f.languageCode=i,s&&f.useDeviceLanguage(),l)for(const[y,w]of Object.entries(l))f.settings[y]=w;return d&&f.setPersistence(d),f},[t,r,i,s,l,d]);let Mc=(()=>{class n{constructor(t,r,i,s,l,d,f,y,w,D,x,N){const U=new kr.x,Q=_t(void 0).pipe((0,bw.Q)(l.outsideAngular),Br(()=>s.runOutsideAngular(()=>Promise.resolve().then(H.bind(H,6689)))),(0,Ct.U)(()=>(0,bi.on)(t,s,r)),(0,Ct.U)(X=>ff(X,s,d,y,w,D,f,x)),Cw({bufferSize:1,refCount:!1}));if(bs(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=_t(null);else{Q.pipe(xa()).subscribe();const ae=Q.pipe(Br(Ye=>Ye.getRedirectResult().then(St=>St,()=>null)),An.iC,Cw({bufferSize:1,refCount:!1})),Le=Q.pipe(Br(Ye=>new ss.y(St=>({unsubscribe:s.runOutsideAngular(()=>Ye.onAuthStateChanged(Nt=>St.next(Nt),Nt=>St.error(Nt),()=>St.complete()))})))),je=Q.pipe(Br(Ye=>new ss.y(St=>({unsubscribe:s.runOutsideAngular(()=>Ye.onIdTokenChanged(Nt=>St.next(Nt),Nt=>St.error(Nt),()=>St.complete()))}))));this.authState=ae.pipe(F_(Le),(0,U_.R)(l.outsideAngular),(0,bw.Q)(l.insideAngular)),this.user=ae.pipe(F_(je),(0,U_.R)(l.outsideAngular),(0,bw.Q)(l.insideAngular)),this.idToken=this.user.pipe(Br(Ye=>Ye?(0,Tn.D)(Ye.getIdToken()):_t(null))),this.idTokenResult=this.user.pipe(Br(Ye=>Ye?(0,Tn.D)(Ye.getIdTokenResult()):_t(null))),this.credential=(0,aI.T)(ae,U,this.authState.pipe(as(Ye=>!Ye))).pipe((0,Ct.U)(Ye=>Ye?.user?Ye:null),(0,U_.R)(l.outsideAngular),(0,bw.Q)(l.insideAngular))}return(0,bi.pX)(this,Q,s,{spy:{apply:(X,ae,Le)=>{(X.startsWith("signIn")||X.startsWith("createUser"))&&Le.then(je=>U.next(je))}}})}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(bi.Dh),c.LFG(bi.xv,8),c.LFG(c.Lbi),c.LFG(c.R0b),c.LFG(An.HU),c.LFG(Pg,8),c.LFG(Gw,8),c.LFG(df,8),c.LFG(hf,8),c.LFG(Og,8),c.LFG(Ww,8),c.LFG(Rl,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),qw=(()=>{class n{constructor(){Ng.Z.registerVersion("angularfire",An.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[Mc]}),n})(),pf=(()=>{class n{constructor(t,r,i){this.fireauth=t,this.http=r,this.router=i}login(t,r){this.fireauth.signInWithEmailAndPassword(t,r).then(i=>{localStorage.setItem("token",JSON.stringify(i)),this.router.navigate(1==i.user?.emailVerified?["recipes"]:["verify-email"])},i=>{Gd().fire({icon:"error",title:"Oops...",text:i.message}),this.router.navigate(["login"])})}register(t,r){this.fireauth.createUserWithEmailAndPassword(t,r).then(i=>{i.user?(this.setUserData(i.user.uid),this.sendEmailForVarification(i.user),Gd().fire({icon:"success",title:"Registration Successful",showConfirmButton:!1,timer:1500})):console.log("errore nel caricare fav-recipe")},i=>{Gd().fire({icon:"error",title:"Oops...",text:i.message}),this.router.navigate(["/register"])})}setUserData(t){return this.http.post("https://64493726b88a78a8f001273f.mockapi.io/api/v1/users",{userId:t,recipes:[]}).subscribe(s=>{console.log(s)})}logout(){this.fireauth.signOut().then(()=>{localStorage.removeItem("token"),this.router.navigate(["/login"])},t=>{Gd().fire({icon:"error",title:"Oops...",text:t.message})})}sendEmailForVarification(t){t.sendEmailVerification().then(r=>{this.router.navigate(["/verify-email"])},r=>{Gd().fire({icon:"error",title:"Oops...",text:"Something went wrong. Not able to send mail to your email."})})}forgotPassword(t){this.fireauth.sendPasswordResetEmail(t).then(()=>{this.router.navigate(["/verify-email"])},r=>{Gd().fire({icon:"error",title:"Oops...",text:"Something went wrong."})})}isLoggedIn(){return!!window.localStorage.getItem("token")||(this.router.createUrlTree(["/login"]),!1)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Mc),c.LFG(ef),c.LFG(er))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Zw=function(){return["/calendar"]};function xI(n,e){1&n&&(c.TgZ(0,"li",8)(1,"a",10),c._uU(2,"Calendar"),c.qZA()()),2&n&&(c.xp6(1),c.Q6J("routerLink",c.DdM(1,Zw)))}const RI=function(){return["/login"]};function Kw(n,e){1&n&&(c.TgZ(0,"li",8)(1,"a",10),c._uU(2,"Login"),c.qZA()()),2&n&&(c.xp6(1),c.Q6J("routerLink",c.DdM(1,RI)))}const MI=function(){return["/register"]};function FR(n,e){1&n&&(c.TgZ(0,"li",8)(1,"a",12),c._uU(2,"Sign Up"),c.qZA()()),2&n&&(c.xp6(1),c.Q6J("routerLink",c.DdM(1,MI)))}function kI(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"li",8)(1,"a",13),c.NdJ("click",function(){c.CHM(t);const i=c.oxw();return c.KtG(i.logout())}),c._uU(2,"Logout"),c.qZA()()}}const NI=function(){return["/"]},PI=function(){return{exact:!0}},OI=function(){return["/recipes"]};let kc=(()=>{class n{constructor(t){this.authSrv=t}ngOnInit(){}logout(){this.authSrv.logout()}isLoggedIn(){return this.authSrv.isLoggedIn()}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(pf))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-navbar"]],decls:18,vars:10,consts:[[1,"navbar","navbar-expand-lg","shadow"],[1,"container"],["href","#",1,"navbar-brand"],["src","../../../assets/img/logo-completo.png","alt","Logo","width","200px"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarNavDropdown","aria-controls","navbarNavDropdown","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler","shadow-none","border-light"],[1,"bi","bi-list"],["id","navbarNavDropdown",1,"collapse","navbar-collapse","justify-content-end","align-items-center"],[1,"navbar-nav"],[1,"nav-item","m-2"],["routerLinkActive","active",1,"nav-link",3,"routerLink","routerLinkActiveOptions"],["routerLinkActive","active",1,"nav-link",3,"routerLink"],["class","nav-item m-2",4,"ngIf"],["routerLinkActive","active",1,"btn-cta","px-4","py-2",3,"routerLink"],[1,"btn-cta","px-4","py-2",3,"click"]],template:function(t,r){1&t&&(c.TgZ(0,"nav",0)(1,"div",1)(2,"a",2),c._UZ(3,"img",3),c.qZA(),c.TgZ(4,"button",4),c._UZ(5,"i",5),c.qZA(),c.TgZ(6,"div",6)(7,"ul",7)(8,"li",8)(9,"a",9),c._uU(10,"Home"),c.qZA()(),c.TgZ(11,"li",8)(12,"a",10),c._uU(13,"Recipes"),c.qZA()(),c.YNc(14,xI,3,2,"li",11),c.YNc(15,Kw,3,2,"li",11),c.YNc(16,FR,3,2,"li",11),c.YNc(17,kI,3,0,"li",11),c.qZA()()()()),2&t&&(c.xp6(9),c.Q6J("routerLink",c.DdM(7,NI))("routerLinkActiveOptions",c.DdM(8,PI)),c.xp6(3),c.Q6J("routerLink",c.DdM(9,OI)),c.xp6(2),c.Q6J("ngIf",r.isLoggedIn()),c.xp6(1),c.Q6J("ngIf",!r.isLoggedIn()),c.xp6(1),c.Q6J("ngIf",!r.isLoggedIn()),c.xp6(1),c.Q6J("ngIf",r.isLoggedIn()))},dependencies:[Kn,La,$C],styles:[".navbar-nav[_ngcontent-%COMP%]{--bs-nav-link-padding-y: 0}.nav-link.active[_ngcontent-%COMP%]{color:#88d398;font-weight:700}"]}),n})(),Nu=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-footer"]],decls:19,vars:0,consts:[[1,"footer"],[1,"container"],[1,"row","text-center","py-3"],[1,"col-12","col-sm-6","mb-4"],["src","../../../assets/img/logo-bg-bianco.png","alt","Logo DishDash","width","100px"],[1,"col-12","col-sm-6"],["title","Facebook Art\xeca","href","https://www.facebook.com/",1,"p-2"],[1,"bi","bi-facebook"],["title","Instagram Art\xeca","href","https://www.instagram.com/",1,"p-2"],[1,"bi","bi-instagram"],["title","Pinterest Art\xeca","href","https://www.pinterest.it/",1,"p-2"],[1,"bi","bi-pinterest"],["title","Twitter Art\xeca","href","https://twitter.com/",1,"p-2"],[1,"bi","bi-twitter"],[1,"row","text-center","border-top","py-3"],[1,"m-0"]],template:function(t,r){1&t&&(c.TgZ(0,"footer",0)(1,"div",1)(2,"div",2)(3,"div",3),c._UZ(4,"img",4),c.qZA(),c.TgZ(5,"div",5)(6,"p"),c._uU(7,"Seguici sui nostri social:"),c.qZA(),c.TgZ(8,"a",6),c._UZ(9,"i",7),c.qZA(),c.TgZ(10,"a",8),c._UZ(11,"i",9),c.qZA(),c.TgZ(12,"a",10),c._UZ(13,"i",11),c.qZA(),c.TgZ(14,"a",12),c._UZ(15,"i",13),c.qZA()()(),c.TgZ(16,"div",14)(17,"p",15),c._uU(18,"Copyright \xa9 DishDash"),c.qZA()()()())},styles:["footer[_ngcontent-%COMP%]{background-color:#88d398;color:#345834}a[_ngcontent-%COMP%]{color:#345834}.bi[_ngcontent-%COMP%]{font-size:25px;transition:.3s linear}.bi-facebook[_ngcontent-%COMP%]:hover{color:#3b5998}.bi-instagram[_ngcontent-%COMP%]:hover{color:#d62976}.bi-pinterest[_ngcontent-%COMP%]:hover{color:#c8232c}.bi-twitter[_ngcontent-%COMP%]:hover{color:#00acee}"]}),n})();const LI=function(n){return["/recipes",n]};function Yw(n,e){if(1&n&&(c.TgZ(0,"div",36)(1,"span",37),c._uU(2),c.qZA(),c._UZ(3,"img",38),c.TgZ(4,"div",39)(5,"h5",40),c._uU(6),c.qZA(),c.TgZ(7,"p",41),c._uU(8),c.qZA(),c.TgZ(9,"a",42),c._uU(10,"See more"),c.qZA()()()),2&n){const t=e.$implicit;c.xp6(2),c.hij(" ",t.recipe.totalTime,"m "),c.xp6(1),c.s9C("src",t.recipe.image,c.LSH),c.s9C("alt",t.recipe.label),c.xp6(3),c.Oqu(t.recipe.label),c.xp6(2),c.Oqu(t.recipe.source),c.xp6(1),c.Q6J("routerLink",c.VKq(6,LI,null==t.recipe.uri?null:t.recipe.uri.split("#")[1]))}}const Qw=function(){return["recipes"]},Jw=function(){return["/recipes"]};let FI=(()=>{class n{constructor(t){this.recipesSrv=t,this.recipes=[]}ngOnInit(){this.findRecipes()}findRecipes(){this.recipesSrv.getRecipes("italian").subscribe(t=>{this.recipes=t.hits.slice(-4)})}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(ww))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-home"]],decls:79,vars:7,consts:[["src","../../../assets/img/food-vecteezy.jpg","alt","Food"],[1,"intro","text-center","p-5"],["data-aos","fade-right","data-aos-duration","2000",1,"mb-4"],["data-aos","fade-left","data-aos-duration","2000",1,"mb-4"],["data-aos","fade-zoom-in",1,"d-inline-block","btn-cta","px-5","py-3","mt-4",3,"routerLink"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 1440 320"],["fill","#88D398","fill-opacity","1","d","M0,32L48,48C96,64,192,96,288,128C384,160,480,192,576,208C672,224,768,224,864,197.3C960,171,1056,117,1152,90.7C1248,64,1344,64,1392,64L1440,64L1440,0L1392,0C1344,0,1248,0,1152,0C1056,0,960,0,864,0C768,0,672,0,576,0C480,0,384,0,288,0C192,0,96,0,48,0L0,0Z"],[1,"container","text-center","py-5"],["data-aos","fade-left",1,"mb-5"],[1,"row","justify-content-center","mb-4"],["data-aos","fade-zoom-in","class","card col-4 recipe shadow p-0 m-3","style","width: 18rem;",4,"ngFor","ngForOf"],["title","Recipes",1,"d-inline-block","btn-cta","px-4","py-2",3,"routerLink"],[1,"background","my-5"],[1,"container","text-center","my-5"],[1,"row"],[1,"col-12","col-lg-6","p-5"],["data-aos","fade-right"],["data-aos","fade-zoom-in",1,"col-12","col-lg-6"],["src","../../../assets/img/calendar.jpg","alt","Calendar","width","500px",1,"shadow"],[1,"col-12","col-lg-6","p-5","d-flex","justify-content-center","flex-wrap","order-2","order-lg-1"],["data-aos","fade-zoom-in",1,"food","p-0"],["src","../../../assets/img/italian-food.jpg","alt","Italian food","width","150px",1,"rounded-circle","m-2"],[1,"d-flex","justify-content-center","align-items-center"],["data-aos","fade-zoom-in","data-aos-delay","100",1,"food","p-0"],["src","../../../assets/img/american-food.jpg","alt","American food","width","150px",1,"rounded-circle","m-2"],["data-aos","fade-zoom-in","data-aos-delay","200",1,"food","p-0"],["src","../../../assets/img/chinese-food.jpg","alt","Chinese food","width","150px",1,"rounded-circle","m-2"],["data-aos","fade-zoom-in","data-aos-delay","300",1,"food","p-0"],["src","../../../assets/img/japanese-food.jpg","alt","Japanese food","width","150px",1,"rounded-circle","m-2"],["data-aos","fade-zoom-in","data-aos-delay","400",1,"food","p-0"],["src","../../../assets/img/french-food.jpg","alt","French food","width","150px",1,"rounded-circle","m-2"],["data-aos","fade-zoom-in","data-aos-delay","500",1,"food","p-0"],["src","../../../assets/img/mexican-food.jpg","alt","Mexincan food","width","150px",1,"rounded-circle","m-2"],[1,"col-12","col-lg-6","p-5","order-1","order-lg-2"],["data-aos","fade-left"],["id","onda-due","xmlns","http://www.w3.org/2000/svg","viewBox","0 0 1440 320"],["data-aos","fade-zoom-in",1,"card","col-4","recipe","shadow","p-0","m-3",2,"width","18rem"],[1,"position-absolute","end-0","badge","rounded-0",2,"background-color","#EC4E1F","top","30px"],[1,"card-img-top",3,"src","alt"],[1,"card-body","text-start","py-2","px-4"],[1,"card-title","text-light"],[1,"card-text","text-light"],[1,"btn-confirm","text-light","px-4","py-2",3,"routerLink"]],template:function(t,r){1&t&&(c._UZ(0,"app-navbar"),c.TgZ(1,"section"),c._UZ(2,"img",0),c.TgZ(3,"div",1)(4,"h1",2),c._uU(5,"PLAN YOUR"),c._UZ(6,"br"),c._uU(7,"WEEKLY "),c.TgZ(8,"span"),c._uU(9,"DISHES"),c.qZA(),c._uU(10,"!"),c.qZA(),c.TgZ(11,"h4",3),c._uU(12,"With DishDash you can easly plan your week"),c._UZ(13,"br"),c._uU(14,"with your favourite meals."),c.qZA(),c.TgZ(15,"a",4),c._uU(16,"Start now!"),c.qZA()()(),c.O4$(),c.TgZ(17,"svg",5),c._UZ(18,"path",6),c.qZA(),c.kcU(),c.TgZ(19,"div",7)(20,"h2",8),c._uU(21,"Last Recipes"),c.qZA(),c.TgZ(22,"div",9),c.YNc(23,Yw,11,8,"div",10),c.qZA(),c.TgZ(24,"a",11),c._uU(25,"See all"),c.qZA()(),c._UZ(26,"div",12),c.TgZ(27,"div",13)(28,"div",14)(29,"div",15)(30,"h2",16),c._uU(31,"Plan your weekly recipes!"),c.qZA(),c.TgZ(32,"p",16),c._uU(33,"With our customizable calendar, you can easily plan the meals of the week and guarantee a varied and tasty cuisine."),c.qZA(),c.TgZ(34,"p",16),c._uU(35,"Planning weekly recipes is a great way to save time and money, avoiding waste and better organizing your shopping. You can choose from hundreds of recipes, divided into categories, and add them to your calendar with a simple click."),c.qZA(),c.TgZ(36,"p",16),c._uU(37,"Don't waste any more time, sign up now for Plan your weekly recipes and start enjoying new delicious and healthy dishes every day!"),c.qZA()(),c.TgZ(38,"div",17),c._UZ(39,"img",18),c.qZA()()(),c.TgZ(40,"div",13)(41,"div",14)(42,"div",19)(43,"div",20),c._UZ(44,"img",21),c.TgZ(45,"span",22),c._uU(46,"Italian"),c.qZA()(),c.TgZ(47,"div",23),c._UZ(48,"img",24),c.TgZ(49,"span",22),c._uU(50,"American"),c.qZA()(),c.TgZ(51,"div",25),c._UZ(52,"img",26),c.TgZ(53,"span",22),c._uU(54,"Chinese"),c.qZA()(),c.TgZ(55,"div",27),c._UZ(56,"img",28),c.TgZ(57,"span",22),c._uU(58,"Japanese"),c.qZA()(),c.TgZ(59,"div",29),c._UZ(60,"img",30),c.TgZ(61,"span",22),c._uU(62,"French"),c.qZA()(),c.TgZ(63,"div",31),c._UZ(64,"img",32),c.TgZ(65,"span",22),c._uU(66,"Mexincan"),c.qZA()()(),c.TgZ(67,"div",33)(68,"h2",34),c._uU(69,"Discover recipes from all over the world"),c.qZA(),c.TgZ(70,"p",34),c._uU(71,"Here you will find a large selection of recipes from all over the world, divided into numerous categories to suit all tastes."),c.qZA(),c.TgZ(72,"p",34),c._uU(73,"Choose from Italian, Asian, Mexican, American, Vegan recipes and many more."),c.qZA()()(),c.TgZ(74,"a",11),c._uU(75,"See all"),c.qZA()(),c.O4$(),c.TgZ(76,"svg",35),c._UZ(77,"path",6),c.qZA(),c.kcU(),c._UZ(78,"app-footer")),2&t&&(c.xp6(15),c.Q6J("routerLink",c.DdM(4,Qw)),c.xp6(8),c.Q6J("ngForOf",r.recipes),c.xp6(1),c.Q6J("routerLink",c.DdM(5,Jw)),c.xp6(50),c.Q6J("routerLink",c.DdM(6,Jw)))},dependencies:[Ai,La,kc,Nu],styles:['section[_ngcontent-%COMP%]{position:relative;height:100vh;overflow:hidden;display:flex;justify-content:center;align-items:center}section[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover}section[_ngcontent-%COMP%]   .intro[_ngcontent-%COMP%]{position:absolute;z-index:1}section[_ngcontent-%COMP%]   .intro[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], section[_ngcontent-%COMP%]   .intro[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#242424;text-shadow:1px 2px 5px #9b9a9a}section[_ngcontent-%COMP%]   .intro[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#ec4e1f}section[_ngcontent-%COMP%]:before{content:"";position:absolute;bottom:0;width:100%;height:100px;background:linear-gradient(to top,#88D398,transparent);z-index:1000}#onda-due[_ngcontent-%COMP%]{rotate:180deg}.background[_ngcontent-%COMP%]{background-image:url(graphic-food-vecteezy.e3463570966e1e25.jpg);height:500px;background-attachment:fixed}.food[_ngcontent-%COMP%]{position:relative;color:#fff}.food[_ngcontent-%COMP%]:hover   span[_ngcontent-%COMP%]{visibility:visible}.food[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#fff;border-radius:50%;visibility:hidden;position:absolute;bottom:0;left:0;right:0;background:radial-gradient(rgba(46,46,46,.5843137255),transparent);overflow:hidden;height:100%;width:100%}']}),n})();var gf,Mt,Xw,Qd,Nc,UR,VI,BI,Lg={},HI=[],Ei=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function Ml(n,e){for(var t in e)n[t]=e[t];return n}function jI(n){var e=n.parentNode;e&&e.removeChild(n)}function be(n,e,t){var r,i,s,l={};for(s in e)"key"==s?r=e[s]:"ref"==s?i=e[s]:l[s]=e[s];if(arguments.length>2&&(l.children=arguments.length>3?gf.call(arguments,2):t),"function"==typeof n&&null!=n.defaultProps)for(s in n.defaultProps)void 0===l[s]&&(l[s]=n.defaultProps[s]);return mf(n,l,r,i,null)}function mf(n,e,t,r,i){var s={type:n,props:e,key:t,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:i??++Xw};return null==i&&null!=Mt.vnode&&Mt.vnode(s),s}function Cr(n){return n.children}function Jd(n,e,t){"-"===e[0]?n.setProperty(e,t??""):n[e]=null==t?"":"number"!=typeof t||Ei.test(e)?t:t+"px"}function Z_(n,e,t,r,i){var s;e:if("style"===e)if("string"==typeof t)n.style.cssText=t;else{if("string"==typeof r&&(n.style.cssText=r=""),r)for(e in r)t&&e in t||Jd(n.style,e,"");if(t)for(e in t)r&&t[e]===r[e]||Jd(n.style,e,t[e])}else if("o"===e[0]&&"n"===e[1])s=e!==(e=e.replace(/Capture$/,"")),e=e.toLowerCase()in n?e.toLowerCase().slice(2):e.slice(2),n.l||(n.l={}),n.l[e+s]=t,t?r||n.addEventListener(e,s?eb:zI,s):n.removeEventListener(e,s?eb:zI,s);else if("dangerouslySetInnerHTML"!==e){if(i)e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("width"!==e&&"height"!==e&&"href"!==e&&"list"!==e&&"form"!==e&&"tabIndex"!==e&&"download"!==e&&e in n)try{n[e]=t??"";break e}catch{}"function"==typeof t||(null==t||!1===t&&-1==e.indexOf("-")?n.removeAttribute(e):n.setAttribute(e,t))}}function zI(n){Qd=!0;try{return this.l[n.type+!1](Mt.event?Mt.event(n):n)}finally{Qd=!1}}function eb(n){Qd=!0;try{return this.l[n.type+!0](Mt.event?Mt.event(n):n)}finally{Qd=!1}}function io(n,e){this.props=n,this.context=e}function _f(n,e){if(null==e)return n.__?_f(n.__,n.__.__k.indexOf(n)+1):null;for(var t;e<n.__k.length;e++)if(null!=(t=n.__k[e])&&null!=t.__e)return t.__e;return"function"==typeof n.type?_f(n):null}function VR(n){var e,t;if(null!=(n=n.__)&&null!=n.__c){for(n.__e=n.__c.base=null,e=0;e<n.__k.length;e++)if(null!=(t=n.__k[e])&&null!=t.__e){n.__e=n.__c.base=t.__e;break}return VR(n)}}function GI(n){Qd?setTimeout(n):VI(n)}function Fg(n){(!n.__d&&(n.__d=!0)&&Nc.push(n)&&!No.__r++||UR!==Mt.debounceRendering)&&((UR=Mt.debounceRendering)||GI)(No)}function No(){var n,e,t,r,i,s,l,d;for(Nc.sort(function(f,y){return f.__v.__b-y.__v.__b});n=Nc.shift();)n.__d&&(e=Nc.length,r=void 0,i=void 0,l=(s=(t=n).__v).__e,(d=t.__P)&&(r=[],(i=Ml({},s)).__v=s.__v+1,K_(d,s,i,t.__n,void 0!==d.ownerSVGElement,null!=s.__h?[l]:null,r,l??_f(s),s.__h),tb(r,s),s.__e!=l&&VR(s)),Nc.length>e&&Nc.sort(function(f,y){return f.__v.__b-y.__v.__b}));No.__r=0}function WI(n,e,t,r,i,s,l,d,f,y){var w,D,x,N,U,Q,X,ae=r&&r.__k||HI,Le=ae.length;for(t.__k=[],w=0;w<e.length;w++)if(null!=(N=t.__k[w]=null==(N=e[w])||"boolean"==typeof N?null:"string"==typeof N||"number"==typeof N||"bigint"==typeof N?mf(null,N,null,null,N):Array.isArray(N)?mf(Cr,{children:N},null,null,null):N.__b>0?mf(N.type,N.props,N.key,N.ref?N.ref:null,N.__v):N)){if(N.__=t,N.__b=t.__b+1,null===(x=ae[w])||x&&N.key==x.key&&N.type===x.type)ae[w]=void 0;else for(D=0;D<Le;D++){if((x=ae[D])&&N.key==x.key&&N.type===x.type){ae[D]=void 0;break}x=null}K_(n,N,x=x||Lg,i,s,l,d,f,y),U=N.__e,(D=N.ref)&&x.ref!=D&&(X||(X=[]),x.ref&&X.push(x.ref,null,N),X.push(D,N.__c||U,N)),null!=U?(null==Q&&(Q=U),"function"==typeof N.type&&N.__k===x.__k?N.__d=f=qI(N,f,n):f=ra(n,N,x,ae,U,f),"function"==typeof t.type&&(t.__d=f)):f&&x.__e==f&&f.parentNode!=n&&(f=_f(x))}for(t.__e=Q,w=Le;w--;)null!=ae[w]&&("function"==typeof t.type&&null!=ae[w].__e&&ae[w].__e==t.__d&&(t.__d=ia(r).nextSibling),KI(ae[w],ae[w]));if(X)for(w=0;w<X.length;w++)ZI(X[w],X[++w],X[++w])}function qI(n,e,t){for(var r,i=n.__k,s=0;i&&s<i.length;s++)(r=i[s])&&(r.__=n,e="function"==typeof r.type?qI(r,e,t):ra(t,r,r,i,r.__e,e));return e}function Hi(n,e){return e=e||[],null==n||"boolean"==typeof n||(Array.isArray(n)?n.some(function(t){Hi(t,e)}):e.push(n)),e}function ra(n,e,t,r,i,s){var l,d,f;if(void 0!==e.__d)l=e.__d,e.__d=void 0;else if(null==t||i!=s||null==i.parentNode)e:if(null==s||s.parentNode!==n)n.appendChild(i),l=null;else{for(d=s,f=0;(d=d.nextSibling)&&f<r.length;f+=1)if(d==i)break e;n.insertBefore(i,s),l=s}return void 0!==l?l:i.nextSibling}function ia(n){var e,t,r;if(null==n.type||"string"==typeof n.type)return n.__e;if(n.__k)for(e=n.__k.length-1;e>=0;e--)if((t=n.__k[e])&&(r=ia(t)))return r;return null}function K_(n,e,t,r,i,s,l,d,f){var y,w,D,x,N,U,Q,X,ae,Le,je,Ye,St,Nt,mn,nn=e.type;if(void 0!==e.constructor)return null;null!=t.__h&&(f=t.__h,d=e.__e=t.__e,e.__h=null,s=[d]),(y=Mt.__b)&&y(e);try{e:if("function"==typeof nn){if(X=e.props,ae=(y=nn.contextType)&&r[y.__c],Le=y?ae?ae.props.value:y.__:r,t.__c?Q=(w=e.__c=t.__c).__=w.__E:("prototype"in nn&&nn.prototype.render?e.__c=w=new nn(X,Le):(e.__c=w=new io(X,Le),w.constructor=nn,w.render=HR),ae&&ae.sub(w),w.props=X,w.state||(w.state={}),w.context=Le,w.__n=r,D=w.__d=!0,w.__h=[],w._sb=[]),null==w.__s&&(w.__s=w.state),null!=nn.getDerivedStateFromProps&&(w.__s==w.state&&(w.__s=Ml({},w.__s)),Ml(w.__s,nn.getDerivedStateFromProps(X,w.__s))),x=w.props,N=w.state,w.__v=e,D)null==nn.getDerivedStateFromProps&&null!=w.componentWillMount&&w.componentWillMount(),null!=w.componentDidMount&&w.__h.push(w.componentDidMount);else{if(null==nn.getDerivedStateFromProps&&X!==x&&null!=w.componentWillReceiveProps&&w.componentWillReceiveProps(X,Le),!w.__e&&null!=w.shouldComponentUpdate&&!1===w.shouldComponentUpdate(X,w.__s,Le)||e.__v===t.__v){for(e.__v!==t.__v&&(w.props=X,w.state=w.__s,w.__d=!1),e.__e=t.__e,e.__k=t.__k,e.__k.forEach(function(ud){ud&&(ud.__=e)}),je=0;je<w._sb.length;je++)w.__h.push(w._sb[je]);w._sb=[],w.__h.length&&l.push(w);break e}null!=w.componentWillUpdate&&w.componentWillUpdate(X,w.__s,Le),null!=w.componentDidUpdate&&w.__h.push(function(){w.componentDidUpdate(x,N,U)})}if(w.context=Le,w.props=X,w.__P=n,Ye=Mt.__r,St=0,"prototype"in nn&&nn.prototype.render){for(w.state=w.__s,w.__d=!1,Ye&&Ye(e),y=w.render(w.props,w.state,w.context),Nt=0;Nt<w._sb.length;Nt++)w.__h.push(w._sb[Nt]);w._sb=[]}else do{w.__d=!1,Ye&&Ye(e),y=w.render(w.props,w.state,w.context),w.state=w.__s}while(w.__d&&++St<25);w.state=w.__s,null!=w.getChildContext&&(r=Ml(Ml({},r),w.getChildContext())),D||null==w.getSnapshotBeforeUpdate||(U=w.getSnapshotBeforeUpdate(x,N)),mn=null!=y&&y.type===Cr&&null==y.key?y.props.children:y,WI(n,Array.isArray(mn)?mn:[mn],e,t,r,i,s,l,d,f),w.base=e.__e,e.__h=null,w.__h.length&&l.push(w),Q&&(w.__E=w.__=null),w.__e=!1}else null==s&&e.__v===t.__v?(e.__k=t.__k,e.__e=t.__e):e.__e=function BR(n,e,t,r,i,s,l,d){var f,y,w,D=t.props,x=e.props,N=e.type,U=0;if("svg"===N&&(i=!0),null!=s)for(;U<s.length;U++)if((f=s[U])&&"setAttribute"in f==!!N&&(N?f.localName===N:3===f.nodeType)){n=f,s[U]=null;break}if(null==n){if(null===N)return document.createTextNode(x);n=i?document.createElementNS("http://www.w3.org/2000/svg",N):document.createElement(N,x.is&&x),s=null,d=!1}if(null===N)D===x||d&&n.data===x||(n.data=x);else{if(s=s&&gf.call(n.childNodes),y=(D=t.props||Lg).dangerouslySetInnerHTML,w=x.dangerouslySetInnerHTML,!d){if(null!=s)for(D={},U=0;U<n.attributes.length;U++)D[n.attributes[U].name]=n.attributes[U].value;(w||y)&&(w&&(y&&w.__html==y.__html||w.__html===n.innerHTML)||(n.innerHTML=w&&w.__html||""))}if(function $I(n,e,t,r,i){var s;for(s in t)"children"===s||"key"===s||s in e||Z_(n,s,null,t[s],r);for(s in e)i&&"function"!=typeof e[s]||"children"===s||"key"===s||"value"===s||"checked"===s||t[s]===e[s]||Z_(n,s,e[s],t[s],r)}(n,x,D,i,d),w)e.__k=[];else if(U=e.props.children,WI(n,Array.isArray(U)?U:[U],e,t,r,i&&"foreignObject"!==N,s,l,s?s[0]:t.__k&&_f(t,0),d),null!=s)for(U=s.length;U--;)null!=s[U]&&jI(s[U]);d||("value"in x&&void 0!==(U=x.value)&&(U!==n.value||"progress"===N&&!U||"option"===N&&U!==D.value)&&Z_(n,"value",U,D.value,!1),"checked"in x&&void 0!==(U=x.checked)&&U!==n.checked&&Z_(n,"checked",U,D.checked,!1))}return n}(t.__e,e,t,r,i,s,l,f);(y=Mt.diffed)&&y(e)}catch(ud){e.__v=null,(f||null!=s)&&(e.__e=d,e.__h=!!f,s[s.indexOf(d)]=null),Mt.__e(ud,e,t)}}function tb(n,e){Mt.__c&&Mt.__c(e,n),n.some(function(t){try{n=t.__h,t.__h=[],n.some(function(r){r.call(t)})}catch(r){Mt.__e(r,t.__v)}})}function ZI(n,e,t){try{"function"==typeof n?n(e):n.current=e}catch(r){Mt.__e(r,t)}}function KI(n,e,t){var r,i;if(Mt.unmount&&Mt.unmount(n),(r=n.ref)&&(r.current&&r.current!==n.__e||ZI(r,null,e)),null!=(r=n.__c)){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(s){Mt.__e(s,e)}r.base=r.__P=null,n.__c=void 0}if(r=n.__k)for(i=0;i<r.length;i++)r[i]&&KI(r[i],e,t||"function"!=typeof n.type);t||null==n.__e||jI(n.__e),n.__=n.__e=n.__d=void 0}function HR(n,e,t){return this.constructor(n,t)}function Nl(n,e,t){var r,i,s;Mt.__&&Mt.__(n,e),i=(r="function"==typeof t)?null:t&&t.__k||e.__k,s=[],K_(e,n=(!r&&t||e).__k=be(Cr,null,[n]),i||Lg,Lg,void 0!==e.ownerSVGElement,!r&&t?[t]:i?null:e.firstChild?gf.call(e.childNodes):null,s,!r&&t?t:i?i.__e:e.firstChild,r),tb(s,n)}gf=HI.slice,Mt={__e:function(n,e,t,r){for(var i,s,l;e=e.__;)if((i=e.__c)&&!i.__)try{if((s=i.constructor)&&null!=s.getDerivedStateFromError&&(i.setState(s.getDerivedStateFromError(n)),l=i.__d),null!=i.componentDidCatch&&(i.componentDidCatch(n,r||{}),l=i.__d),l)return i.__E=i}catch(d){n=d}throw n}},Xw=0,Qd=!1,io.prototype.setState=function(n,e){var t;t=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=Ml({},this.state),"function"==typeof n&&(n=n(Ml({},t),this.props)),n&&Ml(t,n),null!=n&&this.__v&&(e&&this._sb.push(e),Fg(this))},io.prototype.forceUpdate=function(n){this.__v&&(this.__e=!0,n&&this.__h.push(n),Fg(this))},io.prototype.render=Cr,Nc=[],VI="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,No.__r=0,BI=0;var cr,Y_,Ug,rb=[],Vg=[],Q_=Mt.__b,Bg=Mt.__r,J_=Mt.diffed,ib=Mt.__c,sb=Mt.unmount;function KR(){for(var n;n=rb.shift();)if(n.__P&&n.__H)try{n.__H.__h.forEach(ey),n.__H.__h.forEach(ub),n.__H.__h=[]}catch(e){n.__H.__h=[],Mt.__e(e,n.__v)}}Mt.__b=function(n){cr=null,Q_&&Q_(n)},Mt.__r=function(n){Bg&&Bg(n);var e=(cr=n.__c).__H;e&&(Y_===cr?(e.__h=[],cr.__h=[],e.__.forEach(function(t){t.__N&&(t.__=t.__N),t.__V=Vg,t.__N=t.i=void 0})):(e.__h.forEach(ey),e.__h.forEach(ub),e.__h=[])),Y_=cr},Mt.diffed=function(n){J_&&J_(n);var e=n.__c;e&&e.__H&&(e.__H.__h.length&&(1!==rb.push(e)&&Ug===Mt.requestAnimationFrame||((Ug=Mt.requestAnimationFrame)||YR)(KR)),e.__H.__.forEach(function(t){t.i&&(t.__H=t.i),t.__V!==Vg&&(t.__=t.__V),t.i=void 0,t.__V=Vg})),Y_=cr=null},Mt.__c=function(n,e){e.some(function(t){try{t.__h.forEach(ey),t.__h=t.__h.filter(function(r){return!r.__||ub(r)})}catch(r){e.some(function(i){i.__h&&(i.__h=[])}),e=[],Mt.__e(r,t.__v)}}),ib&&ib(n,e)},Mt.unmount=function(n){sb&&sb(n);var e,t=n.__c;t&&t.__H&&(t.__H.__.forEach(function(r){try{ey(r)}catch(i){e=i}}),t.__H=void 0,e&&Mt.__e(e,t.__v))};var YI="function"==typeof requestAnimationFrame;function YR(n){var e,t=function(){clearTimeout(r),YI&&cancelAnimationFrame(e),setTimeout(n)},r=setTimeout(t,100);YI&&(e=requestAnimationFrame(t))}function ey(n){var e=cr,t=n.__c;"function"==typeof t&&(n.__c=void 0,t()),cr=e}function ub(n){var e=cr;n.__c=n.__(),cr=e}function db(n,e){for(var t in n)if("__source"!==t&&!(t in e))return!0;for(var r in e)if("__source"!==r&&n[r]!==e[r])return!0;return!1}function ty(n){this.props=n}(ty.prototype=new io).isPureReactComponent=!0,ty.prototype.shouldComponentUpdate=function(n,e){return db(this.props,n)||db(this.state,e)};var fb=Mt.__b;Mt.__b=function(n){n.type&&n.type.__f&&n.ref&&(n.props.ref=n.ref,n.ref=null),fb&&fb(n)},typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.forward_ref");var rD=Mt.__e;Mt.__e=function(n,e,t,r){if(n.then)for(var i,s=e;s=s.__;)if((i=s.__c)&&i.__c)return null==e.__e&&(e.__e=t.__e,e.__k=t.__k),i.__c(n,e);rD(n,e,t,r)};var gb=Mt.unmount;function mb(n,e,t){return n&&(n.__c&&n.__c.__H&&(n.__c.__H.__.forEach(function(r){"function"==typeof r.__c&&r.__c()}),n.__c.__H=null),null!=(n=function JI(n,e){for(var t in e)n[t]=e[t];return n}({},n)).__c&&(n.__c.__P===t&&(n.__c.__P=e),n.__c=null),n.__k=n.__k&&n.__k.map(function(r){return mb(r,e,t)})),n}function _b(n,e,t){return n&&(n.__v=null,n.__k=n.__k&&n.__k.map(function(r){return _b(r,e,t)}),n.__c&&n.__c.__P===e&&(n.__e&&t.insertBefore(n.__e,n.__d),n.__c.__e=!0,n.__c.__P=t)),n}function Pl(){this.__u=0,this.t=null,this.__b=null}function iD(n){var e=n.__.__c;return e&&e.__a&&e.__a(n)}function Ol(){this.u=null,this.o=null}Mt.unmount=function(n){var e=n.__c;e&&e.__R&&e.__R(),e&&!0===n.__h&&(n.type=null),gb&&gb(n)},(Pl.prototype=new io).__c=function(n,e){var t=e.__c,r=this;null==r.t&&(r.t=[]),r.t.push(t);var i=iD(r.__v),s=!1,l=function(){s||(s=!0,t.__R=null,i?i(d):d())};t.__R=l;var d=function(){if(!--r.__u){if(r.state.__a){var y=r.state.__a;r.__v.__k[0]=_b(y,y.__c.__P,y.__c.__O)}var w;for(r.setState({__a:r.__b=null});w=r.t.pop();)w.forceUpdate()}},f=!0===e.__h;r.__u++||f||r.setState({__a:r.__b=r.__v.__k[0]}),n.then(l,l)},Pl.prototype.componentWillUnmount=function(){this.t=[]},Pl.prototype.render=function(n,e){if(this.__b){if(this.__v.__k){var t=document.createElement("div"),r=this.__v.__k[0].__c;this.__v.__k[0]=mb(this.__b,t,r.__O=r.__P)}this.__b=null}var i=e.__a&&be(Cr,null,n.fallback);return i&&(i.__h=null),[be(Cr,null,e.__a?null:n.children),i]};var JR=function(n,e,t){if(++t[1]===t[0]&&n.o.delete(e),n.props.revealOrder&&("t"!==n.props.revealOrder[0]||!n.o.size))for(t=n.u;t;){for(;t.length>3;)t.pop()();if(t[1]<t[0])break;n.u=t=t[2]}};function yb(n){return this.getChildContext=function(){return n.context},n.children}function yF(n){var e=this,t=n.i;e.componentWillUnmount=function(){Nl(null,e.l),e.l=null,e.i=null},e.i&&e.i!==t&&e.componentWillUnmount(),n.__v?(e.l||(e.i=t,e.l={nodeType:1,parentNode:t,childNodes:[],appendChild:function(r){this.childNodes.push(r),e.i.appendChild(r)},insertBefore:function(r,i){this.childNodes.push(r),e.i.appendChild(r)},removeChild:function(r){this.childNodes.splice(this.childNodes.indexOf(r)>>>1,1),e.i.removeChild(r)}}),Nl(be(yb,{context:e.context},n.__v),e.l)):e.l&&e.componentWillUnmount()}(Ol.prototype=new io).__a=function(n){var e=this,t=iD(e.__v),r=e.o.get(n);return r[0]++,function(i){var s=function(){e.props.revealOrder?(r.push(i),JR(e,n,r)):i()};t?t(s):s()}},Ol.prototype.render=function(n){this.u=null,this.o=new Map;var e=Hi(n.children);n.revealOrder&&"b"===n.revealOrder[0]&&e.reverse();for(var t=e.length;t--;)this.o.set(e[t],this.u=[1,0,this.u]);return n.children},Ol.prototype.componentDidUpdate=Ol.prototype.componentDidMount=function(){var n=this;this.o.forEach(function(e,t){JR(n,t,e)})};var wb=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,vF=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,Kt=typeof document<"u",XR=function(n){return(typeof Symbol<"u"&&"symbol"==typeof Symbol()?/fil|che|rad/i:/fil|che|ra/i).test(n)};io.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(n){Object.defineProperty(io.prototype,n,{configurable:!0,get:function(){return this["UNSAFE_"+n]},set:function(e){Object.defineProperty(this,n,{configurable:!0,writable:!0,value:e})}})});var Xd=Mt.event;function nM(){}function ny(){return this.cancelBubble}function ry(){return this.defaultPrevented}Mt.event=function(n){return Xd&&(n=Xd(n)),n.persist=nM,n.isPropagationStopped=ny,n.isDefaultPrevented=ry,n.nativeEvent=n};var rM={configurable:!0,get:function(){return this.class}},bb=Mt.vnode;Mt.vnode=function(n){var e=n.type,t=n.props,r=t;if("string"==typeof e){var i=-1===e.indexOf("-");for(var s in r={},t){var l=t[s];Kt&&"children"===s&&"noscript"===e||"value"===s&&"defaultValue"in t&&null==l||("defaultValue"===s&&"value"in t&&null==t.value?s="value":"download"===s&&!0===l?l="":/ondoubleclick/i.test(s)?s="ondblclick":/^onchange(textarea|input)/i.test(s+e)&&!XR(t.type)?s="oninput":/^onfocus$/i.test(s)?s="onfocusin":/^onblur$/i.test(s)?s="onfocusout":/^on(Ani|Tra|Tou|BeforeInp|Compo)/.test(s)?s=s.toLowerCase():i&&vF.test(s)?s=s.replace(/[A-Z0-9]/g,"-$&").toLowerCase():null===l&&(l=void 0),/^oninput$/i.test(s)&&(s=s.toLowerCase(),r[s]&&(s="oninputCapture")),r[s]=l)}"select"==e&&r.multiple&&Array.isArray(r.value)&&(r.value=Hi(t.children).forEach(function(d){d.props.selected=-1!=r.value.indexOf(d.props.value)})),"select"==e&&null!=r.defaultValue&&(r.value=Hi(t.children).forEach(function(d){d.props.selected=r.multiple?-1!=r.defaultValue.indexOf(d.props.value):r.defaultValue==d.props.value})),n.props=r,t.class!=t.className&&(rM.enumerable="className"in t,null!=t.className&&(r.class=t.className),Object.defineProperty(r,"className",rM))}n.$$typeof=wb,bb&&bb(n)};var Eb=Mt.__r;Mt.__r=function(n){Eb&&Eb(n)};const cD=[],eh=new Map,wf=" fullcalendar styles ";function dD(n){cD.push(n),eh.forEach(e=>{Ib(n,e)})}function hD(n,e=n,t=e.firstChild){if(!eh.has(n)){const r=document.createComment(wf),i=document.createComment(` END${wf}`);e.insertBefore(i,t),e.insertBefore(r,i),eh.set(n,i),function fD(n){for(const e of cD)Ib(e,n)}(i)}}function Ib(n,e){const t=document.createElement("style"),r=function fM(){return void 0===sy&&(sy=function pD(){const n=document.querySelector('meta[name="csp-nonce"]');if(n&&n.hasAttribute("content"))return n.getAttribute("content");const e=document.querySelector("script[nonce]");return e&&e.nonce||""}()),sy}();r&&(t.nonce=r),t.innerText=n,e.parentNode.insertBefore(t,e)}let sy;function gD(n){n.parentNode&&n.parentNode.removeChild(n)}function Lc(n,e){if(n.closest)return n.closest(e);if(!document.documentElement.contains(n))return null;do{if(gM(n,e))return n;n=n.parentElement||n.parentNode}while(null!==n&&1===n.nodeType);return null}function gM(n,e){return(n.matches||n.matchesSelector||n.msMatchesSelector).call(n,e)}typeof document<"u"&&hD(document,document.head,document.head.querySelector("script,link,style")),dD(':root{--fc-small-font-size:.85em;--fc-page-bg-color:#fff;--fc-neutral-bg-color:hsla(0,0%,82%,.3);--fc-neutral-text-color:grey;--fc-border-color:#ddd;--fc-button-text-color:#fff;--fc-button-bg-color:#2c3e50;--fc-button-border-color:#2c3e50;--fc-button-hover-bg-color:#1e2b37;--fc-button-hover-border-color:#1a252f;--fc-button-active-bg-color:#1a252f;--fc-button-active-border-color:#151e27;--fc-event-bg-color:#3788d8;--fc-event-border-color:#3788d8;--fc-event-text-color:#fff;--fc-event-selected-overlay-color:rgba(0,0,0,.25);--fc-more-link-bg-color:#d0d0d0;--fc-more-link-text-color:inherit;--fc-event-resizer-thickness:8px;--fc-event-resizer-dot-total-width:8px;--fc-event-resizer-dot-border-width:1px;--fc-non-business-color:hsla(0,0%,84%,.3);--fc-bg-event-color:#8fdf82;--fc-bg-event-opacity:0.3;--fc-highlight-color:rgba(188,232,241,.3);--fc-today-bg-color:rgba(255,220,40,.15);--fc-now-indicator-color:red}.fc-not-allowed,.fc-not-allowed .fc-event{cursor:not-allowed}.fc{display:flex;flex-direction:column;font-size:1em}.fc,.fc *,.fc :after,.fc :before{box-sizing:border-box}.fc table{border-collapse:collapse;border-spacing:0;font-size:1em}.fc th{text-align:center}.fc td,.fc th{padding:0;vertical-align:top}.fc a[data-navlink]{cursor:pointer}.fc a[data-navlink]:hover{text-decoration:underline}.fc-direction-ltr{direction:ltr;text-align:left}.fc-direction-rtl{direction:rtl;text-align:right}.fc-theme-standard td,.fc-theme-standard th{border:1px solid var(--fc-border-color)}.fc-liquid-hack td,.fc-liquid-hack th{position:relative}@font-face{font-family:fcicons;font-style:normal;font-weight:400;src:url("data:application/x-font-ttf;charset=utf-8;base64,AAEAAAALAIAAAwAwT1MvMg8SBfAAAAC8AAAAYGNtYXAXVtKNAAABHAAAAFRnYXNwAAAAEAAAAXAAAAAIZ2x5ZgYydxIAAAF4AAAFNGhlYWQUJ7cIAAAGrAAAADZoaGVhB20DzAAABuQAAAAkaG10eCIABhQAAAcIAAAALGxvY2ED4AU6AAAHNAAAABhtYXhwAA8AjAAAB0wAAAAgbmFtZXsr690AAAdsAAABhnBvc3QAAwAAAAAI9AAAACAAAwPAAZAABQAAApkCzAAAAI8CmQLMAAAB6wAzAQkAAAAAAAAAAAAAAAAAAAABEAAAAAAAAAAAAAAAAAAAAABAAADpBgPA/8AAQAPAAEAAAAABAAAAAAAAAAAAAAAgAAAAAAADAAAAAwAAABwAAQADAAAAHAADAAEAAAAcAAQAOAAAAAoACAACAAIAAQAg6Qb//f//AAAAAAAg6QD//f//AAH/4xcEAAMAAQAAAAAAAAAAAAAAAQAB//8ADwABAAAAAAAAAAAAAgAANzkBAAAAAAEAAAAAAAAAAAACAAA3OQEAAAAAAQAAAAAAAAAAAAIAADc5AQAAAAABAWIAjQKeAskAEwAAJSc3NjQnJiIHAQYUFwEWMjc2NCcCnuLiDQ0MJAz/AA0NAQAMJAwNDcni4gwjDQwM/wANIwz/AA0NDCMNAAAAAQFiAI0CngLJABMAACUBNjQnASYiBwYUHwEHBhQXFjI3AZ4BAA0N/wAMJAwNDeLiDQ0MJAyNAQAMIw0BAAwMDSMM4uINIwwNDQAAAAIA4gC3Ax4CngATACcAACUnNzY0JyYiDwEGFB8BFjI3NjQnISc3NjQnJiIPAQYUHwEWMjc2NCcB87e3DQ0MIw3VDQ3VDSMMDQ0BK7e3DQ0MJAzVDQ3VDCQMDQ3zuLcMJAwNDdUNIwzWDAwNIwy4twwkDA0N1Q0jDNYMDA0jDAAAAgDiALcDHgKeABMAJwAAJTc2NC8BJiIHBhQfAQcGFBcWMjchNzY0LwEmIgcGFB8BBwYUFxYyNwJJ1Q0N1Q0jDA0Nt7cNDQwjDf7V1Q0N1QwkDA0Nt7cNDQwkDLfWDCMN1Q0NDCQMt7gMIw0MDNYMIw3VDQ0MJAy3uAwjDQwMAAADAFUAAAOrA1UAMwBoAHcAABMiBgcOAQcOAQcOARURFBYXHgEXHgEXHgEzITI2Nz4BNz4BNz4BNRE0JicuAScuAScuASMFITIWFx4BFx4BFx4BFREUBgcOAQcOAQcOASMhIiYnLgEnLgEnLgE1ETQ2Nz4BNz4BNz4BMxMhMjY1NCYjISIGFRQWM9UNGAwLFQkJDgUFBQUFBQ4JCRULDBgNAlYNGAwLFQkJDgUFBQUFBQ4JCRULDBgN/aoCVgQIBAQHAwMFAQIBAQIBBQMDBwQECAT9qgQIBAQHAwMFAQIBAQIBBQMDBwQECASAAVYRGRkR/qoRGRkRA1UFBAUOCQkVDAsZDf2rDRkLDBUJCA4FBQUFBQUOCQgVDAsZDQJVDRkLDBUJCQ4FBAVVAgECBQMCBwQECAX9qwQJAwQHAwMFAQICAgIBBQMDBwQDCQQCVQUIBAQHAgMFAgEC/oAZEhEZGRESGQAAAAADAFUAAAOrA1UAMwBoAIkAABMiBgcOAQcOAQcOARURFBYXHgEXHgEXHgEzITI2Nz4BNz4BNz4BNRE0JicuAScuAScuASMFITIWFx4BFx4BFx4BFREUBgcOAQcOAQcOASMhIiYnLgEnLgEnLgE1ETQ2Nz4BNz4BNz4BMxMzFRQWMzI2PQEzMjY1NCYrATU0JiMiBh0BIyIGFRQWM9UNGAwLFQkJDgUFBQUFBQ4JCRULDBgNAlYNGAwLFQkJDgUFBQUFBQ4JCRULDBgN/aoCVgQIBAQHAwMFAQIBAQIBBQMDBwQECAT9qgQIBAQHAwMFAQIBAQIBBQMDBwQECASAgBkSEhmAERkZEYAZEhIZgBEZGREDVQUEBQ4JCRUMCxkN/asNGQsMFQkIDgUFBQUFBQ4JCBUMCxkNAlUNGQsMFQkJDgUEBVUCAQIFAwIHBAQIBf2rBAkDBAcDAwUBAgICAgEFAwMHBAMJBAJVBQgEBAcCAwUCAQL+gIASGRkSgBkSERmAEhkZEoAZERIZAAABAOIAjQMeAskAIAAAExcHBhQXFjI/ARcWMjc2NC8BNzY0JyYiDwEnJiIHBhQX4uLiDQ0MJAzi4gwkDA0N4uINDQwkDOLiDCQMDQ0CjeLiDSMMDQ3h4Q0NDCMN4uIMIw0MDOLiDAwNIwwAAAABAAAAAQAAa5n0y18PPPUACwQAAAAAANivOVsAAAAA2K85WwAAAAADqwNVAAAACAACAAAAAAAAAAEAAAPA/8AAAAQAAAAAAAOrAAEAAAAAAAAAAAAAAAAAAAALBAAAAAAAAAAAAAAAAgAAAAQAAWIEAAFiBAAA4gQAAOIEAABVBAAAVQQAAOIAAAAAAAoAFAAeAEQAagCqAOoBngJkApoAAQAAAAsAigADAAAAAAACAAAAAAAAAAAAAAAAAAAAAAAAAA4ArgABAAAAAAABAAcAAAABAAAAAAACAAcAYAABAAAAAAADAAcANgABAAAAAAAEAAcAdQABAAAAAAAFAAsAFQABAAAAAAAGAAcASwABAAAAAAAKABoAigADAAEECQABAA4ABwADAAEECQACAA4AZwADAAEECQADAA4APQADAAEECQAEAA4AfAADAAEECQAFABYAIAADAAEECQAGAA4AUgADAAEECQAKADQApGZjaWNvbnMAZgBjAGkAYwBvAG4Ac1ZlcnNpb24gMS4wAFYAZQByAHMAaQBvAG4AIAAxAC4AMGZjaWNvbnMAZgBjAGkAYwBvAG4Ac2ZjaWNvbnMAZgBjAGkAYwBvAG4Ac1JlZ3VsYXIAUgBlAGcAdQBsAGEAcmZjaWNvbnMAZgBjAGkAYwBvAG4Ac0ZvbnQgZ2VuZXJhdGVkIGJ5IEljb01vb24uAEYAbwBuAHQAIABnAGUAbgBlAHIAYQB0AGUAZAAgAGIAeQAgAEkAYwBvAE0AbwBvAG4ALgAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA=") format("truetype")}.fc-icon{speak:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;display:inline-block;font-family:fcicons!important;font-style:normal;font-variant:normal;font-weight:400;height:1em;line-height:1;text-align:center;text-transform:none;-webkit-user-select:none;-moz-user-select:none;user-select:none;width:1em}.fc-icon-chevron-left:before{content:"\\e900"}.fc-icon-chevron-right:before{content:"\\e901"}.fc-icon-chevrons-left:before{content:"\\e902"}.fc-icon-chevrons-right:before{content:"\\e903"}.fc-icon-minus-square:before{content:"\\e904"}.fc-icon-plus-square:before{content:"\\e905"}.fc-icon-x:before{content:"\\e906"}.fc .fc-button{border-radius:0;font-family:inherit;font-size:inherit;line-height:inherit;margin:0;overflow:visible;text-transform:none}.fc .fc-button:focus{outline:1px dotted;outline:5px auto -webkit-focus-ring-color}.fc .fc-button{-webkit-appearance:button}.fc .fc-button:not(:disabled){cursor:pointer}.fc .fc-button::-moz-focus-inner{border-style:none;padding:0}.fc .fc-button{background-color:transparent;border:1px solid transparent;border-radius:.25em;display:inline-block;font-size:1em;font-weight:400;line-height:1.5;padding:.4em .65em;text-align:center;-webkit-user-select:none;-moz-user-select:none;user-select:none;vertical-align:middle}.fc .fc-button:hover{text-decoration:none}.fc .fc-button:focus{box-shadow:0 0 0 .2rem rgba(44,62,80,.25);outline:0}.fc .fc-button:disabled{opacity:.65}.fc .fc-button-primary{background-color:var(--fc-button-bg-color);border-color:var(--fc-button-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:hover{background-color:var(--fc-button-hover-bg-color);border-color:var(--fc-button-hover-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:disabled{background-color:var(--fc-button-bg-color);border-color:var(--fc-button-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:focus{box-shadow:0 0 0 .2rem rgba(76,91,106,.5)}.fc .fc-button-primary:not(:disabled).fc-button-active,.fc .fc-button-primary:not(:disabled):active{background-color:var(--fc-button-active-bg-color);border-color:var(--fc-button-active-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:not(:disabled).fc-button-active:focus,.fc .fc-button-primary:not(:disabled):active:focus{box-shadow:0 0 0 .2rem rgba(76,91,106,.5)}.fc .fc-button .fc-icon{font-size:1.5em;vertical-align:middle}.fc .fc-button-group{display:inline-flex;position:relative;vertical-align:middle}.fc .fc-button-group>.fc-button{flex:1 1 auto;position:relative}.fc .fc-button-group>.fc-button.fc-button-active,.fc .fc-button-group>.fc-button:active,.fc .fc-button-group>.fc-button:focus,.fc .fc-button-group>.fc-button:hover{z-index:1}.fc-direction-ltr .fc-button-group>.fc-button:not(:first-child){border-bottom-left-radius:0;border-top-left-radius:0;margin-left:-1px}.fc-direction-ltr .fc-button-group>.fc-button:not(:last-child){border-bottom-right-radius:0;border-top-right-radius:0}.fc-direction-rtl .fc-button-group>.fc-button:not(:first-child){border-bottom-right-radius:0;border-top-right-radius:0;margin-right:-1px}.fc-direction-rtl .fc-button-group>.fc-button:not(:last-child){border-bottom-left-radius:0;border-top-left-radius:0}.fc .fc-toolbar{align-items:center;display:flex;justify-content:space-between}.fc .fc-toolbar.fc-header-toolbar{margin-bottom:1.5em}.fc .fc-toolbar.fc-footer-toolbar{margin-top:1.5em}.fc .fc-toolbar-title{font-size:1.75em;margin:0}.fc-direction-ltr .fc-toolbar>*>:not(:first-child){margin-left:.75em}.fc-direction-rtl .fc-toolbar>*>:not(:first-child){margin-right:.75em}.fc-direction-rtl .fc-toolbar-ltr{flex-direction:row-reverse}.fc .fc-scroller{-webkit-overflow-scrolling:touch;position:relative}.fc .fc-scroller-liquid{height:100%}.fc .fc-scroller-liquid-absolute{bottom:0;left:0;position:absolute;right:0;top:0}.fc .fc-scroller-harness{direction:ltr;overflow:hidden;position:relative}.fc .fc-scroller-harness-liquid{height:100%}.fc-direction-rtl .fc-scroller-harness>.fc-scroller{direction:rtl}.fc-theme-standard .fc-scrollgrid{border:1px solid var(--fc-border-color)}.fc .fc-scrollgrid,.fc .fc-scrollgrid table{table-layout:fixed;width:100%}.fc .fc-scrollgrid table{border-left-style:hidden;border-right-style:hidden;border-top-style:hidden}.fc .fc-scrollgrid{border-bottom-width:0;border-collapse:separate;border-right-width:0}.fc .fc-scrollgrid-liquid{height:100%}.fc .fc-scrollgrid-section,.fc .fc-scrollgrid-section table,.fc .fc-scrollgrid-section>td{height:1px}.fc .fc-scrollgrid-section-liquid>td{height:100%}.fc .fc-scrollgrid-section>*{border-left-width:0;border-top-width:0}.fc .fc-scrollgrid-section-footer>*,.fc .fc-scrollgrid-section-header>*{border-bottom-width:0}.fc .fc-scrollgrid-section-body table,.fc .fc-scrollgrid-section-footer table{border-bottom-style:hidden}.fc .fc-scrollgrid-section-sticky>*{background:var(--fc-page-bg-color);position:sticky;z-index:3}.fc .fc-scrollgrid-section-header.fc-scrollgrid-section-sticky>*{top:0}.fc .fc-scrollgrid-section-footer.fc-scrollgrid-section-sticky>*{bottom:0}.fc .fc-scrollgrid-sticky-shim{height:1px;margin-bottom:-1px}.fc-sticky{position:sticky}.fc .fc-view-harness{flex-grow:1;position:relative}.fc .fc-view-harness-active>.fc-view{bottom:0;left:0;position:absolute;right:0;top:0}.fc .fc-col-header-cell-cushion{display:inline-block;padding:2px 4px}.fc .fc-bg-event,.fc .fc-highlight,.fc .fc-non-business{bottom:0;left:0;position:absolute;right:0;top:0}.fc .fc-non-business{background:var(--fc-non-business-color)}.fc .fc-bg-event{background:var(--fc-bg-event-color);opacity:var(--fc-bg-event-opacity)}.fc .fc-bg-event .fc-event-title{font-size:var(--fc-small-font-size);font-style:italic;margin:.5em}.fc .fc-highlight{background:var(--fc-highlight-color)}.fc .fc-cell-shaded,.fc .fc-day-disabled{background:var(--fc-neutral-bg-color)}a.fc-event,a.fc-event:hover{text-decoration:none}.fc-event.fc-event-draggable,.fc-event[href]{cursor:pointer}.fc-event .fc-event-main{position:relative;z-index:2}.fc-event-dragging:not(.fc-event-selected){opacity:.75}.fc-event-dragging.fc-event-selected{box-shadow:0 2px 7px rgba(0,0,0,.3)}.fc-event .fc-event-resizer{display:none;position:absolute;z-index:4}.fc-event-selected .fc-event-resizer,.fc-event:hover .fc-event-resizer{display:block}.fc-event-selected .fc-event-resizer{background:var(--fc-page-bg-color);border-color:inherit;border-radius:calc(var(--fc-event-resizer-dot-total-width)/2);border-style:solid;border-width:var(--fc-event-resizer-dot-border-width);height:var(--fc-event-resizer-dot-total-width);width:var(--fc-event-resizer-dot-total-width)}.fc-event-selected .fc-event-resizer:before{bottom:-20px;content:"";left:-20px;position:absolute;right:-20px;top:-20px}.fc-event-selected,.fc-event:focus{box-shadow:0 2px 5px rgba(0,0,0,.2)}.fc-event-selected:before,.fc-event:focus:before{bottom:0;content:"";left:0;position:absolute;right:0;top:0;z-index:3}.fc-event-selected:after,.fc-event:focus:after{background:var(--fc-event-selected-overlay-color);bottom:-1px;content:"";left:-1px;position:absolute;right:-1px;top:-1px;z-index:1}.fc-h-event{background-color:var(--fc-event-bg-color);border:1px solid var(--fc-event-border-color);display:block}.fc-h-event .fc-event-main{color:var(--fc-event-text-color)}.fc-h-event .fc-event-main-frame{display:flex}.fc-h-event .fc-event-time{max-width:100%;overflow:hidden}.fc-h-event .fc-event-title-container{flex-grow:1;flex-shrink:1;min-width:0}.fc-h-event .fc-event-title{display:inline-block;left:0;max-width:100%;overflow:hidden;right:0;vertical-align:top}.fc-h-event.fc-event-selected:before{bottom:-10px;top:-10px}.fc-direction-ltr .fc-daygrid-block-event:not(.fc-event-start),.fc-direction-rtl .fc-daygrid-block-event:not(.fc-event-end){border-bottom-left-radius:0;border-left-width:0;border-top-left-radius:0}.fc-direction-ltr .fc-daygrid-block-event:not(.fc-event-end),.fc-direction-rtl .fc-daygrid-block-event:not(.fc-event-start){border-bottom-right-radius:0;border-right-width:0;border-top-right-radius:0}.fc-h-event:not(.fc-event-selected) .fc-event-resizer{bottom:0;top:0;width:var(--fc-event-resizer-thickness)}.fc-direction-ltr .fc-h-event:not(.fc-event-selected) .fc-event-resizer-start,.fc-direction-rtl .fc-h-event:not(.fc-event-selected) .fc-event-resizer-end{cursor:w-resize;left:calc(var(--fc-event-resizer-thickness)*-.5)}.fc-direction-ltr .fc-h-event:not(.fc-event-selected) .fc-event-resizer-end,.fc-direction-rtl .fc-h-event:not(.fc-event-selected) .fc-event-resizer-start{cursor:e-resize;right:calc(var(--fc-event-resizer-thickness)*-.5)}.fc-h-event.fc-event-selected .fc-event-resizer{margin-top:calc(var(--fc-event-resizer-dot-total-width)*-.5);top:50%}.fc-direction-ltr .fc-h-event.fc-event-selected .fc-event-resizer-start,.fc-direction-rtl .fc-h-event.fc-event-selected .fc-event-resizer-end{left:calc(var(--fc-event-resizer-dot-total-width)*-.5)}.fc-direction-ltr .fc-h-event.fc-event-selected .fc-event-resizer-end,.fc-direction-rtl .fc-h-event.fc-event-selected .fc-event-resizer-start{right:calc(var(--fc-event-resizer-dot-total-width)*-.5)}.fc .fc-popover{box-shadow:0 2px 6px rgba(0,0,0,.15);position:absolute;z-index:9999}.fc .fc-popover-header{align-items:center;display:flex;flex-direction:row;justify-content:space-between;padding:3px 4px}.fc .fc-popover-title{margin:0 2px}.fc .fc-popover-close{cursor:pointer;font-size:1.1em;opacity:.65}.fc-theme-standard .fc-popover{background:var(--fc-page-bg-color);border:1px solid var(--fc-border-color)}.fc-theme-standard .fc-popover-header{background:var(--fc-neutral-bg-color)}');const mD=/(top|left|right|bottom|width|height)$/i;function _D(n,e,t){n.style[e]=null==t?"":"number"==typeof t&&mD.test(e)?`${t}px`:t}let Db=0;function Fc(){return Db+=1,"fc-dom-"+Db}function yD(n,e,t,r){let i=function _M(n,e){return t=>{let r=Lc(t.target,n);r&&e.call(r,t,r)}}(t,r);return n.addEventListener(e,i),()=>{n.removeEventListener(e,i)}}function wD(n){return Object.assign({onClick:n},bD(n))}function bD(n){return{tabIndex:0,onKeyDown(e){("Enter"===e.key||" "===e.key)&&(n(e),e.preventDefault())}}}let bf=0;function th(){return bf+=1,String(bf)}function ED(n,e,t){return t.func?t.func(n,e):function CD(n,e){return n||e?null==e?-1:null==n?1:"string"==typeof n||"string"==typeof e?String(n).localeCompare(String(e)):n-e:0}(n[t.field],e[t.field])*(t.order||1)}function Ef(n,e){let t=String(n);return"000".substr(0,e-t.length)+t}function zg(n,e,t){return"function"==typeof n?n(...e):"string"==typeof n?e.reduce((r,i,s)=>r.replace("$"+s,i||""),n):t}function Cf(n){return n%1==0}function IM(n){let e=n.querySelector(".fc-scrollgrid-shrink-frame"),t=n.querySelector(".fc-scrollgrid-shrink-cushion");if(!e)throw new Error("needs fc-scrollgrid-shrink-frame className");if(!t)throw new Error("needs fc-scrollgrid-shrink-cushion className");return n.getBoundingClientRect().width-e.getBoundingClientRect().width+t.getBoundingClientRect().width}const DM=/^(-?)(?:(\d+)\.)?(\d+):(\d\d)(?::(\d\d)(?:\.(\d\d\d))?)?/;function Bn(n,e){return"string"==typeof n?function TM(n){let e=DM.exec(n);if(e){let t=e[1]?-1:1;return{years:0,months:0,days:t*(e[2]?parseInt(e[2],10):0),milliseconds:t*(60*(e[3]?parseInt(e[3],10):0)*60*1e3+60*(e[4]?parseInt(e[4],10):0)*1e3+1e3*(e[5]?parseInt(e[5],10):0)+(e[6]?parseInt(e[6],10):0))}}return null}(n):"object"==typeof n&&n?ID(n):"number"==typeof n?ID({[e||"milliseconds"]:n}):null}function ID(n){let e={years:n.years||n.year||0,months:n.months||n.month||0,days:n.days||n.day||0,milliseconds:60*(n.hours||n.hour||0)*60*1e3+60*(n.minutes||n.minute||0)*1e3+1e3*(n.seconds||n.second||0)+(n.milliseconds||n.millisecond||n.ms||0)},t=n.weeks||n.week;return t&&(e.days+=7*t,e.specifiedWeeks=!0),e}function If(n){return nh(n)/864e5}function nh(n){return 31536e6*n.years+2592e6*n.months+864e5*n.days+n.milliseconds}function Gg(n){let e=n.milliseconds;if(e){if(e%1e3!=0)return{unit:"millisecond",value:e};if(e%6e4!=0)return{unit:"second",value:e/1e3};if(e%36e5!=0)return{unit:"minute",value:e/6e4};if(e)return{unit:"hour",value:e/36e5}}return n.days?n.specifiedWeeks&&n.days%7==0?{unit:"week",value:n.days/7}:{unit:"day",value:n.days}:n.months?{unit:"month",value:n.months}:n.years?{unit:"year",value:n.years}:{unit:"millisecond",value:0}}const{hasOwnProperty:Df}=Object.prototype;function ay(n,e){let t={};if(e)for(let r in e)if(e[r]===Lu){let i=[];for(let s=n.length-1;s>=0;s-=1){let l=n[s][r];if("object"==typeof l&&l)i.unshift(l);else if(void 0!==l){t[r]=l;break}}i.length&&(t[r]=ay(i))}for(let r=n.length-1;r>=0;r-=1){let i=n[r];for(let s in i)s in t||(t[s]=i[s])}return t}function Pu(n,e){let t={};for(let r in n)e(n[r],r)&&(t[r]=n[r]);return t}function Uc(n,e){let t={};for(let r in n)t[r]=e(n[r],r);return t}function TD(n){let e={};for(let t of n)e[t]=!0;return e}function Wg(n){let e=[];for(let t in n)e.push(n[t]);return e}function Ll(n,e){if(n===e)return!0;for(let t in n)if(Df.call(n,t)&&!(t in e))return!1;for(let t in e)if(Df.call(e,t)&&n[t]!==e[t])return!1;return!0}const AD=/^on[A-Z]/;function ly(n,e){let t=[];for(let r in n)Df.call(n,r)&&(r in e||t.push(r));for(let r in e)Df.call(e,r)&&n[r]!==e[r]&&t.push(r);return t}function Sb(n,e,t={}){if(n===e)return!0;for(let r in e)if(!(r in n)||!xF(n[r],e[r],t[r]))return!1;for(let r in n)if(!(r in e))return!1;return!0}function xF(n,e,t){return n===e||!0===t||!!t&&t(n,e)}function Fl(n,e,t){if(n===e)return!0;let i,r=n.length;if(r!==e.length)return!1;for(i=0;i<r;i+=1)if(!(t?t(n[i],e[i]):n[i]===e[i]))return!1;return!0}const uy=["sun","mon","tue","wed","thu","fri","sat"];function RD(n,e){let t=Ou(n);return t[2]+=7*e,Ms(t)}function Zi(n,e){let t=Ou(n);return t[2]+=e,Ms(t)}function Ul(n,e){let t=Ou(n);return t[6]+=e,Ms(t)}function Vc(n,e){return(e.valueOf()-n.valueOf())/864e5}function cy(n,e){return Bc(n)===Bc(e)?Math.round(Vc(n,e)):null}function Ir(n){return Ms([n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate()])}function OD(n,e,t,r){let i=Ms([e,0,1+MF(e,t,r)]),s=Ir(n),l=Math.round(Vc(i,s));return Math.floor(l/7)+1}function MF(n,e,t){let r=7+e-t;return-(7+Ms([n,0,r]).getUTCDay()-e)%7+r-1}function LD(n){return[n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()]}function FD(n){return new Date(n[0],n[1]||0,n[2]??1,n[3]||0,n[4]||0,n[5]||0)}function Ou(n){return[n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate(),n.getUTCHours(),n.getUTCMinutes(),n.getUTCSeconds(),n.getUTCMilliseconds()]}function Ms(n){return 1===n.length&&(n=n.concat([0])),new Date(Date.UTC(...n))}function xb(n){return!isNaN(n.valueOf())}function Bc(n){return 1e3*n.getUTCHours()*60*60+1e3*n.getUTCMinutes()*60+1e3*n.getUTCSeconds()+n.getUTCMilliseconds()}function Rb(n){return n.toISOString().replace(/T.*$/,"")}function Mb(n,e=!1){let t=n<0?"-":"+",r=Math.abs(n),i=Math.floor(r/60),s=Math.round(r%60);return e?`${t+Ef(i,2)}:${Ef(s,2)}`:`GMT${t}${i}${s?`:${Ef(s,2)}`:""}`}function gn(n,e,t){let r,i;return function(...s){if(r){if(!Fl(r,s)){t&&t(i);let l=n.apply(this,s);(!e||!e(l,i))&&(i=l)}}else i=n.apply(this,s);return r=s,i}}function Hc(n,e,t){let r,i;return s=>{if(r){if(!Ll(r,s)){t&&t(i);let l=n.call(this,s);(!e||!e(l,i))&&(i=l)}}else i=n.call(this,s);return r=s,i}}const kb={week:3,separator:0,omitZeroMinute:0,meridiem:0,omitCommas:0},qg={timeZoneName:7,era:6,year:5,month:4,day:2,weekday:2,hour:1,minute:1,second:1},Zg=/\s*([ap])\.?m\.?/i,UD=/,/g,HM=/\s+/g,NF=/\u200e/g,VD=/UTC|GMT/;class BD{constructor(e){let t={},r={},i=0;for(let s in e)s in kb?(r[s]=e[s],i=Math.max(kb[s],i)):(t[s]=e[s],s in qg&&(i=Math.max(qg[s],i)));this.standardDateProps=t,this.extendedSettings=r,this.severity=i,this.buildFormattingFunc=gn(HD)}format(e,t){return this.buildFormattingFunc(this.standardDateProps,this.extendedSettings,t)(e)}formatRange(e,t,r,i){let{standardDateProps:s,extendedSettings:l}=this,d=function Vl(n,e,t){return t.getMarkerYear(n)!==t.getMarkerYear(e)?5:t.getMarkerMonth(n)!==t.getMarkerMonth(e)?4:t.getMarkerDay(n)!==t.getMarkerDay(e)?2:Bc(n)!==Bc(e)?1:0}(e.marker,t.marker,r.calendarSystem);if(!d)return this.format(e,r);let f=d;f>1&&("numeric"===s.year||"2-digit"===s.year)&&("numeric"===s.month||"2-digit"===s.month)&&("numeric"===s.day||"2-digit"===s.day)&&(f=1);let y=this.format(e,r),w=this.format(t,r);if(y===w)return y;let D=function GM(n,e){let t={};for(let r in n)(!(r in qg)||qg[r]<=e)&&(t[r]=n[r]);return t}(s,f),x=HD(D,l,r),N=x(e),U=x(t),Q=function Pb(n,e,t,r){let i=0;for(;i<n.length;){let s=n.indexOf(e,i);if(-1===s)break;let l=n.substr(0,s);i=s+e.length;let d=n.substr(i),f=0;for(;f<t.length;){let y=t.indexOf(r,f);if(-1===y)break;let w=t.substr(0,y);f=y+r.length;let D=t.substr(f);if(l===w&&d===D)return{before:l,after:d}}}return null}(y,N,w,U),X=l.separator||i||r.defaultSeparator||"";return Q?Q.before+N+X+U+Q.after:y+X+w}getLargestUnit(){switch(this.severity){case 7:case 6:case 5:return"year";case 4:return"month";case 3:return"week";case 2:return"day";default:return"time"}}}function HD(n,e,t){let r=Object.keys(n).length;return 1===r&&"short"===n.timeZoneName?i=>Mb(i.timeZoneOffset):0===r&&e.week?i=>function Nb(n,e,t,r,i){let s=[];return"long"===i?s.push(t):("short"===i||"narrow"===i)&&s.push(e),("long"===i||"short"===i)&&s.push(" "),s.push(r.simpleNumberFormat.format(n)),"rtl"===r.options.direction&&s.reverse(),s.join("")}(t.computeWeekNumber(i.marker),t.weekText,t.weekTextLong,t.locale,e.week):function jM(n,e,t){n=Object.assign({},n),e=Object.assign({},e),function $M(n,e){n.timeZoneName&&(n.hour||(n.hour="2-digit"),n.minute||(n.minute="2-digit")),"long"===n.timeZoneName&&(n.timeZoneName="short"),e.omitZeroMinute&&(n.second||n.millisecond)&&delete e.omitZeroMinute}(n,e),n.timeZone="UTC";let i,r=new Intl.DateTimeFormat(t.locale.codes,n);if(e.omitZeroMinute){let s=Object.assign({},n);delete s.minute,i=new Intl.DateTimeFormat(t.locale.codes,s)}return s=>{let d,{marker:l}=s;return d=i&&!l.getUTCMinutes()?i:r,function Kg(n,e,t,r,i){return n=n.replace(NF,""),"short"===t.timeZoneName&&(n=function zM(n,e){let t=!1;return n=n.replace(VD,()=>(t=!0,e)),t||(n+=` ${e}`),n}(n,"UTC"===i.timeZone||null==e.timeZoneOffset?"UTC":Mb(e.timeZoneOffset))),r.omitCommas&&(n=n.replace(UD,"").trim()),r.omitZeroMinute&&(n=n.replace(":00","")),!1===r.meridiem?n=n.replace(Zg,"").trim():"narrow"===r.meridiem?n=n.replace(Zg,(s,l)=>l.toLocaleLowerCase()):"short"===r.meridiem?n=n.replace(Zg,(s,l)=>`${l.toLocaleLowerCase()}m`):"lowercase"===r.meridiem&&(n=n.replace(Zg,s=>s.toLocaleLowerCase())),(n=n.replace(HM," ")).trim()}(d.format(l),s,n,e,t)}}(n,e,t)}function Af(n,e){let t=e.markerToArray(n.marker);return{marker:n.marker,timeZoneOffset:n.timeZoneOffset,array:t,year:t[0],month:t[1],day:t[2],hour:t[3],minute:t[4],second:t[5],millisecond:t[6]}}function dy(n,e,t,r){let i=Af(n,t.calendarSystem);return{date:i,start:i,end:e?Af(e,t.calendarSystem):null,timeZone:t.timeZone,localeCodes:t.locale.codes,defaultSeparator:r||t.defaultSeparator}}class WM{constructor(e){this.cmdStr=e}format(e,t,r){return t.cmdFormatter(this.cmdStr,dy(e,null,t,r))}formatRange(e,t,r,i){return r.cmdFormatter(this.cmdStr,dy(e,t,r,i))}}class qM{constructor(e){this.func=e}format(e,t,r){return this.func(dy(e,null,t,r))}formatRange(e,t,r,i){return this.func(dy(e,t,r,i))}}function ei(n){return"object"==typeof n&&n?new BD(n):"string"==typeof n?new WM(n):"function"==typeof n?new qM(n):null}const Yg={navLinkDayClick:Te,navLinkWeekClick:Te,duration:Bn,bootstrapFontAwesome:Te,buttonIcons:Te,customButtons:Te,defaultAllDayEventDuration:Bn,defaultTimedEventDuration:Bn,nextDayThreshold:Bn,scrollTime:Bn,scrollTimeReset:Boolean,slotMinTime:Bn,slotMaxTime:Bn,dayPopoverFormat:ei,slotDuration:Bn,snapDuration:Bn,headerToolbar:Te,footerToolbar:Te,defaultRangeSeparator:String,titleRangeSeparator:String,forceEventDuration:Boolean,dayHeaders:Boolean,dayHeaderFormat:ei,dayHeaderClassNames:Te,dayHeaderContent:Te,dayHeaderDidMount:Te,dayHeaderWillUnmount:Te,dayCellClassNames:Te,dayCellContent:Te,dayCellDidMount:Te,dayCellWillUnmount:Te,initialView:String,aspectRatio:Number,weekends:Boolean,weekNumberCalculation:Te,weekNumbers:Boolean,weekNumberClassNames:Te,weekNumberContent:Te,weekNumberDidMount:Te,weekNumberWillUnmount:Te,editable:Boolean,viewClassNames:Te,viewDidMount:Te,viewWillUnmount:Te,nowIndicator:Boolean,nowIndicatorClassNames:Te,nowIndicatorContent:Te,nowIndicatorDidMount:Te,nowIndicatorWillUnmount:Te,showNonCurrentDates:Boolean,lazyFetching:Boolean,startParam:String,endParam:String,timeZoneParam:String,timeZone:String,locales:Te,locale:Te,themeSystem:String,dragRevertDuration:Number,dragScroll:Boolean,allDayMaintainDuration:Boolean,unselectAuto:Boolean,dropAccept:Te,eventOrder:function Tb(n){let r,i,e=[],t=[];for("string"==typeof n?t=n.split(/\s*,\s*/):"function"==typeof n?t=[n]:Array.isArray(n)&&(t=n),r=0;r<t.length;r+=1)i=t[r],"string"==typeof i?e.push("-"===i.charAt(0)?{field:i.substring(1),order:-1}:{field:i,order:1}):"function"==typeof i&&e.push({func:i});return e},eventOrderStrict:Boolean,handleWindowResize:Boolean,windowResizeDelay:Number,longPressDelay:Number,eventDragMinDistance:Number,expandRows:Boolean,height:Te,contentHeight:Te,direction:String,weekNumberFormat:ei,eventResizableFromStart:Boolean,displayEventTime:Boolean,displayEventEnd:Boolean,weekText:String,weekTextLong:String,progressiveEventRendering:Boolean,businessHours:Te,initialDate:Te,now:Te,eventDataTransform:Te,stickyHeaderDates:Te,stickyFooterScrollbar:Te,viewHeight:Te,defaultAllDay:Boolean,eventSourceFailure:Te,eventSourceSuccess:Te,eventDisplay:String,eventStartEditable:Boolean,eventDurationEditable:Boolean,eventOverlap:Te,eventConstraint:Te,eventAllow:Te,eventBackgroundColor:String,eventBorderColor:String,eventTextColor:String,eventColor:String,eventClassNames:Te,eventContent:Te,eventDidMount:Te,eventWillUnmount:Te,selectConstraint:Te,selectOverlap:Te,selectAllow:Te,droppable:Boolean,unselectCancel:String,slotLabelFormat:Te,slotLaneClassNames:Te,slotLaneContent:Te,slotLaneDidMount:Te,slotLaneWillUnmount:Te,slotLabelClassNames:Te,slotLabelContent:Te,slotLabelDidMount:Te,slotLabelWillUnmount:Te,dayMaxEvents:Te,dayMaxEventRows:Te,dayMinWidth:Number,slotLabelInterval:Bn,allDayText:String,allDayClassNames:Te,allDayContent:Te,allDayDidMount:Te,allDayWillUnmount:Te,slotMinWidth:Number,navLinks:Boolean,eventTimeFormat:ei,rerenderDelay:Number,moreLinkText:Te,moreLinkHint:Te,selectMinDistance:Number,selectable:Boolean,selectLongPressDelay:Number,eventLongPressDelay:Number,selectMirror:Boolean,eventMaxStack:Number,eventMinHeight:Number,eventMinWidth:Number,eventShortHeight:Number,slotEventOverlap:Boolean,plugins:Te,firstDay:Number,dayCount:Number,dateAlignment:String,dateIncrement:Bn,hiddenDays:Te,fixedWeekCount:Boolean,validRange:Te,visibleRange:Te,titleFormat:Te,eventInteractive:Boolean,noEventsText:String,viewHint:Te,navLinkHint:Te,closeHint:String,timeHint:String,eventHint:String,moreLinkClick:Te,moreLinkClassNames:Te,moreLinkContent:Te,moreLinkDidMount:Te,moreLinkWillUnmount:Te,monthStartFormat:ei,handleCustomRendering:Te,customRenderingMetaMap:Te,customRenderingReplacesEl:Boolean},Qg={eventDisplay:"auto",defaultRangeSeparator:" - ",titleRangeSeparator:" \u2013 ",defaultTimedEventDuration:"01:00:00",defaultAllDayEventDuration:{day:1},forceEventDuration:!1,nextDayThreshold:"00:00:00",dayHeaders:!0,initialView:"",aspectRatio:1.35,headerToolbar:{start:"title",center:"",end:"today prev,next"},weekends:!0,weekNumbers:!1,weekNumberCalculation:"local",editable:!1,nowIndicator:!1,scrollTime:"06:00:00",scrollTimeReset:!0,slotMinTime:"00:00:00",slotMaxTime:"24:00:00",showNonCurrentDates:!0,lazyFetching:!0,startParam:"start",endParam:"end",timeZoneParam:"timeZone",timeZone:"local",locales:[],locale:"",themeSystem:"standard",dragRevertDuration:500,dragScroll:!0,allDayMaintainDuration:!1,unselectAuto:!0,dropAccept:"*",eventOrder:"start,-duration,allDay,title",dayPopoverFormat:{month:"long",day:"numeric",year:"numeric"},handleWindowResize:!0,windowResizeDelay:100,longPressDelay:1e3,eventDragMinDistance:5,expandRows:!1,navLinks:!1,selectable:!1,eventMinHeight:15,eventMinWidth:30,eventShortHeight:30,monthStartFormat:{month:"long",day:"numeric"}},jD={datesSet:Te,eventsSet:Te,eventAdd:Te,eventChange:Te,eventRemove:Te,windowResize:Te,eventClick:Te,eventMouseEnter:Te,eventMouseLeave:Te,select:Te,unselect:Te,loading:Te,_unmount:Te,_beforeprint:Te,_afterprint:Te,_noEventDrop:Te,_noEventResize:Te,_resize:Te,_scrollRequest:Te},Ob={buttonText:Te,buttonHints:Te,views:Te,plugins:Te,initialEvents:Te,events:Te,eventSources:Te},jc={headerToolbar:Lu,footerToolbar:Lu,buttonText:Lu,buttonHints:Lu,buttonIcons:Lu,dateIncrement:Lu,plugins:Jg,events:Jg,eventSources:Jg,resources:Jg};function Lu(n,e){return"object"==typeof n&&"object"==typeof e&&n&&e?Ll(n,e):n===e}function Jg(n,e){return Array.isArray(n)&&Array.isArray(e)?Fl(n,e):n===e}const ZM={type:String,component:Te,buttonText:String,buttonTextKey:String,dateProfileGeneratorClass:Te,usesMinMaxTime:Boolean,classNames:Te,content:Te,didMount:Te,willUnmount:Te};function Lb(n){return ay(n,jc)}function Fb(n,e){let t={},r={};for(let i in e)i in n&&(t[i]=e[i](n[i]));for(let i in n)i in e||(r[i]=n[i]);return{refined:t,extra:r}}function Te(n){return n}function Xg(n,e,t,r){return{instanceId:th(),defId:n,range:e,forcedStartTzo:t??null,forcedEndTzo:r??null}}function Fu(n,e,t){let{dateEnv:r,pluginHooks:i,options:s}=t,{defs:l,instances:d}=n;d=Pu(d,f=>!l[f.defId].recurringDef);for(let f in l){let y=l[f];if(y.recurringDef){let{duration:w}=y.recurringDef;w||(w=y.allDay?s.defaultAllDayEventDuration:s.defaultTimedEventDuration);let D=Ub(y,w,e,r,i.recurringTypes);for(let x of D){let N=Xg(f,{start:x,end:r.add(x,w)});d[N.instanceId]=N}}}return{defs:l,instances:d}}function Ub(n,e,t,r,i){let l=i[n.recurringDef.typeId].expand(n.recurringDef.typeData,{start:r.subtract(t.start,e),end:t.end},r);return n.allDay&&(l=l.map(Ir)),l}function em(n,e,t,r,i,s){let l={defs:{},instances:{}},d=QD(t);for(let f of n){let y=KD(f,e,t,r,d,i,s);y&&Vb(y,l)}return l}function Vb(n,e={defs:{},instances:{}}){return e.defs[n.def.defId]=n.def,n.instance&&(e.instances[n.instance.instanceId]=n.instance),e}function tm(n,e){return{defs:Object.assign(Object.assign({},n.defs),e.defs),instances:Object.assign(Object.assign({},n.instances),e.instances)}}function nm(n,e){let t=Pu(n.defs,e),r=Pu(n.instances,i=>t[i.defId]);return{defs:t,instances:r}}function Bb(n){return Array.isArray(n)?n:"string"==typeof n?n.split(/\s+/):[]}const hy={display:String,editable:Boolean,startEditable:Boolean,durationEditable:Boolean,constraint:Te,overlap:Te,allow:Te,className:Bb,classNames:Bb,color:String,backgroundColor:String,borderColor:String,textColor:String},WD={display:null,startEditable:null,durationEditable:null,constraints:[],overlap:null,allows:[],backgroundColor:"",borderColor:"",textColor:"",classNames:[]};function rm(n,e){let t=function GD(n,e){return Array.isArray(n)?em(n,null,e,!0):"object"==typeof n&&n?em([n],null,e,!0):null!=n?String(n):null}(n.constraint,e);return{display:n.display||null,startEditable:null!=n.startEditable?n.startEditable:n.editable,durationEditable:null!=n.durationEditable?n.durationEditable:n.editable,constraints:null!=t?[t]:[],overlap:null!=n.overlap?n.overlap:null,allows:null!=n.allow?[n.allow]:[],backgroundColor:n.backgroundColor||n.color||"",borderColor:n.borderColor||n.color||"",textColor:n.textColor||"",classNames:(n.className||[]).concat(n.classNames||[])}}function ZD(n,e){return{display:null!=e.display?e.display:n.display,startEditable:null!=e.startEditable?e.startEditable:n.startEditable,durationEditable:null!=e.durationEditable?e.durationEditable:n.durationEditable,constraints:n.constraints.concat(e.constraints),overlap:"boolean"==typeof e.overlap?e.overlap:n.overlap,allows:n.allows.concat(e.allows),backgroundColor:e.backgroundColor||n.backgroundColor,borderColor:e.borderColor||n.borderColor,textColor:e.textColor||n.textColor,classNames:n.classNames.concat(e.classNames)}}const fy={id:String,groupId:String,title:String,url:String,interactive:Boolean},us={start:Te,end:Te,date:Te,allDay:Boolean},Sf=Object.assign(Object.assign(Object.assign({},fy),us),{extendedProps:Te});function KD(n,e,t,r,i=QD(t),s,l){let{refined:d,extra:f}=YD(n,t,i),y=function eT(n,e){let t=null;return n&&(t=n.defaultAllDay),null==t&&(t=e.options.defaultAllDay),t}(e,t),w=function $D(n,e,t,r){for(let i=0;i<r.length;i+=1){let s=r[i].parse(n,t);if(s){let{allDay:l}=n;return null==l&&(l=e,null==l&&(l=s.allDayGuess,null==l&&(l=!1))),{allDay:l,duration:s.duration,typeData:s.typeData,typeId:i}}}return null}(d,y,t.dateEnv,t.pluginHooks.recurringTypes);if(w){let x=JD(d,f,e?e.sourceId:"",w.allDay,Boolean(w.duration),t,s);return x.recurringDef={typeId:w.typeId,typeData:w.typeData,duration:w.duration},{def:x,instance:null}}let D=function XD(n,e,t,r){let s,f,{allDay:i}=n,l=null,d=!1,y=null;if(s=t.dateEnv.createMarkerMeta(null!=n.start?n.start:n.date),s)l=s.marker;else if(!r)return null;return null!=n.end&&(f=t.dateEnv.createMarkerMeta(n.end)),null==i&&(i=null!=e?e:(!s||s.isTimeUnspecified)&&(!f||f.isTimeUnspecified)),i&&l&&(l=Ir(l)),f&&(y=f.marker,i&&(y=Ir(y)),l&&y<=l&&(y=null)),y?d=!0:r||(d=t.options.forceEventDuration||!1,y=t.dateEnv.add(l,i?t.options.defaultAllDayEventDuration:t.options.defaultTimedEventDuration)),{allDay:i,hasEnd:d,range:{start:l,end:y},forcedStartTzo:s?s.forcedTzo:null,forcedEndTzo:f?f.forcedTzo:null}}(d,y,t,r);if(D){let x=JD(d,f,e?e.sourceId:"",D.allDay,D.hasEnd,t,s),N=Xg(x.defId,D.range,D.forcedStartTzo,D.forcedEndTzo);return l&&x.publicId&&l[x.publicId]&&(N.instanceId=l[x.publicId]),{def:x,instance:N}}return null}function YD(n,e,t=QD(e)){return Fb(n,t)}function QD(n){return Object.assign(Object.assign(Object.assign({},hy),Sf),n.pluginHooks.eventRefiners)}function JD(n,e,t,r,i,s,l){let d={title:n.title||"",groupId:n.groupId||"",publicId:n.id||"",url:n.url||"",recurringDef:null,defId:(l&&n.id?l[n.id]:"")||th(),sourceId:t,allDay:r,hasEnd:i,interactive:n.interactive,ui:rm(n,s),extendedProps:Object.assign(Object.assign({},n.extendedProps||{}),e)};for(let f of s.pluginHooks.eventDefMemberAdders)Object.assign(d,f(n));return Object.freeze(d.ui.classNames),Object.freeze(d.extendedProps),d}const im={startTime:"09:00",endTime:"17:00",daysOfWeek:[1,2,3,4,5],display:"inverse-background",classNames:"fc-non-business",groupId:"_businessHours"};function tT(n){let e=Math.floor(Vc(n.start,n.end))||1,t=Ir(n.start);return{start:t,end:Zi(t,e)}}function py(n,e=Bn(0)){let t=null,r=null;if(n.end){r=Ir(n.end);let i=n.end.valueOf()-r.valueOf();i&&i>=nh(e)&&(r=Zi(r,1))}return n.start&&(t=Ir(n.start),r&&r<=t&&(r=Zi(t,1))),{start:t,end:r}}function gy(n,e,t,r){return"year"===r?Bn(t.diffWholeYears(n,e),"year"):"month"===r?Bn(t.diffWholeMonths(n,e),"month"):function NM(n,e){let t=Ir(n),r=Ir(e);return{years:0,months:0,days:Math.round(Vc(t,r)),milliseconds:e.valueOf()-r.valueOf()-(n.valueOf()-t.valueOf())}}(n,e)}function jb(n,e){let t={left:Math.max(n.left,e.left),right:Math.min(n.right,e.right),top:Math.max(n.top,e.top),bottom:Math.min(n.bottom,e.bottom)};return t.left<t.right&&t.top<t.bottom&&t}let rT;function zb(){return null==rT&&(rT=function ek(){if(typeof document>"u")return!0;let n=document.createElement("div");n.style.position="absolute",n.style.top="0px",n.style.left="0px",n.innerHTML="<table><tr><td><div></div></td></tr></table>",n.querySelector("table").style.height="100px",n.querySelector("div").style.height="100%",document.body.appendChild(n);let t=n.querySelector("div").offsetHeight>0;return document.body.removeChild(n),t}()),rT}function _y(n,e){let i,s,t=[],{start:r}=e;for(n.sort(LF),i=0;i<n.length;i+=1)s=n[i],s.start>r&&t.push({start:r,end:s.start}),s.end>r&&(r=s.end);return r<e.end&&t.push({start:r,end:e.end}),t}function LF(n,e){return n.start.valueOf()-e.start.valueOf()}function xf(n,e){let{start:t,end:r}=n,i=null;return null!==e.start&&(t=null===t?e.start:new Date(Math.max(t.valueOf(),e.start.valueOf()))),null!=e.end&&(r=null===r?e.end:new Date(Math.min(r.valueOf(),e.end.valueOf()))),(null===t||null===r||t<r)&&(i={start:t,end:r}),i}function $c(n,e){return(null===n.start||e>=n.start)&&(null===n.end||e<n.end)}function qb(n,e,t,r){return{dow:n.getUTCDay(),isDisabled:Boolean(r&&!$c(r.activeRange,n)),isOther:Boolean(r&&!$c(r.currentRange,n)),isToday:Boolean(e&&$c(e,n)),isPast:Boolean(t?n<t:!!e&&n<e.start),isFuture:Boolean(t?n>t:!!e&&n>=e.end)}}function Zb(n,e){let t=["fc-day",`fc-day-${uy[n.dow]}`];return n.isDisabled?t.push("fc-day-disabled"):(n.isToday&&(t.push("fc-day-today"),t.push(e.getClass("today"))),n.isPast&&t.push("fc-day-past"),n.isFuture&&t.push("fc-day-future"),n.isOther&&t.push("fc-day-other")),t}const oT=ei({year:"numeric",month:"long",day:"numeric"}),rk=ei({week:"long"});function Kb(n,e,t="day",r=!0){const{dateEnv:i,options:s,calendarApi:l}=n;let d=i.format(e,"week"===t?rk:oT);if(s.navLinks){let f=i.toDate(e);const y=w=>{let D="day"===t?s.navLinkDayClick:"week"===t?s.navLinkWeekClick:null;"function"==typeof D?D.call(l,i.toDate(e),w):("string"==typeof D&&(t=D),l.zoomTo(e,t))};return Object.assign({title:zg(s.navLinkHint,[d,f],d),"data-navlink":""},r?wD(y):{onClick:y})}return{"aria-label":d}}let vy;class ok{constructor(){this.handlers={},this.thisContext=null}setThisContext(e){this.thisContext=e}setOptions(e){this.options=e}on(e,t){!function HF(n,e,t){(n[e]||(n[e]=[])).push(t)}(this.handlers,e,t)}off(e,t){!function jF(n,e,t){t?n[e]&&(n[e]=n[e].filter(r=>r!==t)):delete n[e]}(this.handlers,e,t)}trigger(e,...t){let s=[].concat(this.options&&this.options[e]||[],this.handlers[e]||[]);for(let l of s)l.apply(this.thisContext,t)}hasHandlers(e){return Boolean(this.handlers[e]&&this.handlers[e].length||this.options&&this.options[e])}}class Yb{constructor(e,t,r,i){this.els=t;let s=this.originClientRect=e.getBoundingClientRect();r&&this.buildElHorizontals(s.left),i&&this.buildElVerticals(s.top)}buildElHorizontals(e){let t=[],r=[];for(let i of this.els){let s=i.getBoundingClientRect();t.push(s.left-e),r.push(s.right-e)}this.lefts=t,this.rights=r}buildElVerticals(e){let t=[],r=[];for(let i of this.els){let s=i.getBoundingClientRect();t.push(s.top-e),r.push(s.bottom-e)}this.tops=t,this.bottoms=r}leftToIndex(e){let s,{lefts:t,rights:r}=this,i=t.length;for(s=0;s<i;s+=1)if(e>=t[s]&&e<r[s])return s}topToIndex(e){let s,{tops:t,bottoms:r}=this,i=t.length;for(s=0;s<i;s+=1)if(e>=t[s]&&e<r[s])return s}getWidth(e){return this.rights[e]-this.lefts[e]}getHeight(e){return this.bottoms[e]-this.tops[e]}similarTo(e){return Qb(this.tops||[],e.tops||[])&&Qb(this.bottoms||[],e.bottoms||[])&&Qb(this.lefts||[],e.lefts||[])&&Qb(this.rights||[],e.rights||[])}}function Qb(n,e){const t=n.length;if(t!==e.length)return!1;for(let r=0;r<t;r++)if(Math.round(n[r])!==Math.round(e[r]))return!1;return!0}class zc{constructor(e){this.iconOverrideOption&&this.setIconOverride(e[this.iconOverrideOption])}setIconOverride(e){let t,r;if("object"==typeof e&&e){for(r in t=Object.assign({},this.iconClasses),e)t[r]=this.applyIconOverridePrefix(e[r]);this.iconClasses=t}else!1===e&&(this.iconClasses={})}applyIconOverridePrefix(e){let t=this.iconOverridePrefix;return t&&0!==e.indexOf(t)&&(e=t+e),e}getClass(e){return this.classes[e]||""}getIconClass(e,t){let r;return r=t&&this.rtlIconClasses&&this.rtlIconClasses[e]||this.iconClasses[e],r?`${this.baseIconClass} ${r}`:""}getCustomButtonIconClass(e){let t;return this.iconOverrideCustomButtonOption&&(t=e[this.iconOverrideCustomButtonOption],t)?`${this.baseIconClass} ${this.applyIconOverridePrefix(t)}`:""}}function Xb(n){n();let e=Mt.debounceRendering,t=[];for(Mt.debounceRendering=function r(i){t.push(i)},Nl(be(hT,{}),document.createElement("div"));t.length;)t.shift()();Mt.debounceRendering=e}zc.prototype.classes={},zc.prototype.iconClasses={},zc.prototype.baseIconClass="",zc.prototype.iconOverridePrefix="";class hT extends io{render(){return be("div",{})}componentDidMount(){this.setState({})}}function lk(n){let e=function nb(n,e){var t={__c:e="__cC"+BI++,__:n,Consumer:function(r,i){return r.children(i)},Provider:function(r){var i,s;return this.getChildContext||(i=[],(s={})[e]=this,this.getChildContext=function(){return s},this.shouldComponentUpdate=function(l){this.props.value!==l.value&&i.some(function(d){d.__e=!0,Fg(d)})},this.sub=function(l){i.push(l);var d=l.componentWillUnmount;l.componentWillUnmount=function(){i.splice(i.indexOf(l),1),d&&d.call(l)}}),r.children}};return t.Provider.__=t.Consumer.contextType=t}(n),t=e.Provider;return e.Provider=function(){let r=!this.getChildContext,i=t.apply(this,arguments);if(r){let s=[];this.shouldComponentUpdate=l=>{this.props.value!==l.value&&s.forEach(d=>{d.context=l.value,d.forceUpdate()})},this.sub=l=>{s.push(l);let d=l.componentWillUnmount;l.componentWillUnmount=()=>{s.splice(s.indexOf(l),1),d&&d.call(l)}}}return i},e}class e0{constructor(e,t,r,i){this.execFunc=e,this.emitter=t,this.scrollTime=r,this.scrollTimeReset=i,this.handleScrollRequest=s=>{this.queuedRequest=Object.assign({},this.queuedRequest||{},s),this.drain()},t.on("_scrollRequest",this.handleScrollRequest),this.fireInitialScroll()}detach(){this.emitter.off("_scrollRequest",this.handleScrollRequest)}update(e){e&&this.scrollTimeReset?this.fireInitialScroll():this.drain()}fireInitialScroll(){this.handleScrollRequest({time:this.scrollTime})}drain(){this.queuedRequest&&this.execFunc(this.queuedRequest)&&(this.queuedRequest=null)}}const Uu=lk({});function uk(n,e,t,r,i,s,l,d,f,y,w,D,x){return{dateEnv:i,options:t,pluginHooks:l,emitter:y,dispatch:d,getCurrentData:f,calendarApi:w,viewSpec:n,viewApi:e,dateProfileGenerator:r,theme:s,isRtl:"rtl"===t.direction,addResizeHandler(N){y.on("_resize",N)},removeResizeHandler(N){y.off("_resize",N)},createScrollResponder:N=>new e0(N,y,Bn(t.scrollTime),t.scrollTimeReset),registerInteractiveComponent:D,unregisterInteractiveComponent:x}}let om=(()=>{class n extends io{shouldComponentUpdate(t,r){return this.debug&&console.log(ly(t,this.props),ly(r,this.state)),!Sb(this.props,t,this.propEquality)||!Sb(this.state,r,this.stateEquality)}safeSetState(t){Sb(this.state,Object.assign(Object.assign({},this.state),t),this.stateEquality)||this.setState(t)}}return n.addPropsEquality=$F,n.addStateEquality=ck,n.contextType=Uu,n})();om.prototype.propEquality={},om.prototype.stateEquality={};let ui=(()=>{class n extends om{}return n.contextType=Uu,n})();function $F(n){let e=Object.create(this.prototype.propEquality);Object.assign(e,n),this.prototype.propEquality=e}function ck(n){let e=Object.create(this.prototype.stateEquality);Object.assign(e,n),this.prototype.stateEquality=e}function Vu(n,e){"function"==typeof n?n(e):n&&(n.current=e)}class Hl extends ui{constructor(){super(...arguments),this.uid=th()}prepareHits(){}queryHit(e,t,r,i){return null}isValidSegDownEl(e){return!this.props.eventDrag&&!this.props.eventResize&&!Lc(e,".fc-event-mirror")}isValidDateDownEl(e){return!(Lc(e,".fc-event:not(.fc-bg-event)")||Lc(e,".fc-more-link")||Lc(e,"a[data-navlink]")||Lc(e,".fc-popover"))}}function wy(n,e){return"function"==typeof n&&(n=n()),null==n?e.createNowMarker():e.createMarker(n)}class hk{constructor(e){this.props=e,this.nowDate=wy(e.nowInput,e.dateEnv),this.initHiddenDays()}buildPrev(e,t,r){let{dateEnv:i}=this.props,s=i.subtract(i.startOf(t,e.currentRangeUnit),e.dateIncrement);return this.build(s,-1,r)}buildNext(e,t,r){let{dateEnv:i}=this.props,s=i.add(i.startOf(t,e.currentRangeUnit),e.dateIncrement);return this.build(s,1,r)}build(e,t,r=!0){let s,l,d,f,y,w,{props:i}=this;return s=this.buildValidRange(),s=this.trimHiddenDays(s),r&&(e=function sT(n,e){return null!=e.start&&n<e.start?e.start:null!=e.end&&n>=e.end?new Date(e.end.valueOf()-1):n}(e,s)),l=this.buildCurrentRangeInfo(e,t),d=/^(year|month|week|day)$/.test(l.unit),f=this.buildRenderRange(this.trimHiddenDays(l.range),l.unit,d),f=this.trimHiddenDays(f),y=f,i.showNonCurrentDates||(y=xf(y,l.range)),y=this.adjustActiveRange(y),y=xf(y,s),w=function Gb(n,e){return(null===n.end||null===e.start||n.end>e.start)&&(null===n.start||null===e.end||n.start<e.end)}(l.range,s),$c(f,e)||(e=f.start),{currentDate:e,validRange:s,currentRange:l.range,currentRangeUnit:l.unit,isRangeAllDay:d,activeRange:y,renderRange:f,slotMinTime:i.slotMinTime,slotMaxTime:i.slotMaxTime,isValid:w,dateIncrement:this.buildDateIncrement(l.duration)}}buildValidRange(){let e=this.props.validRangeInput,t="function"==typeof e?e.call(this.props.calendarApi,this.nowDate):e;return this.refineRange(t)||{start:null,end:null}}buildCurrentRangeInfo(e,t){let d,{props:r}=this,i=null,s=null,l=null;return r.duration?(i=r.duration,s=r.durationUnit,l=this.buildRangeFromDuration(e,t,i,s)):(d=this.props.dayCount)?(s="day",l=this.buildRangeFromDayCount(e,t,d)):(l=this.buildCustomVisibleRange(e))?s=r.dateEnv.greatestWholeUnit(l.start,l.end).unit:(i=this.getFallbackDuration(),s=Gg(i).unit,l=this.buildRangeFromDuration(e,t,i,s)),{duration:i,unit:s,range:l}}getFallbackDuration(){return Bn({day:1})}adjustActiveRange(e){let{dateEnv:t,usesMinMaxTime:r,slotMinTime:i,slotMaxTime:s}=this.props,{start:l,end:d}=e;return r&&(If(i)<0&&(l=Ir(l),l=t.add(l,i)),If(s)>1&&(d=Ir(d),d=Zi(d,-1),d=t.add(d,s))),{start:l,end:d}}buildRangeFromDuration(e,t,r,i){let d,f,y,{dateEnv:s,dateAlignment:l}=this.props;if(!l){let{dateIncrement:D}=this.props;l=D&&nh(D)<nh(r)?Gg(D).unit:i}function w(){d=s.startOf(e,l),f=s.add(d,r),y={start:d,end:f}}return If(r)<=1&&this.isHiddenDay(d)&&(d=this.skipHiddenDays(d,t),d=Ir(d)),w(),this.trimHiddenDays(y)||(e=this.skipHiddenDays(e,t),w()),y}buildRangeFromDayCount(e,t,r){let f,{dateEnv:i,dateAlignment:s}=this.props,l=0,d=e;s&&(d=i.startOf(d,s)),d=Ir(d),d=this.skipHiddenDays(d,t),f=d;do{f=Zi(f,1),this.isHiddenDay(f)||(l+=1)}while(l<r);return{start:d,end:f}}buildCustomVisibleRange(e){let{props:t}=this,r=t.visibleRangeInput,i="function"==typeof r?r.call(t.calendarApi,t.dateEnv.toDate(e)):r,s=this.refineRange(i);return!s||null!=s.start&&null!=s.end?s:null}buildRenderRange(e,t,r){return e}buildDateIncrement(e){let r,{dateIncrement:t}=this.props;return t||((r=this.props.dateAlignment)?Bn(1,r):e||Bn({days:1}))}refineRange(e){if(e){let t=function iT(n,e){let t=null,r=null;return n.start&&(t=e.createMarker(n.start)),n.end&&(r=e.createMarker(n.end)),!t&&!r||t&&r&&r<t?null:{start:t,end:r}}(e,this.props.dateEnv);return t&&(t=py(t)),t}return null}initHiddenDays(){let i,e=this.props.hiddenDays||[],t=[],r=0;for(!1===this.props.weekends&&e.push(0,6),i=0;i<7;i+=1)(t[i]=-1!==e.indexOf(i))||(r+=1);if(!r)throw new Error("invalid hiddenDays");this.isHiddenDayHash=t}trimHiddenDays(e){let{start:t,end:r}=e;return t&&(t=this.skipHiddenDays(t)),r&&(r=this.skipHiddenDays(r,-1,!0)),null==t||null==r||t<r?{start:t,end:r}:null}isHiddenDay(e){return e instanceof Date&&(e=e.getUTCDay()),this.isHiddenDayHash[e]}skipHiddenDays(e,t=1,r=!1){for(;this.isHiddenDayHash[(e.getUTCDay()+(r?t:0)+7)%7];)e=Zi(e,t);return e}}function gk(n,e,t){let{dateEnv:r,options:i}=t,s=e;return n?(s=Ir(s),s=r.add(s,i.defaultAllDayEventDuration)):s=r.add(s,i.defaultTimedEventDuration),s}function fT(n,e,t,r){let i=t.standardProps||{};null==i.hasEnd&&e.durationEditable&&(t.startDelta||t.endDelta)&&(i.hasEnd=!0);let s=Object.assign(Object.assign(Object.assign({},n),i),{ui:Object.assign(Object.assign({},n.ui),i.ui)});t.extendedProps&&(s.extendedProps=Object.assign(Object.assign({},s.extendedProps),t.extendedProps));for(let l of r.pluginHooks.eventDefMutationAppliers)l(s,t,r);return!s.hasEnd&&r.options.forceEventDuration&&(s.hasEnd=!0),s}function pT(n,e,t,r,i){let{dateEnv:s}=i,l=r.standardProps&&!0===r.standardProps.allDay,d=r.standardProps&&!1===r.standardProps.hasEnd,f=Object.assign({},n);return l&&(f.range=tT(f.range)),r.datesDelta&&t.startEditable&&(f.range={start:s.add(f.range.start,r.datesDelta),end:s.add(f.range.end,r.datesDelta)}),r.startDelta&&t.durationEditable&&(f.range={start:s.add(f.range.start,r.startDelta),end:f.range.end}),r.endDelta&&t.durationEditable&&(f.range={start:f.range.start,end:s.add(f.range.end,r.endDelta)}),d&&(f.range={start:f.range.start,end:gk(e.allDay,f.range.start,i)}),e.allDay&&(f.range={start:Ir(f.range.start),end:Ir(f.range.end)}),f.range.end<f.range.start&&(f.range.end=gk(e.allDay,f.range.start,i)),f}class am{constructor(e,t){this.context=e,this.internalEventSource=t}remove(){this.context.dispatch({type:"REMOVE_EVENT_SOURCE",sourceId:this.internalEventSource.sourceId})}refetch(){this.context.dispatch({type:"FETCH_EVENT_SOURCES",sourceIds:[this.internalEventSource.sourceId],isRefetch:!0})}get id(){return this.internalEventSource.publicId}get url(){return this.internalEventSource.meta.url}get format(){return this.internalEventSource.meta.format}}class or{constructor(e,t,r){this._context=e,this._def=t,this._instance=r||null}setProp(e,t){if(e in us)console.warn("Could not set date-related prop 'name'. Use one of the date-related methods instead.");else if("id"===e)t=fy[e](t),this.mutate({standardProps:{publicId:t}});else if(e in fy)t=fy[e](t),this.mutate({standardProps:{[e]:t}});else if(e in hy){let r=hy[e](t);r="color"===e?{backgroundColor:t,borderColor:t}:"editable"===e?{startEditable:t,durationEditable:t}:{[e]:t},this.mutate({standardProps:{ui:r}})}else console.warn(`Could not set prop '${e}'. Use setExtendedProp instead.`)}setExtendedProp(e,t){this.mutate({extendedProps:{[e]:t}})}setStart(e,t={}){let{dateEnv:r}=this._context,i=r.createMarker(e);if(i&&this._instance){let l=gy(this._instance.range.start,i,r,t.granularity);this.mutate(t.maintainDuration?{datesDelta:l}:{startDelta:l})}}setEnd(e,t={}){let i,{dateEnv:r}=this._context;if((null==e||(i=r.createMarker(e),i))&&this._instance)if(i){let s=gy(this._instance.range.end,i,r,t.granularity);this.mutate({endDelta:s})}else this.mutate({standardProps:{hasEnd:!1}})}setDates(e,t,r={}){let d,{dateEnv:i}=this._context,s={allDay:r.allDay},l=i.createMarker(e);if(l&&(null==t||(d=i.createMarker(t),d))&&this._instance){let f=this._instance.range;!0===r.allDay&&(f=tT(f));let y=gy(f.start,l,i,r.granularity);if(d){let w=gy(f.end,d,i,r.granularity);!function AM(n,e){return n.years===e.years&&n.months===e.months&&n.days===e.days&&n.milliseconds===e.milliseconds}(y,w)?this.mutate({startDelta:y,endDelta:w,standardProps:s}):this.mutate({datesDelta:y,standardProps:s})}else s.hasEnd=!1,this.mutate({datesDelta:y,standardProps:s})}}moveStart(e){let t=Bn(e);t&&this.mutate({startDelta:t})}moveEnd(e){let t=Bn(e);t&&this.mutate({endDelta:t})}moveDates(e){let t=Bn(e);t&&this.mutate({datesDelta:t})}setAllDay(e,t={}){let r={allDay:e},{maintainDuration:i}=t;null==i&&(i=this._context.options.allDayMaintainDuration),this._def.allDay!==e&&(r.hasEnd=i),this.mutate({standardProps:r})}formatRange(e){let{dateEnv:t}=this._context,r=this._instance,i=ei(e);return this._def.hasEnd?t.formatRange(r.range.start,r.range.end,i,{forcedStartTzo:r.forcedStartTzo,forcedEndTzo:r.forcedEndTzo}):t.format(r.range.start,i,{forcedTzo:r.forcedStartTzo})}mutate(e){let t=this._instance;if(t){let r=this._def,i=this._context,{eventStore:s}=i.getCurrentData(),l=function KM(n,e){let t=n.instances[e];if(t){let r=n.defs[t.defId],i=nm(n,s=>function YM(n,e){return Boolean(n.groupId&&n.groupId===e.groupId)}(r,s));return i.defs[r.defId]=r,i.instances[t.instanceId]=t,i}return{defs:{},instances:{}}}(s,t.instanceId);l=function mk(n,e,t,r){let i=by(n.defs,e),s={defs:{},instances:{}};for(let l in n.defs)s.defs[l]=fT(n.defs[l],i[l],t,r);for(let l in n.instances){let d=n.instances[l];s.instances[l]=pT(d,s.defs[d.defId],i[d.defId],t,r)}return s}(l,{"":{display:"",startEditable:!0,durationEditable:!0,constraints:[],overlap:null,allows:[],backgroundColor:"",borderColor:"",textColor:"",classNames:[]}},e,i);let f=new or(i,r,t);this._def=l.defs[r.defId],this._instance=l.instances[t.instanceId],i.dispatch({type:"MERGE_EVENTS",eventStore:l}),i.emitter.trigger("eventChange",{oldEvent:f,event:this,relatedEvents:lm(l,i,t),revert(){i.dispatch({type:"RESET_EVENTS",eventStore:s})}})}}remove(){let e=this._context,t=gT(this);e.dispatch({type:"REMOVE_EVENTS",eventStore:t}),e.emitter.trigger("eventRemove",{event:this,relatedEvents:[],revert(){e.dispatch({type:"MERGE_EVENTS",eventStore:t})}})}get source(){let{sourceId:e}=this._def;return e?new am(this._context,this._context.getCurrentData().eventSources[e]):null}get start(){return this._instance?this._context.dateEnv.toDate(this._instance.range.start):null}get end(){return this._instance&&this._def.hasEnd?this._context.dateEnv.toDate(this._instance.range.end):null}get startStr(){let e=this._instance;return e?this._context.dateEnv.formatIso(e.range.start,{omitTime:this._def.allDay,forcedTzo:e.forcedStartTzo}):""}get endStr(){let e=this._instance;return e&&this._def.hasEnd?this._context.dateEnv.formatIso(e.range.end,{omitTime:this._def.allDay,forcedTzo:e.forcedEndTzo}):""}get id(){return this._def.publicId}get groupId(){return this._def.groupId}get allDay(){return this._def.allDay}get title(){return this._def.title}get url(){return this._def.url}get display(){return this._def.ui.display||"auto"}get startEditable(){return this._def.ui.startEditable}get durationEditable(){return this._def.ui.durationEditable}get constraint(){return this._def.ui.constraints[0]||null}get overlap(){return this._def.ui.overlap}get allow(){return this._def.ui.allows[0]||null}get backgroundColor(){return this._def.ui.backgroundColor}get borderColor(){return this._def.ui.borderColor}get textColor(){return this._def.ui.textColor}get classNames(){return this._def.ui.classNames}get extendedProps(){return this._def.extendedProps}toPlainObject(e={}){let t=this._def,{ui:r}=t,{startStr:i,endStr:s}=this,l={allDay:t.allDay};return t.title&&(l.title=t.title),i&&(l.start=i),s&&(l.end=s),t.publicId&&(l.id=t.publicId),t.groupId&&(l.groupId=t.groupId),t.url&&(l.url=t.url),r.display&&"auto"!==r.display&&(l.display=r.display),e.collapseColor&&r.backgroundColor&&r.backgroundColor===r.borderColor?l.color=r.backgroundColor:(r.backgroundColor&&(l.backgroundColor=r.backgroundColor),r.borderColor&&(l.borderColor=r.borderColor)),r.textColor&&(l.textColor=r.textColor),r.classNames.length&&(l.classNames=r.classNames),Object.keys(t.extendedProps).length&&(e.collapseExtendedProps?Object.assign(l,t.extendedProps):l.extendedProps=t.extendedProps),l}toJSON(){return this.toPlainObject()}}function gT(n){let e=n._def,t=n._instance;return{defs:{[e.defId]:e},instances:t?{[t.instanceId]:t}:{}}}function lm(n,e,t){let{defs:r,instances:i}=n,s=[],l=t?t.instanceId:"";for(let d in i){let f=i[d],y=r[f.defId];f.instanceId!==l&&s.push(new or(e,y,f))}return s}function mT(n,e,t,r){let i={},s={},l={},d=[],f=[],y=by(n.defs,e);for(let w in n.defs){let D=n.defs[w];"inverse-background"===y[D.defId].display&&(D.groupId?(i[D.groupId]=[],l[D.groupId]||(l[D.groupId]=D)):s[w]=[])}for(let w in n.instances){let D=n.instances[w],x=n.defs[D.defId],N=y[x.defId],U=D.range,Q=!x.allDay&&r?py(U,r):U,X=xf(Q,t);X&&("inverse-background"===N.display?x.groupId?i[x.groupId].push(X):s[D.defId].push(X):"none"!==N.display&&("background"===N.display?d:f).push({def:x,ui:N,instance:D,range:X,isStart:Q.start&&Q.start.valueOf()===X.start.valueOf(),isEnd:Q.end&&Q.end.valueOf()===X.end.valueOf()}))}for(let w in i){let x=_y(i[w],t);for(let N of x){let U=l[w];d.push({def:U,ui:y[U.defId],instance:null,range:N,isStart:!1,isEnd:!1})}}for(let w in s){let x=_y(s[w],t);for(let N of x)d.push({def:n.defs[w],ui:y[w],instance:null,range:N,isStart:!1,isEnd:!1})}return{bg:d,fg:f}}function _T(n,e){n.fcSeg=e}function um(n){return n.fcSeg||n.parentNode.fcSeg||null}function by(n,e){return Uc(n,t=>yT(t,e))}function yT(n,e){let t=[];return e[""]&&t.push(e[""]),e[n.defId]&&t.push(e[n.defId]),t.push(n.ui),function qD(n){return n.reduce(ZD,WD)}(t)}function vT(n){let{eventRange:e}=n,t=e.def,r=e.instance?e.instance.range:e.range,i=r.start?r.start.valueOf():0,s=r.end?r.end.valueOf():0;return Object.assign(Object.assign(Object.assign({},t.extendedProps),t),{id:t.publicId,start:i,end:s,duration:s-i,allDay:Number(t.allDay),_seg:n})}function wT(n,e){let{pluginHooks:t}=e,r=t.isDraggableTransformers,{def:i,ui:s}=n.eventRange,l=s.startEditable;for(let d of r)l=d(l,i,s,e);return l}function _k(n,e){return n.isStart&&n.eventRange.ui.durationEditable&&e.options.eventResizableFromStart}function r0(n,e,t,r,i,s,l){let{dateEnv:d,options:f}=t,{displayEventTime:y,displayEventEnd:w}=f,D=n.eventRange.def,x=n.eventRange.instance;null==y&&(y=!1!==r),null==w&&(w=!1!==i);let N=x.range.start,U=x.range.end,Q=s||n.start||n.eventRange.range.start,X=l||n.end||n.eventRange.range.end,ae=Ir(N).valueOf()===Ir(Q).valueOf(),Le=Ir(Ul(U,-1)).valueOf()===Ir(Ul(X,-1)).valueOf();return y&&!D.allDay&&(ae||Le)?(Q=ae?N:Q,X=Le?U:X,w&&D.hasEnd?d.formatRange(Q,X,e,{forcedStartTzo:s?null:x.forcedStartTzo,forcedEndTzo:l?null:x.forcedEndTzo}):d.format(Q,e,{forcedTzo:s?null:x.forcedStartTzo})):""}function cm(n,e,t){let r=n.eventRange.range;return{isPast:r.end<(t||e.start),isFuture:r.start>=(t||e.end),isToday:e&&$c(e,r.start)}}function ET(n){let e=["fc-event"];return n.isMirror&&e.push("fc-event-mirror"),n.isDraggable&&e.push("fc-event-draggable"),(n.isStartResizable||n.isEndResizable)&&e.push("fc-event-resizable"),n.isDragging&&e.push("fc-event-dragging"),n.isResizing&&e.push("fc-event-resizing"),n.isSelected&&e.push("fc-event-selected"),n.isStart&&e.push("fc-event-start"),n.isEnd&&e.push("fc-event-end"),n.isPast&&e.push("fc-event-past"),n.isToday&&e.push("fc-event-today"),n.isFuture&&e.push("fc-event-future"),e}function Ey(n,e){let{def:t,instance:r}=n.eventRange,{url:i}=t;if(i)return{href:i};let{emitter:s,options:l}=e,{eventInteractive:d}=l;return null==d&&(d=t.interactive,null==d&&(d=Boolean(s.hasHandlers("eventClick")))),d?bD(f=>{s.trigger("eventClick",{el:f.target,event:new or(e,t,r),jsEvent:f,view:e.viewApi})}):{}}const Gc={start:Te,end:Te,allDay:Boolean};function IT(n,e,t){return Object.assign(Object.assign({},DT(n,e,t)),{timeZone:e.timeZone})}function DT(n,e,t){return{start:e.toDate(n.start),end:e.toDate(n.end),startStr:e.formatIso(n.start,{omitTime:t}),endStr:e.formatIso(n.end,{omitTime:t})}}let TT={};!function AT(n,e){TT[n]=e}("gregory",class ST{getMarkerYear(e){return e.getUTCFullYear()}getMarkerMonth(e){return e.getUTCMonth()}getMarkerDay(e){return e.getUTCDate()}arrayToMarker(e){return Ms(e)}markerToArray(e){return Ou(e)}});const bk=/^\s*(\d{4})(-?(\d{2})(-?(\d{2})([T ](\d{2}):?(\d{2})(:?(\d{2})(\.(\d+))?)?(Z|(([-+])(\d{2})(:?(\d{2}))?))?)?)?)?$/;class qF{constructor(e){let t=this.timeZone=e.timeZone,r="local"!==t&&"UTC"!==t;e.namedTimeZoneImpl&&r&&(this.namedTimeZoneImpl=new e.namedTimeZoneImpl(t)),this.canComputeOffset=Boolean(!r||this.namedTimeZoneImpl),this.calendarSystem=function WF(n){return new TT[n]}(e.calendarSystem),this.locale=e.locale,this.weekDow=e.locale.week.dow,this.weekDoy=e.locale.week.doy,"ISO"===e.weekNumberCalculation&&(this.weekDow=1,this.weekDoy=4),"number"==typeof e.firstDay&&(this.weekDow=e.firstDay),"function"==typeof e.weekNumberCalculation&&(this.weekNumberFunc=e.weekNumberCalculation),this.weekText=null!=e.weekText?e.weekText:e.locale.options.weekText,this.weekTextLong=(null!=e.weekTextLong?e.weekTextLong:e.locale.options.weekTextLong)||this.weekText,this.cmdFormatter=e.cmdFormatter,this.defaultSeparator=e.defaultSeparator}createMarker(e){let t=this.createMarkerMeta(e);return null===t?null:t.marker}createNowMarker(){return this.canComputeOffset?this.timestampToMarker((new Date).valueOf()):Ms(LD(new Date))}createMarkerMeta(e){if("string"==typeof e)return this.parse(e);let t=null;return"number"==typeof e?t=this.timestampToMarker(e):e instanceof Date?(e=e.valueOf(),isNaN(e)||(t=this.timestampToMarker(e))):Array.isArray(e)&&(t=Ms(e)),null!==t&&xb(t)?{marker:t,isTimeUnspecified:!1,forcedTzo:null}:null}parse(e){let t=function xT(n){let e=bk.exec(n);if(e){let t=new Date(Date.UTC(Number(e[1]),e[3]?Number(e[3])-1:0,Number(e[5]||1),Number(e[7]||0),Number(e[8]||0),Number(e[10]||0),e[12]?1e3*Number(`0.${e[12]}`):0));if(xb(t)){let r=null;return e[13]&&(r=("-"===e[15]?-1:1)*(60*Number(e[16]||0)+Number(e[18]||0))),{marker:t,isTimeUnspecified:!e[6],timeZoneOffset:r}}}return null}(e);if(null===t)return null;let{marker:r}=t,i=null;return null!==t.timeZoneOffset&&(this.canComputeOffset?r=this.timestampToMarker(r.valueOf()-60*t.timeZoneOffset*1e3):i=t.timeZoneOffset),{marker:r,isTimeUnspecified:t.isTimeUnspecified,forcedTzo:i}}getYear(e){return this.calendarSystem.getMarkerYear(e)}getMonth(e){return this.calendarSystem.getMarkerMonth(e)}getDay(e){return this.calendarSystem.getMarkerDay(e)}add(e,t){let r=this.calendarSystem.markerToArray(e);return r[0]+=t.years,r[1]+=t.months,r[2]+=t.days,r[6]+=t.milliseconds,this.calendarSystem.arrayToMarker(r)}subtract(e,t){let r=this.calendarSystem.markerToArray(e);return r[0]-=t.years,r[1]-=t.months,r[2]-=t.days,r[6]-=t.milliseconds,this.calendarSystem.arrayToMarker(r)}addYears(e,t){let r=this.calendarSystem.markerToArray(e);return r[0]+=t,this.calendarSystem.arrayToMarker(r)}addMonths(e,t){let r=this.calendarSystem.markerToArray(e);return r[1]+=t,this.calendarSystem.arrayToMarker(r)}diffWholeYears(e,t){let{calendarSystem:r}=this;return Bc(e)===Bc(t)&&r.getMarkerDay(e)===r.getMarkerDay(t)&&r.getMarkerMonth(e)===r.getMarkerMonth(t)?r.getMarkerYear(t)-r.getMarkerYear(e):null}diffWholeMonths(e,t){let{calendarSystem:r}=this;return Bc(e)===Bc(t)&&r.getMarkerDay(e)===r.getMarkerDay(t)?r.getMarkerMonth(t)-r.getMarkerMonth(e)+12*(r.getMarkerYear(t)-r.getMarkerYear(e)):null}greatestWholeUnit(e,t){let r=this.diffWholeYears(e,t);return null!==r?{unit:"year",value:r}:(r=this.diffWholeMonths(e,t),null!==r?{unit:"month",value:r}:(r=function PM(n,e){let t=cy(n,e);return null!==t&&t%7==0?t/7:null}(e,t),null!==r?{unit:"week",value:r}:(r=cy(e,t),null!==r?{unit:"day",value:r}:(r=function kD(n,e){return(e.valueOf()-n.valueOf())/36e5}(e,t),Cf(r)?{unit:"hour",value:r}:(r=function ND(n,e){return(e.valueOf()-n.valueOf())/6e4}(e,t),Cf(r)?{unit:"minute",value:r}:(r=function kM(n,e){return(e.valueOf()-n.valueOf())/1e3}(e,t),Cf(r)?{unit:"second",value:r}:{unit:"millisecond",value:t.valueOf()-e.valueOf()}))))))}countDurationsBetween(e,t,r){let i;return r.years&&(i=this.diffWholeYears(e,t),null!==i)?i/function DD(n){return If(n)/365}(r):r.months&&(i=this.diffWholeMonths(e,t),null!==i)?i/function RM(n){return If(n)/30}(r):r.days&&(i=cy(e,t),null!==i)?i/If(r):(t.valueOf()-e.valueOf())/nh(r)}startOf(e,t){return"year"===t?this.startOfYear(e):"month"===t?this.startOfMonth(e):"week"===t?this.startOfWeek(e):"day"===t?Ir(e):"hour"===t?function RF(n){return Ms([n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate(),n.getUTCHours()])}(e):"minute"===t?function PD(n){return Ms([n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate(),n.getUTCHours(),n.getUTCMinutes()])}(e):"second"===t?function OM(n){return Ms([n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate(),n.getUTCHours(),n.getUTCMinutes(),n.getUTCSeconds()])}(e):null}startOfYear(e){return this.calendarSystem.arrayToMarker([this.calendarSystem.getMarkerYear(e)])}startOfMonth(e){return this.calendarSystem.arrayToMarker([this.calendarSystem.getMarkerYear(e),this.calendarSystem.getMarkerMonth(e)])}startOfWeek(e){return this.calendarSystem.arrayToMarker([this.calendarSystem.getMarkerYear(e),this.calendarSystem.getMarkerMonth(e),e.getUTCDate()-(e.getUTCDay()-this.weekDow+7)%7])}computeWeekNumber(e){return this.weekNumberFunc?this.weekNumberFunc(this.toDate(e)):function LM(n,e,t){let r=n.getUTCFullYear(),i=OD(n,r,e,t);if(i<1)return OD(n,r-1,e,t);let s=OD(n,r+1,e,t);return s>=1?Math.min(i,s):i}(e,this.weekDow,this.weekDoy)}format(e,t,r={}){return t.format({marker:e,timeZoneOffset:null!=r.forcedTzo?r.forcedTzo:this.offsetForMarker(e)},this)}formatRange(e,t,r,i={}){return i.isEndExclusive&&(t=Ul(t,-1)),r.formatRange({marker:e,timeZoneOffset:null!=i.forcedStartTzo?i.forcedStartTzo:this.offsetForMarker(e)},{marker:t,timeZoneOffset:null!=i.forcedEndTzo?i.forcedEndTzo:this.offsetForMarker(t)},this,i.defaultSeparator)}formatIso(e,t={}){let r=null;return t.omitTimeZoneOffset||(r=null!=t.forcedTzo?t.forcedTzo:this.offsetForMarker(e)),function FM(n,e,t=!1){let r=n.toISOString();return r=r.replace(".000",""),t&&(r=r.replace("T00:00:00Z","")),r.length>10&&(null==e?r=r.replace("Z",""):0!==e&&(r=r.replace("Z",Mb(e,!0)))),r}(e,r,t.omitTime)}timestampToMarker(e){return"local"===this.timeZone?Ms(LD(new Date(e))):"UTC"!==this.timeZone&&this.namedTimeZoneImpl?Ms(this.namedTimeZoneImpl.timestampToArray(e)):new Date(e)}offsetForMarker(e){return"local"===this.timeZone?-FD(Ou(e)).getTimezoneOffset():"UTC"===this.timeZone?0:this.namedTimeZoneImpl?this.namedTimeZoneImpl.offsetForArray(Ou(e)):null}toDate(e,t){return"local"===this.timeZone?FD(Ou(e)):"UTC"===this.timeZone?new Date(e.valueOf()):this.namedTimeZoneImpl?new Date(e.valueOf()-1e3*this.namedTimeZoneImpl.offsetForArray(Ou(e))*60):new Date(e.valueOf()-(t||0))}}function o0(n){return n.span.end}function Rf(n){return n.index+":"+n.span.start}function Mf(n,e){let t=Math.max(n.start,e.start),r=Math.min(n.end,e.end);return t<r?{start:t,end:r}:null}function kf(n,e,t){n.splice(e,0,t)}function a0(n,e,t){let r=0,i=n.length;if(!i||e<t(n[r]))return[0,0];if(e>t(n[i-1]))return[i,0];for(;r<i;){let s=Math.floor(r+(i-r)/2),l=t(n[s]);if(e<l)i=s;else{if(!(e>l))return[s,1];r=s+1}}return[r,0]}class NT{constructor(e){this.component=e.component,this.isHitComboAllowed=e.isHitComboAllowed||null}destroy(){}}const OT={};Boolean;class Dk extends ui{constructor(){super(...arguments),this.state={forPrint:!1},this.handleBeforePrint=()=>{this.setState({forPrint:!0})},this.handleAfterPrint=()=>{this.setState({forPrint:!1})}}render(){let{props:e}=this,{options:t}=e,{forPrint:r}=this.state,i=r||"auto"===t.height||"auto"===t.contentHeight,s=i||null==t.height?"":t.height,l=["fc",r?"fc-media-print":"fc-media-screen",`fc-direction-${t.direction}`,e.theme.getClass("root")];return zb()||l.push("fc-liquid-hack"),e.children(l,s,i,r)}componentDidMount(){let{emitter:e}=this.props;e.on("_beforeprint",this.handleBeforePrint),e.on("_afterprint",this.handleAfterPrint)}componentWillUnmount(){let{emitter:e}=this.props;e.off("_beforeprint",this.handleBeforePrint),e.off("_afterprint",this.handleAfterPrint)}}const LT="fc-col-header-cell";function Ak(n){return n.text}class FT extends ui{constructor(){super(...arguments),this.id=th(),this.queuedDomNodes=[],this.currentDomNodes=[],this.handleEl=e=>{this.props.elRef&&Vu(this.props.elRef,e)}}render(){const{props:e,context:t}=this,{options:r}=t,{customGenerator:i,defaultGenerator:s,renderProps:l}=e,d=xk(e);let y,D,f=!1,w=[];if(null!=i){const x="function"==typeof i?i(l,be):i;if(!0===x)f=!0;else{const N=x&&"object"==typeof x;N&&"html"in x?d.dangerouslySetInnerHTML={__html:x.html}:N&&"domNodes"in x?w=Array.prototype.slice.call(x.domNodes):N||"function"==typeof x?D=x:y=x}}else f=!Sk(e.generatorName,r);return f&&s&&(y=s(l)),this.queuedDomNodes=w,this.currentGeneratorMeta=D,be(e.elTag,d,y)}componentDidMount(){this.applyQueueudDomNodes(),this.triggerCustomRendering(!0)}componentDidUpdate(){this.applyQueueudDomNodes(),this.triggerCustomRendering(!0)}componentWillUnmount(){this.triggerCustomRendering(!1)}triggerCustomRendering(e){var t;const{props:r,context:i}=this,{handleCustomRendering:s,customRenderingMetaMap:l}=i.options;if(s){const d=null!==(t=this.currentGeneratorMeta)&&void 0!==t?t:l?.[r.generatorName];d&&s(Object.assign(Object.assign({id:this.id,isActive:e,containerEl:this.base,reportNewContainerEl:this.handleEl,generatorMeta:d},r),{elClasses:(r.elClasses||[]).filter(YF)}))}}applyQueueudDomNodes(){const{queuedDomNodes:e,currentDomNodes:t}=this,r=this.base;if(!Fl(e,t)){t.forEach(gD);for(let i of e)r.appendChild(i);this.currentDomNodes=e}}}function Sk(n,e){var t;return Boolean(e.handleCustomRendering&&n&&(null===(t=e.customRenderingMetaMap)||void 0===t?void 0:t[n]))}function xk(n,e){const t=Object.assign(Object.assign({},n.elAttrs),{ref:n.elRef});return(n.elClasses||e)&&(t.className=(n.elClasses||[]).concat(e||[]).concat(t.className||[]).filter(Boolean).join(" ")),n.elStyle&&(t.style=n.elStyle),t}function YF(n){return Boolean(n)}FT.addPropsEquality({elClasses:Fl,elStyle:Ll,elAttrs:function Tf(n,e){const t=ly(n,e);for(let r of t)if(!AD.test(r))return!1;return!0},renderProps:Ll});const UT=lk(0);let sa=(()=>{class n extends io{constructor(){super(...arguments),this.InnerContent=Rk.bind(void 0,this),this.handleRootEl=t=>{this.rootEl=t,this.props.elRef&&Vu(this.props.elRef,t)}}render(){const{props:t}=this,r=function Mk(n,e){const t="function"==typeof n?n(e):n||[];return"string"==typeof t?[t]:t}(t.classNameGenerator,t.renderProps);if(t.children){const i=xk(t,r),s=t.children(this.InnerContent,t.renderProps,i);return t.elTag?be(t.elTag,i,s):s}return be(FT,Object.assign(Object.assign({},t),{elRef:this.handleRootEl,elTag:t.elTag||"div",elClasses:(t.elClasses||[]).concat(r),renderId:this.context}))}componentDidMount(){var t,r;null===(r=(t=this.props).didMount)||void 0===r||r.call(t,Object.assign(Object.assign({},this.props.renderProps),{el:this.rootEl||this.base}))}componentWillUnmount(){var t,r;null===(r=(t=this.props).willUnmount)||void 0===r||r.call(t,Object.assign(Object.assign({},this.props.renderProps),{el:this.rootEl||this.base}))}}return n.contextType=UT,n})();function Rk(n,e){const t=n.props;return be(FT,Object.assign({renderProps:t.renderProps,generatorName:t.generatorName,customGenerator:t.customGenerator,defaultGenerator:t.defaultGenerator,renderId:n.context},e))}class VT extends ui{render(){let{dateEnv:e,options:t,theme:r,viewApi:i}=this.context,{props:s}=this,{date:l,dateProfile:d}=s,f=qb(l,s.todayRange,null,d),y=[LT].concat(Zb(f,r)),w=e.format(l,s.dayHeaderFormat),D=!f.isDisabled&&s.colCnt>1?Kb(this.context,l):{},x=Object.assign(Object.assign(Object.assign({date:e.toDate(l),view:i},s.extraRenderProps),{text:w}),f);return be(sa,{elTag:"th",elClasses:y,elAttrs:Object.assign({role:"columnheader",colSpan:s.colSpan,"data-date":f.isDisabled?void 0:Rb(l)},s.extraDataAttrs),renderProps:x,generatorName:"dayHeaderContent",customGenerator:t.dayHeaderContent,defaultGenerator:Ak,classNameGenerator:t.dayHeaderClassNames,didMount:t.dayHeaderDidMount,willUnmount:t.dayHeaderWillUnmount},N=>be("div",{className:"fc-scrollgrid-sync-inner"},!f.isDisabled&&be(N,{elTag:"a",elAttrs:D,elClasses:["fc-col-header-cell-cushion",s.isSticky&&"fc-sticky"]})))}}const rh=ei({weekday:"long"});class BT extends ui{render(){let{props:e}=this,{dateEnv:t,theme:r,viewApi:i,options:s}=this.context,l=Zi(new Date(2592e5),e.dow),d={dow:e.dow,isDisabled:!1,isFuture:!1,isPast:!1,isToday:!1,isOther:!1},f=t.format(l,e.dayHeaderFormat),y=Object.assign(Object.assign(Object.assign(Object.assign({date:l},d),{view:i}),e.extraRenderProps),{text:f});return be(sa,{elTag:"th",elClasses:[LT,...Zb(d,r),...e.extraClassNames||[]],elAttrs:Object.assign({role:"columnheader",colSpan:e.colSpan},e.extraDataAttrs),renderProps:y,generatorName:"dayHeaderContent",customGenerator:s.dayHeaderContent,defaultGenerator:Ak,classNameGenerator:s.dayHeaderClassNames,didMount:s.dayHeaderDidMount,willUnmount:s.dayHeaderWillUnmount},w=>be("div",{className:"fc-scrollgrid-sync-inner"},be(w,{elTag:"a",elClasses:["fc-col-header-cell-cushion",e.isSticky&&"fc-sticky"],elAttrs:{"aria-label":t.format(l,rh)}})))}}let Cy=(()=>{class n extends io{constructor(t,r){super(t,r),this.initialNowDate=wy(r.options.now,r.dateEnv),this.initialNowQueriedMs=(new Date).valueOf(),this.state=this.computeTiming().currentState}render(){let{props:t,state:r}=this;return t.children(r.nowDate,r.todayRange)}componentDidMount(){this.setTimeout()}componentDidUpdate(t){t.unit!==this.props.unit&&(this.clearTimeout(),this.setTimeout())}componentWillUnmount(){this.clearTimeout()}computeTiming(){let{props:t,context:r}=this,i=Ul(this.initialNowDate,(new Date).valueOf()-this.initialNowQueriedMs),s=r.dateEnv.startOf(i,t.unit),l=r.dateEnv.add(s,Bn(1,t.unit)),d=l.valueOf()-i.valueOf();return d=Math.min(864e5,d),{currentState:{nowDate:s,todayRange:Iy(s)},nextState:{nowDate:l,todayRange:Iy(l)},waitMs:d}}setTimeout(){let{nextState:t,waitMs:r}=this.computeTiming();this.timeoutId=setTimeout(()=>{this.setState(t,()=>{this.setTimeout()})},r)}clearTimeout(){this.timeoutId&&clearTimeout(this.timeoutId)}}return n.contextType=Uu,n})();function Iy(n){let e=Ir(n);return{start:e,end:Zi(e,1)}}class kk extends ui{constructor(){super(...arguments),this.createDayHeaderFormatter=gn(l0)}render(){let{context:e}=this,{dates:t,dateProfile:r,datesRepDistinctDays:i,renderIntro:s}=this.props,l=this.createDayHeaderFormatter(e.options.dayHeaderFormat,i,t.length);return be(Cy,{unit:"day"},(d,f)=>be("tr",{role:"row"},s&&s("day"),t.map(y=>i?be(VT,{key:y.toISOString(),date:y,dateProfile:r,todayRange:f,colCnt:t.length,dayHeaderFormat:l}):be(BT,{key:y.getUTCDay(),dow:y.getUTCDay(),dayHeaderFormat:l}))))}}function l0(n,e,t){return n||function Tk(n,e){return ei(!n||e>10?{weekday:"short"}:e>1?{weekday:"short",month:"numeric",day:"numeric",omitCommas:!0}:{weekday:"long"})}(e,t)}class u0{constructor(e,t){let r=e.start,{end:i}=e,s=[],l=[],d=-1;for(;r<i;)t.isHiddenDay(r)?s.push(d+.5):(d+=1,s.push(d),l.push(r)),r=Zi(r,1);this.dates=l,this.indices=s,this.cnt=l.length}sliceRange(e){let t=this.getDateDayIndex(e.start),r=this.getDateDayIndex(Zi(e.end,-1)),i=Math.max(0,t),s=Math.min(this.cnt-1,r);return i=Math.ceil(i),s=Math.floor(s),i<=s?{firstIndex:i,lastIndex:s,isStart:t===i,isEnd:r===s}:null}getDateDayIndex(e){let{indices:t}=this,r=Math.floor(Vc(this.dates[0],e));return r<0?t[0]-1:r>=t.length?t[t.length-1]+1:t[r]}}class Dy{constructor(e,t){let i,s,l,{dates:r}=e;if(t){for(s=r[0].getUTCDay(),i=1;i<r.length&&r[i].getUTCDay()!==s;i+=1);l=Math.ceil(r.length/i)}else l=1,i=r.length;this.rowCnt=l,this.colCnt=i,this.daySeries=e,this.cells=this.buildCells(),this.headerDates=this.buildHeaderDates()}buildCells(){let e=[];for(let t=0;t<this.rowCnt;t+=1){let r=[];for(let i=0;i<this.colCnt;i+=1)r.push(this.buildCell(t,i));e.push(r)}return e}buildCell(e,t){let r=this.daySeries.dates[e*this.colCnt+t];return{key:r.toISOString(),date:r}}buildHeaderDates(){let e=[];for(let t=0;t<this.colCnt;t+=1)e.push(this.cells[0][t].date);return e}sliceRange(e){let{colCnt:t}=this,r=this.daySeries.sliceRange(e),i=[];if(r){let{firstIndex:s,lastIndex:l}=r,d=s;for(;d<=l;){let f=Math.floor(d/t),y=Math.min((f+1)*t,l+1);i.push({row:f,firstCol:d%t,lastCol:(y-1)%t,isStart:r.isStart&&d===s,isEnd:r.isEnd&&y-1===l}),d=y}}return i}}function c0(n,e){let t=n.activeRange;return e?t:{start:Ul(t.start,n.slotMinTime.milliseconds),end:Ul(t.end,n.slotMaxTime.milliseconds-864e5)}}function jT(n,e,t){let r=t.options.eventDataTransform,i=e?e.eventDataTransform:null;return i&&(n=$T(n,i)),r&&(n=$T(n,r)),n}function $T(n,e){let t;if(e){t=[];for(let r of n){let i=e(r);i?t.push(i):null==i&&t.push(r)}}else t=n;return t}function zT(n,e,t){let{defs:r}=n,i=Uc(n.instances,s=>r[s.defId].allDay?s:Object.assign(Object.assign({},s),{range:{start:t.createMarker(e.toDate(s.range.start,s.forcedStartTzo)),end:t.createMarker(e.toDate(s.range.end,s.forcedEndTzo))},forcedStartTzo:t.canComputeOffset?null:s.forcedStartTzo,forcedEndTzo:t.canComputeOffset?null:s.forcedEndTzo}));return{defs:r,instances:i}}function d0(n,e){return nm(n,t=>t.sourceId!==e)}class Ok extends Error{constructor(e,t){super(e),this.response=t}}class g0{constructor(e){this.drainedOption=e,this.isRunning=!1,this.isDirty=!1,this.pauseDepths={},this.timeoutId=0}request(e){this.isDirty=!0,this.isPaused()||(this.clearTimeout(),null==e?this.tryDrain():this.timeoutId=setTimeout(this.tryDrain.bind(this),e))}pause(e=""){let{pauseDepths:t}=this;t[e]=(t[e]||0)+1,this.clearTimeout()}resume(e="",t){let{pauseDepths:r}=this;e in r&&(t?delete r[e]:(r[e]-=1,r[e]<=0&&delete r[e]),this.tryDrain())}isPaused(){return Object.keys(this.pauseDepths).length}tryDrain(){if(!this.isRunning&&!this.isPaused()){for(this.isRunning=!0;this.isDirty;)this.isDirty=!1,this.drained();this.isRunning=!1}}clear(){this.clearTimeout(),this.isDirty=!1,this.pauseDepths={}}clearTimeout(){this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=0)}drained(){this.drainedOption&&this.drainedOption()}}const Ay=/^(visible|hidden)$/;class i2 extends ui{constructor(){super(...arguments),this.handleEl=e=>{this.el=e,Vu(this.props.elRef,e)}}render(){let{props:e}=this,{liquid:t,liquidIsAbsolute:r}=e,i=t&&r,s=["fc-scroller"];return t&&s.push(r?"fc-scroller-liquid-absolute":"fc-scroller-liquid"),be("div",{ref:this.handleEl,className:s.join(" "),style:{overflowX:e.overflowX,overflowY:e.overflowY,left:i&&-(e.overcomeLeft||0)||"",right:i&&-(e.overcomeRight||0)||"",bottom:i&&-(e.overcomeBottom||0)||"",marginLeft:!i&&-(e.overcomeLeft||0)||"",marginRight:!i&&-(e.overcomeRight||0)||"",marginBottom:!i&&-(e.overcomeBottom||0)||"",maxHeight:e.maxHeight||""}},e.children)}needsXScrolling(){if(Ay.test(this.props.overflowX))return!1;let{el:e}=this,t=this.el.getBoundingClientRect().width-this.getYScrollbarWidth(),{children:r}=e;for(let i=0;i<r.length;i+=1)if(r[i].getBoundingClientRect().width>t)return!0;return!1}needsYScrolling(){if(Ay.test(this.props.overflowY))return!1;let{el:e}=this,t=this.el.getBoundingClientRect().height-this.getXScrollbarWidth(),{children:r}=e;for(let i=0;i<r.length;i+=1)if(r[i].getBoundingClientRect().height>t)return!0;return!1}getXScrollbarWidth(){return Ay.test(this.props.overflowX)?0:this.el.offsetHeight-this.el.clientHeight}getYScrollbarWidth(){return Ay.test(this.props.overflowY)?0:this.el.offsetWidth-this.el.clientWidth}}class Nf{constructor(e){this.masterCallback=e,this.currentMap={},this.depths={},this.callbackMap={},this.handleValue=(t,r)=>{let{depths:i,currentMap:s}=this,l=!1,d=!1;null!==t?(l=r in s,s[r]=t,i[r]=(i[r]||0)+1,d=!0):(i[r]-=1,i[r]||(delete s[r],delete this.callbackMap[r],l=!0)),this.masterCallback&&(l&&this.masterCallback(null,String(r)),d&&this.masterCallback(t,String(r)))}}createRef(e){let t=this.callbackMap[e];return t||(t=this.callbackMap[e]=r=>{this.handleValue(r,String(e))}),t}collect(e,t,r){return function SD(n,e=0,t,r=1){let i=[];null==t&&(t=Object.keys(n).length);for(let s=e;s<t;s+=r){let l=n[s];void 0!==l&&i.push(l)}return i}(this.currentMap,e,t,r)}getAll(){return Wg(this.currentMap)}}function Fk(n,e){return n.liquid&&e.liquid}function a2(n,e){return Fl(n,e,Ll)}function l2(n,e){let t=[];for(let r of n){let i=r.span||1;for(let s=0;s<i;s+=1)t.push(be("col",{style:{width:"shrink"===r.width?u2(e):r.width||"",minWidth:r.minWidth||""}}))}return be("colgroup",{},...t)}function u2(n){return n??4}function h2(n,e){let t=["fc-scrollgrid-section",`fc-scrollgrid-section-${n.type}`,n.className];return e&&n.liquid&&null==n.maxHeight&&t.push("fc-scrollgrid-section-liquid"),n.isSticky&&t.push("fc-scrollgrid-section-sticky"),t}function o(n){return be("div",{className:"fc-scrollgrid-sticky-shim",style:{width:n.clientWidth,minWidth:n.tableMinWidth}})}function a(n){let{stickyHeaderDates:e}=n;return(null==e||"auto"===e)&&(e="auto"===n.height||"auto"===n.viewHeight),e}class h extends ui{constructor(){super(...arguments),this.processCols=gn(e=>e,a2),this.renderMicroColGroup=gn(l2),this.scrollerRefs=new Nf,this.scrollerElRefs=new Nf(this._handleScrollerEl.bind(this)),this.state={shrinkWidth:null,forceYScrollbars:!1,scrollerClientWidths:{},scrollerClientHeights:{}},this.handleSizing=()=>{this.safeSetState(Object.assign({shrinkWidth:this.computeShrinkWidth()},this.computeScrollerDims()))}}render(){let{props:e,state:t,context:r}=this,i=e.sections||[],s=this.processCols(e.cols),l=this.renderMicroColGroup(s,t.shrinkWidth),d=function d2(n,e){let t=["fc-scrollgrid",e.theme.getClass("table")];return n&&t.push("fc-scrollgrid-liquid"),t}(e.liquid,r);e.collapsibleWidth&&d.push("fc-scrollgrid-collapsible");let w,f=i.length,y=0,D=[],x=[],N=[];for(;y<f&&"header"===(w=i[y]).type;)D.push(this.renderSection(w,l,!0)),y+=1;for(;y<f&&"body"===(w=i[y]).type;)x.push(this.renderSection(w,l,!1)),y+=1;for(;y<f&&"footer"===(w=i[y]).type;)N.push(this.renderSection(w,l,!0)),y+=1;let U=!zb();const Q={role:"rowgroup"};return be("table",{role:"grid",className:d.join(" "),style:{height:e.height}},Boolean(!U&&D.length)&&be("thead",Q,...D),Boolean(!U&&x.length)&&be("tbody",Q,...x),Boolean(!U&&N.length)&&be("tfoot",Q,...N),U&&be("tbody",Q,...D,...x,...N))}renderSection(e,t,r){return"outerContent"in e?be(Cr,{key:e.key},e.outerContent):be("tr",{key:e.key,role:"presentation",className:h2(e,this.props.liquid).join(" ")},this.renderChunkTd(e,t,e.chunk,r))}renderChunkTd(e,t,r,i){if("outerContent"in r)return r.outerContent;let{props:s}=this,{forceYScrollbars:l,scrollerClientWidths:d,scrollerClientHeights:f}=this.state,y=function o2(n,e){return null!=e.maxHeight||Fk(n,e)}(s,e),w=Fk(s,e),D=s.liquid?l?"scroll":y?"auto":"hidden":"visible",x=e.key,N=function Uk(n,e,t,r){let{expandRows:i}=t;return"function"==typeof e.content?e.content(t):be("table",{role:"presentation",className:[e.tableClassName,n.syncRowHeights?"fc-scrollgrid-sync-table":""].join(" "),style:{minWidth:t.tableMinWidth,width:t.clientWidth,height:i?t.clientHeight:""}},t.tableColGroupNode,be(r?"thead":"tbody",{role:"presentation"},"function"==typeof e.rowContent?e.rowContent(t):e.rowContent))}(e,r,{tableColGroupNode:t,tableMinWidth:"",clientWidth:s.collapsibleWidth||void 0===d[x]?null:d[x],clientHeight:void 0!==f[x]?f[x]:null,expandRows:e.expandRows,syncRowHeights:!1,rowSyncHeights:[],reportRowHeightChange:()=>{}},i);return be(i?"th":"td",{ref:r.elRef,role:"presentation"},be("div",{className:"fc-scroller-harness"+(w?" fc-scroller-harness-liquid":"")},be(i2,{ref:this.scrollerRefs.createRef(x),elRef:this.scrollerElRefs.createRef(x),overflowY:D,overflowX:s.liquid?"hidden":"visible",maxHeight:e.maxHeight,liquid:w,liquidIsAbsolute:!0},N)))}_handleScrollerEl(e,t){let r=function p(n,e){for(let t of n)if(t.key===e)return t;return null}(this.props.sections,t);r&&Vu(r.chunk.scrollerElRef,e)}componentDidMount(){this.handleSizing(),this.context.addResizeHandler(this.handleSizing)}componentDidUpdate(){this.handleSizing()}componentWillUnmount(){this.context.removeResizeHandler(this.handleSizing)}computeShrinkWidth(){return function c2(n){for(let e of n)if("shrink"===e.width)return!0;return!1}(this.props.cols)?function s2(n){let e=function wF(n,e){let t=n instanceof HTMLElement?[n]:n,r=[];for(let i=0;i<t.length;i+=1){let s=t[i].querySelectorAll(e);for(let l=0;l<s.length;l+=1)r.push(s[l])}return r}(n,".fc-scrollgrid-shrink"),t=0;for(let r of e)t=Math.max(t,IM(r));return Math.ceil(t)}(this.scrollerElRefs.getAll()):0}computeScrollerDims(){let e=function lT(){return vy||(vy=function uT(){let n=document.createElement("div");n.style.overflow="scroll",n.style.position="absolute",n.style.top="-9999px",n.style.left="-9999px",document.body.appendChild(n);let e=function cT(n){return{x:n.offsetHeight-n.clientHeight,y:n.offsetWidth-n.clientWidth}}(n);return document.body.removeChild(n),e}()),vy}(),{scrollerRefs:t,scrollerElRefs:r}=this,i=!1,s={},l={};for(let d in t.currentMap){let f=t.currentMap[d];if(f&&f.needsYScrolling()){i=!0;break}}for(let d of this.props.sections){let f=d.key,y=r.currentMap[f];if(y){let w=y.parentNode;s[f]=Math.floor(w.getBoundingClientRect().width-(i?e.y:0)),l[f]=Math.floor(w.getBoundingClientRect().height)}}return{forceYScrollbars:i,scrollerClientWidths:s,scrollerClientHeights:l}}}h.addStateEquality({scrollerClientWidths:Ll,scrollerClientHeights:Ll});class _ extends ui{constructor(){super(...arguments),this.handleEl=e=>{this.el=e,e&&_T(e,this.props.seg)}}render(){const{props:e,context:t}=this,{options:r}=t,{seg:i}=e,{eventRange:s}=i,{ui:l}=s,d={event:new or(t,s.def,s.instance),view:t.viewApi,timeText:e.timeText,textColor:l.textColor,backgroundColor:l.backgroundColor,borderColor:l.borderColor,isDraggable:!e.disableDragging&&wT(i,t),isStartResizable:!e.disableResizing&&_k(i,t),isEndResizable:!e.disableResizing&&(n=i,n.isEnd&&n.eventRange.ui.durationEditable),isMirror:Boolean(e.isDragging||e.isResizing||e.isDateSelecting),isStart:Boolean(i.isStart),isEnd:Boolean(i.isEnd),isPast:Boolean(e.isPast),isFuture:Boolean(e.isFuture),isToday:Boolean(e.isToday),isSelected:Boolean(e.isSelected),isDragging:Boolean(e.isDragging),isResizing:Boolean(e.isResizing)};var n;return be(sa,Object.assign({},e,{elRef:this.handleEl,elClasses:[...ET(d),...i.eventRange.ui.classNames,...e.elClasses||[]],renderProps:d,generatorName:"eventContent",customGenerator:r.eventContent,defaultGenerator:e.defaultGenerator,classNameGenerator:r.eventClassNames,didMount:r.eventDidMount,willUnmount:r.eventWillUnmount}))}componentDidUpdate(e){this.el&&this.props.seg!==e.seg&&_T(this.el,this.props.seg)}}class b extends ui{render(){let{props:e,context:t}=this,{options:r}=t,{seg:i}=e,{ui:s}=i.eventRange,d=r0(i,r.eventTimeFormat||e.defaultTimeFormat,t,e.defaultDisplayEventTime,e.defaultDisplayEventEnd);return be(_,Object.assign({},e,{elTag:"a",elStyle:{borderColor:s.borderColor,backgroundColor:s.backgroundColor},elAttrs:Ey(i,t),defaultGenerator:C,timeText:d}),(f,y)=>be(Cr,null,be(f,{elTag:"div",elClasses:["fc-event-main"],elStyle:{color:y.textColor}}),Boolean(y.isStartResizable)&&be("div",{className:"fc-event-resizer fc-event-resizer-start"}),Boolean(y.isEndResizable)&&be("div",{className:"fc-event-resizer fc-event-resizer-end"})))}}function C(n){return be("div",{className:"fc-event-main-frame"},n.timeText&&be("div",{className:"fc-event-time"},n.timeText),be("div",{className:"fc-event-title-container"},be("div",{className:"fc-event-title fc-sticky"},n.event.title||be(Cr,null,"\xa0"))))}const k=ei({day:"numeric"});class F extends ui{constructor(){super(...arguments),this.refineRenderProps=Hc(ee)}render(){let{props:e,context:t}=this,{options:r}=t,i=this.refineRenderProps({date:e.date,dateProfile:e.dateProfile,todayRange:e.todayRange,isMonthStart:e.isMonthStart||!1,showDayNumber:e.showDayNumber,extraRenderProps:e.extraRenderProps,viewApi:t.viewApi,dateEnv:t.dateEnv,monthStartFormat:r.monthStartFormat});return be(sa,Object.assign({},e,{elClasses:[...Zb(i,t.theme),...e.elClasses||[]],elAttrs:Object.assign(Object.assign({},e.elAttrs),i.isDisabled?{}:{"data-date":Rb(e.date)}),renderProps:i,generatorName:"dayCellContent",customGenerator:r.dayCellContent,defaultGenerator:e.defaultGenerator,classNameGenerator:i.isDisabled?void 0:r.dayCellClassNames,didMount:r.dayCellDidMount,willUnmount:r.dayCellWillUnmount}))}}function $(n){return Boolean(n.dayCellContent||Sk("dayCellContent",n))}function ee(n){let{date:e,dateEnv:t,dateProfile:r,isMonthStart:i}=n,s=qb(e,n.todayRange,null,r),l=n.showDayNumber?t.format(e,i?n.monthStartFormat:k):"";return Object.assign(Object.assign(Object.assign({date:t.toDate(e),view:n.viewApi},s),{isMonthStart:i,dayNumberText:l}),n.extraRenderProps)}class oe extends ui{render(){let{props:e}=this,{seg:t}=e;return be(_,{elTag:"div",elClasses:["fc-bg-event"],elStyle:{backgroundColor:t.eventRange.ui.backgroundColor},defaultGenerator:Ne,seg:t,timeText:"",isDragging:!1,isResizing:!1,isDateSelecting:!1,isSelected:!1,isPast:e.isPast,isFuture:e.isFuture,isToday:e.isToday,disableDragging:!0,disableResizing:!0})}}function Ne(n){let{title:e}=n.event;return e&&be("div",{className:"fc-event-title"},n.event.title)}function et(n){return be("div",{className:`fc-${n}`})}const ut=n=>be(Uu.Consumer,null,e=>{let{dateEnv:t,options:r}=e,{date:i}=n,s=r.weekNumberFormat||n.defaultFormat,l=t.computeWeekNumber(i),d=t.format(i,s);return be(sa,Object.assign({},n,{renderProps:{num:l,text:d,date:i},generatorName:"weekNumberContent",customGenerator:r.weekNumberContent,defaultGenerator:Dt,classNameGenerator:r.weekNumberClassNames,didMount:r.weekNumberDidMount,willUnmount:r.weekNumberWillUnmount}))});function Dt(n){return n.text}class He extends ui{constructor(){super(...arguments),this.state={titleId:Fc()},this.handleRootEl=e=>{this.rootEl=e,this.props.elRef&&Vu(this.props.elRef,e)},this.handleDocumentMouseDown=e=>{const t=function mM(n){var e,t;return null!==(t=null===(e=n.composedPath)||void 0===e?void 0:e.call(n)[0])&&void 0!==t?t:n.target}(e);this.rootEl.contains(t)||this.handleCloseClick()},this.handleDocumentKeyDown=e=>{"Escape"===e.key&&this.handleCloseClick()},this.handleCloseClick=()=>{let{onClose:e}=this.props;e&&e()}}render(){let{theme:e,options:t}=this.context,{props:r,state:i}=this,s=["fc-popover",e.getClass("popover")].concat(r.extraClassNames||[]);return function vb(n,e){var t=be(yF,{__v:n,i:e});return t.containerInfo=e,t}(be("div",Object.assign({},r.extraAttrs,{id:r.id,className:s.join(" "),"aria-labelledby":i.titleId,ref:this.handleRootEl}),be("div",{className:"fc-popover-header "+e.getClass("popoverHeader")},be("span",{className:"fc-popover-title",id:i.titleId},r.title),be("span",{className:"fc-popover-close "+e.getIconClass("close"),title:t.closeHint,onClick:this.handleCloseClick})),be("div",{className:"fc-popover-body "+e.getClass("popoverContent")},r.children)),r.parentEl)}componentDidMount(){document.addEventListener("mousedown",this.handleDocumentMouseDown),document.addEventListener("keydown",this.handleDocumentKeyDown),this.updateSize()}componentWillUnmount(){document.removeEventListener("mousedown",this.handleDocumentMouseDown),document.removeEventListener("keydown",this.handleDocumentKeyDown)}updateSize(){let{isRtl:e}=this.context,{alignmentEl:t,alignGridTop:r}=this.props,{rootEl:i}=this,s=function UF(n){let e=function VF(n){let e=[];for(;n instanceof HTMLElement;){let t=window.getComputedStyle(n);if("fixed"===t.position)break;/(auto|scroll)/.test(t.overflow+t.overflowY+t.overflowX)&&e.push(n),n=n.parentNode}return e}(n),t=n.getBoundingClientRect();for(let r of e){let i=jb(t,r.getBoundingClientRect());if(!i)return null;t=i}return t}(t);if(s){let l=i.getBoundingClientRect(),d=r?Lc(t,".fc-scrollgrid").getBoundingClientRect().top:s.top,f=e?s.right-l.width:s.left;d=Math.max(d,10),f=Math.min(f,document.documentElement.clientWidth-10-l.width),f=Math.max(f,10);let y=i.offsetParent.getBoundingClientRect();!function $g(n,e){for(let t in e)_D(n,t,e[t])}(i,{top:d-y.top,left:f-y.left})}}}class Qt extends Hl{constructor(){super(...arguments),this.handleRootEl=e=>{this.rootEl=e,e?this.context.registerInteractiveComponent(this,{el:e,useEventCenter:!1}):this.context.unregisterInteractiveComponent(this)}}render(){let{options:e,dateEnv:t}=this.context,{props:r}=this,{startDate:i,todayRange:s,dateProfile:l}=r,d=t.format(i,e.dayPopoverFormat);return be(F,{elRef:this.handleRootEl,date:i,dateProfile:l,todayRange:s},(f,y,w)=>be(He,{elRef:w.ref,id:r.id,title:d,extraClassNames:["fc-more-popover"].concat(w.className||[]),extraAttrs:w,parentEl:r.parentEl,alignmentEl:r.alignmentEl,alignGridTop:r.alignGridTop,onClose:r.onClose},$(e)&&be(f,{elTag:"div",elClasses:["fc-more-popover-misc"]}),r.children))}queryHit(e,t,r,i){let{rootEl:s,props:l}=this;return e>=0&&e<r&&t>=0&&t<i?{dateProfile:l.dateProfile,dateSpan:Object.assign({allDay:!l.forceTimed,range:{start:l.startDate,end:l.endDate}},l.extraDateSpan),dayEl:s,rect:{left:0,top:0,right:r,bottom:i},layer:1}:null}}class Hn extends ui{constructor(){super(...arguments),this.state={isPopoverOpen:!1,popoverId:Fc()},this.handleLinkEl=e=>{this.linkEl=e,this.props.elRef&&Vu(this.props.elRef,e)},this.handleClick=e=>{let{props:t,context:r}=this,{moreLinkClick:i}=r.options,s=qc(t).start;function l(d){let{def:f,instance:y,range:w}=d.eventRange;return{event:new or(r,f,y),start:r.dateEnv.toDate(w.start),end:r.dateEnv.toDate(w.end),isStart:d.isStart,isEnd:d.isEnd}}"function"==typeof i&&(i=i({date:s,allDay:Boolean(t.allDayDate),allSegs:t.allSegs.map(l),hiddenSegs:t.hiddenSegs.map(l),jsEvent:e,view:r.viewApi})),i&&"popover"!==i?"string"==typeof i&&r.calendarApi.zoomTo(s,i):this.setState({isPopoverOpen:!0})},this.handlePopoverClose=()=>{this.setState({isPopoverOpen:!1})}}render(){let{props:e,state:t}=this;return be(Uu.Consumer,null,r=>{let{viewApi:i,options:s,calendarApi:l}=r,{moreLinkText:d}=s,{moreCnt:f}=e,y=qc(e),w="function"==typeof d?d.call(l,f):`+${f} ${d}`,D=zg(s.moreLinkHint,[f],w),x={num:f,shortText:`+${f}`,text:w,view:i};return be(Cr,null,Boolean(e.moreCnt)&&be(sa,{elTag:e.elTag||"a",elRef:this.handleLinkEl,elClasses:[...e.elClasses||[],"fc-more-link"],elStyle:e.elStyle,elAttrs:Object.assign(Object.assign(Object.assign({},e.elAttrs),wD(this.handleClick)),{title:D,"aria-expanded":t.isPopoverOpen,"aria-controls":t.isPopoverOpen?t.popoverId:""}),renderProps:x,generatorName:"moreLinkContent",customGenerator:s.moreLinkContent,defaultGenerator:e.defaultGenerator||Dr,classNameGenerator:s.moreLinkClassNames,didMount:s.moreLinkDidMount,willUnmount:s.moreLinkWillUnmount},e.children),t.isPopoverOpen&&be(Qt,{id:t.popoverId,startDate:y.start,endDate:y.end,dateProfile:e.dateProfile,todayRange:e.todayRange,extraDateSpan:e.extraDateSpan,parentEl:this.parentEl,alignmentEl:e.alignmentElRef?e.alignmentElRef.current:this.linkEl,alignGridTop:e.alignGridTop,forceTimed:e.forceTimed,onClose:this.handlePopoverClose},e.popoverContent()))})}componentDidMount(){this.updateParentEl()}componentDidUpdate(){this.updateParentEl()}updateParentEl(){this.linkEl&&(this.parentEl=Lc(this.linkEl,".fc-view-harness"))}}function Dr(n){return n.text}function qc(n){if(n.allDayDate)return{start:n.allDayDate,end:Zi(n.allDayDate,1)};let{hiddenSegs:e}=n;return{start:m0(e),end:y0(e)}}function m0(n){return n.reduce(_0).eventRange.range.start}function _0(n,e){return n.eventRange.range.start<e.eventRange.range.start?n:e}function y0(n){return n.reduce(v0).eventRange.range.end}function v0(n,e){return n.eventRange.range.end>e.eventRange.range.end?n:e}class Sy extends ui{render(){let{props:e,context:t}=this,{options:r}=t,i={view:t.viewApi};return be(sa,Object.assign({},e,{elTag:e.elTag||"div",elClasses:[...xy(e.viewSpec),...e.elClasses||[]],renderProps:i,classNameGenerator:r.viewClassNames,generatorName:void 0,didMount:r.viewDidMount,willUnmount:r.viewWillUnmount}),()=>e.children)}}function xy(n){return[`fc-${n.type}-view`,"fc-view"]}const w0={id:String,defaultAllDay:Boolean,url:String,format:String,events:Te,eventDataTransform:Te,success:Te,failure:Te};function Ry(n,e,t=My(e)){let r;if("string"==typeof n?r={url:n}:"function"==typeof n||Array.isArray(n)?r={events:n}:"object"==typeof n&&n&&(r=n),r){let{refined:i,extra:s}=Fb(r,t),l=function Q3(n,e){let t=e.pluginHooks.eventSourceDefs;for(let r=t.length-1;r>=0;r-=1){let s=t[r].parseMeta(n);if(s)return{sourceDefId:r,meta:s}}return null}(i,e);if(l)return{_raw:n,isFetching:!1,latestFetchId:"",fetchRange:null,defaultAllDay:i.defaultAllDay,eventDataTransform:i.eventDataTransform,success:i.success,failure:i.failure,publicId:i.id||"",sourceId:th(),sourceDefId:l.sourceDefId,meta:l.meta,ui:rm(i,e),extendedProps:s}}return null}function My(n){return Object.assign(Object.assign(Object.assign({},hy),w0),n.pluginHooks.eventSourceRefiners)}class eW extends class X3{constructor(){this.handlers=[]}set(e){this.currentValue=e;for(let t of this.handlers)t(e)}subscribe(e){this.handlers.push(e),void 0!==this.currentValue&&e(this.currentValue)}}{constructor(){super(...arguments),this.map=new Map}handle(e){const{map:t}=this;let r=!1;e.isActive?(t.set(e.id,e),r=!0):t.has(e.id)&&(t.delete(e.id),r=!0),r&&this.set(t)}}const tW=[],f2={code:"en",week:{dow:0,doy:4},direction:"ltr",buttonText:{prev:"prev",next:"next",prevYear:"prev year",nextYear:"next year",year:"year",today:"today",month:"month",week:"week",day:"day",list:"list"},weekText:"W",weekTextLong:"Week",closeHint:"Close",timeHint:"Time",eventHint:"Event",allDayText:"all-day",moreLinkText:"more",noEventsText:"No events to display"},p2=Object.assign(Object.assign({},f2),{buttonHints:{prev:"Previous $0",next:"Next $0",today:(n,e)=>"day"===e?"Today":`This ${n}`},viewHint:"$0 view",navLinkHint:"Go to $0",moreLinkHint:n=>`Show ${n} more event${1===n?"":"s"}`});function g2(n){let e=n.length>0?n[0].code:"en",t=tW.concat(n),r={en:p2};for(let i of t)r[i.code]=i;return{map:r,defaultCode:e}}function Vk(n,e){return"object"!=typeof n||Array.isArray(n)?function nW(n,e){let t=[].concat(n||[]),r=function rW(n,e){for(let t=0;t<n.length;t+=1){let r=n[t].toLocaleLowerCase().split("-");for(let i=r.length;i>0;i-=1){let s=r.slice(0,i).join("-");if(e[s])return e[s]}}return null}(t,e)||p2;return m2(n,t,r)}(n,e):m2(n.code,[n.code],n)}function m2(n,e,t){let r=ay([f2,t],["buttonText"]);delete r.code;let{week:i}=r;return delete r.week,{codeArg:n,codes:e,week:i,simpleNumberFormat:new Intl.NumberFormat(n),options:r}}function dm(n){return{id:th(),name:n.name,premiumReleaseDate:n.premiumReleaseDate?new Date(n.premiumReleaseDate):void 0,deps:n.deps||[],reducers:n.reducers||[],isLoadingFuncs:n.isLoadingFuncs||[],contextInit:[].concat(n.contextInit||[]),eventRefiners:n.eventRefiners||{},eventDefMemberAdders:n.eventDefMemberAdders||[],eventSourceRefiners:n.eventSourceRefiners||{},isDraggableTransformers:n.isDraggableTransformers||[],eventDragMutationMassagers:n.eventDragMutationMassagers||[],eventDefMutationAppliers:n.eventDefMutationAppliers||[],dateSelectionTransformers:n.dateSelectionTransformers||[],datePointTransforms:n.datePointTransforms||[],dateSpanTransforms:n.dateSpanTransforms||[],views:n.views||{},viewPropsTransformers:n.viewPropsTransformers||[],isPropsValid:n.isPropsValid||null,externalDefTransforms:n.externalDefTransforms||[],viewContainerAppends:n.viewContainerAppends||[],eventDropTransformers:n.eventDropTransformers||[],componentInteractions:n.componentInteractions||[],calendarInteractions:n.calendarInteractions||[],themeClasses:n.themeClasses||{},eventSourceDefs:n.eventSourceDefs||[],cmdFormatter:n.cmdFormatter,recurringTypes:n.recurringTypes||[],namedTimeZonedImpl:n.namedTimeZonedImpl,initialView:n.initialView||"",elementDraggingImpl:n.elementDraggingImpl,optionChangeHandlers:n.optionChangeHandlers||{},scrollGridImpl:n.scrollGridImpl||null,listenerRefiners:n.listenerRefiners||{},optionRefiners:n.optionRefiners||{},propSetHandlers:n.propSetHandlers||{}}}function oW(n,e){return{premiumReleaseDate:aW(n.premiumReleaseDate,e.premiumReleaseDate),reducers:n.reducers.concat(e.reducers),isLoadingFuncs:n.isLoadingFuncs.concat(e.isLoadingFuncs),contextInit:n.contextInit.concat(e.contextInit),eventRefiners:Object.assign(Object.assign({},n.eventRefiners),e.eventRefiners),eventDefMemberAdders:n.eventDefMemberAdders.concat(e.eventDefMemberAdders),eventSourceRefiners:Object.assign(Object.assign({},n.eventSourceRefiners),e.eventSourceRefiners),isDraggableTransformers:n.isDraggableTransformers.concat(e.isDraggableTransformers),eventDragMutationMassagers:n.eventDragMutationMassagers.concat(e.eventDragMutationMassagers),eventDefMutationAppliers:n.eventDefMutationAppliers.concat(e.eventDefMutationAppliers),dateSelectionTransformers:n.dateSelectionTransformers.concat(e.dateSelectionTransformers),datePointTransforms:n.datePointTransforms.concat(e.datePointTransforms),dateSpanTransforms:n.dateSpanTransforms.concat(e.dateSpanTransforms),views:Object.assign(Object.assign({},n.views),e.views),viewPropsTransformers:n.viewPropsTransformers.concat(e.viewPropsTransformers),isPropsValid:e.isPropsValid||n.isPropsValid,externalDefTransforms:n.externalDefTransforms.concat(e.externalDefTransforms),viewContainerAppends:n.viewContainerAppends.concat(e.viewContainerAppends),eventDropTransformers:n.eventDropTransformers.concat(e.eventDropTransformers),calendarInteractions:n.calendarInteractions.concat(e.calendarInteractions),componentInteractions:n.componentInteractions.concat(e.componentInteractions),themeClasses:Object.assign(Object.assign({},n.themeClasses),e.themeClasses),eventSourceDefs:n.eventSourceDefs.concat(e.eventSourceDefs),cmdFormatter:e.cmdFormatter||n.cmdFormatter,recurringTypes:n.recurringTypes.concat(e.recurringTypes),namedTimeZonedImpl:e.namedTimeZonedImpl||n.namedTimeZonedImpl,initialView:n.initialView||e.initialView,elementDraggingImpl:n.elementDraggingImpl||e.elementDraggingImpl,optionChangeHandlers:Object.assign(Object.assign({},n.optionChangeHandlers),e.optionChangeHandlers),scrollGridImpl:e.scrollGridImpl||n.scrollGridImpl,listenerRefiners:Object.assign(Object.assign({},n.listenerRefiners),e.listenerRefiners),optionRefiners:Object.assign(Object.assign({},n.optionRefiners),e.optionRefiners),propSetHandlers:Object.assign(Object.assign({},n.propSetHandlers),e.propSetHandlers)}}function aW(n,e){return void 0===n?e:void 0===e?n:new Date(Math.max(n.valueOf(),e.valueOf()))}class Pf extends zc{}function Bk(n,e,t,r){if(e[n])return e[n];let i=function uW(n,e,t,r){let i=t[n],s=r[n],l=w=>i&&null!==i[w]?i[w]:s&&null!==s[w]?s[w]:null,d=l("component"),f=l("superType"),y=null;if(f){if(f===n)throw new Error("Can't have a custom view type that references itself");y=Bk(f,e,t,r)}return!d&&y&&(d=y.component),d?{type:n,component:d,defaults:Object.assign(Object.assign({},y?y.defaults:{}),i?i.rawOptions:{}),overrides:Object.assign(Object.assign({},y?y.overrides:{}),s?s.rawOptions:{})}:null}(n,e,t,r);return i&&(e[n]=i),i}function _2(n){return Uc(n,cW)}function cW(n){let e="function"==typeof n?{component:n}:n,{component:t}=e;return e.content&&(t=function dW(n){return e=>be(Uu.Consumer,null,t=>be(sa,{elTag:"div",elClasses:xy(t.viewSpec),renderProps:Object.assign(Object.assign({},e),{nextDayThreshold:t.options.nextDayThreshold}),generatorName:void 0,customGenerator:n.content,classNameGenerator:n.classNames,didMount:n.didMount,willUnmount:n.willUnmount}))}(e)),{superType:e.type,component:t,rawOptions:e}}function hW(n,e,t,r){let i=_2(n),s=_2(e.views),l=function lW(n,e){let r,t={};for(r in n)Bk(r,t,n,e);for(r in e)Bk(r,t,n,e);return t}(i,s);return Uc(l,d=>function fW(n,e,t,r,i){let s=n.overrides.duration||n.defaults.duration||r.duration||t.duration,l=null,d="",f="",y={};if(s&&(l=function pW(n){let e=JSON.stringify(n),t=y2[e];return void 0===t&&(t=Bn(n),y2[e]=t),t}(s),l)){let x=Gg(l);d=x.unit,1===x.value&&(f=d,y=e[d]?e[d].rawOptions:{})}let w=x=>{let N=x.buttonText||{},U=n.defaults.buttonTextKey;return null!=U&&null!=N[U]?N[U]:null!=N[n.type]?N[n.type]:null!=N[f]?N[f]:null},D=x=>{let N=x.buttonHints||{},U=n.defaults.buttonTextKey;return null!=U&&null!=N[U]?N[U]:null!=N[n.type]?N[n.type]:null!=N[f]?N[f]:null};return{type:n.type,component:n.component,duration:l,durationUnit:d,singleUnit:f,optionDefaults:n.defaults,optionOverrides:Object.assign(Object.assign({},y),n.overrides),buttonTextOverride:w(r)||w(t)||n.overrides.buttonText,buttonTextDefault:w(i)||n.defaults.buttonText||w(Qg)||n.type,buttonTitleOverride:D(r)||D(t)||n.overrides.buttonHint,buttonTitleDefault:D(i)||n.defaults.buttonHint||D(Qg)}}(d,s,e,t,r))}Pf.prototype.classes={root:"fc-theme-standard",tableCellShaded:"fc-cell-shaded",buttonGroup:"fc-button-group",button:"fc-button fc-button-primary",buttonActive:"fc-button-active"},Pf.prototype.baseIconClass="fc-icon",Pf.prototype.iconClasses={close:"fc-icon-x",prev:"fc-icon-chevron-left",next:"fc-icon-chevron-right",prevYear:"fc-icon-chevrons-left",nextYear:"fc-icon-chevrons-right"},Pf.prototype.rtlIconClasses={prev:"fc-icon-chevron-right",next:"fc-icon-chevron-left",prevYear:"fc-icon-chevrons-right",nextYear:"fc-icon-chevrons-left"},Pf.prototype.iconOverrideOption="buttonIcons",Pf.prototype.iconOverrideCustomButtonOption="icon",Pf.prototype.iconOverridePrefix="fc-icon-";let y2={};function v2(n){for(let e in n)if(n[e].isFetching)return!0;return!1}function w2(n,e,t,r){let i={};for(let s of e)i[s.sourceId]=s;return t&&(i=b2(i,t,r)),Object.assign(Object.assign({},n),i)}function b2(n,e,t){return Hk(n,Pu(n,r=>function EW(n,e,t){return C2(n,t)?!t.options.lazyFetching||!n.fetchRange||n.isFetching||e.start<n.fetchRange.start||e.end>n.fetchRange.end:!n.latestFetchId}(r,e,t)),e,!1,t)}function Hk(n,e,t,r,i){let s={};for(let l in n){let d=n[l];s[l]=e[l]?CW(d,t,r,i):d}return s}function CW(n,e,t,r){let{options:i,calendarApi:s}=r,l=r.pluginHooks.eventSourceDefs[n.sourceDefId],d=th();return l.fetch({eventSource:n,range:e,isRefetch:t,context:r},f=>{let{rawEvents:y}=f;i.eventSourceSuccess&&(y=i.eventSourceSuccess.call(s,y,f.response)||y),n.success&&(y=n.success.call(s,y,f.response)||y),r.dispatch({type:"RECEIVE_EVENTS",sourceId:n.sourceId,fetchId:d,fetchRange:e,rawEvents:y})},f=>{let y=!1;i.eventSourceFailure&&(i.eventSourceFailure.call(s,f),y=!0),n.failure&&(n.failure(f),y=!0),y||console.warn(f.message,f),r.dispatch({type:"RECEIVE_EVENT_ERROR",sourceId:n.sourceId,fetchId:d,fetchRange:e,error:f})}),Object.assign(Object.assign({},n),{isFetching:!0,latestFetchId:d})}function E2(n,e){return Pu(n,t=>C2(t,e))}function C2(n,e){return!e.pluginHooks.eventSourceDefs[n.sourceDefId].ignoreRange}function TW(n,e){switch(e.type){case"UNSELECT_DATES":return null;case"SELECT_DATES":return e.selection;default:return n}}function AW(n,e){switch(e.type){case"UNSELECT_EVENT":return"";case"SELECT_EVENT":return e.eventInstanceId;default:return n}}function SW(n,e){let t;switch(e.type){case"UNSET_EVENT_DRAG":return null;case"SET_EVENT_DRAG":return t=e.state,{affectedEvents:t.affectedEvents,mutatedEvents:t.mutatedEvents,isEvent:t.isEvent};default:return n}}function xW(n,e){let t;switch(e.type){case"UNSET_EVENT_RESIZE":return null;case"SET_EVENT_RESIZE":return t=e.state,{affectedEvents:t.affectedEvents,mutatedEvents:t.mutatedEvents,isEvent:t.isEvent};default:return n}}function RW(n,e,t,r,i){return{header:n.headerToolbar?I2(n.headerToolbar,n,e,t,r,i):null,footer:n.footerToolbar?I2(n.footerToolbar,n,e,t,r,i):null}}function I2(n,e,t,r,i,s){let l={},d=[],f=!1;for(let y in n){let D=MW(n[y],e,t,r,i,s);l[y]=D.widgets,d.push(...D.viewsWithButtons),f=f||D.hasTitle}return{sectionWidgets:l,viewsWithButtons:d,hasTitle:f}}function MW(n,e,t,r,i,s){let l="rtl"===e.direction,d=e.customButtons||{},f=t.buttonText||{},y=e.buttonText||{},w=t.buttonHints||{},D=e.buttonHints||{},x=n?n.split(" "):[],N=[],U=!1;return{widgets:x.map(X=>X.split(",").map(ae=>{if("title"===ae)return U=!0,{buttonName:ae};let Le,je,Ye,St,Nt,mn;if(Le=d[ae])Ye=nn=>{Le.click&&Le.click.call(nn.target,nn,nn.target)},(St=r.getCustomButtonIconClass(Le))||(St=r.getIconClass(ae,l))||(Nt=Le.text),mn=Le.hint||Le.text;else if(je=i[ae]){N.push(ae),Ye=()=>{s.changeView(ae)},(Nt=je.buttonTextOverride)||(St=r.getIconClass(ae,l))||(Nt=je.buttonTextDefault);let nn=je.buttonTextOverride||je.buttonTextDefault;mn=zg(je.buttonTitleOverride||je.buttonTitleDefault||e.viewHint,[nn,ae],nn)}else if(s[ae])if(Ye=()=>{s[ae]()},(Nt=f[ae])||(St=r.getIconClass(ae,l))||(Nt=y[ae]),"prevYear"===ae||"nextYear"===ae){let nn="prevYear"===ae?"prev":"next";mn=zg(w[nn]||D[nn],[y.year||"year","year"],y[ae])}else mn=nn=>zg(w[ae]||D[ae],[y[nn]||nn,nn],y[ae]);return{buttonName:ae,buttonClick:Ye,buttonIcon:St,buttonText:Nt,buttonHint:mn}})),viewsWithButtons:N,hasTitle:U}}class kW{constructor(e,t,r){this.type=e,this.getCurrentData=t,this.dateEnv=r}get calendar(){return this.getCurrentData().calendarApi}get title(){return this.getCurrentData().viewTitle}get activeStart(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.activeRange.start)}get activeEnd(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.activeRange.end)}get currentStart(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.currentRange.start)}get currentEnd(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.currentRange.end)}getOption(e){return this.getCurrentData().options[e]}}const NW=dm({name:"array-event-source",eventSourceDefs:[{ignoreRange:!0,parseMeta:n=>Array.isArray(n.events)?n.events:null,fetch(n,e){e({rawEvents:n.eventSource.meta})}}]}),PW=dm({name:"func-event-source",eventSourceDefs:[{parseMeta:n=>"function"==typeof n.events?n.events:null,fetch(n,e,t){const{dateEnv:r}=n.context;!function BF(n,e,t){let r=!1,i=function(d){r||(r=!0,e(d))},s=function(d){r||(r=!0,t(d))},l=n(i,s);l&&"function"==typeof l.then&&l.then(i,s)}(n.eventSource.meta.bind(null,IT(n.range,r)),s=>e({rawEvents:s}),t)}}]}),OW=dm({name:"json-event-source",eventSourceRefiners:{method:String,extraParams:Te,startParam:String,endParam:String,timeZoneParam:String},eventSourceDefs:[{parseMeta:n=>!n.url||"json"!==n.format&&n.format?null:{url:n.url,format:"json",method:(n.method||"GET").toUpperCase(),extraParams:n.extraParams,startParam:n.startParam,endParam:n.endParam,timeZoneParam:n.timeZoneParam},fetch(n,e,t){const{meta:r}=n.eventSource,i=function LW(n,e,t){let s,l,d,f,{dateEnv:r,options:i}=t,y={};return s=n.startParam,null==s&&(s=i.startParam),l=n.endParam,null==l&&(l=i.endParam),d=n.timeZoneParam,null==d&&(d=i.timeZoneParam),f="function"==typeof n.extraParams?n.extraParams():n.extraParams||{},Object.assign(y,f),y[s]=r.formatIso(e.start),y[l]=r.formatIso(e.end),"local"!==r.timeZone&&(y[d]=r.timeZone),y}(r,n.range,n.context);(function Lk(n,e,t){const r={method:n=n.toUpperCase()};return"GET"===n?e+=(-1===e.indexOf("?")?"?":"&")+new URLSearchParams(t):(r.body=new URLSearchParams(t),r.headers={"Content-Type":"application/x-www-form-urlencoded"}),fetch(e,r).then(i=>{if(i.ok)return i.json().then(s=>[s,i],()=>{throw new Ok("Failure parsing JSON",i)});throw new Ok("Request failed",i)})})(r.method,r.url,i).then(([s,l])=>{e({rawEvents:s,response:l})},t)}}]}),FW=dm({name:"simple-recurring-event",recurringTypes:[{parse(n,e){if(n.daysOfWeek||n.startTime||n.endTime||n.startRecur||n.endRecur){let r,t={daysOfWeek:n.daysOfWeek||null,startTime:n.startTime||null,endTime:n.endTime||null,startRecur:n.startRecur?e.createMarker(n.startRecur):null,endRecur:n.endRecur?e.createMarker(n.endRecur):null};return n.duration&&(r=n.duration),!r&&n.startTime&&n.endTime&&(r=function SM(n,e){return{years:n.years-e.years,months:n.months-e.months,days:n.days-e.days,milliseconds:n.milliseconds-e.milliseconds}}(n.endTime,n.startTime)),{allDayGuess:Boolean(!n.startTime&&!n.endTime),duration:r,typeData:t}}return null},expand(n,e,t){let r=xf(e,{start:n.startRecur,end:n.endRecur});return r?function UW(n,e,t,r){let i=n?TD(n):null,s=Ir(t.start),l=t.end,d=[];for(;s<l;){let f;(!i||i[s.getUTCDay()])&&(f=e?r.add(s,e):s,d.push(f)),s=Zi(s,1)}return d}(n.daysOfWeek,n.startTime,r,t):[]}}],eventRefiners:{daysOfWeek:Te,startTime:Bn,endTime:Bn,duration:Bn,startRecur:Te,endRecur:Te}}),VW=dm({name:"change-handler",optionChangeHandlers:{events(n,e){D2([n],e)},eventSources:D2}});function D2(n,e){let t=Wg(e.getCurrentData().eventSources);if(1===t.length&&1===n.length&&Array.isArray(t[0]._raw)&&Array.isArray(n[0]))return void e.dispatch({type:"RESET_RAW_EVENTS",sourceId:t[0].sourceId,rawEvents:n[0]});let r=[];for(let i of n){let s=!1;for(let l=0;l<t.length;l+=1)if(t[l]._raw===i){t.splice(l,1),s=!0;break}s||r.push(i)}for(let i of t)e.dispatch({type:"REMOVE_EVENT_SOURCE",sourceId:i.sourceId});for(let i of r)e.calendarApi.addEventSource(i)}const jW=[NW,PW,OW,FW,VW,dm({name:"misc",isLoadingFuncs:[n=>v2(n.eventSources)],propSetHandlers:{dateProfile:function BW(n,e){e.emitter.trigger("datesSet",Object.assign(Object.assign({},IT(n.activeRange,e.dateEnv)),{view:e.viewApi}))},eventStore:function HW(n,e){let{emitter:t}=e;t.hasHandlers("eventsSet")&&t.trigger("eventsSet",lm(n,e))}}})];class $W{constructor(e,t){this.runTaskOption=e,this.drainedOption=t,this.queue=[],this.delayedRunner=new g0(this.drain.bind(this))}request(e,t){this.queue.push(e),this.delayedRunner.request(t)}pause(e){this.delayedRunner.pause(e)}resume(e,t){this.delayedRunner.resume(e,t)}drain(){let{queue:e}=this;for(;e.length;){let r,t=[];for(;r=e.shift();)this.runTask(r),t.push(r);this.drained(t)}}runTask(e){this.runTaskOption&&this.runTaskOption(e)}drained(e){this.drainedOption&&this.drainedOption(e)}}function zW(n,e,t){let r;return r=/^(year|month)$/.test(n.currentRangeUnit)?n.currentRange:n.activeRange,t.formatRange(r.start,r.end,ei(e.titleFormat||function GW(n){let{currentRangeUnit:e}=n;if("year"===e)return{year:"numeric"};if("month"===e)return{year:"numeric",month:"long"};let t=cy(n.currentRange.start,n.currentRange.end);return null!==t&&t>1?{year:"numeric",month:"short",day:"numeric"}:{year:"numeric",month:"long",day:"numeric"}}(n)),{isEndExclusive:n.isRangeAllDay,defaultSeparator:e.titleRangeSeparator})}class WW{constructor(e){this.computeCurrentViewData=gn(this._computeCurrentViewData),this.organizeRawLocales=gn(g2),this.buildLocale=gn(Vk),this.buildPluginHooks=function sW(){let t,n=[],e=[];return(r,i)=>((!t||!Fl(r,n)||!Fl(i,e))&&(t=function iW(n,e){let t={},r={premiumReleaseDate:void 0,reducers:[],isLoadingFuncs:[],contextInit:[],eventRefiners:{},eventDefMemberAdders:[],eventSourceRefiners:{},isDraggableTransformers:[],eventDragMutationMassagers:[],eventDefMutationAppliers:[],dateSelectionTransformers:[],datePointTransforms:[],dateSpanTransforms:[],views:{},viewPropsTransformers:[],isPropsValid:null,externalDefTransforms:[],viewContainerAppends:[],eventDropTransformers:[],componentInteractions:[],calendarInteractions:[],themeClasses:{},eventSourceDefs:[],cmdFormatter:null,recurringTypes:[],namedTimeZonedImpl:null,initialView:"",elementDraggingImpl:null,optionChangeHandlers:{},scrollGridImpl:null,listenerRefiners:{},optionRefiners:{},propSetHandlers:{}};function i(s){for(let l of s){const d=l.name,f=t[d];void 0===f?(t[d]=l.id,i(l.deps),r=oW(r,l)):f!==l.id&&console.warn(`Duplicate plugin '${d}'`)}}return n&&i(n),i(e),r}(r,i)),n=r,e=i,t)}(),this.buildDateEnv=gn(qW),this.buildTheme=gn(ZW),this.parseToolbars=gn(RW),this.buildViewSpecs=gn(hW),this.buildDateProfileGenerator=Hc(KW),this.buildViewApi=gn(YW),this.buildViewUiProps=Hc(XW),this.buildEventUiBySource=gn(QW,Ll),this.buildEventUiBases=gn(JW),this.parseContextBusinessHours=Hc(e6),this.buildTitle=gn(zW),this.emitter=new ok,this.actionRunner=new $W(this._handleAction.bind(this),this.updateData.bind(this)),this.currentCalendarOptionsInput={},this.currentCalendarOptionsRefined={},this.currentViewOptionsInput={},this.currentViewOptionsRefined={},this.currentCalendarOptionsRefiners={},this.optionsForRefining=[],this.optionsForHandling=[],this.getCurrentData=()=>this.data,this.dispatch=x=>{this.actionRunner.request(x)},this.props=e,this.actionRunner.pause();let t={},r=this.computeOptionsData(e.optionOverrides,t,e.calendarApi),i=r.calendarOptions.initialView||r.pluginHooks.initialView,s=this.computeCurrentViewData(i,r,e.optionOverrides,t);e.calendarApi.currentDataManager=this,this.emitter.setThisContext(e.calendarApi),this.emitter.setOptions(s.options);let l=function zF(n,e){let t=n.initialDate;return null!=t?e.createMarker(t):wy(n.now,e)}(r.calendarOptions,r.dateEnv),d=s.dateProfileGenerator.build(l);$c(d.activeRange,l)||(l=d.currentRange.start);let f={dateEnv:r.dateEnv,options:r.calendarOptions,pluginHooks:r.pluginHooks,calendarApi:e.calendarApi,dispatch:this.dispatch,emitter:this.emitter,getCurrentData:this.getCurrentData};for(let x of r.pluginHooks.contextInit)x(f);let y=function yW(n,e,t){let r=e?e.activeRange:null;return w2({},function DW(n,e){let t=My(e),r=[].concat(n.eventSources||[]),i=[];n.initialEvents&&r.unshift(n.initialEvents),n.events&&r.unshift(n.events);for(let s of r){let l=Ry(s,e,t);l&&i.push(l)}return i}(n,t),r,t)}(r.calendarOptions,d,f),w={dynamicOptionOverrides:t,currentViewType:i,currentDate:l,dateProfile:d,businessHours:this.parseContextBusinessHours(f),eventSources:y,eventUiBases:{},eventStore:{defs:{},instances:{}},renderableEventStore:{defs:{},instances:{}},dateSelection:null,eventSelection:"",eventDrag:null,eventResize:null,selectionConfig:this.buildViewUiProps(f).selectionConfig},D=Object.assign(Object.assign({},f),w);for(let x of r.pluginHooks.reducers)Object.assign(w,x(null,null,D));jk(w,f)&&this.emitter.trigger("loading",!0),this.state=w,this.updateData(),this.actionRunner.resume()}resetOptions(e,t){let{props:r}=this;void 0===t?r.optionOverrides=e:(r.optionOverrides=Object.assign(Object.assign({},r.optionOverrides||{}),e),this.optionsForRefining.push(...t)),(void 0===t||t.length)&&this.actionRunner.request({type:"NOTHING"})}_handleAction(e){let{props:t,state:r,emitter:i}=this,s=function mW(n,e){return"SET_OPTION"===e.type?Object.assign(Object.assign({},n),{[e.optionName]:e.rawOptionValue}):n}(r.dynamicOptionOverrides,e),l=this.computeOptionsData(t.optionOverrides,s,t.calendarApi),d=function gW(n,e){return"CHANGE_VIEW_TYPE"===e.type&&(n=e.viewType),n}(r.currentViewType,e),f=this.computeCurrentViewData(d,l,t.optionOverrides,s);t.calendarApi.currentDataManager=this,i.setThisContext(t.calendarApi),i.setOptions(f.options);let y={dateEnv:l.dateEnv,options:l.calendarOptions,pluginHooks:l.pluginHooks,calendarApi:t.calendarApi,dispatch:this.dispatch,emitter:i,getCurrentData:this.getCurrentData},{currentDate:w,dateProfile:D}=r;this.data&&this.data.dateProfileGenerator!==f.dateProfileGenerator&&(D=f.dateProfileGenerator.build(w)),w=function dk(n,e){return"CHANGE_DATE"===e.type?e.dateMarker:n}(w,e),D=function _W(n,e,t,r){let i;switch(e.type){case"CHANGE_VIEW_TYPE":return r.build(e.dateMarker||t);case"CHANGE_DATE":return r.build(e.dateMarker);case"PREV":if(i=r.buildPrev(n,t),i.isValid)return i;break;case"NEXT":if(i=r.buildNext(n,t),i.isValid)return i}return n}(D,e,w,f.dateProfileGenerator),("PREV"===e.type||"NEXT"===e.type||!$c(D.currentRange,w))&&(w=D.currentRange.start);let x=function vW(n,e,t,r){let i=t?t.activeRange:null;switch(e.type){case"ADD_EVENT_SOURCES":return w2(n,e.sources,i,r);case"REMOVE_EVENT_SOURCE":return function bW(n,e){return Pu(n,t=>t.sourceId!==e)}(n,e.sourceId);case"PREV":case"NEXT":case"CHANGE_DATE":case"CHANGE_VIEW_TYPE":return t?b2(n,i,r):n;case"FETCH_EVENT_SOURCES":return Hk(n,e.sourceIds?TD(e.sourceIds):E2(n,r),i,e.isRefetch||!1,r);case"RECEIVE_EVENTS":case"RECEIVE_EVENT_ERROR":return function IW(n,e,t,r){let i=n[e];return i&&t===i.latestFetchId?Object.assign(Object.assign({},n),{[e]:Object.assign(Object.assign({},i),{isFetching:!1,fetchRange:r})}):n}(n,e.sourceId,e.fetchId,e.fetchRange);case"REMOVE_ALL_EVENT_SOURCES":return{};default:return n}}(r.eventSources,e,D,y),N=function JF(n,e,t,r,i){switch(e.type){case"RECEIVE_EVENTS":return function XF(n,e,t,r,i,s){if(e&&t===e.latestFetchId){let l=em(jT(i,e,s),e,s);return r&&(l=Fu(l,r,s)),tm(d0(n,e.sourceId),l)}return n}(n,t[e.sourceId],e.fetchId,e.fetchRange,e.rawEvents,i);case"RESET_RAW_EVENTS":return function HT(n,e,t,r,i){const{defIdMap:s,instanceIdMap:l}=function WT(n){const{defs:e,instances:t}=n,r={},i={};for(let s in e){const l=e[s],{publicId:d}=l;d&&(r[d]=s)}for(let s in t){const d=e[t[s].defId],{publicId:f}=d;f&&(i[f]=s)}return{defIdMap:r,instanceIdMap:i}}(n);return Fu(em(jT(t,e,i),e,i,!1,s,l),r,i)}(n,t[e.sourceId],e.rawEvents,r.activeRange,i);case"ADD_EVENTS":return function Nk(n,e,t,r){return t&&(e=Fu(e,t,r)),tm(n,e)}(n,e.eventStore,r?r.activeRange:null,i);case"RESET_EVENTS":return e.eventStore;case"MERGE_EVENTS":return tm(n,e.eventStore);case"PREV":case"NEXT":case"CHANGE_DATE":case"CHANGE_VIEW_TYPE":return r?Fu(n,r.activeRange,i):n;case"REMOVE_EVENTS":return function zD(n,e){let{defs:t,instances:r}=n,i={},s={};for(let l in t)e.defs[l]||(i[l]=t[l]);for(let l in r)!e.instances[l]&&i[r[l].defId]&&(s[l]=r[l]);return{defs:i,instances:s}}(n,e.eventStore);case"REMOVE_EVENT_SOURCE":return d0(n,e.sourceId);case"REMOVE_ALL_EVENT_SOURCES":return nm(n,s=>!s.sourceId);case"REMOVE_ALL_EVENTS":return{defs:{},instances:{}};default:return n}}(r.eventStore,e,x,D,y),Q=v2(x)&&!f.options.progressiveEventRendering&&r.renderableEventStore||N,{eventUiSingleBase:X,selectionConfig:ae}=this.buildViewUiProps(y),Le=this.buildEventUiBySource(x),Ye={dynamicOptionOverrides:s,currentViewType:d,currentDate:w,dateProfile:D,eventSources:x,eventStore:N,renderableEventStore:Q,selectionConfig:ae,eventUiBases:this.buildEventUiBases(Q.defs,X,Le),businessHours:this.parseContextBusinessHours(y),dateSelection:TW(r.dateSelection,e),eventSelection:AW(r.eventSelection,e),eventDrag:SW(r.eventDrag,e),eventResize:xW(r.eventResize,e)},St=Object.assign(Object.assign({},y),Ye);for(let nn of l.pluginHooks.reducers)Object.assign(Ye,nn(r,e,St));let Nt=jk(r,y),mn=jk(Ye,y);!Nt&&mn?i.trigger("loading",!0):Nt&&!mn&&i.trigger("loading",!1),this.state=Ye,t.onAction&&t.onAction(e)}updateData(){let{props:e,state:t}=this,r=this.data,i=this.computeOptionsData(e.optionOverrides,t.dynamicOptionOverrides,e.calendarApi),s=this.computeCurrentViewData(t.currentViewType,i,e.optionOverrides,t.dynamicOptionOverrides),l=this.data=Object.assign(Object.assign(Object.assign({viewTitle:this.buildTitle(t.dateProfile,s.options,i.dateEnv),calendarApi:e.calendarApi,dispatch:this.dispatch,emitter:this.emitter,getCurrentData:this.getCurrentData},i),s),t),d=i.pluginHooks.optionChangeHandlers,f=r&&r.calendarOptions,y=i.calendarOptions;if(f&&f!==y){f.timeZone!==y.timeZone&&(t.eventSources=l.eventSources=function wW(n,e,t){let r=e?e.activeRange:null;return Hk(n,E2(n,t),r,!0,t)}(l.eventSources,t.dateProfile,l),t.eventStore=l.eventStore=zT(l.eventStore,r.dateEnv,l.dateEnv),t.renderableEventStore=l.renderableEventStore=zT(l.renderableEventStore,r.dateEnv,l.dateEnv));for(let w in d)(-1!==this.optionsForHandling.indexOf(w)||f[w]!==y[w])&&d[w](y[w],l)}this.optionsForHandling=[],e.onData&&e.onData(l)}computeOptionsData(e,t,r){if(!this.optionsForRefining.length&&e===this.stableOptionOverrides&&t===this.stableDynamicOptionOverrides)return this.stableCalendarOptionsData;let{refinedOptions:i,pluginHooks:s,localeDefaults:l,availableLocaleData:d,extra:f}=this.processRawCalendarOptions(e,t);T2(f);let y=this.buildDateEnv(i.timeZone,i.locale,i.weekNumberCalculation,i.firstDay,i.weekText,s,d,i.defaultRangeSeparator),w=this.buildViewSpecs(s.views,this.stableOptionOverrides,this.stableDynamicOptionOverrides,l),D=this.buildTheme(i,s),x=this.parseToolbars(i,this.stableOptionOverrides,D,w,r);return this.stableCalendarOptionsData={calendarOptions:i,pluginHooks:s,dateEnv:y,viewSpecs:w,theme:D,toolbarConfig:x,localeDefaults:l,availableRawLocales:d.map}}processRawCalendarOptions(e,t){let{locales:r,locale:i}=Lb([Qg,e,t]),s=this.organizeRawLocales(r),d=this.buildLocale(i||s.defaultCode,s.map).options,f=this.buildPluginHooks(e.plugins||[],jW),y=this.currentCalendarOptionsRefiners=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Yg),jD),Ob),f.listenerRefiners),f.optionRefiners),w={},D=Lb([Qg,d,e,t]),x={},N=this.currentCalendarOptionsInput,U=this.currentCalendarOptionsRefined,Q=!1;for(let X in D)-1===this.optionsForRefining.indexOf(X)&&(D[X]===N[X]||jc[X]&&X in N&&jc[X](N[X],D[X]))?x[X]=U[X]:y[X]?(x[X]=y[X](D[X]),Q=!0):w[X]=N[X];return Q&&(this.currentCalendarOptionsInput=D,this.currentCalendarOptionsRefined=x,this.stableOptionOverrides=e,this.stableDynamicOptionOverrides=t),this.optionsForHandling.push(...this.optionsForRefining),this.optionsForRefining=[],{rawOptions:this.currentCalendarOptionsInput,refinedOptions:this.currentCalendarOptionsRefined,pluginHooks:f,availableLocaleData:s,localeDefaults:d,extra:w}}_computeCurrentViewData(e,t,r,i){let s=t.viewSpecs[e];if(!s)throw new Error(`viewType "${e}" is not available. Please make sure you've loaded all neccessary plugins`);let{refinedOptions:l,extra:d}=this.processRawViewOptions(s,t.pluginHooks,t.localeDefaults,r,i);return T2(d),{viewSpec:s,options:l,dateProfileGenerator:this.buildDateProfileGenerator({dateProfileGeneratorClass:s.optionDefaults.dateProfileGeneratorClass,duration:s.duration,durationUnit:s.durationUnit,usesMinMaxTime:s.optionDefaults.usesMinMaxTime,dateEnv:t.dateEnv,calendarApi:this.props.calendarApi,slotMinTime:l.slotMinTime,slotMaxTime:l.slotMaxTime,showNonCurrentDates:l.showNonCurrentDates,dayCount:l.dayCount,dateAlignment:l.dateAlignment,dateIncrement:l.dateIncrement,hiddenDays:l.hiddenDays,weekends:l.weekends,nowInput:l.now,validRangeInput:l.validRange,visibleRangeInput:l.visibleRange,fixedWeekCount:l.fixedWeekCount}),viewApi:this.buildViewApi(e,this.getCurrentData,t.dateEnv)}}processRawViewOptions(e,t,r,i,s){let l=Lb([Qg,e.optionDefaults,r,i,e.optionOverrides,s]),d=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Yg),jD),Ob),ZM),t.listenerRefiners),t.optionRefiners),f={},y=this.currentViewOptionsInput,w=this.currentViewOptionsRefined,D=!1,x={};for(let N in l)l[N]===y[N]||jc[N]&&jc[N](l[N],y[N])?f[N]=w[N]:(l[N]===this.currentCalendarOptionsInput[N]||jc[N]&&jc[N](l[N],this.currentCalendarOptionsInput[N])?N in this.currentCalendarOptionsRefined&&(f[N]=this.currentCalendarOptionsRefined[N]):d[N]?f[N]=d[N](l[N]):x[N]=l[N],D=!0);return D&&(this.currentViewOptionsInput=l,this.currentViewOptionsRefined=f),{rawOptions:this.currentViewOptionsInput,refinedOptions:this.currentViewOptionsRefined,extra:x}}}function qW(n,e,t,r,i,s,l,d){let f=Vk(e||l.defaultCode,l.map);return new qF({calendarSystem:"gregory",timeZone:n,namedTimeZoneImpl:s.namedTimeZonedImpl,locale:f,weekNumberCalculation:t,firstDay:r,weekText:i,cmdFormatter:s.cmdFormatter,defaultSeparator:d})}function ZW(n,e){return new(e.themeClasses[n.themeSystem]||Pf)(n)}function KW(n){return new(n.dateProfileGeneratorClass||hk)(n)}function YW(n,e,t){return new kW(n,e,t)}function QW(n){return Uc(n,e=>e.ui)}function JW(n,e,t){let r={"":e};for(let i in n){let s=n[i];s.sourceId&&t[s.sourceId]&&(r[i]=t[s.sourceId])}return r}function XW(n){let{options:e}=n;return{eventUiSingleBase:rm({display:e.eventDisplay,editable:e.editable,startEditable:e.eventStartEditable,durationEditable:e.eventDurationEditable,constraint:e.eventConstraint,overlap:"boolean"==typeof e.eventOverlap?e.eventOverlap:void 0,allow:e.eventAllow,backgroundColor:e.eventBackgroundColor,borderColor:e.eventBorderColor,textColor:e.eventTextColor,color:e.eventColor},n),selectionConfig:rm({constraint:e.selectConstraint,overlap:"boolean"==typeof e.selectOverlap?e.selectOverlap:void 0,allow:e.selectAllow},n)}}function jk(n,e){for(let t of e.pluginHooks.isLoadingFuncs)if(t(n))return!0;return!1}function e6(n){return function QM(n,e){return em(function Hb(n){let e;return e=!0===n?[{}]:Array.isArray(n)?n.filter(t=>t.daysOfWeek):"object"==typeof n&&n?[n]:[],e=e.map(t=>Object.assign(Object.assign({},im),t)),e}(n),null,e)}(n.options.businessHours,n)}function T2(n,e){for(let t in n)console.warn(`Unknown option '${t}'`+(e?` for view '${e}'`:""))}class t6 extends ui{render(){return be("div",{className:"fc-toolbar-chunk"},...this.props.widgetGroups.map(t=>this.renderWidgetGroup(t)))}renderWidgetGroup(e){let{props:t}=this,{theme:r}=this.context,i=[],s=!0;for(let l of e){let{buttonName:d,buttonClick:f,buttonText:y,buttonIcon:w,buttonHint:D}=l;if("title"===d)s=!1,i.push(be("h2",{className:"fc-toolbar-title",id:t.titleId},t.title));else{let x=d===t.activeButton,N=!t.isTodayEnabled&&"today"===d||!t.isPrevEnabled&&"prev"===d||!t.isNextEnabled&&"next"===d,U=[`fc-${d}-button`,r.getClass("button")];x&&U.push(r.getClass("buttonActive")),i.push(be("button",{type:"button",title:"function"==typeof D?D(t.navUnit):D,disabled:N,"aria-pressed":x,className:U.join(" "),onClick:f},y||(w?be("span",{className:w}):"")))}}return i.length>1?be("div",{className:s&&r.getClass("buttonGroup")||""},...i):i[0]}}class A2 extends ui{render(){let i,s,{model:e,extraClassName:t}=this.props,r=!1,l=e.sectionWidgets,d=l.center;return l.left?(r=!0,i=l.left):i=l.start,l.right?(r=!0,s=l.right):s=l.end,be("div",{className:[t||"","fc-toolbar",r?"fc-toolbar-ltr":""].join(" ")},this.renderSection("start",i||[]),this.renderSection("center",d||[]),this.renderSection("end",s||[]))}renderSection(e,t){let{props:r}=this;return be(t6,{key:e,widgetGroups:t,title:r.title,navUnit:r.navUnit,activeButton:r.activeButton,isTodayEnabled:r.isTodayEnabled,isPrevEnabled:r.isPrevEnabled,isNextEnabled:r.isNextEnabled,titleId:r.titleId})}}class n6 extends ui{constructor(){super(...arguments),this.state={availableWidth:null},this.handleEl=e=>{this.el=e,Vu(this.props.elRef,e),this.updateAvailableWidth()},this.handleResize=()=>{this.updateAvailableWidth()}}render(){let{props:e,state:t}=this,{aspectRatio:r}=e,s="",l="";return r?null!==t.availableWidth?s=t.availableWidth/r:l=1/r*100+"%":s=e.height||"",be("div",{"aria-labelledby":e.labeledById,ref:this.handleEl,className:["fc-view-harness",r||e.liquid||e.height?"fc-view-harness-active":"fc-view-harness-passive"].join(" "),style:{height:s,paddingBottom:l}},e.children)}componentDidMount(){this.context.addResizeHandler(this.handleResize)}componentWillUnmount(){this.context.removeResizeHandler(this.handleResize)}updateAvailableWidth(){this.el&&this.props.aspectRatio&&this.setState({availableWidth:this.el.offsetWidth})}}class r6 extends NT{constructor(e){super(e),this.handleSegClick=(t,r)=>{let{component:i}=this,{context:s}=i,l=um(r);if(l&&i.isValidSegDownEl(t.target)){let d=Lc(t.target,".fc-event-forced-url"),f=d?d.querySelector("a[href]").href:"";s.emitter.trigger("eventClick",{el:r,event:new or(i.context,l.eventRange.def,l.eventRange.instance),jsEvent:t,view:s.viewApi}),f&&!t.defaultPrevented&&(window.location.href=f)}},this.destroy=yD(e.el,"click",".fc-event",this.handleSegClick)}}class i6 extends NT{constructor(e){super(e),this.handleEventElRemove=t=>{t===this.currentSegEl&&this.handleSegLeave(null,this.currentSegEl)},this.handleSegEnter=(t,r)=>{um(r)&&(this.currentSegEl=r,this.triggerEvent("eventMouseEnter",t,r))},this.handleSegLeave=(t,r)=>{this.currentSegEl&&(this.currentSegEl=null,this.triggerEvent("eventMouseLeave",t,r))},this.removeHoverListeners=function yM(n,e,t,r){let i;return yD(n,"mouseover",e,(s,l)=>{if(l!==i){i=l,t(s,l);let d=f=>{i=null,r(f,l),l.removeEventListener("mouseleave",d)};l.addEventListener("mouseleave",d)}})}(e.el,".fc-event",this.handleSegEnter,this.handleSegLeave)}destroy(){this.removeHoverListeners()}triggerEvent(e,t,r){let{component:i}=this,{context:s}=i,l=um(r);(!t||i.isValidSegDownEl(t.target))&&s.emitter.trigger(e,{el:r,event:new or(s,l.eventRange.def,l.eventRange.instance),jsEvent:t,view:s.viewApi})}}class s6 extends om{constructor(){super(...arguments),this.buildViewContext=gn(uk),this.buildViewPropTransformers=gn(a6),this.buildToolbarProps=gn(o6),this.headerRef={current:null},this.footerRef={current:null},this.interactionsStore={},this.state={viewLabelId:Fc()},this.registerInteractiveComponent=(e,t)=>{let r=function PT(n,e){return{component:n,el:e.el,useEventCenter:null==e.useEventCenter||e.useEventCenter,isHitComboAllowed:e.isHitComboAllowed||null}}(e,t),l=[r6,i6].concat(this.props.pluginHooks.componentInteractions).map(d=>new d(r));this.interactionsStore[e.uid]=l,OT[e.uid]=r},this.unregisterInteractiveComponent=e=>{let t=this.interactionsStore[e.uid];if(t){for(let r of t)r.destroy();delete this.interactionsStore[e.uid]}delete OT[e.uid]},this.resizeRunner=new g0(()=>{this.props.emitter.trigger("_resize",!0),this.props.emitter.trigger("windowResize",{view:this.props.viewApi})}),this.handleWindowResize=e=>{let{options:t}=this.props;t.handleWindowResize&&e.target===window&&this.resizeRunner.request(t.windowResizeDelay)}}render(){let d,{props:e}=this,{toolbarConfig:t,options:r}=e,i=this.buildToolbarProps(e.viewSpec,e.dateProfile,e.dateProfileGenerator,e.currentDate,wy(e.options.now,e.dateEnv),e.viewTitle),s=!1,l="";e.isHeightAuto||e.forPrint?l="":null!=r.height?s=!0:null!=r.contentHeight?l=r.contentHeight:d=Math.max(r.aspectRatio,.5);let f=this.buildViewContext(e.viewSpec,e.viewApi,e.options,e.dateProfileGenerator,e.dateEnv,e.theme,e.pluginHooks,e.dispatch,e.getCurrentData,e.emitter,e.calendarApi,this.registerInteractiveComponent,this.unregisterInteractiveComponent),y=t.header&&t.header.hasTitle?this.state.viewLabelId:"";return be(Uu.Provider,{value:f},t.header&&be(A2,Object.assign({ref:this.headerRef,extraClassName:"fc-header-toolbar",model:t.header,titleId:y},i)),be(n6,{liquid:s,height:l,aspectRatio:d,labeledById:y},this.renderView(e),this.buildAppendContent()),t.footer&&be(A2,Object.assign({ref:this.footerRef,extraClassName:"fc-footer-toolbar",model:t.footer,titleId:""},i)))}componentDidMount(){let{props:e}=this;this.calendarInteractions=e.pluginHooks.calendarInteractions.map(r=>new r(e)),window.addEventListener("resize",this.handleWindowResize);let{propSetHandlers:t}=e.pluginHooks;for(let r in t)t[r](e[r],e)}componentDidUpdate(e){let{props:t}=this,{propSetHandlers:r}=t.pluginHooks;for(let i in r)t[i]!==e[i]&&r[i](t[i],t)}componentWillUnmount(){window.removeEventListener("resize",this.handleWindowResize),this.resizeRunner.clear();for(let e of this.calendarInteractions)e.destroy();this.props.emitter.trigger("_unmount")}buildAppendContent(){let{props:e}=this;return be(Cr,{},...e.pluginHooks.viewContainerAppends.map(r=>r(e)))}renderView(e){let{pluginHooks:t}=e,{viewSpec:r}=e,i={dateProfile:e.dateProfile,businessHours:e.businessHours,eventStore:e.renderableEventStore,eventUiBases:e.eventUiBases,dateSelection:e.dateSelection,eventSelection:e.eventSelection,eventDrag:e.eventDrag,eventResize:e.eventResize,isHeightAuto:e.isHeightAuto,forPrint:e.forPrint},s=this.buildViewPropTransformers(t.viewPropsTransformers);for(let d of s)Object.assign(i,d.transform(i,e));return be(r.component,Object.assign({},i))}}function o6(n,e,t,r,i,s){let l=t.build(i,void 0,!1),d=t.buildPrev(e,r,!1),f=t.buildNext(e,r,!1);return{title:s,activeButton:n.type,navUnit:n.singleUnit,isTodayEnabled:l.isValid&&!$c(e.currentRange,i),isPrevEnabled:d.isValid,isNextEnabled:f.isValid}}function a6(n){return n.map(e=>new e)}class l6 extends class J3{getCurrentData(){return this.currentDataManager.getCurrentData()}dispatch(e){this.currentDataManager.dispatch(e)}get view(){return this.getCurrentData().viewApi}batchRendering(e){e()}updateSize(){this.trigger("_resize",!0)}setOption(e,t){this.dispatch({type:"SET_OPTION",optionName:e,rawOptionValue:t})}getOption(e){return this.currentDataManager.currentCalendarOptionsInput[e]}getAvailableLocaleCodes(){return Object.keys(this.getCurrentData().availableRawLocales)}on(e,t){let{currentDataManager:r}=this;r.currentCalendarOptionsRefiners[e]?r.emitter.on(e,t):console.warn(`Unknown listener name '${e}'`)}off(e,t){this.currentDataManager.emitter.off(e,t)}trigger(e,...t){this.currentDataManager.emitter.trigger(e,...t)}changeView(e,t){this.batchRendering(()=>{if(this.unselect(),t)if(t.start&&t.end)this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:e}),this.dispatch({type:"SET_OPTION",optionName:"visibleRange",rawOptionValue:t});else{let{dateEnv:r}=this.getCurrentData();this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:e,dateMarker:r.createMarker(t)})}else this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:e})})}zoomTo(e,t){let i;i=this.getCurrentData().viewSpecs[t=t||"day"]||this.getUnitViewSpec(t),this.unselect(),this.dispatch(i?{type:"CHANGE_VIEW_TYPE",viewType:i.type,dateMarker:e}:{type:"CHANGE_DATE",dateMarker:e})}getUnitViewSpec(e){let s,l,{viewSpecs:t,toolbarConfig:r}=this.getCurrentData(),i=[].concat(r.header?r.header.viewsWithButtons:[],r.footer?r.footer.viewsWithButtons:[]);for(let d in t)i.push(d);for(s=0;s<i.length;s+=1)if(l=t[i[s]],l&&l.singleUnit===e)return l;return null}prev(){this.unselect(),this.dispatch({type:"PREV"})}next(){this.unselect(),this.dispatch({type:"NEXT"})}prevYear(){let e=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:e.dateEnv.addYears(e.currentDate,-1)})}nextYear(){let e=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:e.dateEnv.addYears(e.currentDate,1)})}today(){let e=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:wy(e.calendarOptions.now,e.dateEnv)})}gotoDate(e){let t=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:t.dateEnv.createMarker(e)})}incrementDate(e){let t=this.getCurrentData(),r=Bn(e);r&&(this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:t.dateEnv.add(t.currentDate,r)}))}getDate(){let e=this.getCurrentData();return e.dateEnv.toDate(e.currentDate)}formatDate(e,t){let{dateEnv:r}=this.getCurrentData();return r.format(r.createMarker(e),ei(t))}formatRange(e,t,r){let{dateEnv:i}=this.getCurrentData();return i.formatRange(i.createMarker(e),i.createMarker(t),ei(r),r)}formatIso(e,t){let{dateEnv:r}=this.getCurrentData();return r.formatIso(r.createMarker(e),{omitTime:t})}select(e,t){let r;r=null==t?null!=e.start?e:{start:e,end:null}:{start:e,end:t};let i=this.getCurrentData(),s=function CT(n,e,t){let r=function s0(n,e){let{refined:t,extra:r}=Fb(n,Gc),i=t.start?e.createMarkerMeta(t.start):null,s=t.end?e.createMarkerMeta(t.end):null,{allDay:l}=t;return null==l&&(l=i&&i.isTimeUnspecified&&(!s||s.isTimeUnspecified)),Object.assign({range:{start:i?i.marker:null,end:s?s.marker:null},allDay:l},r)}(n,e),{range:i}=r;if(!i.start)return null;if(!i.end){if(null==t)return null;i.end=e.add(i.start,t)}return r}(r,i.dateEnv,Bn({days:1}));s&&(this.dispatch({type:"SELECT_DATES",selection:s}),function fk(n,e,t){t.emitter.trigger("select",Object.assign(Object.assign({},function t0(n,e){let t={};for(let r of e.pluginHooks.dateSpanTransforms)Object.assign(t,r(n,e));return Object.assign(t,function GF(n,e){return Object.assign(Object.assign({},DT(n.range,e,n.allDay)),{allDay:n.allDay})}(n,e.dateEnv)),t}(n,t)),{jsEvent:e?e.origEvent:null,view:t.viewApi||t.calendarApi.view}))}(s,null,i))}unselect(e){let t=this.getCurrentData();t.dateSelection&&(this.dispatch({type:"UNSELECT_DATES"}),function pk(n,e){e.emitter.trigger("unselect",{jsEvent:n?n.origEvent:null,view:e.viewApi||e.calendarApi.view})}(e,t))}addEvent(e,t){if(e instanceof or){let l=e._def,d=e._instance;return this.getCurrentData().eventStore.defs[l.defId]||(this.dispatch({type:"ADD_EVENTS",eventStore:Vb({def:l,instance:d})}),this.triggerEventAdd(e)),e}let i,r=this.getCurrentData();if(t instanceof am)i=t.internalEventSource;else if("boolean"==typeof t)t&&([i]=Wg(r.eventSources));else if(null!=t){let l=this.getEventSourceById(t);if(!l)return console.warn(`Could not find an event source with ID "${t}"`),null;i=l.internalEventSource}let s=KD(e,i,r,!1);if(s){let l=new or(r,s.def,s.def.recurringDef?null:s.instance);return this.dispatch({type:"ADD_EVENTS",eventStore:Vb(s)}),this.triggerEventAdd(l),l}return null}triggerEventAdd(e){let{emitter:t}=this.getCurrentData();t.trigger("eventAdd",{event:e,relatedEvents:[],revert:()=>{this.dispatch({type:"REMOVE_EVENTS",eventStore:gT(e)})}})}getEventById(e){let t=this.getCurrentData(),{defs:r,instances:i}=t.eventStore;e=String(e);for(let s in r){let l=r[s];if(l.publicId===e){if(l.recurringDef)return new or(t,l,null);for(let d in i){let f=i[d];if(f.defId===l.defId)return new or(t,l,f)}}}return null}getEvents(){let e=this.getCurrentData();return lm(e.eventStore,e)}removeAllEvents(){this.dispatch({type:"REMOVE_ALL_EVENTS"})}getEventSources(){let e=this.getCurrentData(),t=e.eventSources,r=[];for(let i in t)r.push(new am(e,t[i]));return r}getEventSourceById(e){let t=this.getCurrentData(),r=t.eventSources;e=String(e);for(let i in r)if(r[i].publicId===e)return new am(t,r[i]);return null}addEventSource(e){let t=this.getCurrentData();if(e instanceof am)return t.eventSources[e.internalEventSource.sourceId]||this.dispatch({type:"ADD_EVENT_SOURCES",sources:[e.internalEventSource]}),e;let r=Ry(e,t);return r?(this.dispatch({type:"ADD_EVENT_SOURCES",sources:[r]}),new am(t,r)):null}removeAllEventSources(){this.dispatch({type:"REMOVE_ALL_EVENT_SOURCES"})}refetchEvents(){this.dispatch({type:"FETCH_EVENT_SOURCES",isRefetch:!0})}scrollToTime(e){let t=Bn(e);t&&this.trigger("_scrollRequest",{time:t})}}{constructor(e,t={}){super(),this.isRendering=!1,this.isRendered=!1,this.currentClassNames=[],this.customContentRenderId=0,this.handleAction=r=>{switch(r.type){case"SET_EVENT_DRAG":case"SET_EVENT_RESIZE":this.renderRunner.tryDrain()}},this.handleData=r=>{this.currentData=r,this.renderRunner.request(r.calendarOptions.rerenderDelay)},this.handleRenderRequest=()=>{if(this.isRendering){this.isRendered=!0;let{currentData:r}=this;Xb(()=>{Nl(be(Dk,{options:r.calendarOptions,theme:r.theme,emitter:r.emitter},(i,s,l,d)=>(this.setClassNames(i),this.setHeight(s),be(UT.Provider,{value:this.customContentRenderId},be(s6,Object.assign({isHeightAuto:l,forPrint:d},r))))),this.el)})}else this.isRendered&&(this.isRendered=!1,Nl(null,this.el),this.setClassNames([]),this.setHeight(""))},function hM(n){hD(n.getRootNode())}(e),this.el=e,this.renderRunner=new g0(this.handleRenderRequest),new WW({optionOverrides:t,calendarApi:this,onAction:this.handleAction,onData:this.handleData})}render(){let e=this.isRendering;e?this.customContentRenderId+=1:this.isRendering=!0,this.renderRunner.request(),e&&this.updateSize()}destroy(){this.isRendering&&(this.isRendering=!1,this.renderRunner.request())}updateSize(){Xb(()=>{super.updateSize()})}batchRendering(e){this.renderRunner.pause("batchRendering"),e(),this.renderRunner.resume("batchRendering")}pauseRendering(){this.renderRunner.pause("pauseRendering")}resumeRendering(){this.renderRunner.resume("pauseRendering",!0)}resetOptions(e,t){this.currentDataManager.resetOptions(e,t)}setClassNames(e){if(!Fl(e,this.currentClassNames)){let{classList:t}=this.el;for(let r of this.currentClassNames)t.remove(r);for(let r of e)t.add(r);this.currentClassNames=e}}setHeight(e){_D(this.el,"height",e)}}function ZT(n,e){let t=[];for(let r=0;r<e;r+=1)t[r]=[];for(let r of n)t[r.row].push(r);return t}function KT(n,e){let t=[];for(let r=0;r<e;r+=1)t[r]=[];for(let r of n)t[r.firstCol].push(r);return t}function x2(n,e){let t=[];if(n){for(let r=0;r<e;r+=1)t[r]={affectedInstances:n.affectedInstances,isEvent:n.isEvent,segs:[]};for(let r of n.segs)t[r.row].segs.push(r)}else for(let r=0;r<e;r+=1)t[r]=null;return t}dD(':root{--fc-daygrid-event-dot-width:8px}.fc-daygrid-day-events:after,.fc-daygrid-day-events:before,.fc-daygrid-day-frame:after,.fc-daygrid-day-frame:before,.fc-daygrid-event-harness:after,.fc-daygrid-event-harness:before{clear:both;content:"";display:table}.fc .fc-daygrid-body{position:relative;z-index:1}.fc .fc-daygrid-day.fc-day-today{background-color:var(--fc-today-bg-color)}.fc .fc-daygrid-day-frame{min-height:100%;position:relative}.fc .fc-daygrid-day-top{display:flex;flex-direction:row-reverse}.fc .fc-day-other .fc-daygrid-day-top{opacity:.3}.fc .fc-daygrid-day-number{padding:4px;position:relative;z-index:4}.fc .fc-daygrid-month-start{font-size:1.1em;font-weight:700}.fc .fc-daygrid-day-events{margin-top:1px}.fc .fc-daygrid-body-balanced .fc-daygrid-day-events{left:0;position:absolute;right:0}.fc .fc-daygrid-body-unbalanced .fc-daygrid-day-events{min-height:2em;position:relative}.fc .fc-daygrid-body-natural .fc-daygrid-day-events{margin-bottom:1em}.fc .fc-daygrid-event-harness{position:relative}.fc .fc-daygrid-event-harness-abs{left:0;position:absolute;right:0;top:0}.fc .fc-daygrid-bg-harness{bottom:0;position:absolute;top:0}.fc .fc-daygrid-day-bg .fc-non-business{z-index:1}.fc .fc-daygrid-day-bg .fc-bg-event{z-index:2}.fc .fc-daygrid-day-bg .fc-highlight{z-index:3}.fc .fc-daygrid-event{margin-top:1px;z-index:6}.fc .fc-daygrid-event.fc-event-mirror{z-index:7}.fc .fc-daygrid-day-bottom{font-size:.85em;margin:0 2px}.fc .fc-daygrid-day-bottom:after,.fc .fc-daygrid-day-bottom:before{clear:both;content:"";display:table}.fc .fc-daygrid-more-link{border-radius:3px;cursor:pointer;line-height:1;margin-top:1px;max-width:100%;overflow:hidden;padding:2px;position:relative;white-space:nowrap;z-index:4}.fc .fc-daygrid-more-link:hover{background-color:rgba(0,0,0,.1)}.fc .fc-daygrid-week-number{background-color:var(--fc-neutral-bg-color);color:var(--fc-neutral-text-color);min-width:1.5em;padding:2px;position:absolute;text-align:center;top:0;z-index:5}.fc .fc-more-popover .fc-popover-body{min-width:220px;padding:10px}.fc-direction-ltr .fc-daygrid-event.fc-event-start,.fc-direction-rtl .fc-daygrid-event.fc-event-end{margin-left:2px}.fc-direction-ltr .fc-daygrid-event.fc-event-end,.fc-direction-rtl .fc-daygrid-event.fc-event-start{margin-right:2px}.fc-direction-ltr .fc-daygrid-more-link{float:left}.fc-direction-ltr .fc-daygrid-week-number{border-radius:0 0 3px 0;left:0}.fc-direction-rtl .fc-daygrid-more-link{float:right}.fc-direction-rtl .fc-daygrid-week-number{border-radius:0 0 0 3px;right:0}.fc-liquid-hack .fc-daygrid-day-frame{position:static}.fc-daygrid-event{border-radius:3px;font-size:var(--fc-small-font-size);position:relative;white-space:nowrap}.fc-daygrid-block-event .fc-event-time{font-weight:700}.fc-daygrid-block-event .fc-event-time,.fc-daygrid-block-event .fc-event-title{padding:1px}.fc-daygrid-dot-event{align-items:center;display:flex;padding:2px 0}.fc-daygrid-dot-event .fc-event-title{flex-grow:1;flex-shrink:1;font-weight:700;min-width:0;overflow:hidden}.fc-daygrid-dot-event.fc-event-mirror,.fc-daygrid-dot-event:hover{background:rgba(0,0,0,.1)}.fc-daygrid-dot-event.fc-event-selected:before{bottom:-10px;top:-10px}.fc-daygrid-event-dot{border:calc(var(--fc-daygrid-event-dot-width)/2) solid var(--fc-event-border-color);border-radius:calc(var(--fc-daygrid-event-dot-width)/2);box-sizing:content-box;height:0;margin:0 4px;width:0}.fc-direction-ltr .fc-daygrid-event .fc-event-time{margin-right:3px}.fc-direction-rtl .fc-daygrid-event .fc-event-time{margin-left:3px}');const R2=ei({hour:"numeric",minute:"2-digit",omitZeroMinute:!0,meridiem:"narrow"});function M2(n){let{display:e}=n.eventRange.ui;return"list-item"===e||"auto"===e&&!n.eventRange.def.allDay&&n.firstCol===n.lastCol&&n.isStart&&n.isEnd}class k2 extends ui{render(){let{props:e}=this;return be(b,Object.assign({},e,{elClasses:["fc-daygrid-event","fc-daygrid-block-event","fc-h-event"],defaultTimeFormat:R2,defaultDisplayEventEnd:e.defaultDisplayEventEnd,disableResizing:!e.seg.eventRange.def.allDay}))}}class N2 extends ui{render(){let{props:e,context:t}=this,{options:r}=t,{seg:i}=e,l=r0(i,r.eventTimeFormat||R2,t,!0,e.defaultDisplayEventEnd);return be(_,Object.assign({},e,{elTag:"a",elClasses:["fc-daygrid-event","fc-daygrid-dot-event"],elAttrs:Ey(e.seg,t),defaultGenerator:c6,timeText:l,isResizing:!1,isDateSelecting:!1}))}}function c6(n){return be(Cr,null,be("div",{className:"fc-daygrid-event-dot",style:{borderColor:n.borderColor||n.backgroundColor}}),n.timeText&&be("div",{className:"fc-event-time"},n.timeText),be("div",{className:"fc-event-title"},n.event.title||be(Cr,null,"\xa0")))}class d6 extends ui{constructor(){super(...arguments),this.compileSegs=gn(h6)}render(){let{props:e}=this,{allSegs:t,invisibleSegs:r}=this.compileSegs(e.singlePlacements);return be(Hn,{elClasses:["fc-daygrid-more-link"],dateProfile:e.dateProfile,todayRange:e.todayRange,allDayDate:e.allDayDate,moreCnt:e.moreCnt,allSegs:t,hiddenSegs:r,alignmentElRef:e.alignmentElRef,alignGridTop:e.alignGridTop,extraDateSpan:e.extraDateSpan,popoverContent:()=>{let i=(e.eventDrag?e.eventDrag.affectedInstances:null)||(e.eventResize?e.eventResize.affectedInstances:null)||{};return be(Cr,null,t.map(s=>{let l=s.eventRange.instance.instanceId;return be("div",{className:"fc-daygrid-event-harness",key:l,style:{visibility:i[l]?"hidden":""}},M2(s)?be(N2,Object.assign({seg:s,isDragging:!1,isSelected:l===e.eventSelection,defaultDisplayEventEnd:!1},cm(s,e.todayRange))):be(k2,Object.assign({seg:s,isDragging:!1,isResizing:!1,isDateSelecting:!1,isSelected:l===e.eventSelection,defaultDisplayEventEnd:!1},cm(s,e.todayRange))))}))}})}}function h6(n){let e=[],t=[];for(let r of n)e.push(r.seg),r.isVisible||t.push(r.seg);return{allSegs:e,invisibleSegs:t}}const f6=ei({week:"narrow"});class p6 extends Hl{constructor(){super(...arguments),this.rootElRef={current:null},this.state={dayNumberId:Fc()},this.handleRootEl=e=>{Vu(this.rootElRef,e),Vu(this.props.elRef,e)}}render(){let{context:e,props:t,state:r,rootElRef:i}=this,{options:s,dateEnv:l}=e,{date:d,dateProfile:f}=t;const y=t.showDayNumber&&function m6(n,e,t){const{start:r,end:i}=e,s=Ul(i,-1),l=t.getYear(r),d=t.getMonth(r),f=t.getYear(s),y=t.getMonth(s);return!(l===f&&d===y)&&Boolean(n.valueOf()===r.valueOf()||1===t.getDay(n)&&n.valueOf()<i.valueOf())}(d,f.currentRange,l);return be(F,{elTag:"td",elRef:this.handleRootEl,elClasses:["fc-daygrid-day",...t.extraClassNames||[]],elAttrs:Object.assign(Object.assign(Object.assign({},t.extraDataAttrs),t.showDayNumber?{"aria-labelledby":r.dayNumberId}:{}),{role:"gridcell"}),defaultGenerator:g6,date:d,dateProfile:f,todayRange:t.todayRange,showDayNumber:t.showDayNumber,isMonthStart:y,extraRenderProps:t.extraRenderProps},(w,D)=>be("div",{ref:t.innerElRef,className:"fc-daygrid-day-frame fc-scrollgrid-sync-inner",style:{minHeight:t.minHeight}},t.showWeekNumber&&be(ut,{elTag:"a",elClasses:["fc-daygrid-week-number"],elAttrs:Kb(e,d,"week"),date:d,defaultFormat:f6}),!D.isDisabled&&(t.showDayNumber||$(s)||t.forceDayTop)?be("div",{className:"fc-daygrid-day-top"},be(w,{elTag:"a",elClasses:["fc-daygrid-day-number",y&&"fc-daygrid-month-start"],elAttrs:Object.assign(Object.assign({},Kb(e,d)),{id:r.dayNumberId})})):t.showDayNumber?be("div",{className:"fc-daygrid-day-top",style:{visibility:"hidden"}},be("a",{className:"fc-daygrid-day-number"},"\xa0")):void 0,be("div",{className:"fc-daygrid-day-events",ref:t.fgContentElRef},t.fgContent,be("div",{className:"fc-daygrid-day-bottom",style:{marginTop:t.moreMarginTop}},be(d6,{allDayDate:d,singlePlacements:t.singlePlacements,moreCnt:t.moreCnt,alignmentElRef:i,alignGridTop:!t.showDayNumber,extraDateSpan:t.extraDateSpan,dateProfile:t.dateProfile,eventSelection:t.eventSelection,eventDrag:t.eventDrag,eventResize:t.eventResize,todayRange:t.todayRange}))),be("div",{className:"fc-daygrid-day-bg"},t.bgContent)))}}function g6(n){return n.dayNumberText||be(Cr,null,"\xa0")}function ky(n,e,t,r){if(n.firstCol===e&&n.lastCol===t-1)return n;let i=n.eventRange,s=i.range,l=xf(s,{start:r[e].date,end:Zi(r[t-1].date,1)});return Object.assign(Object.assign({},n),{firstCol:e,lastCol:t-1,eventRange:{def:i.def,ui:Object.assign(Object.assign({},i.ui),{durationEditable:!1}),instance:i.instance,range:l},isStart:n.isStart&&l.start.valueOf()===s.start.valueOf(),isEnd:n.isEnd&&l.end.valueOf()===s.end.valueOf()})}class w6 extends class MT{constructor(){this.strictOrder=!1,this.allowReslicing=!1,this.maxCoord=-1,this.maxStackCnt=-1,this.levelCoords=[],this.entriesByLevel=[],this.stackCnts={}}addSegs(e){let t=[];for(let r of e)this.insertEntry(r,t);return t}insertEntry(e,t){let r=this.findInsertion(e);return this.isInsertionValid(r,e)?(this.insertEntryAt(e,r),1):this.handleInvalidInsertion(r,e,t)}isInsertionValid(e,t){return(-1===this.maxCoord||e.levelCoord+t.thickness<=this.maxCoord)&&(-1===this.maxStackCnt||e.stackCnt<this.maxStackCnt)}handleInvalidInsertion(e,t,r){return this.allowReslicing&&e.touchingEntry?this.splitEntry(t,e.touchingEntry,r):(r.push(t),0)}splitEntry(e,t,r){let i=0,s=[],l=e.span,d=t.span;return l.start<d.start&&(i+=this.insertEntry({index:e.index,thickness:e.thickness,span:{start:l.start,end:d.start}},s)),l.end>d.end&&(i+=this.insertEntry({index:e.index,thickness:e.thickness,span:{start:d.end,end:l.end}},s)),i?(r.push({index:e.index,thickness:e.thickness,span:Mf(d,l)},...s),i):(r.push(e),0)}insertEntryAt(e,t){let{entriesByLevel:r,levelCoords:i}=this;-1===t.lateral?(kf(i,t.level,t.levelCoord),kf(r,t.level,[e])):kf(r[t.level],t.lateral,e),this.stackCnts[Rf(e)]=t.stackCnt}findInsertion(e){let{levelCoords:t,entriesByLevel:r,strictOrder:i,stackCnts:s}=this,l=t.length,d=0,f=-1,y=-1,w=null,D=0;for(let U=0;U<l;U+=1){let Q=t[U];if(!i&&Q>=d+e.thickness)break;let ae,X=r[U],Le=a0(X,e.span.start,o0),je=Le[0]+Le[1];for(;(ae=X[je])&&ae.span.start<e.span.end;){let Ye=Q+ae.thickness;Ye>d&&(d=Ye,w=ae,f=U,y=je),Ye===d&&(D=Math.max(D,s[Rf(ae)]+1)),je+=1}}let x=0;if(w)for(x=f+1;x<l&&t[x]<d;)x+=1;let N=-1;return x<l&&t[x]===d&&(N=a0(r[x],e.span.end,o0)[0]),{touchingLevel:f,touchingLateral:y,touchingEntry:w,stackCnt:D,levelCoord:d,level:x,lateral:N}}toRects(){let{entriesByLevel:e,levelCoords:t}=this,r=e.length,i=[];for(let s=0;s<r;s+=1){let l=e[s],d=t[s];for(let f of l)i.push(Object.assign(Object.assign({},f),{levelCoord:d}))}return i}}{constructor(){super(...arguments),this.hiddenConsumes=!1,this.forceHidden={}}addSegs(e){const t=super.addSegs(e),{entriesByLevel:r}=this,i=s=>!this.forceHidden[Rf(s)];for(let s=0;s<r.length;s+=1)r[s]=r[s].filter(i);return t}handleInvalidInsertion(e,t,r){const{entriesByLevel:i,forceHidden:s}=this,{touchingEntry:l,touchingLevel:d,touchingLateral:f}=e;if(this.hiddenConsumes&&l){const y=Rf(l);if(!s[y])if(this.allowReslicing){const w=Object.assign(Object.assign({},l),{span:Mf(l.span,t.span)});s[Rf(w)]=!0,i[d][f]=w,this.splitEntry(l,t,r)}else s[y]=!0,r.push(l)}return super.handleInvalidInsertion(e,t,r)}}class P2 extends Hl{constructor(){super(...arguments),this.cellElRefs=new Nf,this.frameElRefs=new Nf,this.fgElRefs=new Nf,this.segHarnessRefs=new Nf,this.rootElRef={current:null},this.state={framePositions:null,maxContentHeight:null,eventInstanceHeights:{}},this.handleResize=e=>{e&&this.updateSizing(!0)}}render(){let{props:e,state:t,context:r}=this,{options:i}=r,s=e.cells.length,l=KT(e.businessHourSegs,s),d=KT(e.bgEventSegs,s),f=KT(this.getHighlightSegs(),s),y=KT(this.getMirrorSegs(),s),{singleColPlacements:w,multiColPlacements:D,moreCnts:x,moreMarginTops:N}=function _6(n,e,t,r,i,s,l){let d=new w6;d.allowReslicing=!0,d.strictOrder=r,!0===e||!0===t?(d.maxCoord=s,d.hiddenConsumes=!0):"number"==typeof e?d.maxStackCnt=e:"number"==typeof t&&(d.maxStackCnt=t,d.hiddenConsumes=!0);let f=[],y=[];for(let ae=0;ae<n.length;ae+=1){let Le=n[ae],{instanceId:je}=Le.eventRange.instance,Ye=i[je];null!=Ye?f.push({index:ae,thickness:Ye,span:{start:Le.firstCol,end:Le.lastCol+1}}):y.push(Le)}let w=d.addSegs(f),D=d.toRects(),{singleColPlacements:x,multiColPlacements:N,leftoverMargins:U}=function y6(n,e,t){let r=function v6(n,e){let t=[];for(let r=0;r<e;r+=1)t.push([]);for(let r of n)for(let i=r.span.start;i<r.span.end;i+=1)t[i].push(r);return t}(n,t.length),i=[],s=[],l=[];for(let d=0;d<t.length;d+=1){let f=r[d],y=[],w=0,D=0;for(let N of f)y.push({seg:ky(e[N.index],d,d+1,t),isVisible:!0,isAbsolute:!1,absoluteTop:N.levelCoord,marginTop:N.levelCoord-w}),w=N.levelCoord+N.thickness;let x=[];w=0,D=0;for(let N of f){let U=e[N.index],X=N.span.start===d;D+=N.levelCoord-w,w=N.levelCoord+N.thickness,N.span.end-N.span.start>1?(D+=N.thickness,X&&x.push({seg:ky(U,N.span.start,N.span.end,t),isVisible:!0,isAbsolute:!0,absoluteTop:N.levelCoord,marginTop:0})):X&&(x.push({seg:ky(U,N.span.start,N.span.end,t),isVisible:!0,isAbsolute:!1,absoluteTop:N.levelCoord,marginTop:D}),D=0)}i.push(y),s.push(x),l.push(D)}return{singleColPlacements:i,multiColPlacements:s,leftoverMargins:l}}(D,n,l),Q=[],X=[];for(let ae of y){N[ae.firstCol].push({seg:ae,isVisible:!1,isAbsolute:!0,absoluteTop:0,marginTop:0});for(let Le=ae.firstCol;Le<=ae.lastCol;Le+=1)x[Le].push({seg:ky(ae,Le,Le+1,l),isVisible:!1,isAbsolute:!1,absoluteTop:0,marginTop:0})}for(let ae=0;ae<l.length;ae+=1)Q.push(0);for(let ae of w){let Le=n[ae.index],je=ae.span;N[je.start].push({seg:ky(Le,je.start,je.end,l),isVisible:!1,isAbsolute:!0,absoluteTop:0,marginTop:0});for(let Ye=je.start;Ye<je.end;Ye+=1)Q[Ye]+=1,x[Ye].push({seg:ky(Le,Ye,Ye+1,l),isVisible:!1,isAbsolute:!1,absoluteTop:0,marginTop:0})}for(let ae=0;ae<l.length;ae+=1)X.push(U[ae]);return{singleColPlacements:x,multiColPlacements:N,moreCnts:Q,moreMarginTops:X}}(function n0(n,e){let t=n.map(vT);return t.sort((r,i)=>function CM(n,e,t){let r,i;for(r=0;r<t.length;r+=1)if(i=ED(n,e,t[r]),i)return i;return 0}(r,i,e)),t.map(r=>r._seg)}(e.fgEventSegs,i.eventOrder),e.dayMaxEvents,e.dayMaxEventRows,i.eventOrderStrict,t.eventInstanceHeights,t.maxContentHeight,e.cells),U=e.eventDrag&&e.eventDrag.affectedInstances||e.eventResize&&e.eventResize.affectedInstances||{};return be("tr",{ref:this.rootElRef,role:"row"},e.renderIntro&&e.renderIntro(),e.cells.map((Q,X)=>{let ae=this.renderFgSegs(X,e.forPrint?w[X]:D[X],e.todayRange,U),Le=this.renderFgSegs(X,function b6(n,e){if(!n.length)return[];let t=function E6(n){let e={};for(let t of n)for(let r of t)e[r.seg.eventRange.instance.instanceId]=r.absoluteTop;return e}(e);return n.map(r=>({seg:r,isVisible:!0,isAbsolute:!0,absoluteTop:t[r.eventRange.instance.instanceId],marginTop:0}))}(y[X],D),e.todayRange,{},Boolean(e.eventDrag),Boolean(e.eventResize),!1);return be(p6,{key:Q.key,elRef:this.cellElRefs.createRef(Q.key),innerElRef:this.frameElRefs.createRef(Q.key),dateProfile:e.dateProfile,date:Q.date,showDayNumber:e.showDayNumbers,showWeekNumber:e.showWeekNumbers&&0===X,forceDayTop:e.showWeekNumbers,todayRange:e.todayRange,eventSelection:e.eventSelection,eventDrag:e.eventDrag,eventResize:e.eventResize,extraRenderProps:Q.extraRenderProps,extraDataAttrs:Q.extraDataAttrs,extraClassNames:Q.extraClassNames,extraDateSpan:Q.extraDateSpan,moreCnt:x[X],moreMarginTop:N[X],singlePlacements:w[X],fgContentElRef:this.fgElRefs.createRef(Q.key),fgContent:be(Cr,null,be(Cr,null,ae),be(Cr,null,Le)),bgContent:be(Cr,null,this.renderFillSegs(f[X],"highlight"),this.renderFillSegs(l[X],"non-business"),this.renderFillSegs(d[X],"bg-event")),minHeight:e.cellMinHeight})}))}componentDidMount(){this.updateSizing(!0),this.context.addResizeHandler(this.handleResize)}componentDidUpdate(e,t){this.updateSizing(!Ll(e,this.props))}componentWillUnmount(){this.context.removeResizeHandler(this.handleResize)}getHighlightSegs(){let{props:e}=this;return e.eventDrag&&e.eventDrag.segs.length?e.eventDrag.segs:e.eventResize&&e.eventResize.segs.length?e.eventResize.segs:e.dateSelectionSegs}getMirrorSegs(){let{props:e}=this;return e.eventResize&&e.eventResize.segs.length?e.eventResize.segs:[]}renderFgSegs(e,t,r,i,s,l,d){let{context:f}=this,{eventSelection:y}=this.props,{framePositions:w}=this.state,D=1===this.props.cells.length,x=s||l||d,N=[];if(w)for(let U of t){let{seg:Q}=U,{instanceId:X}=Q.eventRange.instance,ae=X+":"+e,Le=U.isVisible&&!i[X],je=U.isAbsolute,Ye="",St="";je&&(f.isRtl?(St=0,Ye=w.lefts[Q.lastCol]-w.lefts[Q.firstCol]):(Ye=0,St=w.rights[Q.firstCol]-w.rights[Q.lastCol])),N.push(be("div",{className:"fc-daygrid-event-harness"+(je?" fc-daygrid-event-harness-abs":""),key:ae,ref:x?null:this.segHarnessRefs.createRef(ae),style:{visibility:Le?"":"hidden",marginTop:je?"":U.marginTop,top:je?U.absoluteTop:"",left:Ye,right:St}},M2(Q)?be(N2,Object.assign({seg:Q,isDragging:s,isSelected:X===y,defaultDisplayEventEnd:D},cm(Q,r))):be(k2,Object.assign({seg:Q,isDragging:s,isResizing:l,isDateSelecting:d,isSelected:X===y,defaultDisplayEventEnd:D},cm(Q,r)))))}return N}renderFillSegs(e,t){let{isRtl:r}=this.context,{todayRange:i}=this.props,{framePositions:s}=this.state,l=[];if(s)for(let d of e){let f=r?{right:0,left:s.lefts[d.lastCol]-s.lefts[d.firstCol]}:{left:0,right:s.rights[d.firstCol]-s.rights[d.lastCol]};l.push(be("div",{key:(n=d.eventRange,n.instance?n.instance.instanceId:`${n.def.defId}:${n.range.start.toISOString()}`),className:"fc-daygrid-bg-harness",style:f},"bg-event"===t?be(oe,Object.assign({seg:d},cm(d,i))):et(t)))}var n;return be(Cr,{},...l)}updateSizing(e){let{props:t,state:r,frameElRefs:i}=this;if(!t.forPrint&&null!==t.clientWidth){if(e){let f=t.cells.map(y=>i.currentMap[y.key]);if(f.length){let y=this.rootElRef.current,w=new Yb(y,f,!0,!1);(!r.framePositions||!r.framePositions.similarTo(w))&&this.setState({framePositions:new Yb(y,f,!0,!1)})}}const s=this.state.eventInstanceHeights,l=this.queryEventInstanceHeights(),d=!0===t.dayMaxEvents||!0===t.dayMaxEventRows;this.safeSetState({eventInstanceHeights:Object.assign(Object.assign({},s),l),maxContentHeight:d?this.computeMaxContentHeight():null})}}queryEventInstanceHeights(){let e=this.segHarnessRefs.currentMap,t={};for(let r in e){let i=Math.round(e[r].getBoundingClientRect().height),s=r.split(":")[0];t[s]=Math.max(t[s]||0,i)}return t}computeMaxContentHeight(){let e=this.props.cells[0].key,r=this.fgElRefs.currentMap[e];return this.cellElRefs.currentMap[e].getBoundingClientRect().bottom-r.getBoundingClientRect().top}getCellEls(){let e=this.cellElRefs.currentMap;return this.props.cells.map(t=>e[t.key])}}P2.addStateEquality({eventInstanceHeights:Ll});class C6 extends Hl{constructor(){super(...arguments),this.splitBusinessHourSegs=gn(ZT),this.splitBgEventSegs=gn(ZT),this.splitFgEventSegs=gn(ZT),this.splitDateSelectionSegs=gn(ZT),this.splitEventDrag=gn(x2),this.splitEventResize=gn(x2),this.rowRefs=new Nf}render(){let{props:e,context:t}=this,r=e.cells.length,i=this.splitBusinessHourSegs(e.businessHourSegs,r),s=this.splitBgEventSegs(e.bgEventSegs,r),l=this.splitFgEventSegs(e.fgEventSegs,r),d=this.splitDateSelectionSegs(e.dateSelectionSegs,r),f=this.splitEventDrag(e.eventDrag,r),y=this.splitEventResize(e.eventResize,r),w=r>=7&&e.clientWidth?e.clientWidth/t.options.aspectRatio/6:null;return be(Cy,{unit:"day"},(D,x)=>be(Cr,null,e.cells.map((N,U)=>be(P2,{ref:this.rowRefs.createRef(U),key:N.length?N[0].date.toISOString():U,showDayNumbers:r>1,showWeekNumbers:e.showWeekNumbers,todayRange:x,dateProfile:e.dateProfile,cells:N,renderIntro:e.renderRowIntro,businessHourSegs:i[U],eventSelection:e.eventSelection,bgEventSegs:s[U].filter(I6),fgEventSegs:l[U],dateSelectionSegs:d[U],eventDrag:f[U],eventResize:y[U],dayMaxEvents:e.dayMaxEvents,dayMaxEventRows:e.dayMaxEventRows,clientWidth:e.clientWidth,clientHeight:e.clientHeight,cellMinHeight:w,forPrint:e.forPrint}))))}componentDidMount(){const e=this.rowRefs.currentMap[0].getCellEls()[0];this.rootEl=e?e.closest(".fc-daygrid-body"):null,this.rootEl&&this.context.registerInteractiveComponent(this,{el:this.rootEl,isHitComboAllowed:this.props.isHitComboAllowed})}componentWillUnmount(){this.rootEl&&(this.context.unregisterInteractiveComponent(this),this.rootEl=null)}prepareHits(){this.rowPositions=new Yb(this.rootEl,this.rowRefs.collect().map(e=>e.getCellEls()[0]),!1,!0),this.colPositions=new Yb(this.rootEl,this.rowRefs.currentMap[0].getCellEls(),!0,!1)}queryHit(e,t){let{colPositions:r,rowPositions:i}=this,s=r.leftToIndex(e),l=i.topToIndex(t);if(null!=l&&null!=s){let d=this.props.cells[l][s];return{dateProfile:this.props.dateProfile,dateSpan:Object.assign({range:this.getCellRange(l,s),allDay:!0},d.extraDateSpan),dayEl:this.getCellEl(l,s),rect:{left:r.lefts[s],right:r.rights[s],top:i.tops[l],bottom:i.bottoms[l]},layer:0}}return null}getCellEl(e,t){return this.rowRefs.currentMap[e].getCellEls()[t]}getCellRange(e,t){let r=this.props.cells[e][t].date;return{start:r,end:Zi(r,1)}}}function I6(n){return n.eventRange.def.allDay}class D6 extends Hl{constructor(){super(...arguments),this.elRef={current:null},this.needsScrollReset=!1}render(){let{props:e}=this,{dayMaxEventRows:t,dayMaxEvents:r,expandRows:i}=e,s=!0===r||!0===t;return s&&!i&&(s=!1,t=null,r=null),be("div",{ref:this.elRef,className:["fc-daygrid-body",s?"fc-daygrid-body-balanced":"fc-daygrid-body-unbalanced",i?"":"fc-daygrid-body-natural"].join(" "),style:{width:e.clientWidth,minWidth:e.tableMinWidth}},be("table",{role:"presentation",className:"fc-scrollgrid-sync-table",style:{width:e.clientWidth,minWidth:e.tableMinWidth,height:i?e.clientHeight:""}},e.colGroupNode,be("tbody",{role:"presentation"},be(C6,{dateProfile:e.dateProfile,cells:e.cells,renderRowIntro:e.renderRowIntro,showWeekNumbers:e.showWeekNumbers,clientWidth:e.clientWidth,clientHeight:e.clientHeight,businessHourSegs:e.businessHourSegs,bgEventSegs:e.bgEventSegs,fgEventSegs:e.fgEventSegs,dateSelectionSegs:e.dateSelectionSegs,eventSelection:e.eventSelection,eventDrag:e.eventDrag,eventResize:e.eventResize,dayMaxEvents:r,dayMaxEventRows:t,forPrint:e.forPrint,isHitComboAllowed:e.isHitComboAllowed}))))}componentDidMount(){this.requestScrollReset()}componentDidUpdate(e){e.dateProfile!==this.props.dateProfile?this.requestScrollReset():this.flushScrollReset()}requestScrollReset(){this.needsScrollReset=!0,this.flushScrollReset()}flushScrollReset(){if(this.needsScrollReset&&this.props.clientWidth){const e=function T6(n,e){let t;return e.currentRangeUnit.match(/year|month/)&&(t=n.querySelector(`[data-date="${function UM(n){return n.toISOString().match(/^\d{4}-\d{2}/)[0]}(e.currentDate)}-01"]`)),t||(t=n.querySelector(`[data-date="${Rb(e.currentDate)}"]`)),t}(this.elRef.current,this.props.dateProfile);if(e){const t=e.closest(".fc-daygrid-body"),r=t.closest(".fc-scroller"),i=e.getBoundingClientRect().top-t.getBoundingClientRect().top;r.scrollTop=i?i+1:0}this.needsScrollReset=!1}}}class A6 extends class QF{constructor(){this.sliceBusinessHours=gn(this._sliceBusinessHours),this.sliceDateSelection=gn(this._sliceDateSpan),this.sliceEventStore=gn(this._sliceEventStore),this.sliceEventDrag=gn(this._sliceInteraction),this.sliceEventResize=gn(this._sliceInteraction),this.forceDayIfListItem=!1}sliceProps(e,t,r,i,...s){let{eventUiBases:l}=e,d=this.sliceEventStore(e.eventStore,l,t,r,...s);return{dateSelectionSegs:this.sliceDateSelection(e.dateSelection,t,r,l,i,...s),businessHourSegs:this.sliceBusinessHours(e.businessHours,t,r,i,...s),fgEventSegs:d.fg,bgEventSegs:d.bg,eventDrag:this.sliceEventDrag(e.eventDrag,l,t,r,...s),eventResize:this.sliceEventResize(e.eventResize,l,t,r,...s),eventSelection:e.eventSelection}}sliceNowDate(e,t,r,i,...s){return this._sliceDateSpan({range:{start:e,end:Ul(e,1)},allDay:!1},t,r,{},i,...s)}_sliceBusinessHours(e,t,r,i,...s){return e?this._sliceEventStore(Fu(e,c0(t,Boolean(r)),i),{},t,r,...s).bg:[]}_sliceEventStore(e,t,r,i,...s){if(e){let l=mT(e,t,c0(r,Boolean(i)),i);return{bg:this.sliceEventRanges(l.bg,s),fg:this.sliceEventRanges(l.fg,s)}}return{bg:[],fg:[]}}_sliceInteraction(e,t,r,i,...s){if(!e)return null;let l=mT(e.mutatedEvents,t,c0(r,Boolean(i)),i);return{segs:this.sliceEventRanges(l.fg,s),affectedInstances:e.affectedEvents.instances,isEvent:e.isEvent}}_sliceDateSpan(e,t,r,i,s,...l){if(!e)return[];let d=c0(t,Boolean(r)),f=xf(e.range,d);if(f){let y=function wk(n,e,t){let r=YD({editable:!1},t),i=JD(r.refined,r.extra,"",n.allDay,!0,t);return{def:i,ui:yT(i,e),instance:Xg(i.defId,n.range),range:n.range,isStart:!0,isEnd:!0}}(e=Object.assign(Object.assign({},e),{range:f}),i,s),w=this.sliceRange(e.range,...l);for(let D of w)D.eventRange=y;return w}return[]}sliceEventRanges(e,t){let r=[];for(let i of e)r.push(...this.sliceEventRange(i,t));return r}sliceEventRange(e,t){let r=e.range;this.forceDayIfListItem&&"list-item"===e.ui.display&&(r={start:r.start,end:Zi(r.start,1)});let i=this.sliceRange(r,...t);for(let s of i)s.eventRange=e,s.isStart=e.isStart&&s.isStart,s.isEnd=e.isEnd&&s.isEnd;return i}}{constructor(){super(...arguments),this.forceDayIfListItem=!0}sliceRange(e,t){return t.sliceRange(e)}}class S6 extends Hl{constructor(){super(...arguments),this.slicer=new A6,this.tableRef={current:null}}render(){let{props:e,context:t}=this;return be(D6,Object.assign({ref:this.tableRef},this.slicer.sliceProps(e,e.dateProfile,e.nextDayThreshold,t,e.dayTableModel),{dateProfile:e.dateProfile,cells:e.dayTableModel.cells,colGroupNode:e.colGroupNode,tableMinWidth:e.tableMinWidth,renderRowIntro:e.renderRowIntro,dayMaxEvents:e.dayMaxEvents,dayMaxEventRows:e.dayMaxEventRows,showWeekNumbers:e.showWeekNumbers,expandRows:e.expandRows,headerAlignElRef:e.headerAlignElRef,clientWidth:e.clientWidth,clientHeight:e.clientHeight,forPrint:e.forPrint}))}}class M6 extends Hl{constructor(){super(...arguments),this.headerElRef={current:null}}renderSimpleLayout(e,t){let{props:r,context:i}=this,s=[],l=a(i.options);return e&&s.push({type:"header",key:"header",isSticky:l,chunk:{elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:e}}),s.push({type:"body",key:"body",liquid:!0,chunk:{content:t}}),be(Sy,{elClasses:["fc-daygrid"],viewSpec:i.viewSpec},be(h,{liquid:!r.isHeightAuto&&!r.forPrint,collapsibleWidth:r.forPrint,cols:[],sections:s}))}renderHScrollLayout(e,t,r,i){let s=this.context.pluginHooks.scrollGridImpl;if(!s)throw new Error("No ScrollGrid implementation");let{props:l,context:d}=this,f=!l.forPrint&&a(d.options),y=!l.forPrint&&function u(n){let{stickyFooterScrollbar:e}=n;return(null==e||"auto"===e)&&(e="auto"===n.height||"auto"===n.viewHeight),e}(d.options),w=[];return e&&w.push({type:"header",key:"header",isSticky:f,chunks:[{key:"main",elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:e}]}),w.push({type:"body",key:"body",liquid:!0,chunks:[{key:"main",content:t}]}),y&&w.push({type:"footer",key:"footer",isSticky:!0,chunks:[{key:"main",content:o}]}),be(Sy,{elClasses:["fc-daygrid"],viewSpec:d.viewSpec},be(s,{liquid:!l.isHeightAuto&&!l.forPrint,forPrint:l.forPrint,collapsibleWidth:l.forPrint,colGroups:[{cols:[{span:r,minWidth:i}]}],sections:w}))}}function N6(n,e){let t=new u0(n.renderRange,e);return new Dy(t,/year|month|week/.test(n.currentRangeUnit))}var P6=dm({name:"@fullcalendar/daygrid",initialView:"dayGridMonth",views:{dayGrid:{component:class k6 extends M6{constructor(){super(...arguments),this.buildDayTableModel=gn(N6),this.headerRef={current:null},this.tableRef={current:null}}render(){let{options:e,dateProfileGenerator:t}=this.context,{props:r}=this,i=this.buildDayTableModel(r.dateProfile,t),s=e.dayHeaders&&be(kk,{ref:this.headerRef,dateProfile:r.dateProfile,dates:i.headerDates,datesRepDistinctDays:1===i.rowCnt}),l=d=>be(S6,{ref:this.tableRef,dateProfile:r.dateProfile,dayTableModel:i,businessHours:r.businessHours,dateSelection:r.dateSelection,eventStore:r.eventStore,eventUiBases:r.eventUiBases,eventSelection:r.eventSelection,eventDrag:r.eventDrag,eventResize:r.eventResize,nextDayThreshold:e.nextDayThreshold,colGroupNode:d.tableColGroupNode,tableMinWidth:d.tableMinWidth,dayMaxEvents:e.dayMaxEvents,dayMaxEventRows:e.dayMaxEventRows,showWeekNumbers:e.weekNumbers,expandRows:!r.isHeightAuto,headerAlignElRef:this.headerElRef,clientWidth:d.clientWidth,clientHeight:d.clientHeight,forPrint:r.forPrint});return e.dayMinWidth?this.renderHScrollLayout(s,l,i.colCnt,e.dayMinWidth):this.renderSimpleLayout(s,l)}},dateProfileGeneratorClass:class x6 extends hk{buildRenderRange(e,t,r){let i=super.buildRenderRange(e,t,r),{props:s}=this;return function R6(n){let s,{dateEnv:e,currentRange:t}=n,{start:r,end:i}=t;if(n.snapToWeek&&(r=e.startOfWeek(r),s=e.startOfWeek(i),s.valueOf()!==i.valueOf()&&(i=RD(s,1))),n.fixedWeekCount){let l=e.startOfWeek(e.startOfMonth(Zi(t.end,-1))),d=Math.ceil(function MD(n,e){return Vc(n,e)/7}(l,i));i=RD(i,6-d)}return{start:r,end:i}}({currentRange:i,snapToWeek:/^(year|month)$/.test(t),fixedWeekCount:s.fixedWeekCount,dateEnv:s.dateEnv})}}},dayGridDay:{type:"dayGrid",duration:{days:1}},dayGridWeek:{type:"dayGrid",duration:{weeks:1}},dayGridMonth:{type:"dayGrid",duration:{months:1},fixedWeekCount:!0},dayGridYear:{type:"dayGrid",duration:{years:1}}}});let O2=(()=>{class n{constructor(t){this.http=t}getUserByUserId(t){return this.http.get(`https://64493726b88a78a8f001273f.mockapi.io/api/v1/users?userId=${t}`).pipe((0,Ct.U)(i=>{const s=i.find(l=>l.userId===t);return s?s.id:null}))}getFavsByUserId(t){return this.http.get(`https://64493726b88a78a8f001273f.mockapi.io/api/v1/users?userId=${t}`).pipe((0,Ct.U)(i=>{const s=i.find(l=>l.userId===t);return s?s.recipes:[]}))}updateFavs(t,r){return this.http.put(`https://64493726b88a78a8f001273f.mockapi.io/api/v1/users/${t}`,r)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ef))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),O6=(()=>{class n{constructor(t){this.http=t}getEvents(t){return this.http.get(`https://64493726b88a78a8f001273f.mockapi.io/api/v1/users/${t}/events`)}addEvent(t,r){return this.http.post(`https://64493726b88a78a8f001273f.mockapi.io/api/v1/users/${r}/events`,t)}deleteEvent(t,r){return this.http.delete(`https://64493726b88a78a8f001273f.mockapi.io/api/v1/users/${r}/events/${t}`)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ef))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),L2=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.Qsj),c.Y36(c.SBq))},n.\u0275dir=c.lG2({type:n}),n})(),hm=(()=>{class n extends L2{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=c.n5z(n)))(r||n)}}(),n.\u0275dir=c.lG2({type:n,features:[c.qOj]}),n})();const Zc=new c.OlP("NgValueAccessor"),U6={provide:Zc,useExisting:(0,c.Gpc)(()=>Of),multi:!0},B6=new c.OlP("CompositionEventMode");let Of=(()=>{class n extends L2{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function V6(){const n=j()?j().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.Qsj),c.Y36(c.SBq),c.Y36(B6,8))},n.\u0275dir=c.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&c.NdJ("input",function(s){return r._handleInput(s.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(s){return r._compositionEnd(s.target.value)})},features:[c._Bn([U6]),c.qOj]}),n})();function Lf(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}const so=new c.OlP("NgValidators"),Ff=new c.OlP("NgAsyncValidators");function H2(n){return Lf(n.value)?{required:!0}:null}function YT(n){return null}function q2(n){return null!=n}function Z2(n){return(0,c.QGY)(n)?(0,Tn.D)(n):n}function K2(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function Y2(n,e){return e.map(t=>t(n))}function Q2(n){return n.map(e=>function $6(n){return!n.validate}(e)?e:t=>e.validate(t))}function $k(n){return null!=n?function J2(n){if(!n)return null;const e=n.filter(q2);return 0==e.length?null:function(t){return K2(Y2(t,e))}}(Q2(n)):null}function zk(n){return null!=n?function X2(n){if(!n)return null;const e=n.filter(q2);return 0==e.length?null:function(t){return function L6(...n){const e=(0,Ds.jO)(n),{args:t,keys:r}=Cd(n),i=new ss.y(s=>{const{length:l}=t;if(!l)return void s.complete();const d=new Array(l);let f=l,y=l;for(let w=0;w<l;w++){let D=!1;(0,Ot.Xf)(t[w]).subscribe((0,z.x)(s,x=>{D||(D=!0,y--),d[w]=x},()=>f--,void 0,()=>{(!f||!D)&&(y||s.next(r?L(r,d):d),s.complete())}))}});return e?i.pipe(R(e)):i}(Y2(t,e).map(Z2)).pipe((0,Ct.U)(K2))}}(Q2(n)):null}function eU(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function Gk(n){return n?Array.isArray(n)?n:[n]:[]}function QT(n,e){return Array.isArray(n)?n.includes(e):n===e}function rU(n,e){const t=Gk(e);return Gk(n).forEach(i=>{QT(t,i)||t.push(i)}),t}function iU(n,e){return Gk(e).filter(t=>!QT(n,t))}class sU{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=$k(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=zk(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Po extends sU{get formDirective(){return null}get path(){return null}}class Uf extends sU{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class oU{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let Ny=(()=>{class n extends oU{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Uf,2))},n.\u0275dir=c.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&c.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[c.qOj]}),n})(),Py=(()=>{class n extends oU{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Po,10))},n.\u0275dir=c.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&c.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[c.qOj]}),n})();const b0="VALID",XT="INVALID",Oy="PENDING",E0="DISABLED";function Kk(n){return(eA(n)?n.validators:n)||null}function lU(n){return Array.isArray(n)?$k(n):n||null}function Yk(n,e){return(eA(e)?e.asyncValidators:n)||null}function uU(n){return Array.isArray(n)?zk(n):n||null}function eA(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class hU{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=lU(this._rawValidators),this._composedAsyncValidatorFn=uU(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===b0}get invalid(){return this.status===XT}get pending(){return this.status==Oy}get disabled(){return this.status===E0}get enabled(){return this.status!==E0}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=lU(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=uU(e)}addValidators(e){this.setValidators(rU(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(rU(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(iU(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(iU(e,this._rawAsyncValidators))}hasValidator(e){return QT(this._rawValidators,e)}hasAsyncValidator(e){return QT(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Oy,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=E0,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=b0,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===b0||this.status===Oy)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?E0:b0}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Oy,this._hasOwnPendingAsyncValidator=!0;const t=Z2(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new c.vpe,this.statusChanges=new c.vpe}_calculateStatus(){return this._allControlsDisabled()?E0:this.errors?XT:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Oy)?Oy:this._anyControlsHaveStatus(XT)?XT:b0}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){eA(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}}class Qk extends hU{constructor(e,t,r){super(Kk(t),Yk(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){(function dU(n,e,t){n._forEachChild((r,i)=>{if(void 0===t[i])throw new c.vHH(1002,"")})})(this,0,e),Object.keys(e).forEach(r=>{(function cU(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new c.vHH(1e3,"");if(!r[t])throw new c.vHH(1001,"")})(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,s)=>{r=t(r,i,s)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}function C0(n,e){Jk(n,e),e.valueAccessor.writeValue(n.value),n.disabled&&e.valueAccessor.setDisabledState?.(!0),function J6(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&fU(n,e)})}(n,e),function eq(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function X6(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&fU(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function Q6(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function rA(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Jk(n,e){const t=function tU(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(eU(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function nU(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(eU(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();rA(e._rawValidators,i),rA(e._rawAsyncValidators,i)}function fU(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}const sq={provide:Po,useExisting:(0,c.Gpc)(()=>Vf)},I0=(()=>Promise.resolve())();let Vf=(()=>{class n extends Po{constructor(t,r){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new c.vpe,this.form=new Qk({},$k(t),zk(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){I0.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),C0(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){I0.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){I0.then(()=>{const r=this._findContainer(t.path),i=new Qk({});(function pU(n,e){Jk(n,e)})(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){I0.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){I0.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,function mU(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(so,10),c.Y36(Ff,10))},n.\u0275dir=c.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&c.NdJ("submit",function(s){return r.onSubmit(s)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[c._Bn([sq]),c.qOj]}),n})();function _U(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function yU(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const vU=class extends hU{constructor(e=null,t,r){super(Kk(t),Yk(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),eA(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=yU(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){_U(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){_U(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){yU(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},lq={provide:Uf,useExisting:(0,c.Gpc)(()=>fm)},EU=(()=>Promise.resolve())();let fm=(()=>{class n extends Uf{constructor(t,r,i,s,l){super(),this._changeDetectorRef=l,this.control=new vU,this._registered=!1,this.update=new c.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function eN(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(s=>{s.constructor===Of?t=s:function rq(n){return Object.getPrototypeOf(n.constructor)===hm}(s)?r=s:i=s}),i||r||t||null}(0,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function Xk(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){C0(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){EU.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=0!==r&&(0,c.D6c)(r);EU.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function tA(n,e){return[...e.path,n]}(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Po,9),c.Y36(so,10),c.Y36(Ff,10),c.Y36(Zc,10),c.Y36(c.sBO,8))},n.\u0275dir=c.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[c._Bn([lq]),c.qOj,c.TTD]}),n})(),Ly=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=c.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})();const uq={provide:Zc,useExisting:(0,c.Gpc)(()=>tN),multi:!0};let tN=(()=>{class n extends hm{writeValue(t){this.setProperty("value",t??"")}registerOnChange(t){this.onChange=r=>{t(""==r?null:parseFloat(r))}}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=c.n5z(n)))(r||n)}}(),n.\u0275dir=c.lG2({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,r){1&t&&c.NdJ("input",function(s){return r.onChange(s.target.value)})("blur",function(){return r.onTouched()})},features:[c._Bn([uq]),c.qOj]}),n})();const cq={provide:Zc,useExisting:(0,c.Gpc)(()=>nN),multi:!0};let CU=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})(),dq=(()=>{class n{constructor(){this._accessors=[]}add(t,r){this._accessors.push([t,r])}remove(t){for(let r=this._accessors.length-1;r>=0;--r)if(this._accessors[r][1]===t)return void this._accessors.splice(r,1)}select(t){this._accessors.forEach(r=>{this._isSameGroup(r,t)&&r[1]!==t&&r[1].fireUncheck(t.value)})}_isSameGroup(t,r){return!!t[0].control&&t[0]._parent===r._control._parent&&t[1].name===r.name}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:CU}),n})(),nN=(()=>{class n extends hm{constructor(t,r,i,s){super(t,r),this._registry=i,this._injector=s,this.onChange=()=>{}}ngOnInit(){this._control=this._injector.get(Uf),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(t){this._state=t===this.value,this.setProperty("checked",this._state)}registerOnChange(t){this._fn=t,this.onChange=()=>{t(this.value),this._registry.select(this)}}fireUncheck(t){this.writeValue(t)}_checkName(){!this.name&&this.formControlName&&(this.name=this.formControlName)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.Qsj),c.Y36(c.SBq),c.Y36(dq),c.Y36(c.zs3))},n.\u0275dir=c.lG2({type:n,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(t,r){1&t&&c.NdJ("change",function(){return r.onChange()})("blur",function(){return r.onTouched()})},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[c._Bn([cq]),c.qOj]}),n})();let pm=(()=>{class n{constructor(){this._validator=YT}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):YT,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=c.lG2({type:n,features:[c.TTD]}),n})();const Dq={provide:so,useExisting:(0,c.Gpc)(()=>lN),multi:!0};let lN=(()=>{class n extends pm{constructor(){super(...arguments),this.inputName="min",this.normalizeInput=t=>function kU(n){return"number"==typeof n?n:parseFloat(n)}(t),this.createValidator=t=>function V2(n){return e=>{if(Lf(e.value)||Lf(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(t)}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=c.n5z(n)))(r||n)}}(),n.\u0275dir=c.lG2({type:n,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(t,r){2&t&&c.uIk("min",r._enabled?r.min:null)},inputs:{min:"min"},features:[c._Bn([Dq]),c.qOj]}),n})();const Tq={provide:so,useExisting:(0,c.Gpc)(()=>Fy),multi:!0};let Fy=(()=>{class n extends pm{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=c.D6c,this.createValidator=t=>H2}enabled(t){return t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=c.n5z(n)))(r||n)}}(),n.\u0275dir=c.lG2({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,r){2&t&&c.uIk("required",r._enabled?"":null)},inputs:{required:"required"},features:[c._Bn([Tq]),c.qOj]}),n})(),kq=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[CU]}),n})(),Nq=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[kq]}),n})();const Oq=["*"],Lq=["rootEl"],Uy=function(n){return{$implicit:n}};function Fq(n,e){if(1&n&&(c.TgZ(0,"div",1,2),c.GkF(2,3),c.qZA()),2&n){const t=c.oxw();c.Q6J("ngClass",t.elClasses||"")("ngStyle",t.elStyle||null),c.xp6(2),c.Q6J("ngTemplateOutlet",t.template)("ngTemplateOutletContext",c.VKq(4,Uy,t.renderProps))}}function Uq(n,e){if(1&n&&(c.TgZ(0,"span",1,2),c.GkF(2,3),c.qZA()),2&n){const t=c.oxw();c.Q6J("ngClass",t.elClasses||"")("ngStyle",t.elStyle||null),c.xp6(2),c.Q6J("ngTemplateOutlet",t.template)("ngTemplateOutletContext",c.VKq(4,Uy,t.renderProps))}}function Vq(n,e){if(1&n&&(c.TgZ(0,"a",1,2),c.GkF(2,3),c.qZA()),2&n){const t=c.oxw();c.Q6J("ngClass",t.elClasses||"")("ngStyle",t.elStyle||null),c.xp6(2),c.Q6J("ngTemplateOutlet",t.template)("ngTemplateOutletContext",c.VKq(4,Uy,t.renderProps))}}function Bq(n,e){if(1&n&&(c.TgZ(0,"tr",1,2),c.GkF(2,3),c.qZA()),2&n){const t=c.oxw();c.Q6J("ngClass",t.elClasses||"")("ngStyle",t.elStyle||null),c.xp6(2),c.Q6J("ngTemplateOutlet",t.template)("ngTemplateOutletContext",c.VKq(4,Uy,t.renderProps))}}function Hq(n,e){if(1&n&&(c.TgZ(0,"th",1,2),c.GkF(2,3),c.qZA()),2&n){const t=c.oxw();c.Q6J("ngClass",t.elClasses||"")("ngStyle",t.elStyle||null),c.xp6(2),c.Q6J("ngTemplateOutlet",t.template)("ngTemplateOutletContext",c.VKq(4,Uy,t.renderProps))}}function jq(n,e){if(1&n&&(c.TgZ(0,"td",1,2),c.GkF(2,3),c.qZA()),2&n){const t=c.oxw();c.Q6J("ngClass",t.elClasses||"")("ngStyle",t.elStyle||null),c.xp6(2),c.Q6J("ngTemplateOutlet",t.template)("ngTemplateOutletContext",c.VKq(4,Uy,t.renderProps))}}const $q=["dayHeaderContent"],zq=["dayCellContent"],Gq=["weekNumberContent"],Wq=["nowIndicatorContent"],qq=["eventContent"],Zq=["slotLaneContent"],Kq=["slotLabelContent"],Yq=["allDayContent"],Qq=["moreLinkContent"],Jq=["noEventsContent"],Xq=["resourceAreaHeaderContent"],e4=["resourceGroupLabelContent"],t4=["resourceLabelContent"],n4=["resourceLaneContent"],r4=["resourceGroupLaneContent"];function i4(n,e){if(1&n&&c._UZ(0,"transport-container",1),2&n){const t=e.$implicit,r=c.oxw();c.Q6J("inPlaceOf",t.containerEl)("reportEl",t.reportNewContainerEl)("elTag",t.elTag)("elClasses",t.elClasses)("elStyle",t.elStyle)("elAttrs",t.elAttrs)("template",r.templateMap[t.generatorName])("renderProps",t.renderProps)}}const VU={headerToolbar:!0,footerToolbar:!0,events:!0,eventSources:!0,resources:!0},s4=["events","eventSources","resources"],o4=Object.prototype.hasOwnProperty;function sA(n){return Array.isArray(n)?n.map(sA):n instanceof Date?new Date(n.valueOf()):"object"==typeof n&&n?BU(n,sA):n}function BU(n,e){const t={};for(const r in n)o4.call(n,r)&&(t[r]=e(n[r],r));return t}function uN(n,e){if(n===e)return!0;if(n&&e&&"object"==typeof n&&"object"==typeof e){if(n.constructor!==e.constructor)return!1;var t,r,i;if(Array.isArray(n)){if((t=n.length)!=e.length)return!1;for(r=t;0!=r--;)if(!uN(n[r],e[r]))return!1;return!0}if(n.constructor===RegExp)return n.source===e.source&&n.flags===e.flags;if(n.valueOf!==Object.prototype.valueOf)return n.valueOf()===e.valueOf();if(n.toString!==Object.prototype.toString)return n.toString()===e.toString();if((t=(i=Object.keys(n)).length)!==Object.keys(e).length)return!1;for(r=t;0!=r--;)if(!Object.prototype.hasOwnProperty.call(e,i[r]))return!1;for(r=t;0!=r--;){var s=i[r];if(!uN(n[s],e[s]))return!1}return!0}return n!=n&&e!=e}const HU=document.createDocumentFragment();let a4=(()=>{class n{constructor(t){this.element=t}ngAfterViewInit(){HU.appendChild(this.element.nativeElement)}ngOnDestroy(){HU.removeChild(this.element.nativeElement)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.SBq))},n.\u0275cmp=c.Xpm({type:n,selectors:[["offscreen-fragment"]],ngContentSelectors:Oq,decls:1,vars:0,template:function(t,r){1&t&&(c.F$t(),c.Hsn(0))},encapsulation:2}),n})();const oA=document.createDocumentFragment();let l4=(()=>{class n{ngAfterViewInit(){const t=this.rootElRef?.nativeElement;jU(t,this.inPlaceOf),cN(t,void 0,this.elAttrs),this.inPlaceOf.style.display="none",this.reportEl(t)}ngOnChanges(t){const r=this.rootElRef?.nativeElement;if(r)if(this.inPlaceOf.parentNode!==oA)jU(r,this.inPlaceOf),cN(r,void 0,this.elAttrs),this.reportEl(r);else{const i=t.elAttrs;i&&cN(r,i.previousValue,i.currentValue)}}ngOnDestroy(){this.inPlaceOf.parentNode===oA&&oA.removeChild(this.inPlaceOf),this.reportEl(null)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["transport-container"]],viewQuery:function(t,r){if(1&t&&c.Gf(Lq,5),2&t){let i;c.iGM(i=c.CRH())&&(r.rootElRef=i.first)}},inputs:{inPlaceOf:"inPlaceOf",reportEl:"reportEl",elTag:"elTag",elClasses:"elClasses",elStyle:"elStyle",elAttrs:"elAttrs",template:"template",renderProps:"renderProps"},features:[c.TTD],decls:6,vars:6,consts:[[3,"ngIf"],[3,"ngClass","ngStyle"],["rootEl",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(t,r){1&t&&(c.YNc(0,Fq,3,6,"ng-template",0),c.YNc(1,Uq,3,6,"ng-template",0),c.YNc(2,Vq,3,6,"ng-template",0),c.YNc(3,Bq,3,6,"ng-template",0),c.YNc(4,Hq,3,6,"ng-template",0),c.YNc(5,jq,3,6,"ng-template",0)),2&t&&(c.Q6J("ngIf","div"==r.elTag),c.xp6(1),c.Q6J("ngIf","span"==r.elTag),c.xp6(1),c.Q6J("ngIf","a"==r.elTag),c.xp6(1),c.Q6J("ngIf","tr"==r.elTag),c.xp6(1),c.Q6J("ngIf","th"==r.elTag),c.xp6(1),c.Q6J("ngIf","td"==r.elTag))},dependencies:[Kn,un,Yl,Ja],encapsulation:2}),n})();function jU(n,e){e.parentNode?.insertBefore(n,e.nextSibling),oA.appendChild(e)}function cN(n,e={},t={}){for(const r in e)r in t||(n[r]=null);for(const r in t)n[r]=t[r]}let u4=(()=>{class n{constructor(t,r){this.element=t,this.calendar=null,this.optionSnapshot={},this.customRenderingMap=new Map,this.templateMap={};const i=new eW;i.subscribe(s=>{this.customRenderingMap=s,this.customRenderingArray=void 0,r.detectChanges()}),this.handleCustomRendering=i.handle.bind(i),this.templateMap=this}ngAfterViewInit(){const{deepChangeDetection:t}=this,r={...this.options,...this.buildInputOptions()};this.optionSnapshot=BU(r,(d,f)=>t&&VU[f]?sA(d):d);const i=this.element.nativeElement,s=this.calendar=new l6(i,{...r,...this.buildExtraOptions()}),l=i.closest("ion-content");l&&l.componentOnReady?l.componentOnReady().then(()=>{window.requestAnimationFrame(()=>{s.render()})}):s.render()}ngDoCheck(){if(this.calendar){const{deepChangeDetection:t,optionSnapshot:r}=this,i={...this.options,...this.buildInputOptions()},s={},l=[];for(const f in i)if(i.hasOwnProperty(f)){let y=i[f];t&&VU[f]?uN(r[f],y)||(r[f]=sA(y),l.push(f)):r[f]!==y&&(r[f]=y,l.push(f)),s[f]=y}const d=Object.keys(r);for(const f of d)f in i||(delete r[f],l.push(f));l.length&&(this.calendar.pauseRendering(),this.calendar.resetOptions({...s,...this.buildExtraOptions()},l))}}ngAfterContentChecked(){this.calendar&&this.calendar.resumeRendering()}ngOnDestroy(){this.calendar&&(this.calendar.destroy(),this.calendar=null)}get customRenderings(){return this.customRenderingArray||(this.customRenderingArray=[...this.customRenderingMap.values()])}getApi(){return this.calendar}buildInputOptions(){const t={};for(const r of s4){const i=this[r];null!=i&&(t[r]=i)}return t}buildExtraOptions(){return{handleCustomRendering:this.handleCustomRendering,customRenderingMetaMap:this.templateMap,customRenderingReplacesEl:!0}}trackCustomRendering(t,r){return r.id}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.SBq),c.Y36(c.sBO))},n.\u0275cmp=c.Xpm({type:n,selectors:[["full-calendar"]],contentQueries:function(t,r,i){if(1&t&&(c.Suo(i,$q,7),c.Suo(i,zq,7),c.Suo(i,Gq,7),c.Suo(i,Wq,7),c.Suo(i,qq,7),c.Suo(i,Zq,7),c.Suo(i,Kq,7),c.Suo(i,Yq,7),c.Suo(i,Qq,7),c.Suo(i,Jq,7),c.Suo(i,Xq,7),c.Suo(i,e4,7),c.Suo(i,t4,7),c.Suo(i,n4,7),c.Suo(i,r4,7)),2&t){let s;c.iGM(s=c.CRH())&&(r.dayHeaderContent=s.first),c.iGM(s=c.CRH())&&(r.dayCellContent=s.first),c.iGM(s=c.CRH())&&(r.weekNumberContent=s.first),c.iGM(s=c.CRH())&&(r.nowIndicatorContent=s.first),c.iGM(s=c.CRH())&&(r.eventContent=s.first),c.iGM(s=c.CRH())&&(r.slotLaneContent=s.first),c.iGM(s=c.CRH())&&(r.slotLabelContent=s.first),c.iGM(s=c.CRH())&&(r.allDayContent=s.first),c.iGM(s=c.CRH())&&(r.moreLinkContent=s.first),c.iGM(s=c.CRH())&&(r.noEventsContent=s.first),c.iGM(s=c.CRH())&&(r.resourceAreaHeaderContent=s.first),c.iGM(s=c.CRH())&&(r.resourceGroupLabelContent=s.first),c.iGM(s=c.CRH())&&(r.resourceLabelContent=s.first),c.iGM(s=c.CRH())&&(r.resourceLaneContent=s.first),c.iGM(s=c.CRH())&&(r.resourceGroupLaneContent=s.first)}},inputs:{options:"options",deepChangeDetection:"deepChangeDetection",events:"events",eventSources:"eventSources",resources:"resources"},decls:2,vars:2,consts:[[3,"inPlaceOf","reportEl","elTag","elClasses","elStyle","elAttrs","template","renderProps",4,"ngFor","ngForOf","ngForTrackBy"],[3,"inPlaceOf","reportEl","elTag","elClasses","elStyle","elAttrs","template","renderProps"]],template:function(t,r){1&t&&(c.TgZ(0,"offscreen-fragment"),c.YNc(1,i4,1,8,"transport-container",0),c.qZA()),2&t&&(c.xp6(1),c.Q6J("ngForOf",r.customRenderings)("ngForTrackBy",r.trackCustomRendering))},dependencies:[a4,l4,Ai],encapsulation:2}),n})(),c4=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[Xl]]}),n})();function d4(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"a",12),c.NdJ("keyup.enter",function(){c.CHM(t),c.oxw(3);const i=c.MAs(1);return c.KtG(i.previous())})("click",function(){c.CHM(t),c.oxw(3);const i=c.MAs(1);return c.KtG(i.previous())}),c._uU(1),c.TgZ(2,"span",13),c._uU(3),c.qZA()()}if(2&n){const t=c.oxw(3);c.xp6(1),c.hij(" ",t.previousLabel," "),c.xp6(2),c.Oqu(t.screenReaderPageLabel)}}function h4(n,e){if(1&n&&(c.TgZ(0,"span",14),c._uU(1),c.TgZ(2,"span",13),c._uU(3),c.qZA()()),2&n){const t=c.oxw(3);c.xp6(1),c.hij(" ",t.previousLabel," "),c.xp6(2),c.Oqu(t.screenReaderPageLabel)}}function f4(n,e){if(1&n&&(c.TgZ(0,"li",9),c.YNc(1,d4,4,2,"a",10),c.YNc(2,h4,4,2,"span",11),c.qZA()),2&n){c.oxw(2);const t=c.MAs(1);c.ekj("disabled",t.isFirstPage()),c.xp6(1),c.Q6J("ngIf",1<t.getCurrent()),c.xp6(1),c.Q6J("ngIf",t.isFirstPage())}}function p4(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"a",12),c.NdJ("keyup.enter",function(){c.CHM(t);const i=c.oxw().$implicit;c.oxw(2);const s=c.MAs(1);return c.KtG(s.setCurrent(i.value))})("click",function(){c.CHM(t);const i=c.oxw().$implicit;c.oxw(2);const s=c.MAs(1);return c.KtG(s.setCurrent(i.value))}),c.TgZ(1,"span",13),c._uU(2),c.qZA(),c.TgZ(3,"span"),c._uU(4),c.ALo(5,"number"),c.qZA()()}if(2&n){const t=c.oxw().$implicit,r=c.oxw(2);c.xp6(2),c.hij("",r.screenReaderPageLabel," "),c.xp6(2),c.Oqu("..."===t.label?t.label:c.xi3(5,2,t.label,""))}}function g4(n,e){if(1&n&&(c.ynx(0),c.TgZ(1,"span",16)(2,"span",13),c._uU(3),c.qZA(),c.TgZ(4,"span"),c._uU(5),c.ALo(6,"number"),c.qZA()(),c.BQk()),2&n){const t=c.oxw().$implicit,r=c.oxw(2);c.xp6(3),c.hij("",r.screenReaderCurrentLabel," "),c.xp6(2),c.Oqu("..."===t.label?t.label:c.xi3(6,2,t.label,""))}}function m4(n,e){if(1&n&&(c.TgZ(0,"li"),c.YNc(1,p4,6,5,"a",10),c.YNc(2,g4,7,5,"ng-container",15),c.qZA()),2&n){const t=e.$implicit;c.oxw(2);const r=c.MAs(1);c.ekj("current",r.getCurrent()===t.value)("ellipsis","..."===t.label),c.xp6(1),c.Q6J("ngIf",r.getCurrent()!==t.value),c.xp6(1),c.Q6J("ngIf",r.getCurrent()===t.value)}}function _4(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"a",12),c.NdJ("keyup.enter",function(){c.CHM(t),c.oxw(3);const i=c.MAs(1);return c.KtG(i.next())})("click",function(){c.CHM(t),c.oxw(3);const i=c.MAs(1);return c.KtG(i.next())}),c._uU(1),c.TgZ(2,"span",13),c._uU(3),c.qZA()()}if(2&n){const t=c.oxw(3);c.xp6(1),c.hij(" ",t.nextLabel," "),c.xp6(2),c.Oqu(t.screenReaderPageLabel)}}function y4(n,e){if(1&n&&(c.TgZ(0,"span",14),c._uU(1),c.TgZ(2,"span",13),c._uU(3),c.qZA()()),2&n){const t=c.oxw(3);c.xp6(1),c.hij(" ",t.nextLabel," "),c.xp6(2),c.Oqu(t.screenReaderPageLabel)}}function v4(n,e){if(1&n&&(c.TgZ(0,"li",17),c.YNc(1,_4,4,2,"a",10),c.YNc(2,y4,4,2,"span",11),c.qZA()),2&n){c.oxw(2);const t=c.MAs(1);c.ekj("disabled",t.isLastPage()),c.xp6(1),c.Q6J("ngIf",!t.isLastPage()),c.xp6(1),c.Q6J("ngIf",t.isLastPage())}}function w4(n,e){if(1&n&&(c.TgZ(0,"ul",4),c.YNc(1,f4,3,4,"li",5),c.TgZ(2,"li",6),c._uU(3),c.qZA(),c.YNc(4,m4,3,6,"li",7),c.YNc(5,v4,3,4,"li",8),c.qZA()),2&n){const t=c.oxw(),r=c.MAs(1);c.ekj("responsive",t.responsive),c.xp6(1),c.Q6J("ngIf",t.directionLinks),c.xp6(2),c.AsE(" ",r.getCurrent()," / ",r.getLastPage()," "),c.xp6(1),c.Q6J("ngForOf",r.pages)("ngForTrackBy",t.trackByIndex),c.xp6(1),c.Q6J("ngIf",t.directionLinks)}}class dN{constructor(){this.change=new c.vpe,this.instances={},this.DEFAULT_ID="DEFAULT_PAGINATION_ID"}defaultId(){return this.DEFAULT_ID}register(e){return null==e.id&&(e.id=this.DEFAULT_ID),this.instances[e.id]?this.updateInstance(e):(this.instances[e.id]=e,!0)}updateInstance(e){let t=!1;for(let r in this.instances[e.id])e[r]!==this.instances[e.id][r]&&(this.instances[e.id][r]=e[r],t=!0);return t}getCurrentPage(e){return this.instances[e]?this.instances[e].currentPage:1}setCurrentPage(e,t){if(this.instances[e]){let r=this.instances[e];t<=Math.ceil(r.totalItems/r.itemsPerPage)&&1<=t&&(this.instances[e].currentPage=t,this.change.emit(e))}}setTotalItems(e,t){this.instances[e]&&0<=t&&(this.instances[e].totalItems=t,this.change.emit(e))}setItemsPerPage(e,t){this.instances[e]&&(this.instances[e].itemsPerPage=t,this.change.emit(e))}getInstance(e=this.DEFAULT_ID){return this.instances[e]?this.clone(this.instances[e]):{}}clone(e){var t={};for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t}}const b4=Number.MAX_SAFE_INTEGER;let E4=(()=>{class n{constructor(t){this.service=t,this.state={}}transform(t,r){if(!(t instanceof Array)){let D=r.id||this.service.defaultId();return this.state[D]?this.state[D].slice:t}let d,f,i=r.totalItems&&r.totalItems!==t.length,s=this.createInstance(t,r),l=s.id,y=s.itemsPerPage,w=this.service.register(s);if(!i&&t instanceof Array){if(y=+y||b4,d=(s.currentPage-1)*y,f=d+y,this.stateIsIdentical(l,t,d,f))return this.state[l].slice;{let x=t.slice(d,f);return this.saveState(l,t,x,d,f),this.service.change.emit(l),x}}return w&&this.service.change.emit(l),this.saveState(l,t,t,d,f),t}createInstance(t,r){return this.checkConfig(r),{id:null!=r.id?r.id:this.service.defaultId(),itemsPerPage:+r.itemsPerPage||0,currentPage:+r.currentPage||1,totalItems:+r.totalItems||t.length}}checkConfig(t){const i=["itemsPerPage","currentPage"].filter(s=>!(s in t));if(0<i.length)throw new Error(`PaginatePipe: Argument is missing the following required properties: ${i.join(", ")}`)}saveState(t,r,i,s,l){this.state[t]={collection:r,size:r.length,slice:i,start:s,end:l}}stateIsIdentical(t,r,i,s){let l=this.state[t];return!(!l||l.size!==r.length||l.start!==i||l.end!==s)&&l.slice.every((f,y)=>f===r[i+y])}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(dN,16))},n.\u0275pipe=c.Yjl({name:"paginate",type:n,pure:!1}),n})(),C4=(()=>{class n{constructor(t,r){this.service=t,this.changeDetectorRef=r,this.maxSize=7,this.pageChange=new c.vpe,this.pageBoundsCorrection=new c.vpe,this.pages=[],this.changeSub=this.service.change.subscribe(i=>{this.id===i&&(this.updatePageLinks(),this.changeDetectorRef.markForCheck(),this.changeDetectorRef.detectChanges())})}ngOnInit(){void 0===this.id&&(this.id=this.service.defaultId()),this.updatePageLinks()}ngOnChanges(t){this.updatePageLinks()}ngOnDestroy(){this.changeSub.unsubscribe()}previous(){this.checkValidId(),this.setCurrent(this.getCurrent()-1)}next(){this.checkValidId(),this.setCurrent(this.getCurrent()+1)}isFirstPage(){return 1===this.getCurrent()}isLastPage(){return this.getLastPage()===this.getCurrent()}setCurrent(t){this.pageChange.emit(t)}getCurrent(){return this.service.getCurrentPage(this.id)}getLastPage(){let t=this.service.getInstance(this.id);return t.totalItems<1?1:Math.ceil(t.totalItems/t.itemsPerPage)}getTotalItems(){return this.service.getInstance(this.id).totalItems}checkValidId(){null==this.service.getInstance(this.id).id&&console.warn(`PaginationControlsDirective: the specified id "${this.id}" does not match any registered PaginationInstance`)}updatePageLinks(){let t=this.service.getInstance(this.id);const r=this.outOfBoundCorrection(t);r!==t.currentPage?setTimeout(()=>{this.pageBoundsCorrection.emit(r),this.pages=this.createPageArray(t.currentPage,t.itemsPerPage,t.totalItems,this.maxSize)}):this.pages=this.createPageArray(t.currentPage,t.itemsPerPage,t.totalItems,this.maxSize)}outOfBoundCorrection(t){const r=Math.ceil(t.totalItems/t.itemsPerPage);return r<t.currentPage&&0<r?r:t.currentPage<1?1:t.currentPage}createPageArray(t,r,i,s){s=+s;let l=[];const d=Math.max(Math.ceil(i/r),1),f=Math.ceil(s/2),y=t<=f,w=d-f<t,D=!y&&!w;let x=s<d,N=1;for(;N<=d&&N<=s;){let U,Q=this.calculatePageNumber(N,t,s,d),X=2===N&&(D||w),ae=N===s-1&&(D||y);U=x&&(X||ae)?"...":Q,l.push({label:U,value:Q}),N++}return l}calculatePageNumber(t,r,i,s){let l=Math.ceil(i/2);return t===i?s:1===t?t:i<s?s-l<r?s-i+t:l<r?r-l+t:t:t}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(dN),c.Y36(c.sBO))},n.\u0275dir=c.lG2({type:n,selectors:[["pagination-template"],["","pagination-template",""]],inputs:{id:"id",maxSize:"maxSize"},outputs:{pageChange:"pageChange",pageBoundsCorrection:"pageBoundsCorrection"},exportAs:["paginationApi"],features:[c.TTD]}),n})();function hN(n){return!!n&&"false"!==n}let I4=(()=>{class n{constructor(){this.maxSize=7,this.previousLabel="Previous",this.nextLabel="Next",this.screenReaderPaginationLabel="Pagination",this.screenReaderPageLabel="page",this.screenReaderCurrentLabel="You're on page",this.pageChange=new c.vpe,this.pageBoundsCorrection=new c.vpe,this._directionLinks=!0,this._autoHide=!1,this._responsive=!1}get directionLinks(){return this._directionLinks}set directionLinks(t){this._directionLinks=hN(t)}get autoHide(){return this._autoHide}set autoHide(t){this._autoHide=hN(t)}get responsive(){return this._responsive}set responsive(t){this._responsive=hN(t)}trackByIndex(t){return t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["pagination-controls"]],inputs:{id:"id",maxSize:"maxSize",directionLinks:"directionLinks",autoHide:"autoHide",responsive:"responsive",previousLabel:"previousLabel",nextLabel:"nextLabel",screenReaderPaginationLabel:"screenReaderPaginationLabel",screenReaderPageLabel:"screenReaderPageLabel",screenReaderCurrentLabel:"screenReaderCurrentLabel"},outputs:{pageChange:"pageChange",pageBoundsCorrection:"pageBoundsCorrection"},decls:4,vars:4,consts:[[3,"id","maxSize","pageChange","pageBoundsCorrection"],["p","paginationApi"],["role","navigation"],["class","ngx-pagination",3,"responsive",4,"ngIf"],[1,"ngx-pagination"],["class","pagination-previous",3,"disabled",4,"ngIf"],[1,"small-screen"],[3,"current","ellipsis",4,"ngFor","ngForOf","ngForTrackBy"],["class","pagination-next",3,"disabled",4,"ngIf"],[1,"pagination-previous"],["tabindex","0",3,"keyup.enter","click",4,"ngIf"],["aria-disabled","true",4,"ngIf"],["tabindex","0",3,"keyup.enter","click"],[1,"show-for-sr"],["aria-disabled","true"],[4,"ngIf"],["aria-live","polite"],[1,"pagination-next"]],template:function(t,r){if(1&t&&(c.TgZ(0,"pagination-template",0,1),c.NdJ("pageChange",function(s){return r.pageChange.emit(s)})("pageBoundsCorrection",function(s){return r.pageBoundsCorrection.emit(s)}),c.TgZ(2,"nav",2),c.YNc(3,w4,6,8,"ul",3),c.qZA()()),2&t){const i=c.MAs(1);c.Q6J("id",r.id)("maxSize",r.maxSize),c.xp6(2),c.uIk("aria-label",r.screenReaderPaginationLabel),c.xp6(1),c.Q6J("ngIf",!(r.autoHide&&i.pages.length<=1))}},dependencies:[C4,Kn,Ai,zi],styles:['.ngx-pagination{margin-left:0;margin-bottom:1rem}.ngx-pagination:before,.ngx-pagination:after{content:" ";display:table}.ngx-pagination:after{clear:both}.ngx-pagination li{-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;margin-right:.0625rem;border-radius:0}.ngx-pagination li{display:inline-block}.ngx-pagination a,.ngx-pagination button{color:#0a0a0a;display:block;padding:.1875rem .625rem;border-radius:0}.ngx-pagination a:hover,.ngx-pagination button:hover{background:#e6e6e6}.ngx-pagination .current{padding:.1875rem .625rem;background:#2199e8;color:#fefefe;cursor:default}.ngx-pagination .disabled{padding:.1875rem .625rem;color:#cacaca;cursor:default}.ngx-pagination .disabled:hover{background:transparent}.ngx-pagination a,.ngx-pagination button{cursor:pointer}.ngx-pagination .pagination-previous a:before,.ngx-pagination .pagination-previous.disabled:before{content:"\\ab";display:inline-block;margin-right:.5rem}.ngx-pagination .pagination-next a:after,.ngx-pagination .pagination-next.disabled:after{content:"\\bb";display:inline-block;margin-left:.5rem}.ngx-pagination .show-for-sr{position:absolute!important;width:1px;height:1px;overflow:hidden;clip:rect(0,0,0,0)}.ngx-pagination .small-screen{display:none}@media screen and (max-width: 601px){.ngx-pagination.responsive .small-screen{display:inline-block}.ngx-pagination.responsive li:not(.small-screen):not(.pagination-previous):not(.pagination-next){display:none}}\n'],encapsulation:2,changeDetection:0}),n})(),D4=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[dN],imports:[[Xl]]}),n})();const T4=function(n){return["/recipes",n]};function A4(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"div")(1,"div",23)(2,"div",24),c._UZ(3,"img",25),c.TgZ(4,"div",26)(5,"p",27),c._uU(6),c.qZA(),c.TgZ(7,"p"),c._uU(8),c.qZA()()(),c.TgZ(9,"div",28)(10,"div")(11,"a",29),c._UZ(12,"i",30),c.qZA()(),c.TgZ(13,"div")(14,"button",31),c.NdJ("click",function(){const s=c.CHM(t).$implicit,l=c.oxw();return c.KtG(l.selectedLabel=s.label)}),c._UZ(15,"i",32),c.qZA()()()()()}if(2&n){const t=e.$implicit;c.xp6(3),c.s9C("src",t.image,c.LSH),c.s9C("alt",t.label),c.xp6(3),c.Oqu(t.label),c.xp6(2),c.Oqu(t.source),c.xp6(3),c.Q6J("routerLink",c.VKq(5,T4,t.uri.split("#")[1]))}}function S4(n,e){1&n&&(c.TgZ(0,"div",33),c._UZ(1,"img",34),c.qZA())}const x4=function(n){return{itemsPerPage:5,currentPage:n}};let R4=(()=>{class n{constructor(t,r,i){this.recipesSrv=t,this.usersSrv=r,this.eventsSrv=i,this.events=[],this.favs=[],this.calendarEvents=[],this.selectedLabel="",this.paginaCorrente=1,this.calendarOptions={plugins:[P6],initialView:"dayGridWeek",events:this.calendarEvents,eventClick:this.deleteEvent.bind(this)}}ngOnInit(){this.getUser()}getUser(){const t=window.localStorage.getItem("token"),r=JSON.parse(t);this.usersSrv.getUserByUserId(r.user.uid).subscribe(i=>{this.userId=i,this.getEvents(i),this.getIdFavs(r.user.uid)})}getEvents(t){this.eventsSrv.getEvents(t).subscribe(r=>{this.calendarEvents=r})}getIdFavs(t){this.usersSrv.getFavsByUserId(t).subscribe(r=>{this.getFavRecipes(r)})}getFavRecipes(t){null!==this.favs&&t.forEach(r=>{this.recipesSrv.getRecipeById(r).subscribe(i=>{this.favs.push(i.recipe)})})}addEvent(t,r){this.updateUserEvents(this.userId,t,r)}updateUserEvents(t,r,i){const s=window.localStorage.getItem("token"),l=JSON.parse(s);this.eventsSrv.addEvent({title:i,date:r.value.date},t).subscribe(f=>{this.events.push(f),this.usersSrv.getUserByUserId(l.user.uid).subscribe(y=>{this.getEvents(y)})})}deleteEvent(t){const r=window.localStorage.getItem("token"),i=JSON.parse(r);Gd().fire({title:"Do you want to remove the recipe?",icon:"warning",showCancelButton:!0,cancelButtonColor:"#A5A6A0",confirmButtonColor:"#345834",confirmButtonText:"Confirm"}).then(s=>{s.isConfirmed&&(this.usersSrv.getUserByUserId(i.user.uid).subscribe(l=>{this.eventsSrv.deleteEvent(parseInt(t.event._def.publicId),l).subscribe(d=>{t.event.remove()})}),Gd().fire("Deleted!","Recipe has been deleted.","success"))})}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(ww),c.Y36(O2),c.Y36(O6))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-calendar"]],decls:37,vars:11,consts:[["id","exampleModal","tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title","fs-5"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],["form","ngForm"],[1,"form-group","mb-3"],["for","date",1,"form-label"],["type","date","name","date","id","date","required","","ngModel","",1,"form-control"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn-annulla","px-4","py-2"],["type","button","data-bs-dismiss","modal",1,"btn-confirm","px-4","py-2",3,"disabled","click"],[1,"container","py-5"],[1,"row"],[1,"col-12","col-lg-6","py-4"],[3,"events","options"],[1,"ps-5"],[4,"ngFor","ngForOf"],["class","text-center py-5",4,"ngIf"],[1,"text-center","my-5"],[3,"pageChange"],[1,"d-flex","justify-content-between","align-items-center","my-3",2,"background-color","#88D398"],[1,"d-flex","align-items-center"],["width","80px","height","80px",3,"src","alt"],[1,"p-2"],[1,"fw-bold","m-0"],[1,"me-3"],[1,"",3,"routerLink"],[1,"bi","bi-eye",2,"background-color","#EC4E1F"],["data-bs-toggle","modal","data-bs-target","#exampleModal",1,"p-0","border-0",3,"click"],[1,"bi","bi-calendar-plus",2,"background-color","#345834"],[1,"text-center","py-5"],["src","../../../assets/img/no-recipes.png","alt","No recipes","width","300px"]],template:function(t,r){if(1&t){const i=c.EpF();c._UZ(0,"app-navbar"),c.TgZ(1,"div",0)(2,"div",1)(3,"div",2)(4,"div",3)(5,"h1",4),c._uU(6),c.qZA(),c._UZ(7,"button",5),c.qZA(),c.TgZ(8,"div",6)(9,"form",null,7)(11,"div",8)(12,"label",9),c._uU(13,"Insert a date"),c.qZA(),c._UZ(14,"input",10),c.qZA()()(),c.TgZ(15,"div",11)(16,"button",12),c._uU(17,"Close"),c.qZA(),c.TgZ(18,"button",13),c.NdJ("click",function(){c.CHM(i);const l=c.MAs(10);return c.KtG(r.addEvent(l,r.selectedLabel))}),c._uU(19,"Confirm"),c.qZA()()()()(),c.TgZ(20,"div",14)(21,"h1"),c._uU(22,"Calendar"),c.qZA(),c._UZ(23,"hr"),c.TgZ(24,"div",15)(25,"div",16),c._UZ(26,"full-calendar",17),c.qZA(),c.TgZ(27,"div",16)(28,"div",18)(29,"h2"),c._uU(30,"Favorite recipes"),c.qZA(),c.YNc(31,A4,16,7,"div",19),c.ALo(32,"paginate"),c.YNc(33,S4,2,0,"div",20),c.TgZ(34,"div",21)(35,"pagination-controls",22),c.NdJ("pageChange",function(l){return r.paginaCorrente=l}),c.qZA()()()()()(),c._UZ(36,"app-footer")}if(2&t){const i=c.MAs(10);c.xp6(6),c.Oqu(r.selectedLabel),c.xp6(12),c.Q6J("disabled",i.invalid),c.xp6(8),c.Q6J("events",r.calendarEvents)("options",r.calendarOptions),c.xp6(5),c.Q6J("ngForOf",c.xi3(32,6,r.favs,c.VKq(9,x4,r.paginaCorrente))),c.xp6(2),c.Q6J("ngIf",r.favs.length<1)}},dependencies:[Ai,Kn,La,Ly,Of,Ny,Py,Fy,fm,Vf,u4,I4,kc,Nu,E4],styles:["i[_ngcontent-%COMP%]{font-size:20px;color:#fff;padding:5px 10px}"]}),n})();var aA=(()=>{return(n=aA||(aA={})).All="",n.American="American",n.Asian="Asian",n.British="British",n.Caribbean="Caribbean",n.Central_Europe="Central Europe",n.Chinese="Chinese",n.Eastern_Europe="Eastern Europe",n.French="French",n.Indian="Indian",n.Italian="Italian",n.Japanese="Japanese",n.Kosher="Kosher",n.Mediterranean="Mediterranean",n.Mexican="Mexican",n.Middle_Eastern="Middle Eastern",n.Nordic="Nordic",n.South_American="South American",n.South_Easr_Asian="South East Asian",aA;var n})(),lA=(()=>{return(n=lA||(lA={})).All="",n.Breakfast="Breakfast",n.Dinner="Dinner",n.Lunch="Lunch",n.Snack="Snack",n.Teatime="Teatime",lA;var n})();function M4(n,e){if(1&n&&(c.TgZ(0,"div",24),c._UZ(1,"input",25),c.TgZ(2,"label",26),c._uU(3),c.qZA()()),2&n){const t=e.$implicit;c.xp6(1),c.s9C("id",t),c.Q6J("value",t),c.xp6(2),c.Oqu(""!=t?t:"All")}}function k4(n,e){if(1&n&&(c.TgZ(0,"div",24),c._UZ(1,"input",27),c.TgZ(2,"label",28),c._uU(3),c.qZA()()),2&n){const t=e.$implicit;c.xp6(1),c.s9C("id",t),c.Q6J("value",t),c.xp6(2),c.Oqu(""!=t?t:"All")}}const N4=function(n,e){return{"bi-heart":n,"bi-heart-fill red-heart":e}};function P4(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"i",39),c.NdJ("click",function(){c.CHM(t);const i=c.oxw().$implicit,s=c.oxw(2);return c.KtG(s.addFavRecipe(null==i.recipe.uri?null:i.recipe.uri.split("#")[1]))}),c.qZA()}if(2&n){const t=c.oxw().$implicit,r=c.oxw(2);c.Q6J("ngClass",c.WLB(1,N4,!r.isFav(null==t.recipe.uri?null:t.recipe.uri.split("#")[1]),r.isFav(null==t.recipe.uri?null:t.recipe.uri.split("#")[1])))}}const O4=function(n){return["/recipes",n]};function L4(n,e){if(1&n&&(c.TgZ(0,"div",31)(1,"span",32),c.YNc(2,P4,1,4,"i",33),c.qZA(),c._UZ(3,"img",34),c.TgZ(4,"div",35)(5,"h5",36),c._uU(6),c.qZA(),c.TgZ(7,"p",37),c._uU(8),c.qZA(),c.TgZ(9,"a",38),c._uU(10,"See more"),c.qZA()()()),2&n){const t=e.$implicit,r=c.oxw(2);c.xp6(2),c.Q6J("ngIf",r.isLoggedIn()),c.xp6(1),c.s9C("src",t.recipe.image,c.LSH),c.s9C("alt",t.recipe.label),c.xp6(3),c.Oqu(t.recipe.label),c.xp6(2),c.Oqu(t.recipe.source),c.xp6(1),c.Q6J("routerLink",c.VKq(6,O4,null==t.recipe.uri?null:t.recipe.uri.split("#")[1]))}}function F4(n,e){if(1&n&&(c.TgZ(0,"div",29),c.YNc(1,L4,11,8,"div",30),c.qZA()),2&n){const t=c.oxw();c.xp6(1),c.Q6J("ngForOf",t.recipes)}}function U4(n,e){1&n&&(c.TgZ(0,"div",40),c._UZ(1,"img",41),c.qZA())}let V4=(()=>{class n{constructor(t,r,i){this.recipesSrv=t,this.usersSrv=r,this.authSrv=i,this.favs=[],this.recipes=[],this.mealTypes=Object.values(lA),this.cuisineTypes=Object.values(aA),this.error=""}ngOnInit(){this.findRecipes(),this.getIdFavs()}isLoggedIn(){return this.authSrv.isLoggedIn()}findRecipes(){this.recipesSrv.getRecipes("query").subscribe(t=>{this.recipes=t.hits})}getIdFavs(){const t=window.localStorage.getItem("token"),r=JSON.parse(t);this.usersSrv.getFavsByUserId(r.user.uid).subscribe(i=>{this.favs=i})}sendFilters(t){let r;r=""!==t.value.cuisineType?t.value.cuisineType:""!==t.value.mealType?t.value.mealType:"query";const i={q:r,type:"public",app_id:"d84b34a5",app_key:"1163caf9de0e70fb5c44bd3e655467c0",field:["calories","cuisineType","dishType","image","ingredients","label","healthLabels","mealType","source","totalTime","tags","uri","url"]};if(""!==t.value.ingredients){if(!(t.value.ingredients>1))return void(this.error="Please insert a correct number");i.ingr=t.value.ingredients}if(""!==t.value.cuisineType&&(i.cuisineType=t.value.cuisineType),""!==t.value.mealType&&(i.mealType=t.value.mealType),""!==t.value.mincalories&&""!==t.value.maxcalories){if(!(t.value.mincalories>1&&t.value.maxcalories>1))return void(this.error="Please insert a correct number");i.calories=t.value.mincalories+"-"+t.value.maxcalories}const s=new ta({fromObject:i});this.recipesSrv.getFilteredRecipes(s).subscribe(l=>{this.recipes=l.hits,console.log(l)}),console.log("fav"),this.getIdFavs()}addFavRecipe(t){this.getUser(t)}getUser(t){const r=window.localStorage.getItem("token"),i=JSON.parse(r);this.usersSrv.getUserByUserId(i.user.uid).subscribe(s=>{this.updateUser(s,t,i.user.uid)})}updateUser(t,r,i){this.usersSrv.getFavsByUserId(i).subscribe(s=>{this.favs=s;const l=this.favs.indexOf(r);l>-1?this.favs.splice(l,1):this.favs.push(r),this.usersSrv.updateFavs(t,{recipes:this.favs}).subscribe(f=>{console.log(f)})})}isFav(t){return this.favs.includes(t)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(ww),c.Y36(O2),c.Y36(pf))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-recipes"]],decls:42,vars:5,consts:[[1,"container","py-5"],["type","button","data-bs-toggle","collapse","data-bs-target","#collapseExample","aria-expanded","false","aria-controls","collapseExample",1,"btn-cta","px-4","py-2","mb-3"],["id","collapseExample",1,"collapse"],[1,"card","card-body","rounded-0"],["filterForm","ngForm"],[1,"form-group","py-3"],["for","mealType",1,"fw-bold"],[1,"d-flex"],["class","form-check me-4 mb-3",4,"ngFor","ngForOf"],[1,"form-group","py-2"],["for","cuisineType",1,"fw-bold"],[1,"d-flex","flex-wrap"],[1,"form-group","py-2","mb-3"],["for","ingredients",1,"fw-bold","mb-3"],["name","ingredients","type","number","id","ingredients","min","0","placeholder","5","ngModel","",1,"form-control"],["for","calories",1,"fw-bold","mb-3"],[1,"input-group"],[1,"input-group-text"],["name","mincalories","type","number","aria-label","Min Calories","min","0","placeholder","0","ngModel","",1,"form-control"],["name","maxcalories","type","number","aria-label","Max Calories","min","0","placeholder","0","ngModel","",1,"form-control"],[1,"fw-bold","text-danger"],["type","submit",1,"btn-confirm","rounded-0","px-5","py-2","my-4",3,"click"],["class","row justify-content-center py-5",4,"ngIf"],["class","text-center py-5",4,"ngIf"],[1,"form-check","me-4","mb-3"],["type","radio","name","mealType","ngModel","",1,"form-check-input",3,"id","value"],["for","mealType",1,"form-check-label"],["type","radio","name","cuisineType","ngModel","",1,"form-check-input",3,"id","value"],["for","cuisineType",1,"form-check-label"],[1,"row","justify-content-center","py-5"],["class","card col-4 recipe shadow p-0 m-3","style","width: 18rem;",4,"ngFor","ngForOf"],[1,"card","col-4","recipe","shadow","p-0","m-3",2,"width","18rem"],[1,"position-absolute","end-0","badge","rounded-0",2,"background-color","#A5A6A0","top","30px"],["class","bi",3,"ngClass","click",4,"ngIf"],[1,"card-img-top",3,"src","alt"],[1,"card-body","text-start","py-2","px-4"],[1,"card-title","text-light"],[1,"card-text","text-light"],[1,"btn-confirm","text-light","px-4","py-2",3,"routerLink"],[1,"bi",3,"ngClass","click"],[1,"text-center","py-5"],["src","../../../assets/img/no-recipes.png","alt","No recipes"]],template:function(t,r){if(1&t){const i=c.EpF();c._UZ(0,"app-navbar"),c.TgZ(1,"div",0)(2,"h1"),c._uU(3,"Recipes"),c.qZA(),c._UZ(4,"hr"),c.TgZ(5,"button",1),c._uU(6,"Filter"),c.qZA(),c.TgZ(7,"div",2)(8,"div",3)(9,"form",null,4)(11,"div",5)(12,"p",6),c._uU(13,"Meal Type"),c.qZA(),c.TgZ(14,"div",7),c.YNc(15,M4,4,3,"div",8),c.qZA()(),c.TgZ(16,"div",9)(17,"p",10),c._uU(18,"Cuisine Type"),c.qZA(),c.TgZ(19,"div",11),c.YNc(20,k4,4,3,"div",8),c.qZA()(),c.TgZ(21,"div",12)(22,"label",13),c._uU(23,"Ingredients number"),c.qZA(),c._UZ(24,"input",14),c.qZA(),c.TgZ(25,"div",9)(26,"label",15),c._uU(27,"Calories"),c.qZA(),c.TgZ(28,"div",16)(29,"span",17),c._uU(30,"From"),c.qZA(),c._UZ(31,"input",18),c.TgZ(32,"span",17),c._uU(33,"To"),c.qZA(),c._UZ(34,"input",19),c.qZA()(),c.TgZ(35,"p",20),c._uU(36),c.qZA(),c.TgZ(37,"button",21),c.NdJ("click",function(){c.CHM(i);const l=c.MAs(10);return c.KtG(r.sendFilters(l))}),c._uU(38,"Confirm"),c.qZA()()()(),c.YNc(39,F4,2,1,"div",22),c.YNc(40,U4,2,0,"div",23),c.qZA(),c._UZ(41,"app-footer")}2&t&&(c.xp6(15),c.Q6J("ngForOf",r.mealTypes),c.xp6(5),c.Q6J("ngForOf",r.cuisineTypes),c.xp6(16),c.Oqu(r.error),c.xp6(3),c.Q6J("ngIf",r.recipes.length>1),c.xp6(1),c.Q6J("ngIf",r.recipes.length<1))},dependencies:[un,Ai,Kn,La,Ly,Of,tN,nN,Ny,Py,lN,fm,Vf,kc,Nu],styles:[".bi[_ngcontent-%COMP%]{cursor:pointer}.red-heart[_ngcontent-%COMP%]{color:#ec4e1f}"]}),n})(),B4=(()=>{class n{transform(t){return t?t.charAt(0).toUpperCase()+t.slice(1):""}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275pipe=c.Yjl({name:"capitalCase",type:n,pure:!0}),n})();function H4(n,e){if(1&n&&(c.TgZ(0,"span"),c._uU(1),c.qZA()),2&n){const t=c.oxw().$implicit;c.xp6(1),c.hij("",t.quantity.toFixed(t.quantity<1?2:0)," ")}}function j4(n,e){if(1&n&&(c.TgZ(0,"span"),c._uU(1),c.qZA()),2&n){const t=c.oxw().$implicit;c.xp6(1),c.hij("",t.measure," ")}}function $4(n,e){if(1&n&&(c.TgZ(0,"li"),c.YNc(1,H4,2,1,"span",13),c.YNc(2,j4,2,1,"span",13),c._uU(3),c.qZA()),2&n){const t=e.$implicit;c.xp6(1),c.Q6J("ngIf",0!=t.quantity),c.xp6(1),c.Q6J("ngIf","<unit>"!=t.measure),c.xp6(1),c.Oqu(t.food)}}function z4(n,e){if(1&n&&(c.TgZ(0,"p",14),c._uU(1),c.qZA()),2&n){const t=e.$implicit;c.xp6(1),c.Oqu(t)}}let G4=(()=>{class n{constructor(t,r){this.recipesSrv=t,this.ar=r}ngOnInit(){this.findRecipe(this.ar.snapshot.params.id)}findRecipe(t){this.recipesSrv.getRecipeById(t).subscribe(r=>{this.recipe=r.recipe})}getBackgroundImageStyle(t){return{"background-image":`linear-gradient(rgba(0,0,0,0.5), rgba(0,0,0,0.5)), url(${t})`}}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(ww),c.Y36(Mo))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-recipe-details"]],decls:31,vars:12,consts:[["id","img-recipe",1,"text-center","p-5",3,"ngStyle"],[1,"text-light","fw-bold"],[1,"container","p-5"],[1,"row"],[1,"col","shadow","p-4",2,"background-color","#ccccc8"],[4,"ngFor","ngForOf"],[1,"col","p-4"],[1,"bi","bi-person"],[1,"bi","bi-clock"],[1,"bi","bi-lightning"],[1,"d-flex","flex-wrap","py-4"],["class","labels px-3 py-1 my-1 me-2",4,"ngFor","ngForOf"],["target","_blank","title","Recipe",1,"btn-cta","px-4","py-2",3,"href"],[4,"ngIf"],[1,"labels","px-3","py-1","my-1","me-2"]],template:function(t,r){1&t&&(c._UZ(0,"app-navbar"),c.TgZ(1,"div",0)(2,"h1",1),c._uU(3),c.qZA()(),c.TgZ(4,"div",2)(5,"div",3)(6,"div",4)(7,"h3"),c._uU(8,"Ingredients"),c.qZA(),c.TgZ(9,"ul"),c.YNc(10,$4,4,3,"li",5),c.qZA()(),c.TgZ(11,"div",6)(12,"p"),c._UZ(13,"i",7),c._uU(14),c.qZA(),c.TgZ(15,"p"),c._UZ(16,"i",8),c._uU(17),c.qZA(),c.TgZ(18,"p"),c._UZ(19,"i",9),c._uU(20),c.qZA(),c.TgZ(21,"p"),c._uU(22),c.ALo(23,"capitalCase"),c.qZA(),c.TgZ(24,"p"),c._uU(25),c.qZA(),c.TgZ(26,"div",10),c.YNc(27,z4,2,1,"p",11),c.qZA(),c.TgZ(28,"a",12),c._uU(29,"See recipe"),c.qZA()()()(),c._UZ(30,"app-footer")),2&t&&(c.xp6(1),c.Q6J("ngStyle",r.getBackgroundImageStyle(null==r.recipe?null:r.recipe.image)),c.xp6(2),c.Oqu(null==r.recipe?null:r.recipe.label),c.xp6(7),c.Q6J("ngForOf",null==r.recipe?null:r.recipe.ingredients),c.xp6(4),c.hij(" Source: ",null==r.recipe?null:r.recipe.source,""),c.xp6(3),c.hij(" Total time: ",null==r.recipe?null:r.recipe.totalTime," m"),c.xp6(3),c.hij(" Calories: ",null==r.recipe?null:r.recipe.calories.toFixed(2)," kcal"),c.xp6(2),c.hij("Meal Type: ",c.lcZ(23,10,null==r.recipe||null==r.recipe.mealType?null:r.recipe.mealType.toString()),""),c.xp6(3),c.hij("Dish Type: ",null==r.recipe?null:r.recipe.dishType,""),c.xp6(2),c.Q6J("ngForOf",null==r.recipe?null:r.recipe.healthLabels),c.xp6(1),c.s9C("href",null==r.recipe?null:r.recipe.url,c.LSH))},dependencies:[Ai,Kn,Yl,kc,Nu,B4],styles:["#img-recipe[_ngcontent-%COMP%]{background-position:center;background-repeat:no-repeat;background-size:cover;background-attachment:fixed;height:60vh;display:flex;justify-content:center;align-items:center}#img-recipe[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:60px;text-shadow:2px 2px 10px rgb(56,56,56)}.labels[_ngcontent-%COMP%]{font-size:10px;background-color:#88d3987b}"]}),n})(),W4=(()=>{class n{constructor(t){this.auth=t,this.email="",this.password="",this.error=""}ngOnInit(){}register(){""!=this.email&&""!=this.password?this.auth.register(this.email,this.password):this.error="Please insert correct credentials."}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(pf))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-register"]],decls:30,vars:3,consts:[[1,"container-fluid","overflow-hidden","p-0"],["src","../../../assets/img/video.mp4","autoplay","","muted","","loop",""],[1,"card","text-center","rounded-0","shadow","p-4"],[1,"card-body"],[1,"mb-4"],[1,"form-floating","form-group","mb-3"],["type","email","name","email","placeholder","email","id","email","required","",1,"form-control",3,"ngModel","ngModelChange"],["for","email",1,"form-label"],[1,"bi","bi-envelope"],["id","email",1,"invalid-feedback"],["type","password","name","password","placeholder","password","id","password","required","",1,"form-control",3,"ngModel","ngModelChange"],["for","password",1,"form-label"],[1,"bi","bi-key"],[1,"text-danger"],["type","button",1,"btn-confirm","px-4","py-1",3,"click"],[1,"text-secondary","m-0"],["title","Login","routerLink","/login",1,"a-link"]],template:function(t,r){1&t&&(c._UZ(0,"app-navbar"),c.TgZ(1,"div",0),c._UZ(2,"video",1),c.TgZ(3,"div",2)(4,"div",3)(5,"h2",4),c._uU(6,"Register"),c.qZA(),c.TgZ(7,"form",4)(8,"div",5)(9,"input",6),c.NdJ("ngModelChange",function(s){return r.email=s}),c.qZA(),c.TgZ(10,"label",7),c._UZ(11,"i",8),c._uU(12," Email"),c.qZA(),c.TgZ(13,"div",9),c._uU(14," Please write your email. "),c.qZA()(),c.TgZ(15,"div",5)(16,"input",10),c.NdJ("ngModelChange",function(s){return r.password=s}),c.qZA(),c.TgZ(17,"label",11),c._UZ(18,"i",12),c._uU(19," Password"),c.qZA()(),c.TgZ(20,"p",13),c._uU(21),c.qZA(),c.TgZ(22,"button",14),c.NdJ("click",function(){return r.register()}),c._uU(23,"Register"),c.qZA()(),c.TgZ(24,"div")(25,"p",15),c._uU(26,"Have already an account? "),c.TgZ(27,"a",16),c._uU(28,"Login"),c.qZA()()()()()(),c._UZ(29,"app-footer")),2&t&&(c.xp6(9),c.Q6J("ngModel",r.email),c.xp6(7),c.Q6J("ngModel",r.password),c.xp6(5),c.Oqu(r.error))},dependencies:[La,Ly,Of,Ny,Py,Fy,fm,Vf,kc,Nu],styles:[".container-fluid[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:90vh}video[_ngcontent-%COMP%]{display:none}.card[_ngcontent-%COMP%]{min-width:350px}@media screen and (min-width: 768px){video[_ngcontent-%COMP%]{display:block;height:90vh;width:100vw}.card[_ngcontent-%COMP%]{position:absolute;top:30%;left:30%}}@media screen and (min-width: 992px){.card[_ngcontent-%COMP%]{left:50%}}"]}),n})(),q4=(()=>{class n{constructor(t){this.auth=t,this.email="",this.password="",this.error=""}ngOnInit(){}login(){""!=this.email&&""!=this.password?this.auth.login(this.email,this.password):this.error="Please insert correct credentials."}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(pf))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-login"]],decls:33,vars:3,consts:[[1,"container-fluid","overflow-hidden","p-0"],["src","../../../assets/img/video.mp4","autoplay","","muted","","loop",""],[1,"card","text-center","rounded-0","shadow","p-4"],[1,"card-body"],[1,"mb-4"],[1,"form-floating","form-group","mb-3"],["type","email","name","email","placeholder","email","id","email","required","",1,"form-control",3,"ngModel","ngModelChange"],["for","email",1,"form-label"],[1,"bi","bi-envelope"],["type","password","name","password","placeholder","password","id","password","required","",1,"form-control",3,"ngModel","ngModelChange"],["for","password",1,"form-label"],[1,"bi","bi-key"],[1,"text-danger"],["type","button",1,"btn-confirm","px-4","py-1",3,"click"],[1,"mb-2"],[1,"text-secondary","m-0"],["title","Register","routerLink","/register",1,"a-link"],["title","Forgot password","routerLink","/forgot-password",1,"a-link"]],template:function(t,r){1&t&&(c._UZ(0,"app-navbar"),c.TgZ(1,"div",0),c._UZ(2,"video",1),c.TgZ(3,"div",2)(4,"div",3)(5,"h2",4),c._uU(6,"Login"),c.qZA(),c.TgZ(7,"form",4)(8,"div",5)(9,"input",6),c.NdJ("ngModelChange",function(s){return r.email=s}),c.qZA(),c.TgZ(10,"label",7),c._UZ(11,"i",8),c._uU(12," Email"),c.qZA()(),c.TgZ(13,"div",5)(14,"input",9),c.NdJ("ngModelChange",function(s){return r.password=s}),c.qZA(),c.TgZ(15,"label",10),c._UZ(16,"i",11),c._uU(17," Password"),c.qZA()(),c.TgZ(18,"p",12),c._uU(19),c.qZA(),c.TgZ(20,"button",13),c.NdJ("click",function(){return r.login()}),c._uU(21,"Login"),c.qZA()(),c.TgZ(22,"div",14)(23,"p",15),c._uU(24,"Need Account? "),c.TgZ(25,"a",16),c._uU(26,"Register"),c.qZA()()(),c.TgZ(27,"div")(28,"p",15),c._uU(29,"Forgot Password? "),c.TgZ(30,"a",17),c._uU(31,"Click here"),c.qZA()()()()()(),c._UZ(32,"app-footer")),2&t&&(c.xp6(9),c.Q6J("ngModel",r.email),c.xp6(5),c.Q6J("ngModel",r.password),c.xp6(5),c.Oqu(r.error))},dependencies:[La,Ly,Of,Ny,Py,Fy,fm,Vf,kc,Nu],styles:[".container-fluid[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:90vh}video[_ngcontent-%COMP%]{display:none}.card[_ngcontent-%COMP%]{min-width:350px}@media screen and (min-width: 768px){video[_ngcontent-%COMP%]{display:block;height:90vh;width:100vw}.card[_ngcontent-%COMP%]{position:absolute;top:30%;left:30%}}@media screen and (min-width: 992px){.card[_ngcontent-%COMP%]{left:50%}}"]}),n})();const Z4=function(){return["/login"]};let K4=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-verify-email"]],decls:15,vars:2,consts:[[1,"container","d-flex","justify-content-center","align-items-center","py-5"],[1,"text-center","shadow","p-5"],[1,"mb-3"],["title","Login",1,"a-link",3,"routerLink"],[1,"container-fluid","position-fixed","bottom-0","m-0","p-0"]],template:function(t,r){1&t&&(c._UZ(0,"app-navbar"),c.TgZ(1,"div",0)(2,"div",1)(3,"div",2)(4,"h2"),c._uU(5,"Welcome"),c.qZA()(),c.TgZ(6,"div",2)(7,"p"),c._uU(8,"Link has sent on your registered email. Please verify it."),c.qZA(),c.TgZ(9,"p"),c._uU(10,"Go to "),c.TgZ(11,"a",3),c._uU(12,"Login"),c.qZA()()()()(),c.TgZ(13,"div",4),c._UZ(14,"app-footer"),c.qZA()),2&t&&(c.xp6(11),c.Q6J("routerLink",c.DdM(1,Z4)))},dependencies:[La,kc,Nu]}),n})();const Y4=function(){return["/login"]},Q4=[{path:"",component:FI},{path:"calendar",component:R4},{path:"recipes",component:V4},{path:"recipes/:id",component:G4},{path:"register",component:W4},{path:"login",component:q4},{path:"verify-email",component:K4},{path:"forgot-password",component:(()=>{class n{constructor(t){this.auth=t,this.email=""}ngOnInit(){}forgotPassword(){this.auth.forgotPassword(this.email)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(pf))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-forgot-password"]],decls:21,vars:3,consts:[[1,"container","d-flex","justify-content-center","align-items-center","py-5"],[1,"text-center","shadow","p-5"],[1,"mb-3"],[1,"form-floating","mb-3"],["type","email","name","email","placeholder","Email",1,"form-control",3,"ngModel","ngModelChange"],["for","exampleInputEmail1",1,"form-label"],[1,"bi","bi-envelope"],["type","button",1,"btn-confirm","px-4","py-2","mb-4",3,"click"],["title","Login",1,"a-link",3,"routerLink"],[1,"container-fluid","position-fixed","bottom-0","m-0","p-0"]],template:function(t,r){1&t&&(c._UZ(0,"app-navbar"),c.TgZ(1,"div",0)(2,"div",1)(3,"div",2)(4,"h2"),c._uU(5,"Forgot password"),c.qZA()(),c.TgZ(6,"div",2)(7,"form")(8,"div",3)(9,"input",4),c.NdJ("ngModelChange",function(s){return r.email=s}),c.qZA(),c.TgZ(10,"label",5),c._UZ(11,"i",6),c._uU(12," Email"),c.qZA()(),c.TgZ(13,"button",7),c.NdJ("click",function(){return r.forgotPassword()}),c._uU(14,"Send Link"),c.qZA()(),c.TgZ(15,"p"),c._uU(16,"Go to "),c.TgZ(17,"a",8),c._uU(18,"Login"),c.qZA()()()()(),c.TgZ(19,"div",9),c._UZ(20,"app-footer"),c.qZA()),2&t&&(c.xp6(9),c.Q6J("ngModel",r.email),c.xp6(8),c.Q6J("routerLink",c.DdM(2,Y4)))},dependencies:[La,Ly,Of,Ny,Py,fm,Vf,kc,Nu]}),n})()}];let J4=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[KC.forRoot(Q4),KC]}),n})(),X4=(()=>{class n{constructor(){this.title="ProgettoAL"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,r){1&t&&c._UZ(0,"router-outlet")},dependencies:[m]}),n})();var fN=H(4986),pN=H(3942);const $U="firebasestorage.googleapis.com",zU="storageBucket";class ti extends V.ZR{constructor(e,t,r=0){super(gN(e),`Firebase Storage: ${t} (${gN(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ti.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return gN(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var Tr=(()=>{return(n=Tr||(Tr={})).UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment",Tr;var n})();function gN(n){return"storage/"+n}function mN(){return new ti(Tr.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function GU(){return new ti(Tr.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function WU(){return new ti(Tr.CANCELED,"User canceled the upload/download.")}function qU(){return new ti(Tr.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Vy(n){return new ti(Tr.INVALID_ARGUMENT,n)}function ZU(){return new ti(Tr.APP_DELETED,"The Firebase app was deleted.")}function KU(n){return new ti(Tr.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function D0(n,e){return new ti(Tr.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function T0(n){throw new ti(Tr.INTERNAL_ERROR,"Internal error: "+n)}class oo{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=oo.makeFromUrl(e,t)}catch{return new oo(e,"")}if(""===r.path)return r;throw function c5(n){return new ti(Tr.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",d=new RegExp("^gs://"+i+"(/(.*))?$","i");function y(Ye){Ye.path_=decodeURIComponent(Ye.path)}const D=t.replace(/[.]/g,"\\."),je=[{regex:d,indices:{bucket:1,path:3},postModify:function s(Ye){"/"===Ye.path.charAt(Ye.path.length-1)&&(Ye.path_=Ye.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${D}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:y},{regex:new RegExp(`^https?://${t===$U?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:y}];for(let Ye=0;Ye<je.length;Ye++){const St=je[Ye],Nt=St.regex.exec(e);if(Nt){let nn=Nt[St.indices.path];nn||(nn=""),r=new oo(Nt[St.indices.bucket],nn),St.postModify(r);break}}if(null==r)throw function u5(n){return new ti(Tr.INVALID_URL,"Invalid URL '"+n+"'.")}(e);return r}}class g5{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function uA(n){return"string"==typeof n||n instanceof String}function YU(n){return _N()&&n instanceof Blob}function _N(){return typeof Blob<"u"&&!(0,V.UG)()}function yN(n,e,t,r){if(r<e)throw Vy(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw Vy(`Invalid value for '${n}'. Expected ${t} or less.`)}function ih(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function QU(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var Bf=(()=>{return(n=Bf||(Bf={}))[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",Bf;var n})();function JU(n,e){const t=n>=500&&n<600,i=-1!==[408,429].indexOf(n),s=-1!==e.indexOf(n);return t||i||s}class b5{constructor(e,t,r,i,s,l,d,f,y,w,D,x=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=l,this.callback_=d,this.errorCallback_=f,this.timeout_=y,this.progressCallback_=w,this.connectionFactory_=D,this.retry=x,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((N,U)=>{this.resolve_=N,this.reject_=U,this.start_()})}start_(){const t=(r,i)=>{const s=this.resolve_,l=this.reject_,d=i.connection;if(i.wasSuccessCode)try{const f=this.callback_(d,d.getResponse());!function y5(n){return void 0!==n}(f)?s():s(f)}catch(f){l(f)}else if(null!==d){const f=mN();f.serverResponse=d.getErrorText(),l(this.errorCallback_?this.errorCallback_(d,f):f)}else l(i.canceled?this.appDelete_?ZU():WU():GU())};this.canceled_?t(0,new cA(!1,null,!0)):this.backoffId_=function m5(n,e,t){let r=1,i=null,s=null,l=!1,d=0;function f(){return 2===d}let y=!1;function w(...X){y||(y=!0,e.apply(null,X))}function D(X){i=setTimeout(()=>{i=null,n(N,f())},X)}function x(){s&&clearTimeout(s)}function N(X,...ae){if(y)return void x();if(X)return x(),void w.call(null,X,...ae);if(f()||l)return x(),void w.call(null,X,...ae);let je;r<64&&(r*=2),1===d?(d=2,je=0):je=1e3*(r+Math.random()),D(je)}let U=!1;function Q(X){U||(U=!0,x(),!y&&(null!==i?(X||(d=2),clearTimeout(i),D(0)):X||(d=1)))}return D(0),s=setTimeout(()=>{l=!0,Q(!0)},t),Q}((r,i)=>{if(i)return void r(!1,new cA(!1,null,!0));const s=this.connectionFactory_();this.pendingConnection_=s;const l=d=>{null!==this.progressCallback_&&this.progressCallback_(d.loaded,d.lengthComputable?d.total:-1)};null!==this.progressCallback_&&s.addUploadProgressListener(l),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&s.removeUploadProgressListener(l),this.pendingConnection_=null;const d=s.getErrorCode()===Bf.NO_ERROR,f=s.getStatus();if(!d||JU(f,this.additionalRetryCodes_)&&this.retry){const w=s.getErrorCode()===Bf.ABORT;return void r(!1,new cA(!1,null,w))}const y=-1!==this.successCodes_.indexOf(f);r(!0,new cA(y,s))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function _5(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class cA{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function S5(...n){const e=function A5(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(_N())return new Blob(n);throw new ti(Tr.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const ja={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class vN{constructor(e,t){this.data=e,this.contentType=t||null}}function wN(n,e){switch(n){case ja.RAW:return new vN(XU(e));case ja.BASE64:case ja.BASE64URL:return new vN(eV(n,e));case ja.DATA_URL:return new vN(function k5(n){const e=new tV(n);return e.base64?eV(ja.BASE64,e.rest):function M5(n){let e;try{e=decodeURIComponent(n)}catch{throw D0(ja.DATA_URL,"Malformed data URL.")}return XU(e)}(e.rest)}(e),function N5(n){return new tV(n).contentType}(e))}throw mN()}function XU(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function eV(n,e){switch(n){case ja.BASE64:{const i=-1!==e.indexOf("-"),s=-1!==e.indexOf("_");if(i||s)throw D0(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case ja.BASE64URL:{const i=-1!==e.indexOf("+"),s=-1!==e.indexOf("/");if(i||s)throw D0(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function R5(n){if(typeof atob>"u")throw function p5(n){return new ti(Tr.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(n)}(e)}catch(i){throw i.message.includes("polyfill")?i:D0(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class tV{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw D0(ja.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function P5(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class Kc{constructor(e,t){let r=0,i="";YU(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(YU(this.data_)){const i=function x5(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===i?null:new Kc(i)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new Kc(r,!0)}}static getBlob(...e){if(_N()){const t=e.map(r=>r instanceof Kc?r.data_:r);return new Kc(S5.apply(null,t))}{const t=e.map(l=>uA(l)?wN(ja.RAW,l).data:l.data_);let r=0;t.forEach(l=>{r+=l.byteLength});const i=new Uint8Array(r);let s=0;return t.forEach(l=>{for(let d=0;d<l.length;d++)i[s++]=l[d]}),new Kc(i,!0)}}uploadData(){return this.data_}}function bN(n){let e;try{e=JSON.parse(n)}catch{return null}return function w5(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function nV(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function F5(n,e){return e}class Oo{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||F5}}let dA=null;function A0(){if(dA)return dA;const n=[];n.push(new Oo("bucket")),n.push(new Oo("generation")),n.push(new Oo("metageneration")),n.push(new Oo("name","fullPath",!0));const t=new Oo("name");t.xform=function e(s,l){return function U5(n){return!uA(n)||n.length<2?n:nV(n)}(l)},n.push(t);const i=new Oo("size");return i.xform=function r(s,l){return void 0!==l?Number(l):l},n.push(i),n.push(new Oo("timeCreated")),n.push(new Oo("updated")),n.push(new Oo("md5Hash",null,!0)),n.push(new Oo("cacheControl",null,!0)),n.push(new Oo("contentDisposition",null,!0)),n.push(new Oo("contentEncoding",null,!0)),n.push(new Oo("contentLanguage",null,!0)),n.push(new Oo("contentType",null,!0)),n.push(new Oo("metadata","customMetadata",!0)),dA=n,dA}function rV(n,e,t){const r=bN(e);return null===r?null:function B5(n,e,t){const r={type:"file"},i=t.length;for(let s=0;s<i;s++){const l=t[s];r[l.local]=l.xform(r,e[l.server])}return function V5(n,e){Object.defineProperty(n,"ref",{get:function t(){const s=new oo(n.bucket,n.fullPath);return e._makeStorageReference(s)}})}(r,n),r}(n,r,t)}function EN(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(t[s.server]=n[s.local])}return JSON.stringify(t)}const iV="prefixes";class Yc{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Qc(n){if(!n)throw mN()}function hA(n,e){return function t(r,i){const s=rV(n,i,e);return Qc(null!==s),s}}function By(n){return function e(t,r){let i;return i=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function a5(){return new ti(Tr.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function o5(){return new ti(Tr.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function s5(n){return new ti(Tr.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function l5(n){return new ti(Tr.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}(n.path):r,i.status=t.getStatus(),i.serverResponse=r.serverResponse,i}}function S0(n){const e=By(n);return function t(r,i){let s=e(r,i);return 404===r.getStatus()&&(s=function i5(n){return new ti(Tr.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}(n.path)),s.serverResponse=i.serverResponse,s}}function oV(n,e,t){const i=ih(e.fullServerUrl(),n.host,n._protocol),l=n.maxOperationRetryTime,d=new Yc(i,"GET",hA(n,t),l);return d.errorHandler=S0(e),d}function W5(n,e,t,r,i){const s={};s.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(s.delimiter=t),r&&(s.pageToken=r),i&&(s.maxResults=i);const d=ih(e.bucketOnlyServerUrl(),n.host,n._protocol),y=n.maxOperationRetryTime,w=new Yc(d,"GET",function z5(n,e){return function t(r,i){const s=function $5(n,e,t){const r=bN(t);return null===r?null:function j5(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[iV])for(const i of t[iV]){const s=i.replace(/\/$/,""),l=n._makeStorageReference(new oo(e,s));r.prefixes.push(l)}if(t.items)for(const i of t.items){const s=n._makeStorageReference(new oo(e,i.name));r.items.push(s)}return r}(n,e,r)}(n,e,i);return Qc(null!==s),s}}(n,e.bucket),y);return w.urlParams=s,w.errorHandler=By(e),w}function lV(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function Y5(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class fA{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}}function CN(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{Qc(!1)}return Qc(!!t&&-1!==(e||["active"]).indexOf(t)),t}const eZ={STATE_CHANGED:"state_changed"},Lo={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function IN(n){switch(n){case"running":case"pausing":case"canceling":return Lo.RUNNING;case"paused":return Lo.PAUSED;case"success":return Lo.SUCCESS;case"canceled":return Lo.CANCELED;default:return Lo.ERROR}}class tZ{constructor(e,t,r){if(function v5(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=t??void 0,this.complete=r??void 0;else{const s=e;this.next=s.next,this.error=s.error,this.complete=s.complete}}}function Hy(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class rZ extends class nZ{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Bf.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Bf.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Bf.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw T0("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw T0("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw T0("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw T0("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw T0("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}{initXhr(){this.xhr_.responseType="text"}}function Bu(){return new rZ}class hV{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=A0(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals(Tr.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const s=this.isExponentialBackoffExpired();if(JU(i.status,[])){if(!s)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();i=GU()}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals(Tr.CANCELED)?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,s)=>{this._resolve=i,this._reject=s,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function Q5(n,e,t,r,i){const s=e.bucketOnlyServerUrl(),l=lV(e,r,i),d={name:l.fullPath},f=ih(s,n.host,n._protocol),w={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":l.contentType,"Content-Type":"application/json; charset=utf-8"},D=EN(l,t),U=new Yc(f,"POST",function N(Q){let X;CN(Q);try{X=Q.getResponseHeader("X-Goog-Upload-URL")}catch{Qc(!1)}return Qc(uA(X)),X},n.maxUploadRetryTime);return U.urlParams=d,U.headers=w,U.body=D,U.errorHandler=By(e),U}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Bu,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const i=function J5(n,e,t,r){const f=new Yc(t,"POST",function s(y){const w=CN(y,["active","final"]);let D=null;try{D=y.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Qc(!1)}D||Qc(!1);const x=Number(D);return Qc(!isNaN(x)),new fA(x,r.size(),"final"===w)},n.maxUploadRetryTime);return f.headers={"X-Goog-Upload-Command":"query"},f.errorHandler=By(e),f}(this._ref.storage,this._ref._location,e,this._blob),s=this._ref.storage._makeRequest(i,Bu,t,r);this._request=s,s.getPromise().then(l=>{this._request=void 0,this._updateProgress(l.current),this._needToFetchStatus=!1,l.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new fA(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,s)=>{let l;try{l=function X5(n,e,t,r,i,s,l,d){const f=new fA(0,0);if(l?(f.current=l.current,f.total=l.total):(f.current=0,f.total=r.size()),r.size()!==f.total)throw function h5(){return new ti(Tr.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}();const y=f.total-f.current;let w=y;i>0&&(w=Math.min(w,i));const D=f.current;let N="";N=0===w?"finalize":y===w?"upload, finalize":"upload";const U={"X-Goog-Upload-Command":N,"X-Goog-Upload-Offset":`${f.current}`},Q=r.slice(D,D+w);if(null===Q)throw qU();const je=new Yc(t,"POST",function X(Ye,St){const Nt=CN(Ye,["active","final"]),mn=f.current+w,nn=r.size();let ud;return ud="final"===Nt?hA(e,s)(Ye,St):null,new fA(mn,nn,"final"===Nt,ud)},e.maxUploadRetryTime);return je.headers=U,je.body=Q.uploadData(),je.progressCallback=d||null,je.errorHandler=By(n),je}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(f){return this._error=f,void this._transition("error")}const d=this._ref.storage._makeRequest(l,Bu,i,s,!1);this._request=d,d.getPromise().then(f=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(f.current),f.finalized?(this._metadata=f.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=oV(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,Bu,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function uV(n,e,t,r,i){const s=e.bucketOnlyServerUrl(),l={"X-Goog-Upload-Protocol":"multipart"},f=function d(){let je="";for(let Ye=0;Ye<2;Ye++)je+=Math.random().toString().slice(2);return je}();l["Content-Type"]="multipart/related; boundary="+f;const y=lV(e,r,i),w=EN(y,t),N=Kc.getBlob("--"+f+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+w+"\r\n--"+f+"\r\nContent-Type: "+y.contentType+"\r\n\r\n",r,"\r\n--"+f+"--");if(null===N)throw qU();const U={name:y.fullPath},Q=ih(s,n.host,n._protocol),ae=n.maxUploadRetryTime,Le=new Yc(Q,"POST",hA(n,t),ae);return Le.urlParams=U,Le.headers=l,Le.body=N.uploadData(),Le.errorHandler=By(e),Le}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Bu,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=WU(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=IN(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){const s=new tZ(t||void 0,r||void 0,i||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(IN(this._state)){case Lo.SUCCESS:Hy(this._resolve.bind(null,this.snapshot))();break;case Lo.CANCELED:case Lo.ERROR:Hy(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(IN(this._state)){case Lo.RUNNING:case Lo.PAUSED:e.next&&Hy(e.next.bind(e,this.snapshot))();break;case Lo.SUCCESS:e.complete&&Hy(e.complete.bind(e))();break;default:e.error&&Hy(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class gm{constructor(e,t){this._service=e,this._location=t instanceof oo?t:oo.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new gm(e,t)}get root(){const e=new oo(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return nV(this._location.path)}get storage(){return this._service}get parent(){const e=function O5(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new oo(this._location.bucket,e);return new gm(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw KU(e)}}function pV(n,e,t){return DN.apply(this,arguments)}function DN(){return(DN=(0,Se.Z)(function*(n,e,t){const i=yield gV(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield pV(n,e,i.nextPageToken))})).apply(this,arguments)}function gV(n,e){null!=e&&"number"==typeof e.maxResults&&yN("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=W5(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,Bu)}function gZ(n){n._throwIfRoot("getDownloadURL");const e=function q5(n,e,t){const i=ih(e.fullServerUrl(),n.host,n._protocol),l=n.maxOperationRetryTime,d=new Yc(i,"GET",function G5(n,e){return function t(r,i){const s=rV(n,i,e);return Qc(null!==s),function H5(n,e,t,r){const i=bN(e);if(null===i||!uA(i.downloadTokens))return null;const s=i.downloadTokens;if(0===s.length)return null;const l=encodeURIComponent;return s.split(",").map(y=>{const D=n.fullPath;return ih("/b/"+l(n.bucket)+"/o/"+l(D),t,r)+QU({alt:"media",token:y})})[0]}(s,i,n.host,n._protocol)}}(n,t),l);return d.errorHandler=S0(e),d}(n.storage,n._location,A0());return n.storage.makeRequestWithTokens(e,Bu).then(t=>{if(null===t)throw function f5(){return new ti(Tr.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return t})}function mV(n,e){const t=function L5(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new oo(n._location.bucket,t);return new gm(n.storage,r)}function _V(n,e){if(n instanceof TN){const t=n;if(null==t._bucket)throw function d5(){return new ti(Tr.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+zU+"' property when initializing the app?")}();const r=new gm(t,t._bucket);return null!=e?_V(r,e):r}return void 0!==e?mV(n,e):n}function vZ(n,e){if(e&&function _Z(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof TN)return function yZ(n,e){return new gm(n,e)}(n,e);throw Vy("To use ref(service, url), the first argument must be a Storage instance.")}return _V(n,e)}function yV(n,e){const t=e?.[zU];return null==t?null:oo.makeFromBucketSpec(t,n)}class TN{constructor(e,t,r,i,s){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=$U,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?oo.makeFromBucketSpec(i,this._host):yV(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?oo.makeFromBucketSpec(this._url,e):yV(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){yN("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){yN("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,Se.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,Se.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new gm(this,e)}_makeRequest(e,t,r,i,s=!0){if(this._deleted)return new g5(ZU());{const l=function T5(n,e,t,r,i,s,l=!0){const d=QU(n.urlParams),f=n.url+d,y=Object.assign({},n.headers);return function I5(n,e){e&&(n["X-Firebase-GMPID"]=e)}(y,e),function E5(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(y,t),function C5(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(y,s),function D5(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(y,r),new b5(f,n.method,y,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,l)}(e,this._appId,r,i,t,this._firebaseVersion,s);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}makeRequestWithTokens(e,t){var r=this;return(0,Se.Z)(function*(){const[i,s]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,s).getPromise()})()}}const vV="@firebase/storage";function EV(n,e){return vZ(n=(0,V.m9)(n),e)}function xZ(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new TN(t,r,i,e,xs.SDK_VERSION)}!function RZ(){(0,xs._registerComponent)(new Sl.wA("storage",xZ,"PUBLIC").setMultipleInstances(!0)),(0,xs.registerVersion)(vV,"0.11.2",""),(0,xs.registerVersion)(vV,"0.11.2","esm2017")}();class pA{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class IV{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new pA(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new pA(r,this,this._ref))},t)}on(e,t,r,i){let s;return t&&(s="function"==typeof t?l=>t(new pA(l,this,this._ref)):{next:t.next?l=>t.next(new pA(l,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,s,r||void 0,i||void 0)}}class DV{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new sh(e,this._service))}get items(){return this._delegate.items.map(e=>new sh(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class sh{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function SZ(n,e){return mV(n,e)}(this._delegate,e);return new sh(t,this.storage)}get root(){return new sh(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new sh(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new IV(function bZ(n,e,t){return function cZ(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new hV(n,new Kc(e),t)}(n=(0,V.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=ja.RAW,r){this._throwIfRoot("putString");const i=wN(t,e),s=Object.assign({},r);return null==s.contentType&&null!=i.contentType&&(s.contentType=i.contentType),new IV(new hV(this._delegate,new Kc(i.data,!0),s),this)}listAll(){return function DZ(n){return function hZ(n){const e={prefixes:[],items:[]};return pV(n,e).then(()=>e)}(n=(0,V.m9)(n))}(this._delegate).then(e=>new DV(e,this.storage))}list(e){return function IZ(n,e){return gV(n=(0,V.m9)(n),e)}(this._delegate,e||void 0).then(t=>new DV(t,this.storage))}getMetadata(){return function EZ(n){return function fZ(n){n._throwIfRoot("getMetadata");const e=oV(n.storage,n._location,A0());return n.storage.makeRequestWithTokens(e,Bu)}(n=(0,V.m9)(n))}(this._delegate)}updateMetadata(e){return function CZ(n,e){return function pZ(n,e){n._throwIfRoot("updateMetadata");const t=function Z5(n,e,t,r){const s=ih(e.fullServerUrl(),n.host,n._protocol),d=EN(t,r),y=n.maxOperationRetryTime,w=new Yc(s,"PATCH",hA(n,r),y);return w.headers={"Content-Type":"application/json; charset=utf-8"},w.body=d,w.errorHandler=S0(e),w}(n.storage,n._location,e,A0());return n.storage.makeRequestWithTokens(t,Bu)}(n=(0,V.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function TZ(n){return gZ(n=(0,V.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function AZ(n){return function mZ(n){n._throwIfRoot("deleteObject");const e=function K5(n,e){const r=ih(e.fullServerUrl(),n.host,n._protocol),d=new Yc(r,"DELETE",function l(f,y){},n.maxOperationRetryTime);return d.successCodes=[200,204],d.errorHandler=S0(e),d}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,Bu)}(n=(0,V.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw KU(e)}}class TV{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(AV(e))throw Vy("ref() expected a child path but got a URL, use refFromURL instead.");return new sh(EV(this._delegate,e),this)}refFromURL(e){if(!AV(e))throw Vy("refFromURL() expected a full URL but got a child path, use ref() instead.");try{oo.makeFromUrl(e,this._delegate.host)}catch{throw Vy("refFromUrl() expected a valid full URL but got an invalid one.")}return new sh(EV(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function CV(n,e,t,r={}){!function wZ(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,V.Sg)(i,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function AV(n){return/^[A-Za-z]+:\/\//.test(n)}function PZ(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new TV(t,r)}function SV(n){const e=function LZ(n){return new ss.y(e=>{const t=l=>e.next(l);t(n.snapshot);const s=n.on("state_changed",t);return n.then(l=>{t(l),e.complete()},l=>{t(n.snapshot),(l=>{e.error(l)})(l)}),function(){s()}}).pipe(function e5(n,e=fN.z){return(0,Xn.e)((t,r)=>{let i=null,s=null,l=null;const d=()=>{if(i){i.unsubscribe(),i=null;const y=s;s=null,r.next(y)}};function f(){const y=l+n,w=e.now();if(w<y)return i=this.schedule(void 0,y-w),void r.add(i);d()}t.subscribe((0,z.x)(r,y=>{s=y,l=e.now(),i||(i=e.schedule(f,n),r.add(i))},()=>{d(),r.complete()},void 0,()=>{s=i=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,Ct.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function gA(n){return{getDownloadURL:()=>_t(void 0).pipe(An.fc,Br(()=>n.getDownloadURL()),An.iC),getMetadata:()=>_t(void 0).pipe(An.fc,Br(()=>n.getMetadata()),An.iC),delete:()=>(0,Tn.D)(n.delete()),child:e=>gA(n.child(e)),updateMetadata:e=>(0,Tn.D)(n.updateMetadata(e)),put:(e,t)=>SV(n.put(e,t)),putString:(e,t,r)=>SV(n.putString(e,t,r)),list:e=>(0,Tn.D)(n.list(e)),listAll:()=>(0,Tn.D)(n.listAll())}}!function OZ(n){const e={TaskState:Lo,TaskEvent:eZ,StringFormat:ja,Storage:TV,Reference:sh};n.INTERNAL.registerComponent(new Sl.wA("storage-compat",PZ,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.3.2")}(pN.Z);const FZ=new c.OlP("angularfire2.storageBucket"),UZ=new c.OlP("angularfire2.storage.maxUploadRetryTime"),VZ=new c.OlP("angularfire2.storage.maxOperationRetryTime"),BZ=new c.OlP("angularfire2.storage.use-emulator");let HZ=(()=>{class n{constructor(t,r,i,s,l,d,f,y,w,D){const x=(0,bi.on)(t,l,r);this.storage=(0,bi.cc)(`${x.name}.storage.${i}`,"AngularFireStorage",x.name,()=>{const N=l.runOutsideAngular(()=>x.storage(i||void 0)),U=w;return U&&N.useEmulator(...U),f&&N.setMaxUploadRetryTime(f),y&&N.setMaxOperationRetryTime(y),N},[f,y])}ref(t){return gA(this.storage.ref(t))}refFromURL(t){return gA(this.storage.refFromURL(t))}upload(t,r,i){return gA(this.storage.ref(t)).put(r,i)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(bi.Dh),c.LFG(bi.xv,8),c.LFG(FZ,8),c.LFG(c.Lbi),c.LFG(c.R0b),c.LFG(An.HU),c.LFG(UZ,8),c.LFG(VZ,8),c.LFG(BZ,8),c.LFG(Rl,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),jZ=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})(),$Z=(()=>{class n{constructor(){Ng.Z.registerVersion("angularfire",An.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[HZ],imports:[jZ]}),n})();function AN(){return(0,Xn.e)((n,e)=>{let t,r=!1;n.subscribe((0,z.x)(e,i=>{const s=t;t=i,r&&e.next([s,i]),r=!0}))})}function xV(n,e=Eo.y){return n=n??zZ,(0,Xn.e)((t,r)=>{let i,s=!0;t.subscribe((0,z.x)(r,l=>{const d=e(l);(s||!n(i,d))&&(s=!1,i=d,r.next(l))}))})}function zZ(n,e){return n===e}H(6689);var kt,GZ=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},oh={},SN=SN||{},rn=GZ||self;function mA(){}function _A(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function x0(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var xN="closure_uid_"+(1e9*Math.random()>>>0),qZ=0;function ZZ(n,e,t){return n.call.apply(n.bind,arguments)}function KZ(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function ao(n,e,t){return(ao=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ZZ:KZ).apply(null,arguments)}function yA(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function ks(n,e){function t(){}t.prototype=e.prototype,n.X=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Wb=function(r,i,s){for(var l=Array(arguments.length-2),d=2;d<arguments.length;d++)l[d-2]=arguments[d];return e.prototype[i].apply(r,l)}}function Hf(){this.s=this.s,this.o=this.o}Hf.prototype.s=!1,Hf.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function WZ(n){Object.prototype.hasOwnProperty.call(n,xN)&&n[xN]||(n[xN]=++qZ)}(this)},Hf.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const RV=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function RN(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function MV(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(_A(r)){const i=n.length||0,s=r.length||0;n.length=i+s;for(let l=0;l<s;l++)n[i+l]=r[l]}else n.push(r)}}function lo(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}lo.prototype.h=function(){this.defaultPrevented=!0};var QZ=function(){if(!rn.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{rn.addEventListener("test",mA,e),rn.removeEventListener("test",mA,e)}catch{}return n}();function vA(n){return/^[\s\xa0]*$/.test(n)}var kV=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function MN(n,e){return n<e?-1:n>e?1:0}function wA(){var n=rn.navigator;return n&&(n=n.userAgent)?n:""}function Jc(n){return-1!=wA().indexOf(n)}function kN(n){return kN[" "](n),n}kN[" "]=mA;var bA,n,XZ=Jc("Opera"),jy=Jc("Trident")||Jc("MSIE"),NV=Jc("Edge"),NN=NV||jy,PV=Jc("Gecko")&&!(-1!=wA().toLowerCase().indexOf("webkit")&&!Jc("Edge"))&&!(Jc("Trident")||Jc("MSIE"))&&!Jc("Edge"),e8=-1!=wA().toLowerCase().indexOf("webkit")&&!Jc("Edge");function OV(){var n=rn.document;return n?n.documentMode:void 0}e:{var PN="",ON=(n=wA(),PV?/rv:([^\);]+)(\)|;)/.exec(n):NV?/Edge\/([\d\.]+)/.exec(n):jy?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):e8?/WebKit\/(\S+)/.exec(n):XZ?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(ON&&(PN=ON?ON[1]:""),jy){var LN=OV();if(null!=LN&&LN>parseFloat(PN)){bA=String(LN);break e}}bA=PN}var t8={};var r8=rn.document&&jy&&(OV()||parseInt(bA,10))||void 0;function R0(n,e){if(lo.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(PV){e:{try{kN(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:i8[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&R0.X.h.call(this)}}ks(R0,lo);var i8={2:"touch",3:"pen",4:"mouse"};R0.prototype.h=function(){R0.X.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var M0="closure_listenable_"+(1e6*Math.random()|0),s8=0;function o8(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ha=i,this.key=++s8,this.ba=this.ea=!1}function EA(n){n.ba=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function UN(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function FV(n){const e={};for(const t in n)e[t]=n[t];return e}const UV="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function VV(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let s=0;s<UV.length;s++)t=UV[s],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function CA(n){this.src=n,this.g={},this.h=0}function VN(n,e){var t=e.type;if(t in n.g){var s,r=n.g[t],i=RV(r,e);(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(EA(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function BN(n,e,t,r){for(var i=0;i<n.length;++i){var s=n[i];if(!s.ba&&s.listener==e&&s.capture==!!t&&s.ha==r)return i}return-1}CA.prototype.add=function(n,e,t,r,i){var s=n.toString();(n=this.g[s])||(n=this.g[s]=[],this.h++);var l=BN(n,e,r,i);return-1<l?(e=n[l],t||(e.ea=!1)):((e=new o8(e,this.src,s,!!r,i)).ea=t,n.push(e)),e};var HN="closure_lm_"+(1e6*Math.random()|0),jN={};function BV(n,e,t,r,i){if(r&&r.once)return jV(n,e,t,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)BV(n,e[s],t,r,i);return null}return t=WN(t),n&&n[M0]?n.N(e,t,x0(r)?!!r.capture:!!r,i):HV(n,e,t,!1,r,i)}function HV(n,e,t,r,i,s){if(!e)throw Error("Invalid event type");var l=x0(i)?!!i.capture:!!i,d=zN(n);if(d||(n[HN]=d=new CA(n)),(t=d.add(e,t,r,l,s)).proxy)return t;if(r=function a8(){const e=l8;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)QZ||(i=l),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(zV(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function jV(n,e,t,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)jV(n,e[s],t,r,i);return null}return t=WN(t),n&&n[M0]?n.O(e,t,x0(r)?!!r.capture:!!r,i):HV(n,e,t,!0,r,i)}function $V(n,e,t,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)$V(n,e[s],t,r,i);else r=x0(r)?!!r.capture:!!r,t=WN(t),n&&n[M0]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=BN(s=n.g[e],t,r,i))&&(EA(s[t]),Array.prototype.splice.call(s,t,1),0==s.length&&(delete n.g[e],n.h--))):n&&(n=zN(n))&&(e=n.g[e.toString()],n=-1,e&&(n=BN(e,t,r,i)),(t=-1<n?e[n]:null)&&$N(t))}function $N(n){if("number"!=typeof n&&n&&!n.ba){var e=n.src;if(e&&e[M0])VN(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(zV(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=zN(e))?(VN(t,n),0==t.h&&(t.src=null,e[HN]=null)):EA(n)}}}function zV(n){return n in jN?jN[n]:jN[n]="on"+n}function l8(n,e){if(n.ba)n=!0;else{e=new R0(e,this);var t=n.listener,r=n.ha||n.src;n.ea&&$N(n),n=t.call(r,e)}return n}function zN(n){return(n=n[HN])instanceof CA?n:null}var GN="__closure_events_fn_"+(1e9*Math.random()>>>0);function WN(n){return"function"==typeof n?n:(n[GN]||(n[GN]=function(e){return n.handleEvent(e)}),n[GN])}function cs(){Hf.call(this),this.i=new CA(this),this.P=this,this.I=null}function Ns(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new lo(e,n);else if(e instanceof lo)e.target=e.target||n;else{var i=e;VV(e=new lo(r,n),i)}if(i=!0,t)for(var s=t.length-1;0<=s;s--){var l=e.g=t[s];i=IA(l,r,!0,e)&&i}if(i=IA(l=e.g=n,r,!0,e)&&i,i=IA(l,r,!1,e)&&i,t)for(s=0;s<t.length;s++)i=IA(l=e.g=t[s],r,!1,e)&&i}function IA(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var l=e[s];if(l&&!l.ba&&l.capture==t){var d=l.listener,f=l.ha||l.src;l.ea&&VN(n.i,l),i=!1!==d.call(f,r)&&i}}return i&&!r.defaultPrevented}ks(cs,Hf),cs.prototype[M0]=!0,cs.prototype.removeEventListener=function(n,e,t,r){$V(this,n,e,t,r)},cs.prototype.M=function(){if(cs.X.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)EA(t[r]);delete n.g[e],n.h--}}this.I=null},cs.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},cs.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var qN=rn.JSON.stringify;function u8(){var n=qV;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var ZN,GV=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new d8,n=>n.reset());class d8{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function h8(n){rn.setTimeout(()=>{throw n},0)}function WV(n,e){ZN||function f8(){var n=rn.Promise.resolve(void 0);ZN=function(){n.then(p8)}}(),KN||(ZN(),KN=!0),qV.add(n,e)}var KN=!1,qV=new class c8{constructor(){this.h=this.g=null}add(e,t){const r=GV.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function p8(){for(var n;n=u8();){try{n.h.call(n.g)}catch(t){h8(t)}var e=GV;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}KN=!1}function DA(n,e){cs.call(this),this.h=n||1,this.g=e||rn,this.j=ao(this.lb,this),this.l=Date.now()}function YN(n){n.ca=!1,n.R&&(n.g.clearTimeout(n.R),n.R=null)}function QN(n,e,t){if("function"==typeof n)t&&(n=ao(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=ao(n.handleEvent,n)}return 2147483647<Number(e)?-1:rn.setTimeout(n,e||0)}function ZV(n){n.g=QN(()=>{n.g=null,n.i&&(n.i=!1,ZV(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}ks(DA,cs),(kt=DA.prototype).ca=!1,kt.R=null,kt.lb=function(){if(this.ca){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-n):(this.R&&(this.g.clearTimeout(this.R),this.R=null),Ns(this,"tick"),this.ca&&(YN(this),this.start()))}},kt.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},kt.M=function(){DA.X.M.call(this),YN(this),delete this.g};class g8 extends Hf{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:ZV(this)}M(){super.M(),this.g&&(rn.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function k0(n){Hf.call(this),this.h=n,this.g={}}ks(k0,Hf);var KV=[];function YV(n,e,t,r){Array.isArray(t)||(t&&(KV[0]=t.toString()),t=KV);for(var i=0;i<t.length;i++){var s=BV(e,t[i],r||n.handleEvent,!1,n.h||n);if(!s)break;n.g[s.key]=s}}function QV(n){UN(n.g,function(e,t){this.g.hasOwnProperty(t)&&$N(e)},n),n.g={}}function TA(){this.g=!0}function $y(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function v8(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var l=1;l<i.length;l++)i[l]=""}}}return qN(t)}catch{return e}}(n,t)+(r?" "+r:"")})}k0.prototype.M=function(){k0.X.M.call(this),QV(this)},k0.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},TA.prototype.Aa=function(){this.g=!1},TA.prototype.info=function(){};var mm={},JV=null;function AA(){return JV=JV||new cs}function XV(n){lo.call(this,mm.Pa,n)}function N0(n){const e=AA();Ns(e,new XV(e))}function eB(n,e){lo.call(this,mm.STAT_EVENT,n),this.stat=e}function Fo(n){const e=AA();Ns(e,new eB(e,n))}function tB(n,e){lo.call(this,mm.Qa,n),this.size=e}function P0(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return rn.setTimeout(function(){n()},e)}mm.Pa="serverreachability",ks(XV,lo),mm.STAT_EVENT="statevent",ks(eB,lo),mm.Qa="timingevent",ks(tB,lo);var SA={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},nB={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function JN(){}function iB(){}JN.prototype.h=null;var tP,O0={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function XN(){lo.call(this,"d")}function eP(){lo.call(this,"c")}function xA(){}function L0(n,e,t,r){this.l=n,this.j=e,this.m=t,this.U=r||1,this.S=new k0(this),this.O=w8,this.T=new DA(n=NN?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new sB}function sB(){this.i=null,this.g="",this.h=!1}ks(XN,lo),ks(eP,lo),ks(xA,JN),xA.prototype.g=function(){return new XMLHttpRequest},xA.prototype.i=function(){return{}},tP=new xA;var w8=45e3,nP={},RA={};function rP(n,e,t){n.K=1,n.v=PA(ah(e)),n.s=t,n.P=!0,oB(n,null)}function oB(n,e){n.F=Date.now(),F0(n),n.A=ah(n.v);var t=n.A,r=n.U;Array.isArray(r)||(r=[String(r)]),mB(t.i,"t",r),n.C=0,t=n.l.H,n.h=new sB,n.g=BB(n.l,t?e:null,!n.s),0<n.N&&(n.L=new g8(ao(n.La,n,n.g),n.N)),YV(n.S,n.g,"readystatechange",n.ib),e=n.H?FV(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.da(n.A,n.u,n.s,e)):(n.u="GET",n.g.da(n.A,n.u,null,e)),N0(),function m8(n,e,t,r,i,s){n.info(function(){if(n.g)if(s)for(var l="",d=s.split("&"),f=0;f<d.length;f++){var y=d[f].split("=");if(1<y.length){var w=y[0];y=y[1];var D=w.split("_");l=2<=D.length&&"type"==D[1]?l+(w+"=")+y+"&":l+(w+"=redacted&")}}else l=null;else l=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+l})}(n.j,n.u,n.A,n.m,n.U,n.s)}function aB(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Da}function lB(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=b8(n,t),i==RA){4==e&&(n.o=4,Fo(14),r=!1),$y(n.j,n.m,null,"[Incomplete Response]");break}if(i==nP){n.o=4,Fo(15),$y(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}$y(n.j,n.m,i,null),iP(n,i)}aB(n)&&i!=RA&&i!=nP&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Fo(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.$&&(n.$=!0,(e=n.l).g==n&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),hP(e),e.K=!0,Fo(11))):($y(n.j,n.m,t,"[Invalid Chunked Response]"),_m(n),U0(n))}function b8(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?RA:(t=Number(e.substring(t,r)),isNaN(t)?nP:(r+=1)+t>e.length?RA:(e=e.substr(r,t),n.C=r+t,e))}function F0(n){n.V=Date.now()+n.O,uB(n,n.O)}function uB(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=P0(ao(n.gb,n),e)}function MA(n){n.B&&(rn.clearTimeout(n.B),n.B=null)}function U0(n){0==n.l.G||n.I||LB(n.l,n)}function _m(n){MA(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,YN(n.T),QV(n.S),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function iP(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||sP(t.h,n)))if(!n.J&&sP(t.h,n)&&3==t.G){try{var r=t.Fa.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;BA(t),UA(t)}dP(t),Fo(18)}}else t.Ba=i[1],0<t.Ba-t.T&&37500>i[2]&&t.L&&0==t.A&&!t.v&&(t.v=P0(ao(t.cb,t),6e3));if(1>=vB(t.h)&&t.ja){try{t.ja()}catch{}t.ja=void 0}}else vm(t,11)}else if((n.J||t.g==n)&&BA(t),!vA(e))for(i=t.Fa.g.parse(e),e=0;e<i.length;e++){let y=i[e];if(t.T=y[0],y=y[1],2==t.G)if("c"==y[0]){t.I=y[1],t.ka=y[2];const w=y[3];null!=w&&(t.ma=w,t.j.info("VER="+t.ma));const D=y[4];null!=D&&(t.Ca=D,t.j.info("SVER="+t.Ca));const x=y[5];null!=x&&"number"==typeof x&&0<x&&(t.J=r=1.5*x,t.j.info("backChannelRequestTimeoutMs_="+r)),r=t;const N=n.g;if(N){const U=N.g?N.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(U){var s=r.h;s.g||-1==U.indexOf("spdy")&&-1==U.indexOf("quic")&&-1==U.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(oP(s,s.h),s.h=null))}if(r.D){const Q=N.g?N.g.getResponseHeader("X-HTTP-Session-Id"):null;Q&&(r.za=Q,Hr(r.F,r.D,Q))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-n.F,t.j.info("Handshake RTT: "+t.P+"ms"));var l=n;if((r=t).sa=VB(r,r.H?r.ka:null,r.V),l.J){wB(r.h,l);var d=l,f=r.J;f&&d.setTimeout(f),d.B&&(MA(d),F0(d)),r.g=l}else PB(r);0<t.i.length&&VA(t)}else"stop"!=y[0]&&"close"!=y[0]||vm(t,7);else 3==t.G&&("stop"==y[0]||"close"==y[0]?"stop"==y[0]?vm(t,7):cP(t):"noop"!=y[0]&&t.l&&t.l.wa(y),t.A=0)}N0()}catch{}}function cB(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(_A(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function C8(n){if(n.oa&&"function"==typeof n.oa)return n.oa();if(!n.W||"function"!=typeof n.W){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(_A(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function E8(n){if(n.W&&"function"==typeof n.W)return n.W();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(_A(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],t&&t[s],n)}(kt=L0.prototype).setTimeout=function(n){this.O=n},kt.ib=function(n){n=n.target;const e=this.L;e&&3==lh(n)?e.l():this.La(n)},kt.La=function(n){try{if(n==this.g)e:{const w=lh(this.g);var e=this.g.Ea();if(this.g.aa(),!(3>w)&&(3!=w||NN||this.g&&(this.h.h||this.g.fa()||SB(this.g)))){this.I||4!=w||7==e||N0(),MA(this);var t=this.g.aa();this.Y=t;t:if(aB(this)){var r=SB(this.g);n="";var i=r.length,s=4==lh(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){_m(this),U0(this);var l="";break t}this.h.i=new rn.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,l=this.h.g}else l=this.g.fa();if(this.i=200==t,function _8(n,e,t,r,i,s,l){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+s+" "+l})}(this.j,this.u,this.A,this.m,this.U,w,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var d,f=this.g;if((d=f.g?f.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!vA(d)){var y=d;break t}}y=null}if(!(t=y)){this.i=!1,this.o=3,Fo(12),_m(this),U0(this);break e}$y(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,iP(this,t)}this.P?(lB(this,w,l),NN&&this.i&&3==w&&(YV(this.S,this.T,"tick",this.hb),this.T.start())):($y(this.j,this.m,l,null),iP(this,l)),4==w&&_m(this),this.i&&!this.I&&(4==w?LB(this.l,this):(this.i=!1,F0(this)))}else 400==t&&0<l.indexOf("Unknown SID")?(this.o=3,Fo(12)):(this.o=0,Fo(13)),_m(this),U0(this)}}}catch{}},kt.hb=function(){if(this.g){var n=lh(this.g),e=this.g.fa();this.C<e.length&&(MA(this),lB(this,n,e),this.i&&4!=n&&F0(this))}},kt.cancel=function(){this.I=!0,_m(this)},kt.gb=function(){this.B=null;const n=Date.now();0<=n-this.V?(function y8(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(N0(),Fo(17)),_m(this),this.o=2,U0(this)):uB(this,this.V-n)};var dB=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ym(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof ym){this.h=void 0!==e?e:n.h,kA(this,n.j),this.s=n.s,this.g=n.g,NA(this,n.m),this.l=n.l,e=n.i;var t=new H0;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),hB(this,t),this.o=n.o}else n&&(t=String(n).match(dB))?(this.h=!!e,kA(this,t[1]||"",!0),this.s=V0(t[2]||""),this.g=V0(t[3]||"",!0),NA(this,t[4]),this.l=V0(t[5]||"",!0),hB(this,t[6]||"",!0),this.o=V0(t[7]||"")):(this.h=!!e,this.i=new H0(null,this.h))}function ah(n){return new ym(n)}function kA(n,e,t){n.j=t?V0(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function NA(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function hB(n,e,t){e instanceof H0?(n.i=e,function R8(n,e){e&&!n.j&&(jf(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(pB(this,r),mB(this,i,t))},n)),n.j=e}(n.i,n.h)):(t||(e=B0(e,S8)),n.i=new H0(e,n.h))}function Hr(n,e,t){n.i.set(e,t)}function PA(n){return Hr(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function V0(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function B0(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,D8),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function D8(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}ym.prototype.toString=function(){var n=[],e=this.j;e&&n.push(B0(e,fB,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(B0(e,fB,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(B0(t,"/"==t.charAt(0)?A8:T8,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",B0(t,x8)),n.join("")};var fB=/[#\/\?@]/g,T8=/[#\?:]/g,A8=/[#\?]/g,S8=/[#\?@]/g,x8=/#/g;function H0(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function jf(n){n.g||(n.g=new Map,n.h=0,n.i&&function I8(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var s=n[t].substring(0,r);i=n[t].substring(r+1)}else s=n[t];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function pB(n,e){jf(n),e=zy(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function gB(n,e){return jf(n),e=zy(n,e),n.g.has(e)}function mB(n,e,t){pB(n,e),0<t.length&&(n.i=null,n.g.set(zy(n,e),RN(t)),n.h+=t.length)}function zy(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function _B(n){this.l=n||k8,n=rn.PerformanceNavigationTiming?0<(n=rn.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(rn.g&&rn.g.Ga&&rn.g.Ga()&&rn.g.Ga().$b),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(kt=H0.prototype).add=function(n,e){jf(this),this.i=null,n=zy(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},kt.forEach=function(n,e){jf(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)},kt.oa=function(){jf(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let s=0;s<i.length;s++)t.push(e[r])}return t},kt.W=function(n){jf(this);let e=[];if("string"==typeof n)gB(this,n)&&(e=e.concat(this.g.get(zy(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},kt.set=function(n,e){return jf(this),this.i=null,gB(this,n=zy(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},kt.get=function(n,e){return n&&0<(n=this.W(n)).length?String(n[0]):e},kt.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const s=encodeURIComponent(String(r)),l=this.W(r);for(r=0;r<l.length;r++){var i=s;""!==l[r]&&(i+="="+encodeURIComponent(String(l[r]))),n.push(i)}}return this.i=n.join("&")};var k8=10;function yB(n){return!!n.h||!!n.g&&n.g.size>=n.j}function vB(n){return n.h?1:n.g?n.g.size:0}function sP(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function oP(n,e){n.g?n.g.add(e):n.h=e}function wB(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function bB(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return RN(n.i)}function aP(){}function N8(){this.g=new aP}function P8(n,e,t){const r=t||"";try{cB(n,function(i,s){let l=i;x0(i)&&(l=qN(i)),e.push(r+s+"="+encodeURIComponent(l))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function OA(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function j0(n){this.l=n.ac||null,this.j=n.jb||!1}function LA(n,e){cs.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=lP,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}_B.prototype.cancel=function(){if(this.i=bB(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},aP.prototype.stringify=function(n){return rn.JSON.stringify(n,void 0)},aP.prototype.parse=function(n){return rn.JSON.parse(n,void 0)},ks(j0,JN),j0.prototype.g=function(){return new LA(this.l,this.j)},j0.prototype.i=function(n){return function(){return n}}({}),ks(LA,cs);var lP=0;function EB(n){n.j.read().then(n.Ta.bind(n)).catch(n.ga.bind(n))}function $0(n){n.readyState=4,n.l=null,n.j=null,n.A=null,z0(n)}function z0(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(kt=LA.prototype).open=function(n,e){if(this.readyState!=lP)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,z0(this)},kt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||rn).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},kt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,$0(this)),this.readyState=lP},kt.Wa=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,z0(this)),this.g&&(this.readyState=3,z0(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof rn.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;EB(this)}else n.text().then(this.Va.bind(this),this.ga.bind(this))},kt.Ta=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?$0(this):z0(this),3==this.readyState&&EB(this)}},kt.Va=function(n){this.g&&(this.response=this.responseText=n,$0(this))},kt.Ua=function(n){this.g&&(this.response=n,$0(this))},kt.ga=function(){this.g&&$0(this)},kt.setRequestHeader=function(n,e){this.v.append(n,e)},kt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},kt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(LA.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var L8=rn.JSON.parse;function ci(n){cs.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=CB,this.K=this.L=!1}ks(ci,cs);var CB="",F8=/^https?$/i,U8=["POST","PUT"];function IB(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,DB(n),FA(n)}function DB(n){n.D||(n.D=!0,Ns(n,"complete"),Ns(n,"error"))}function TB(n){if(n.h&&typeof SN<"u"&&(!n.C[1]||4!=lh(n)||2!=n.aa()))if(n.v&&4==lh(n))QN(n.Ha,0,n);else if(Ns(n,"readystatechange"),4==lh(n)){n.h=!1;try{const d=n.aa();e:switch(d){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===d){var i=String(n.H).match(dB)[1]||null;if(!i&&rn.self&&rn.self.location){var s=rn.self.location.protocol;i=s.substr(0,s.length-1)}r=!F8.test(i?i.toLowerCase():"")}t=r}if(t)Ns(n,"complete"),Ns(n,"success");else{n.m=6;try{var l=2<lh(n)?n.g.statusText:""}catch{l=""}n.j=l+" ["+n.aa()+"]",DB(n)}}finally{FA(n)}}}function FA(n,e){if(n.g){AB(n);const t=n.g,r=n.C[0]?mA:null;n.g=null,n.C=null,e||Ns(n,"ready");try{t.onreadystatechange=r}catch{}}}function AB(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(rn.clearTimeout(n.A),n.A=null)}function lh(n){return n.g?n.g.readyState:0}function SB(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case CB:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function xB(n){let e="";return UN(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function uP(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=xB(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Hr(n,e,t))}function G0(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function RB(n){this.Ca=0,this.i=[],this.j=new TA,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=G0("failFast",!1,n),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=G0("baseRetryDelayMs",5e3,n),this.bb=G0("retryDelaySeedMs",1e4,n),this.$a=G0("forwardChannelMaxRetries",2,n),this.ta=G0("forwardChannelRequestTimeoutMs",2e4,n),this.ra=n&&n.xmlHttpFactory||void 0,this.Da=n&&n.Zb||!1,this.J=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.I="",this.h=new _B(n&&n.concurrentRequestLimit),this.Fa=new N8,this.O=n&&n.fastHandshake||!1,this.N=n&&n.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=n&&n.Xb||!1,n&&n.Aa&&this.j.Aa(),n&&n.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&n&&n.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function cP(n){if(MB(n),3==n.G){var e=n.U++,t=ah(n.F);Hr(t,"SID",n.I),Hr(t,"RID",e),Hr(t,"TYPE","terminate"),W0(n,t),(e=new L0(n,n.j,e,void 0)).K=2,e.v=PA(ah(t)),t=!1,rn.navigator&&rn.navigator.sendBeacon&&(t=rn.navigator.sendBeacon(e.v.toString(),"")),!t&&rn.Image&&((new Image).src=e.v,t=!0),t||(e.g=BB(e.l,null),e.g.da(e.v)),e.F=Date.now(),F0(e)}UB(n)}function UA(n){n.g&&(hP(n),n.g.cancel(),n.g=null)}function MB(n){UA(n),n.u&&(rn.clearTimeout(n.u),n.u=null),BA(n),n.h.cancel(),n.m&&("number"==typeof n.m&&rn.clearTimeout(n.m),n.m=null)}function VA(n){yB(n.h)||n.m||(n.m=!0,WV(n.Ja,n),n.C=0)}function kB(n,e){var t;t=e?e.m:n.U++;const r=ah(n.F);Hr(r,"SID",n.I),Hr(r,"RID",t),Hr(r,"AID",n.T),W0(n,r),n.o&&n.s&&uP(r,n.o,n.s),t=new L0(n,n.j,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.i=e.D.concat(n.i)),e=NB(n,t,1e3),t.setTimeout(Math.round(.5*n.ta)+Math.round(.5*n.ta*Math.random())),oP(n.h,t),rP(t,r,e)}function W0(n,e){n.ia&&UN(n.ia,function(t,r){Hr(e,r,t)}),n.l&&cB({},function(t,r){Hr(e,r,t)})}function NB(n,e,t){t=Math.min(n.i.length,t);var r=n.l?ao(n.l.Ra,n.l,n):null;e:{var i=n.i;let s=-1;for(;;){const l=["count="+t];-1==s?0<t?(s=i[0].h,l.push("ofs="+s)):s=0:l.push("ofs="+s);let d=!0;for(let f=0;f<t;f++){let y=i[f].h;const w=i[f].g;if(y-=s,0>y)s=Math.max(0,i[f].h-100),d=!1;else try{P8(w,l,"req"+y+"_")}catch{r&&r(w)}}if(d){r=l.join("&");break e}}}return n=n.i.splice(0,t),e.D=n,r}function PB(n){n.g||n.u||(n.Z=1,WV(n.Ia,n),n.A=0)}function dP(n){return!(n.g||n.u||3<=n.A||(n.Z++,n.u=P0(ao(n.Ia,n),FB(n,n.A)),n.A++,0))}function hP(n){null!=n.B&&(rn.clearTimeout(n.B),n.B=null)}function OB(n){n.g=new L0(n,n.j,"rpc",n.Z),null===n.o&&(n.g.H=n.s),n.g.N=0;var e=ah(n.sa);Hr(e,"RID","rpc"),Hr(e,"SID",n.I),Hr(e,"CI",n.L?"0":"1"),Hr(e,"AID",n.T),Hr(e,"TYPE","xmlhttp"),W0(n,e),n.o&&n.s&&uP(e,n.o,n.s),n.J&&n.g.setTimeout(n.J);var t=n.g;n=n.ka,t.K=1,t.v=PA(ah(e)),t.s=null,t.P=!0,oB(t,n)}function BA(n){null!=n.v&&(rn.clearTimeout(n.v),n.v=null)}function LB(n,e){var t=null;if(n.g==e){BA(n),hP(n),n.g=null;var r=2}else{if(!sP(n.h,e))return;t=e.D,wB(n.h,e),r=1}if(0!=n.G)if(n.pa=e.Y,e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;Ns(r=AA(),new tB(r,t)),VA(n)}else PB(n);else if(3==(i=e.o)||0==i&&0<n.pa||!(1==r&&function B8(n,e){return!(vB(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.D.concat(n.i),0):1==n.G||2==n.G||n.C>=(n.Za?0:n.$a)||(n.m=P0(ao(n.Ja,n,e),FB(n,n.C)),n.C++,0)))}(n,e)||2==r&&dP(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),i){case 1:vm(n,5);break;case 4:vm(n,10);break;case 3:vm(n,6);break;default:vm(n,2)}}function FB(n,e){let t=n.Xa+Math.floor(Math.random()*n.bb);return n.l||(t*=2),t*e}function vm(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var r=ao(n.kb,n);t||(t=new ym("//www.google.com/images/cleardot.gif"),rn.location&&"http"==rn.location.protocol||kA(t,"https"),PA(t)),function O8(n,e){const t=new TA;if(rn.Image){const r=new Image;r.onload=yA(OA,t,r,"TestLoadImage: loaded",!0,e),r.onerror=yA(OA,t,r,"TestLoadImage: error",!1,e),r.onabort=yA(OA,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=yA(OA,t,r,"TestLoadImage: timeout",!1,e),rn.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Fo(2);n.G=0,n.l&&n.l.va(e),UB(n),MB(n)}function UB(n){if(n.G=0,n.la=[],n.l){const e=bB(n.h);(0!=e.length||0!=n.i.length)&&(MV(n.la,e),MV(n.la,n.i),n.h.i.length=0,RN(n.i),n.i.length=0),n.l.ua()}}function VB(n,e,t){var r=t instanceof ym?ah(t):new ym(t,void 0);if(""!=r.g)e&&(r.g=e+"."+r.g),NA(r,r.m);else{var i=rn.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new ym(null,void 0);r&&kA(s,r),e&&(s.g=e),i&&NA(s,i),t&&(s.l=t),r=s}return e=n.za,(t=n.D)&&e&&Hr(r,t,e),Hr(r,"VER",n.ma),W0(n,r),r}function BB(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new ci(t&&n.Da&&!n.ra?new j0({jb:!0}):n.ra)).Ka(n.H),e}function HB(){}function HA(){if(jy&&!(10<=Number(r8)))throw Error("Environmental error: no available transport.")}function $a(n,e){cs.call(this),this.g=new RB(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.S=n,(n=e&&e.Yb)&&!vA(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!vA(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Gy(this)}function jB(n){XN.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function $B(){eP.call(this),this.status=1}function Gy(n){this.g=n}(kt=ci.prototype).Ka=function(n){this.L=n},kt.da=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():tP.g(),this.C=function rB(n){return n.h||(n.h=n.i())}(this.u?this.u:tP),this.g.onreadystatechange=ao(this.Ha,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(s){return void IB(this,s)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const s of r.keys())t.set(s,r.get(s))}r=Array.from(t.keys()).find(s=>"content-type"==s.toLowerCase()),i=rn.FormData&&n instanceof rn.FormData,!(0<=RV(U8,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,l]of t)this.g.setRequestHeader(s,l);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{AB(this),0<this.B&&((this.K=function V8(n){return jy&&function n8(){return function JZ(n){var e=t8;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=kV(String(bA)).split("."),t=kV("9").split("."),r=Math.max(e.length,t.length);for(let l=0;0==n&&l<r;l++){var i=e[l]||"",s=t[l]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==i[0].length&&0==s[0].length)break;n=MN(0==i[1].length?0:parseInt(i[1],10),0==s[1].length?0:parseInt(s[1],10))||MN(0==i[2].length,0==s[2].length)||MN(i[2],s[2]),i=i[3],s=s[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=ao(this.qa,this)):this.A=QN(this.qa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(s){IB(this,s)}},kt.qa=function(){typeof SN<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ns(this,"timeout"),this.abort(8))},kt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Ns(this,"complete"),Ns(this,"abort"),FA(this))},kt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),FA(this,!0)),ci.X.M.call(this)},kt.Ha=function(){this.s||(this.F||this.v||this.l?TB(this):this.fb())},kt.fb=function(){TB(this)},kt.aa=function(){try{return 2<lh(this)?this.g.status:-1}catch{return-1}},kt.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},kt.Sa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),L8(e)}},kt.Ea=function(){return this.m},kt.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(kt=RB.prototype).ma=8,kt.G=1,kt.Ja=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;const i=new L0(this,this.j,n,void 0);let s=this.s;if(this.S&&(s?(s=FV(s),VV(s,this.S)):s=this.S),null!==this.o||this.N||(i.H=s,s=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var r=this.i[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=NB(this,i,e),Hr(t=ah(this.F),"RID",n),Hr(t,"CVER",22),this.D&&Hr(t,"X-HTTP-Session-Id",this.D),W0(this,t),s&&(this.N?e="headers="+encodeURIComponent(String(xB(s)))+"&"+e:this.o&&uP(t,this.o,s)),oP(this.h,i),this.Ya&&Hr(t,"TYPE","init"),this.O?(Hr(t,"$req",e),Hr(t,"SID","null"),i.Z=!0,rP(i,t,null)):rP(i,t,e),this.G=2}}else 3==this.G&&(n?kB(this,n):0==this.i.length||yB(this.h)||kB(this))},kt.Ia=function(){if(this.u=null,OB(this),this.$&&!(this.K||null==this.g||0>=this.P)){var n=2*this.P;this.j.info("BP detection timer enabled: "+n),this.B=P0(ao(this.eb,this),n)}},kt.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,Fo(10),UA(this),OB(this))},kt.cb=function(){null!=this.v&&(this.v=null,UA(this),dP(this),Fo(19))},kt.kb=function(n){n?(this.j.info("Successfully pinged google.com"),Fo(2)):(this.j.info("Failed to ping google.com"),Fo(1))},(kt=HB.prototype).xa=function(){},kt.wa=function(){},kt.va=function(){},kt.ua=function(){},kt.Ra=function(){},HA.prototype.g=function(n,e){return new $a(n,e)},ks($a,cs),$a.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;Fo(0),n.V=e,n.ia=t||{},n.L=n.Y,n.F=VB(n,null,n.V),VA(n)},$a.prototype.close=function(){cP(this.g)},$a.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=qN(n),n=t);e.i.push(new class{constructor(n,e){this.h=n,this.g=e}}(e.ab++,n)),3==e.G&&VA(e)},$a.prototype.M=function(){this.g.l=null,delete this.j,cP(this.g),delete this.g,$a.X.M.call(this)},ks(jB,XN),ks($B,eP),ks(Gy,HB),Gy.prototype.xa=function(){Ns(this.g,"a")},Gy.prototype.wa=function(n){Ns(this.g,new jB(n))},Gy.prototype.va=function(n){Ns(this.g,new $B)},Gy.prototype.ua=function(){Ns(this.g,"b")},HA.prototype.createWebChannel=HA.prototype.g,$a.prototype.send=$a.prototype.u,$a.prototype.open=$a.prototype.m,$a.prototype.close=$a.prototype.close,SA.NO_ERROR=0,SA.TIMEOUT=8,SA.HTTP_ERROR=6,nB.COMPLETE="complete",iB.EventType=O0,O0.OPEN="a",O0.CLOSE="b",O0.ERROR="c",O0.MESSAGE="d",cs.prototype.listen=cs.prototype.N,ci.prototype.listenOnce=ci.prototype.O,ci.prototype.getLastError=ci.prototype.Oa,ci.prototype.getLastErrorCode=ci.prototype.Ea,ci.prototype.getStatus=ci.prototype.aa,ci.prototype.getResponseJson=ci.prototype.Sa,ci.prototype.getResponseText=ci.prototype.fa,ci.prototype.send=ci.prototype.da,ci.prototype.setWithCredentials=ci.prototype.Ka;var H8=oh.createWebChannelTransport=function(){return new HA},j8=oh.getStatEventTarget=function(){return AA()},fP=oh.ErrorCode=SA,$8=oh.EventType=nB,z8=oh.Event=mm,zB=oh.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},G8=oh.FetchXmlHttpFactory=j0,jA=oh.WebChannel=iB,W8=oh.XhrIo=ci;const GB="@firebase/firestore";class ds{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ds.UNAUTHENTICATED=new ds(null),ds.GOOGLE_CREDENTIALS=new ds("google-credentials-uid"),ds.FIRST_PARTY=new ds("first-party-uid"),ds.MOCK_USER=new ds("mock-user");let Wy="9.20.0";const $f=new na.Yd("@firebase/firestore");function pP(){return $f.logLevel}function Ke(n,...e){if($f.logLevel<=na.in.DEBUG){const t=e.map(gP);$f.debug(`Firestore (${Wy}): ${n}`,...t)}}function Ci(n,...e){if($f.logLevel<=na.in.ERROR){const t=e.map(gP);$f.error(`Firestore (${Wy}): ${n}`,...t)}}function Xc(n,...e){if($f.logLevel<=na.in.WARN){const t=e.map(gP);$f.warn(`Firestore (${Wy}): ${n}`,...t)}}function gP(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function bt(n="Unexpected state"){const e=`FIRESTORE (${Wy}) INTERNAL ASSERTION FAILED: `+n;throw Ci(e),new Error(e)}function Lt(n,e){n||bt()}function gt(n,e){return n}const we={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ze extends V.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Ki{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class WB{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class K8{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ds.UNAUTHENTICATED))}shutdown(){}}class Y8{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Q8{constructor(e){this.t=e,this.currentUser=ds.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const s=y=>this.i!==i?(i=this.i,t(y)):Promise.resolve();let l=new Ki;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Ki,e.enqueueRetryable(()=>s(this.currentUser))};const d=()=>{const y=l;e.enqueueRetryable((0,Se.Z)(function*(){yield y.promise,yield s(r.currentUser)}))},f=y=>{Ke("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.auth.addAuthTokenListener(this.o),d()};this.t.onInit(y=>f(y)),setTimeout(()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?f(y):(Ke("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Ki)}},0),d()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Ke("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Lt("string"==typeof r.accessToken),new WB(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Lt(null===e||"string"==typeof e),new ds(e)}}class J8{constructor(e,t,r){this.h=e,this.l=t,this.m=r,this.type="FirstParty",this.user=ds.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class X8{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new J8(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(ds.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class qB{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class e7{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const r=s=>{null!=s.error&&Ke("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const l=s.token!==this.T;return this.T=s.token,Ke("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{Ke("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.I.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.I.getImmediate({optional:!0});s?i(s):Ke("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Lt("string"==typeof t.token),this.T=t.token,new qB(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function t7(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class ZB{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=t7(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%e.length))}return r}}function sn(n,e){return n<e?-1:n>e?1:0}function qy(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function KB(n){return n+"\0"}class jr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ze(we.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ze(we.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new ze(we.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ze(we.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return jr.fromMillis(Date.now())}static fromDate(e){return jr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new jr(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?sn(this.nanoseconds,e.nanoseconds):sn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class zt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new zt(e)}static min(){return new zt(new jr(0,0))}static max(){return new zt(new jr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class q0{constructor(e,t,r){void 0===t?t=0:t>e.length&&bt(),void 0===r?r=e.length-t:r>e.length-t&&bt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===q0.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof q0?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=e.get(i),l=t.get(i);if(s<l)return-1;if(s>l)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Ln extends q0{construct(e,t,r){return new Ln(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new ze(we.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new Ln(t)}static emptyPath(){return new Ln([])}}const n7=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class di extends q0{construct(e,t,r){return new di(e,t,r)}static isValidIdentifier(e){return n7.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),di.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new di(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(0===r.length)throw new ze(we.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;i<e.length;){const d=e[i];if("\\"===d){if(i+1===e.length)throw new ze(we.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[i+1];if("\\"!==f&&"."!==f&&"`"!==f)throw new ze(we.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=f,i+=2}else"`"===d?(l=!l,i++):"."!==d||l?(r+=d,i++):(s(),i++)}if(s(),l)throw new ze(we.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new di(t)}static emptyPath(){return new di([])}}class ct{constructor(e){this.path=e}static fromPath(e){return new ct(Ln.fromString(e))}static fromName(e){return new ct(Ln.fromString(e).popFirst(5))}static empty(){return new ct(Ln.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Ln.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Ln.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ct(new Ln(e.slice()))}}class $A{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function mP(n){return n.fields.find(e=>2===e.kind)}function wm(n){return n.fields.filter(e=>2!==e.kind)}$A.UNKNOWN_ID=-1;class zA{constructor(e,t){this.fieldPath=e,this.kind=t}}class Z0{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Z0(0,za.min())}}function YB(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=zt.fromTimestamp(1e9===r?new jr(t+1,0):new jr(t,r));return new za(i,ct.empty(),e)}function QB(n){return new za(n.readTime,n.key,-1)}class za{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new za(zt.min(),ct.empty(),-1)}static max(){return new za(zt.max(),ct.empty(),-1)}}function _P(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=ct.comparator(n.documentKey,e.documentKey),0!==t?t:sn(n.largestBatchId,e.largestBatchId))}const JB="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class XB{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function zf(n){return yP.apply(this,arguments)}function yP(){return yP=(0,Se.Z)(function*(n){if(n.code!==we.FAILED_PRECONDITION||n.message!==JB)throw n;Ke("LocalStore","Unexpectedly lost primary lease")}),yP.apply(this,arguments)}class me{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&bt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new me((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof me?t:me.resolve(t)}catch(t){return me.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):me.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):me.reject(t)}static resolve(e){return new me((t,r)=>{t(e)})}static reject(e){return new me((t,r)=>{r(e)})}static waitFor(e){return new me((t,r)=>{let i=0,s=0,l=!1;e.forEach(d=>{++i,d.next(()=>{++s,l&&s===i&&t()},f=>r(f))}),l=!0,s===i&&t()})}static or(e){let t=me.resolve(!1);for(const r of e)t=t.next(i=>i?me.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new me((r,i)=>{const s=e.length,l=new Array(s);let d=0;for(let f=0;f<s;f++){const y=f;t(e[y]).next(w=>{l[y]=w,++d,d===s&&r(l)},w=>i(w))}})}static doWhile(e,t){return new me((r,i)=>{const s=()=>{!0===e()?t().next(()=>{s()},i):r()};s()})}}class GA{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.R=new Ki,this.transaction.oncomplete=()=>{this.R.resolve()},this.transaction.onabort=()=>{t.error?this.R.reject(new K0(e,t.error)):this.R.resolve()},this.transaction.onerror=r=>{const i=vP(r.target.error);this.R.reject(new K0(e,i))}}static open(e,t,r,i){try{return new GA(t,e.transaction(i,r))}catch(s){throw new K0(t,s)}}get v(){return this.R.promise}abort(e){e&&this.R.reject(e),this.aborted||(Ke("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new o7(t)}}class Hu{constructor(e,t,r){this.name=e,this.version=t,this.V=r,12.2===Hu.S((0,V.z$)())&&Ci("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ke("SimpleDb","Removing database:",e),bm(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,V.hl)())return!1;if(Hu.C())return!0;const e=(0,V.z$)(),t=Hu.S(e),r=0<t&&t<10,i=Hu.N(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.k)}static O(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static N(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}$(e){var t=this;return(0,Se.Z)(function*(){return t.db||(Ke("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const s=indexedDB.open(t.name,t.version);s.onsuccess=l=>{r(l.target.result)},s.onblocked=()=>{i(new K0(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=l=>{const d=l.target.error;i("VersionError"===d.name?new ze(we.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===d.name?new ze(we.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+d):new K0(e,d))},s.onupgradeneeded=l=>{Ke("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',l.oldVersion),t.V.M(l.target.result,s.transaction,l.oldVersion,t.version).next(()=>{Ke("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.F&&(t.db.onversionchange=r=>t.F(r)),t.db})()}B(e){this.F=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var s=this;return(0,Se.Z)(function*(){const l="readonly"===t;let d=0;for(;;){++d;try{s.db=yield s.$(e);const f=GA.open(s.db,e,l?"readonly":"readwrite",r),y=i(f).next(w=>(f.P(),w)).catch(w=>(f.abort(w),me.reject(w))).toPromise();return y.catch(()=>{}),yield f.v,y}catch(f){const y=f,w="FirebaseError"!==y.name&&d<3;if(Ke("SimpleDb","Transaction failed with error:",y.message,"Retrying:",w),s.close(),!w)return Promise.reject(y)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class s7{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return bm(this.L.delete())}}class K0 extends ze{constructor(e,t){super(we.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Gf(n){return"IndexedDbTransactionError"===n.name}class o7{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Ke("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Ke("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),bm(r)}add(e){return Ke("SimpleDb","ADD",this.store.name,e,e),bm(this.store.add(e))}get(e){return bm(this.store.get(e)).next(t=>(void 0===t&&(t=null),Ke("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Ke("SimpleDb","DELETE",this.store.name,e),bm(this.store.delete(e))}count(){return Ke("SimpleDb","COUNT",this.store.name),bm(this.store.count())}j(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),s=[];return this.W(i,(l,d)=>{s.push(d)}).next(()=>s)}{const i=this.store.getAll(r.range);return new me((s,l)=>{i.onerror=d=>{l(d.target.error)},i.onsuccess=d=>{s(d.target.result)}})}}H(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new me((i,s)=>{r.onerror=l=>{s(l.target.error)},r.onsuccess=l=>{i(l.target.result)}})}J(e,t){Ke("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.Y=!1;const i=this.cursor(r);return this.W(i,(s,l,d)=>d.delete())}Z(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.W(i,t)}X(e){const t=this.cursor({});return new me((r,i)=>{t.onerror=s=>{const l=vP(s.target.error);i(l)},t.onsuccess=s=>{const l=s.target.result;l?e(l.primaryKey,l.value).next(d=>{d?l.continue():r()}):r()}})}W(e,t){const r=[];return new me((i,s)=>{e.onerror=l=>{s(l.target.error)},e.onsuccess=l=>{const d=l.target.result;if(!d)return void i();const f=new s7(d),y=t(d.primaryKey,d.value,f);if(y instanceof me){const w=y.catch(D=>(f.done(),me.reject(D)));r.push(w)}f.isDone?i():null===f.K?d.continue():d.continue(f.K)}}).next(()=>me.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function bm(n){return new me((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=vP(r.target.error);t(i)}})}let eH=!1;function vP(n){const e=Hu.S((0,V.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new ze("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return eH||(eH=!0,setTimeout(()=>{throw r},0)),r}}return n}class a7{constructor(e,t){this.asyncQueue=e,this.tt=t,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){var t=this;Ke("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,Se.Z)(function*(){t.task=null;try{Ke("IndexBackiller",`Documents written: ${yield t.tt.nt()}`)}catch(r){Gf(r)?Ke("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield zf(r)}yield t.et(6e4)}))}}class l7{constructor(e,t){this.localStore=e,this.persistence=t}nt(e=50){var t=this;return(0,Se.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.st(r,e))})()}st(e,t){const r=new Set;let i=t,s=!0;return me.doWhile(()=>!0===s&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(l=>{if(null!==l&&!r.has(l))return Ke("IndexBackiller",`Processing collection: ${l}`),this.it(e,l,i).next(d=>{i-=d,r.add(l)});s=!1})).next(()=>t-i)}it(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(s=>{const l=s.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next(()=>this.rt(i,s)).next(d=>(Ke("IndexBackiller",`Updating offset: ${d}`),this.localStore.indexManager.updateCollectionGroup(e,t,d))).next(()=>l.size)}))}rt(e,t){let r=e;return t.changes.forEach((i,s)=>{const l=QB(s);_P(l,r)>0&&(r=l)}),new za(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let Ga=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ot(i),this.ut=i=>r.writeSequenceNumber(i))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}return n.ct=-1,n})();function Y0(n){return null==n}function Q0(n){return 0===n&&1/n==-1/0}function tH(n){return"number"==typeof n&&Number.isInteger(n)&&!Q0(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function Uo(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=nH(e)),e=u7(n.get(t),e);return nH(e)}function u7(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const s=n.charAt(i);switch(s){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=s}}return t}function nH(n){return n+"\x01\x01"}function ed(n){const e=n.length;if(Lt(e>=2),2===e)return Lt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Ln.emptyPath();const t=e-2,r=[];let i="";for(let s=0;s<e;){const l=n.indexOf("\x01",s);switch((l<0||l>t)&&bt(),n.charAt(l+1)){case"\x01":const d=n.substring(s,l);let f;0===i.length?f=d:(i+=d,f=i,i=""),r.push(f);break;case"\x10":i+=n.substring(s,l),i+="\0";break;case"\x11":i+=n.substring(s,l+1);break;default:bt()}s=l+2}return new Ln(r)}const rH=["userId","batchId"];function WA(n,e){return[n,Uo(e)]}function iH(n,e,t){return[n,Uo(e),t]}const c7={},d7=["prefixPath","collectionGroup","readTime","documentId"],h7=["prefixPath","collectionGroup","documentId"],f7=["collectionGroup","readTime","prefixPath","documentId"],p7=["canonicalId","targetId"],g7=["targetId","path"],m7=["path","targetId"],_7=["collectionId","parent"],y7=["indexId","uid"],v7=["uid","sequenceNumber"],w7=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],b7=["indexId","uid","orderedDocumentKey"],E7=["userId","collectionPath","documentId"],C7=["userId","collectionPath","largestBatchId"],I7=["userId","collectionGroup","largestBatchId"],sH=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],D7=[...sH,"documentOverlays"],oH=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],aH=oH,T7=[...aH,"indexConfiguration","indexState","indexEntries"];class wP extends XB{constructor(e,t){super(),this.at=e,this.currentSequenceNumber=t}}function hs(n,e){const t=gt(n);return Hu.O(t.at,e)}function lH(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Em(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function uH(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class hi{constructor(e,t){this.comparator=e,this.root=t||Ps.EMPTY}insert(e,t){return new hi(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ps.BLACK,null,null))}remove(e){return new hi(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ps.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new qA(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new qA(this.root,e,this.comparator,!1)}getReverseIterator(){return new qA(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new qA(this.root,e,this.comparator,!0)}}class qA{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ps{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??Ps.RED,this.left=i??Ps.EMPTY,this.right=s??Ps.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new Ps(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===s?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Ps.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return Ps.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ps.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ps.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw bt();const e=this.left.check();if(e!==this.right.check())throw bt();return e+(this.isRed()?0:1)}}Ps.EMPTY=null,Ps.RED=!0,Ps.BLACK=!1,Ps.EMPTY=new class{constructor(){this.size=0}get key(){throw bt()}get value(){throw bt()}get color(){throw bt()}get left(){throw bt()}get right(){throw bt()}copy(n,e,t,r,i){return this}insert(n,e,t){return new Ps(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class dr{constructor(e){this.comparator=e,this.data=new hi(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new cH(this.data.getIterator())}getIteratorFrom(e){return new cH(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof dr)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(0!==this.comparator(i,s))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new dr(this.comparator);return t.data=e,t}}class cH{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Zy(n){return n.hasNext()?n.getNext():void 0}class oa{constructor(e){this.fields=e,e.sort(di.comparator)}static empty(){return new oa([])}unionWith(e){let t=new dr(di.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new oa(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return qy(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class A7 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Yi{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(r){try{return atob(r)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new A7("Invalid base64 string: "+i):i}}(e);return new Yi(t)}static fromUint8Array(e){const t=function(r){let i="";for(let s=0;s<r.length;++s)i+=String.fromCharCode(r[s]);return i}(e);return new Yi(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return sn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Yi.EMPTY_BYTE_STRING=new Yi("");const x7=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Wf(n){if(Lt(!!n),"string"==typeof n){let e=0;const t=x7.exec(n);if(Lt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:fi(n.seconds),nanos:fi(n.nanos)}}function fi(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Cm(n){return"string"==typeof n?Yi.fromBase64String(n):Yi.fromUint8Array(n)}function bP(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function dH(n){const e=n.mapValue.fields.__previous_value__;return bP(e)?dH(e):e}function J0(n){const e=Wf(n.mapValue.fields.__local_write_time__.timestampValue);return new jr(e.seconds,e.nanos)}class R7{constructor(e,t,r,i,s,l,d,f){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=l,this.autoDetectLongPolling=d,this.useFetchStreams=f}}class qf{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new qf("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof qf&&e.projectId===this.projectId&&e.database===this.database}}const Zf={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},ZA={nullValue:"NULL_VALUE"};function Im(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?bP(n)?4:gH(n)?9007199254740991:10:bt()}function td(n,e){if(n===e)return!0;const t=Im(n);if(t!==Im(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return J0(n).isEqual(J0(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const s=Wf(r.timestampValue),l=Wf(i.timestampValue);return s.seconds===l.seconds&&s.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,Cm(n.bytesValue).isEqual(Cm(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return fi(r.geoPointValue.latitude)===fi(i.geoPointValue.latitude)&&fi(r.geoPointValue.longitude)===fi(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return fi(r.integerValue)===fi(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const s=fi(r.doubleValue),l=fi(i.doubleValue);return s===l?Q0(s)===Q0(l):isNaN(s)&&isNaN(l)}return!1}(n,e);case 9:return qy(n.arrayValue.values||[],e.arrayValue.values||[],td);case 10:return function(r,i){const s=r.mapValue.fields||{},l=i.mapValue.fields||{};if(lH(s)!==lH(l))return!1;for(const d in s)if(s.hasOwnProperty(d)&&(void 0===l[d]||!td(s[d],l[d])))return!1;return!0}(n,e);default:return bt()}var i}function X0(n,e){return void 0!==(n.values||[]).find(t=>td(t,e))}function Kf(n,e){if(n===e)return 0;const t=Im(n),r=Im(e);if(t!==r)return sn(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return sn(n.booleanValue,e.booleanValue);case 2:return function(i,s){const l=fi(i.integerValue||i.doubleValue),d=fi(s.integerValue||s.doubleValue);return l<d?-1:l>d?1:l===d?0:isNaN(l)?isNaN(d)?0:-1:1}(n,e);case 3:return hH(n.timestampValue,e.timestampValue);case 4:return hH(J0(n),J0(e));case 5:return sn(n.stringValue,e.stringValue);case 6:return function(i,s){const l=Cm(i),d=Cm(s);return l.compareTo(d)}(n.bytesValue,e.bytesValue);case 7:return function(i,s){const l=i.split("/"),d=s.split("/");for(let f=0;f<l.length&&f<d.length;f++){const y=sn(l[f],d[f]);if(0!==y)return y}return sn(l.length,d.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,s){const l=sn(fi(i.latitude),fi(s.latitude));return 0!==l?l:sn(fi(i.longitude),fi(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,s){const l=i.values||[],d=s.values||[];for(let f=0;f<l.length&&f<d.length;++f){const y=Kf(l[f],d[f]);if(y)return y}return sn(l.length,d.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,s){if(i===Zf.mapValue&&s===Zf.mapValue)return 0;if(i===Zf.mapValue)return 1;if(s===Zf.mapValue)return-1;const l=i.fields||{},d=Object.keys(l),f=s.fields||{},y=Object.keys(f);d.sort(),y.sort();for(let w=0;w<d.length&&w<y.length;++w){const D=sn(d[w],y[w]);if(0!==D)return D;const x=Kf(l[d[w]],f[y[w]]);if(0!==x)return x}return sn(d.length,y.length)}(n.mapValue,e.mapValue);default:throw bt()}}function hH(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return sn(n,e);const t=Wf(n),r=Wf(e),i=sn(t.seconds,r.seconds);return 0!==i?i:sn(t.nanos,r.nanos)}function Ky(n){return EP(n)}function EP(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=Wf(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Cm(n.bytesValue).toBase64():"referenceValue"in n?ct.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",s=!0;for(const l of r.values||[])s?s=!1:i+=",",i+=EP(l);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let s="{",l=!0;for(const d of i)l?l=!1:s+=",",s+=`${d}:${EP(r.fields[d])}`;return s+"}"}(n.mapValue):bt();var e}function Dm(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function CP(n){return!!n&&"integerValue"in n}function eE(n){return!!n&&"arrayValue"in n}function fH(n){return!!n&&"nullValue"in n}function pH(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function KA(n){return!!n&&"mapValue"in n}function tE(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Em(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=tE(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=tE(n.arrayValue.values[t]);return e}return Object.assign({},n)}function gH(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function M7(n){return"nullValue"in n?ZA:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Dm(qf.empty(),ct.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:bt()}function k7(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Dm(qf.empty(),ct.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Zf:bt()}function mH(n,e){const t=Kf(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function _H(n,e){const t=Kf(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class fs{constructor(e){this.value=e}static empty(){return new fs({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!KA(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=tE(t)}setAll(e){let t=di.emptyPath(),r={},i=[];e.forEach((l,d)=>{if(!t.isImmediateParentOf(d)){const f=this.getFieldsMap(t);this.applyChanges(f,r,i),r={},i=[],t=d.popLast()}l?r[d.lastSegment()]=tE(l):i.push(d.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());KA(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return td(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];KA(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Em(t,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new fs(tE(this.value))}}function yH(n){const e=[];return Em(n.fields,(t,r)=>{const i=new di([t]);if(KA(r)){const s=yH(r.mapValue).fields;if(0===s.length)e.push(i);else for(const l of s)e.push(i.child(l))}else e.push(i)}),new oa(e)}class Pr{constructor(e,t,r,i,s,l,d){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=l,this.documentState=d}static newInvalidDocument(e){return new Pr(e,0,zt.min(),zt.min(),zt.min(),fs.empty(),0)}static newFoundDocument(e,t,r,i){return new Pr(e,1,t,zt.min(),r,i,0)}static newNoDocument(e,t){return new Pr(e,2,t,zt.min(),zt.min(),fs.empty(),0)}static newUnknownDocument(e,t){return new Pr(e,3,t,zt.min(),zt.min(),fs.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(zt.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=fs.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=fs.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=zt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Pr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Pr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Yf{constructor(e,t){this.position=e,this.inclusive=t}}function vH(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],l=n.position[i];if(r=s.field.isKeyField()?ct.comparator(ct.fromName(l.referenceValue),t.key):Kf(l,t.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function wH(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!td(n.position[t],e.position[t]))return!1;return!0}class Yy{constructor(e,t="asc"){this.field=e,this.dir=t}}function N7(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class bH{}class Sn extends bH{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new P7(e,t,r):"array-contains"===t?new F7(e,r):"in"===t?new AH(e,r):"not-in"===t?new U7(e,r):"array-contains-any"===t?new V7(e,r):new Sn(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new O7(e,r):new L7(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Kf(t,this.value)):null!==t&&Im(this.value)===Im(t)&&this.matchesComparison(Kf(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return bt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class ar extends bH{constructor(e,t){super(),this.filters=e,this.op=t,this.ht=null}static create(e,t){return new ar(e,t)}matches(e){return Qy(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ht||(this.ht=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ht}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.lt(t=>t.isInequality());return null!==e?e.field:null}lt(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function Qy(n){return"and"===n.op}function IP(n){return"or"===n.op}function DP(n){return EH(n)&&Qy(n)}function EH(n){for(const e of n.filters)if(e instanceof ar)return!1;return!0}function TP(n){if(n instanceof Sn)return n.field.canonicalString()+n.op.toString()+Ky(n.value);if(DP(n))return n.filters.map(e=>TP(e)).join(",");{const e=n.filters.map(t=>TP(t)).join(",");return`${n.op}(${e})`}}function CH(n,e){return n instanceof Sn?(t=n,(r=e)instanceof Sn&&t.op===r.op&&t.field.isEqual(r.field)&&td(t.value,r.value)):n instanceof ar?function(t,r){return r instanceof ar&&t.op===r.op&&t.filters.length===r.filters.length&&t.filters.reduce((i,s,l)=>i&&CH(s,r.filters[l]),!0)}(n,e):void bt();var t,r}function IH(n,e){const t=n.filters.concat(e);return ar.create(t,n.op)}function DH(n){return n instanceof Sn?`${(e=n).field.canonicalString()} ${e.op} ${Ky(e.value)}`:n instanceof ar?function(e){return e.op.toString()+" {"+e.getFilters().map(DH).join(" ,")+"}"}(n):"Filter";var e}class P7 extends Sn{constructor(e,t,r){super(e,t,r),this.key=ct.fromName(r.referenceValue)}matches(e){const t=ct.comparator(e.key,this.key);return this.matchesComparison(t)}}class O7 extends Sn{constructor(e,t){super(e,"in",t),this.keys=TH(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class L7 extends Sn{constructor(e,t){super(e,"not-in",t),this.keys=TH(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function TH(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>ct.fromName(r.referenceValue))}class F7 extends Sn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return eE(t)&&X0(t.arrayValue,this.value)}}class AH extends Sn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&X0(this.value.arrayValue,t)}}class U7 extends Sn{constructor(e,t){super(e,"not-in",t)}matches(e){if(X0(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!X0(this.value.arrayValue,t)}}class V7 extends Sn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!eE(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>X0(this.value.arrayValue,r))}}class B7{constructor(e,t=null,r=[],i=[],s=null,l=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=l,this.endAt=d,this.ft=null}}function AP(n,e=null,t=[],r=[],i=null,s=null,l=null){return new B7(n,e,t,r,i,s,l)}function Tm(n){const e=gt(n);if(null===e.ft){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>TP(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),Y0(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Ky(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Ky(r)).join(",")),e.ft=t}return e.ft}function nE(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!N7(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!CH(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!wH(n.startAt,e.startAt)&&wH(n.endAt,e.endAt)}function YA(n){return ct.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function QA(n,e){return n.filters.filter(t=>t instanceof Sn&&t.field.isEqual(e))}function SH(n,e,t){let r=ZA,i=!0;for(const s of QA(n,e)){let l=ZA,d=!0;switch(s.op){case"<":case"<=":l=M7(s.value);break;case"==":case"in":case">=":l=s.value;break;case">":l=s.value,d=!1;break;case"!=":case"not-in":l=ZA}mH({value:r,inclusive:i},{value:l,inclusive:d})<0&&(r=l,i=d)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const l=t.position[s];mH({value:r,inclusive:i},{value:l,inclusive:t.inclusive})<0&&(r=l,i=t.inclusive);break}return{value:r,inclusive:i}}function xH(n,e,t){let r=Zf,i=!0;for(const s of QA(n,e)){let l=Zf,d=!0;switch(s.op){case">=":case">":l=k7(s.value),d=!1;break;case"==":case"in":case"<=":l=s.value;break;case"<":l=s.value,d=!1;break;case"!=":case"not-in":l=Zf}_H({value:r,inclusive:i},{value:l,inclusive:d})>0&&(r=l,i=d)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const l=t.position[s];_H({value:r,inclusive:i},{value:l,inclusive:t.inclusive})>0&&(r=l,i=t.inclusive);break}return{value:r,inclusive:i}}class uh{constructor(e,t=null,r=[],i=[],s=null,l="F",d=null,f=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=l,this.startAt=d,this.endAt=f,this.dt=null,this.wt=null}}function RH(n,e,t,r,i,s,l,d){return new uh(n,e,t,r,i,s,l,d)}function Jy(n){return new uh(n)}function MH(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function SP(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function JA(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function xP(n){return null!==n.collectionGroup}function Am(n){const e=gt(n);if(null===e.dt){e.dt=[];const t=JA(e),r=SP(e);if(null!==t&&null===r)t.isKeyField()||e.dt.push(new Yy(t)),e.dt.push(new Yy(di.keyField(),"asc"));else{let i=!1;for(const s of e.explicitOrderBy)e.dt.push(s),s.field.isKeyField()&&(i=!0);if(!i){const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.dt.push(new Yy(di.keyField(),s))}}}return e.dt}function Vo(n){const e=gt(n);if(!e.wt)if("F"===e.limitType)e.wt=AP(e.path,e.collectionGroup,Am(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const s of Am(e))t.push(new Yy(s.field,"desc"===s.dir?"asc":"desc"));const r=e.endAt?new Yf(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new Yf(e.startAt.position,e.startAt.inclusive):null;e.wt=AP(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e.wt}function RP(n,e){e.getFirstInequalityField(),JA(n);const t=n.filters.concat([e]);return new uh(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function XA(n,e,t){return new uh(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function rE(n,e){return nE(Vo(n),Vo(e))&&n.limitType===e.limitType}function kH(n){return`${Tm(Vo(n))}|lt:${n.limitType}`}function MP(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(r=>DH(r)).join(", ")}]`),Y0(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(r=>{return`${(i=r).field.canonicalString()} (${i.dir})`;var i}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Ky(r)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Ky(r)).join(",")),`Target(${t})`}(Vo(n))}; limitType=${n.limitType})`}function iE(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):ct.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of Am(t))if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,s,l){const d=vH(i,s,l);return i.inclusive?d<=0:d<0}(t.startAt,Am(t),r)||t.endAt&&!function(i,s,l){const d=vH(i,s,l);return i.inclusive?d>=0:d>0}(t.endAt,Am(t),r)));var t,r}function NH(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function PH(n){return(e,t)=>{let r=!1;for(const i of Am(n)){const s=H7(i,e,t);if(0!==s)return s;r=r||i.field.isKeyField()}return 0}}function H7(n,e,t){const r=n.field.isKeyField()?ct.comparator(e.key,t.key):function(i,s,l){const d=s.data.field(i),f=l.data.field(i);return null!==d&&null!==f?Kf(d,f):bt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return bt()}}class Qf{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,s]of r)if(this.equalsFn(i,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Em(this.inner,(t,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return uH(this.inner)}size(){return this.innerSize}}const j7=new hi(ct.comparator);function aa(){return j7}const OH=new hi(ct.comparator);function sE(...n){let e=OH;for(const t of n)e=e.insert(t.key,t);return e}function LH(n){let e=OH;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function nd(){return oE()}function FH(){return oE()}function oE(){return new Qf(n=>n.toString(),(n,e)=>n.isEqual(e))}const $7=new hi(ct.comparator),z7=new dr(ct.comparator);function fn(...n){let e=z7;for(const t of n)e=e.add(t);return e}const G7=new dr(sn);function eS(){return G7}function UH(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Q0(e)?"-0":e}}function VH(n){return{integerValue:""+n}}function BH(n,e){return tH(e)?VH(e):UH(n,e)}class tS{constructor(){this._=void 0}}function W7(n,e,t){return n instanceof Xy?function(r,i){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(s.fields.__previous_value__=i),{mapValue:s}}(t,e):n instanceof Sm?jH(n,e):n instanceof xm?$H(n,e):function(r,i){const s=HH(r,i),l=zH(s)+zH(r._t);return CP(s)&&CP(r._t)?VH(l):UH(r.serializer,l)}(n,e)}function q7(n,e,t){return n instanceof Sm?jH(n,e):n instanceof xm?$H(n,e):t}function HH(n,e){return n instanceof ev?CP(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Xy extends tS{}class Sm extends tS{constructor(e){super(),this.elements=e}}function jH(n,e){const t=GH(e);for(const r of n.elements)t.some(i=>td(i,r))||t.push(r);return{arrayValue:{values:t}}}class xm extends tS{constructor(e){super(),this.elements=e}}function $H(n,e){let t=GH(e);for(const r of n.elements)t=t.filter(i=>!td(i,r));return{arrayValue:{values:t}}}class ev extends tS{constructor(e,t){super(),this.serializer=e,this._t=t}}function zH(n){return fi(n.integerValue||n.doubleValue)}function GH(n){return eE(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class aE{constructor(e,t){this.field=e,this.transform=t}}class K7{constructor(e,t){this.version=e,this.transformResults=t}}class $r{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new $r}static exists(e){return new $r(void 0,e)}static updateTime(e){return new $r(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function nS(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class rS{}function WH(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new nv(n.key,$r.none()):new tv(n.key,n.data,$r.none());{const t=n.data,r=fs.empty();let i=new dr(di.comparator);for(let s of e.fields)if(!i.has(s)){let l=t.field(s);null===l&&s.length>1&&(s=s.popLast(),l=t.field(s)),null===l?r.delete(s):r.set(s,l),i=i.add(s)}return new ch(n.key,r,new oa(i.toArray()),$r.none())}}function Y7(n,e,t){n instanceof tv?function(r,i,s){const l=r.value.clone(),d=KH(r.fieldTransforms,i,s.transformResults);l.setAll(d),i.convertToFoundDocument(s.version,l).setHasCommittedMutations()}(n,e,t):n instanceof ch?function(r,i,s){if(!nS(r.precondition,i))return void i.convertToUnknownDocument(s.version);const l=KH(r.fieldTransforms,i,s.transformResults),d=i.data;d.setAll(ZH(r)),d.setAll(l),i.convertToFoundDocument(s.version,d).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function lE(n,e,t,r){return n instanceof tv?function(i,s,l,d){if(!nS(i.precondition,s))return l;const f=i.value.clone(),y=YH(i.fieldTransforms,d,s);return f.setAll(y),s.convertToFoundDocument(s.version,f).setHasLocalMutations(),null}(n,e,t,r):n instanceof ch?function(i,s,l,d){if(!nS(i.precondition,s))return l;const f=YH(i.fieldTransforms,d,s),y=s.data;return y.setAll(ZH(i)),y.setAll(f),s.convertToFoundDocument(s.version,y).setHasLocalMutations(),null===l?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(w=>w.field))}(n,e,t,r):(l=t,nS(n.precondition,s=e)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):l);var s,l}function Q7(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=HH(r.transform,i||null);null!=s&&(null===t&&(t=fs.empty()),t.set(r.field,s))}return t||null}function qH(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&qy(t,r,(i,s)=>function Z7(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Sm&&r instanceof Sm||t instanceof xm&&r instanceof xm?qy(t.elements,r.elements,td):t instanceof ev&&r instanceof ev?td(t._t,r._t):t instanceof Xy&&r instanceof Xy);var t,r}(i,s))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class tv extends rS{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class ch extends rS{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function ZH(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function KH(n,e,t){const r=new Map;Lt(n.length===t.length);for(let i=0;i<t.length;i++){const s=n[i],l=s.transform,d=e.data.field(s.field);r.set(s.field,q7(l,d,t[i]))}return r}function YH(n,e,t){const r=new Map;for(const i of n){const s=i.transform,l=t.data.field(i.field);r.set(i.field,W7(s,l,e))}return r}class nv extends rS{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class kP extends rS{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class NP{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&Y7(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=lE(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=lE(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=FH();return this.mutations.forEach(i=>{const s=e.get(i.key),l=s.overlayedDocument;let d=this.applyToLocalView(l,s.mutatedFields);d=t.has(i.key)?null:d;const f=WH(l,d);null!==f&&r.set(i.key,f),l.isValidDocument()||l.convertToNoDocument(zt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),fn())}isEqual(e){return this.batchId===e.batchId&&qy(this.mutations,e.mutations,(t,r)=>qH(t,r))&&qy(this.baseMutations,e.baseMutations,(t,r)=>qH(t,r))}}class PP{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Lt(e.mutations.length===r.length);let i=$7;const s=e.mutations;for(let l=0;l<s.length;l++)i=i.insert(s[l].key,r[l].version);return new PP(e,t,r,i)}}class OP{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class eK{constructor(e){this.count=e}}var ji,Fn;function QH(n){switch(n){default:return bt();case we.CANCELLED:case we.UNKNOWN:case we.DEADLINE_EXCEEDED:case we.RESOURCE_EXHAUSTED:case we.INTERNAL:case we.UNAVAILABLE:case we.UNAUTHENTICATED:return!1;case we.INVALID_ARGUMENT:case we.NOT_FOUND:case we.ALREADY_EXISTS:case we.PERMISSION_DENIED:case we.FAILED_PRECONDITION:case we.ABORTED:case we.OUT_OF_RANGE:case we.UNIMPLEMENTED:case we.DATA_LOSS:return!0}}function JH(n){if(void 0===n)return Ci("GRPC error has no .code"),we.UNKNOWN;switch(n){case ji.OK:return we.OK;case ji.CANCELLED:return we.CANCELLED;case ji.UNKNOWN:return we.UNKNOWN;case ji.DEADLINE_EXCEEDED:return we.DEADLINE_EXCEEDED;case ji.RESOURCE_EXHAUSTED:return we.RESOURCE_EXHAUSTED;case ji.INTERNAL:return we.INTERNAL;case ji.UNAVAILABLE:return we.UNAVAILABLE;case ji.UNAUTHENTICATED:return we.UNAUTHENTICATED;case ji.INVALID_ARGUMENT:return we.INVALID_ARGUMENT;case ji.NOT_FOUND:return we.NOT_FOUND;case ji.ALREADY_EXISTS:return we.ALREADY_EXISTS;case ji.PERMISSION_DENIED:return we.PERMISSION_DENIED;case ji.FAILED_PRECONDITION:return we.FAILED_PRECONDITION;case ji.ABORTED:return we.ABORTED;case ji.OUT_OF_RANGE:return we.OUT_OF_RANGE;case ji.UNIMPLEMENTED:return we.UNIMPLEMENTED;case ji.DATA_LOSS:return we.DATA_LOSS;default:return bt()}}(Fn=ji||(ji={}))[Fn.OK=0]="OK",Fn[Fn.CANCELLED=1]="CANCELLED",Fn[Fn.UNKNOWN=2]="UNKNOWN",Fn[Fn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Fn[Fn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Fn[Fn.NOT_FOUND=5]="NOT_FOUND",Fn[Fn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Fn[Fn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Fn[Fn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Fn[Fn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Fn[Fn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Fn[Fn.ABORTED=10]="ABORTED",Fn[Fn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Fn[Fn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Fn[Fn.INTERNAL=13]="INTERNAL",Fn[Fn.UNAVAILABLE=14]="UNAVAILABLE",Fn[Fn.DATA_LOSS=15]="DATA_LOSS";class FP{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return iS}static getOrCreateInstance(){return null===iS&&(iS=new FP),iS}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let iS=null;class uE{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,cE.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new uE(zt.min(),i,eS(),aa(),fn())}}class cE{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new cE(r,t,fn(),fn(),fn())}}class sS{constructor(e,t,r,i){this.It=e,this.removedTargetIds=t,this.key=r,this.Tt=i}}class XH{constructor(e,t){this.targetId=e,this.Et=t}}class ej{constructor(e,t,r=Yi.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class tj{constructor(){this.At=0,this.Rt=rj(),this.vt=Yi.EMPTY_BYTE_STRING,this.bt=!1,this.Pt=!0}get current(){return this.bt}get resumeToken(){return this.vt}get Vt(){return 0!==this.At}get St(){return this.Pt}Dt(e){e.approximateByteSize()>0&&(this.Pt=!0,this.vt=e)}Ct(){let e=fn(),t=fn(),r=fn();return this.Rt.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:bt()}}),new cE(this.vt,this.bt,e,t,r)}xt(){this.Pt=!1,this.Rt=rj()}Nt(e,t){this.Pt=!0,this.Rt=this.Rt.insert(e,t)}kt(e){this.Pt=!0,this.Rt=this.Rt.remove(e)}Ot(){this.At+=1}$t(){this.At-=1}Mt(){this.Pt=!0,this.bt=!0}}class tK{constructor(e){this.Ft=e,this.Bt=new Map,this.Lt=aa(),this.qt=nj(),this.Ut=new dr(sn)}Kt(e){for(const t of e.It)e.Tt&&e.Tt.isFoundDocument()?this.Gt(t,e.Tt):this.Qt(t,e.key,e.Tt);for(const t of e.removedTargetIds)this.Qt(t,e.key,e.Tt)}zt(e){this.forEachTarget(e,t=>{const r=this.jt(t);switch(e.state){case 0:this.Wt(t)&&r.Dt(e.resumeToken);break;case 1:r.$t(),r.Vt||r.xt(),r.Dt(e.resumeToken);break;case 2:r.$t(),r.Vt||this.removeTarget(t);break;case 3:this.Wt(t)&&(r.Mt(),r.Dt(e.resumeToken));break;case 4:this.Wt(t)&&(this.Ht(t),r.Dt(e.resumeToken));break;default:bt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Bt.forEach((r,i)=>{this.Wt(i)&&t(i)})}Jt(e){var t;const r=e.targetId,i=e.Et.count,s=this.Yt(r);if(s){const l=s.target;if(YA(l))if(0===i){const d=new ct(l.path);this.Qt(r,d,Pr.newNoDocument(d,zt.min()))}else Lt(1===i);else{const d=this.Zt(r);d!==i&&(this.Ht(r),this.Ut=this.Ut.add(r),null===(t=FP.instance)||void 0===t||t.notifyOnExistenceFilterMismatch({localCacheCount:d,existenceFilterCount:e.Et.count}))}}}Xt(e){const t=new Map;this.Bt.forEach((s,l)=>{const d=this.Yt(l);if(d){if(s.current&&YA(d.target)){const f=new ct(d.target.path);null!==this.Lt.get(f)||this.te(l,f)||this.Qt(l,f,Pr.newNoDocument(f,e))}s.St&&(t.set(l,s.Ct()),s.xt())}});let r=fn();this.qt.forEach((s,l)=>{let d=!0;l.forEachWhile(f=>{const y=this.Yt(f);return!y||2===y.purpose||(d=!1,!1)}),d&&(r=r.add(s))}),this.Lt.forEach((s,l)=>l.setReadTime(e));const i=new uE(e,t,this.Ut,this.Lt,r);return this.Lt=aa(),this.qt=nj(),this.Ut=new dr(sn),i}Gt(e,t){if(!this.Wt(e))return;const r=this.te(e,t.key)?2:0;this.jt(e).Nt(t.key,r),this.Lt=this.Lt.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ee(t.key).add(e))}Qt(e,t,r){if(!this.Wt(e))return;const i=this.jt(e);this.te(e,t)?i.Nt(t,1):i.kt(t),this.qt=this.qt.insert(t,this.ee(t).delete(e)),r&&(this.Lt=this.Lt.insert(t,r))}removeTarget(e){this.Bt.delete(e)}Zt(e){const t=this.jt(e).Ct();return this.Ft.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ot(e){this.jt(e).Ot()}jt(e){let t=this.Bt.get(e);return t||(t=new tj,this.Bt.set(e,t)),t}ee(e){let t=this.qt.get(e);return t||(t=new dr(sn),this.qt=this.qt.insert(e,t)),t}Wt(e){const t=null!==this.Yt(e);return t||Ke("WatchChangeAggregator","Detected inactive target",e),t}Yt(e){const t=this.Bt.get(e);return t&&t.Vt?null:this.Ft.ne(e)}Ht(e){this.Bt.set(e,new tj),this.Ft.getRemoteKeysForTarget(e).forEach(t=>{this.Qt(e,t,null)})}te(e,t){return this.Ft.getRemoteKeysForTarget(e).has(t)}}function nj(){return new hi(ct.comparator)}function rj(){return new hi(ct.comparator)}const nK={asc:"ASCENDING",desc:"DESCENDING"},rK={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},iK={and:"AND",or:"OR"};class sK{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function rv(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function ij(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function oK(n,e){return rv(n,e.toTimestamp())}function Ii(n){return Lt(!!n),zt.fromTimestamp(function(e){const t=Wf(e);return new jr(t.seconds,t.nanos)}(n))}function UP(n,e){return(t=n,new Ln(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function sj(n){const e=Ln.fromString(n);return Lt(pj(e)),e}function dE(n,e){return UP(n.databaseId,e.path)}function rd(n,e){const t=sj(e);if(t.get(1)!==n.databaseId.projectId)throw new ze(we.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ze(we.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ct(aj(t))}function VP(n,e){return UP(n.databaseId,e)}function oj(n){const e=sj(n);return 4===e.length?Ln.emptyPath():aj(e)}function hE(n){return new Ln(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function aj(n){return Lt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function lj(n,e,t){return{name:dE(n,e),fields:t.value.mapValue.fields}}function uj(n,e,t){const r=rd(n,e.name),i=Ii(e.updateTime),s=e.createTime?Ii(e.createTime):zt.min(),l=new fs({mapValue:{fields:e.fields}}),d=Pr.newFoundDocument(r,i,s,l);return t&&d.setHasCommittedMutations(),t?d.setHasCommittedMutations():d}function fE(n,e){let t;if(e instanceof tv)t={update:lj(n,e.key,e.value)};else if(e instanceof nv)t={delete:dE(n,e.key)};else if(e instanceof ch)t={update:lj(n,e.key,e.data),updateMask:pK(e.fieldMask)};else{if(!(e instanceof kP))return bt();t={verify:dE(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,s){const l=s.transform;if(l instanceof Xy)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Sm)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof xm)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof ev)return{fieldPath:s.field.canonicalString(),increment:l._t};throw bt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:oK(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:bt()),t;var i}function BP(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?$r.updateTime(Ii(i.updateTime)):void 0!==i.exists?$r.exists(i.exists):$r.none():$r.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,l){let d=null;"setToServerValue"in l?(Lt("REQUEST_TIME"===l.setToServerValue),d=new Xy):"appendMissingElements"in l?d=new Sm(l.appendMissingElements.values||[]):"removeAllFromArray"in l?d=new xm(l.removeAllFromArray.values||[]):"increment"in l?d=new ev(s,l.increment):bt();const f=di.fromServerFormat(l.fieldPath);return new aE(f,d)}(n,i)):[];var i;if(e.update){const i=rd(n,e.update.name),s=new fs({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=new oa((e.updateMask.fieldPaths||[]).map(y=>di.fromServerFormat(y)));return new ch(i,s,l,t,r)}return new tv(i,s,t,r)}if(e.delete){const i=rd(n,e.delete);return new nv(i,t)}if(e.verify){const i=rd(n,e.verify);return new kP(i,t)}return bt()}function cj(n,e){return{documents:[VP(n,e.path)]}}function HP(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=VP(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=VP(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(f){if(0!==f.length)return fj(ar.create(f,"and"))}(e.filters);i&&(t.structuredQuery.where=i);const s=function(f){if(0!==f.length)return f.map(y=>{return{field:Jf((w=y).field),direction:dK(w.dir)};var w})}(e.orderBy);s&&(t.structuredQuery.orderBy=s);const l=(y=e.limit,n.useProto3Json||Y0(y)?y:{value:y});var y,d,f;return null!==l&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt={before:(d=e.startAt).inclusive,values:d.position}),e.endAt&&(t.structuredQuery.endAt={before:!(f=e.endAt).inclusive,values:f.position}),t}function dj(n){let e=oj(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Lt(1===r);const w=t.from[0];w.allDescendants?i=w.collectionId:e=e.child(w.collectionId)}let s=[];t.where&&(s=function(w){const D=hj(w);return D instanceof ar&&DP(D)?D.getFilters():[D]}(t.where));let l=[];t.orderBy&&(l=t.orderBy.map(w=>{return new Yy(iv((D=w).field),function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(D.direction));var D}));let d=null;t.limit&&(d=function(w){let D;return D="object"==typeof w?w.value:w,Y0(D)?null:D}(t.limit));let f=null;var w;t.startAt&&(f=new Yf((w=t.startAt).values||[],!!w.before));let y=null;return t.endAt&&(y=function(w){return new Yf(w.values||[],!w.before)}(t.endAt)),RH(e,i,l,s,d,"F",f,y)}function hj(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=iv(e.unaryFilter.field);return Sn.create(t,"==",{doubleValue:NaN});case"IS_NULL":const r=iv(e.unaryFilter.field);return Sn.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=iv(e.unaryFilter.field);return Sn.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=iv(e.unaryFilter.field);return Sn.create(s,"!=",{nullValue:"NULL_VALUE"});default:return bt()}}(n):void 0!==n.fieldFilter?Sn.create(iv((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return bt()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return ar.create(e.compositeFilter.filters.map(t=>hj(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return bt()}}(e.compositeFilter.op))}(n):bt();var e}function dK(n){return nK[n]}function hK(n){return rK[n]}function fK(n){return iK[n]}function Jf(n){return{fieldPath:n.canonicalString()}}function iv(n){return di.fromServerFormat(n.fieldPath)}function fj(n){return n instanceof Sn?function(e){if("=="===e.op){if(pH(e.value))return{unaryFilter:{field:Jf(e.field),op:"IS_NAN"}};if(fH(e.value))return{unaryFilter:{field:Jf(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(pH(e.value))return{unaryFilter:{field:Jf(e.field),op:"IS_NOT_NAN"}};if(fH(e.value))return{unaryFilter:{field:Jf(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Jf(e.field),op:hK(e.op),value:e.value}}}(n):n instanceof ar?function(e){const t=e.getFilters().map(r=>fj(r));return 1===t.length?t[0]:{compositeFilter:{op:fK(e.op),filters:t}}}(n):bt()}function pK(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function pj(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class Xf{constructor(e,t,r,i,s=zt.min(),l=zt.min(),d=Yi.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=d}withSequenceNumber(e){return new Xf(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Xf(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Xf(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class gj{constructor(e){this.se=e}}function mj(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:oS(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:dE(i=n.se,(s=e).key),fields:s.data.value.mapValue.fields,updateTime:rv(i,s.version.toTimestamp()),createTime:rv(i,s.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Rm(e.version)};else{if(!e.isUnknownDocument())return bt();r.unknownDocument={path:t.path.toArray(),version:Rm(e.version)}}var i,s;return r}function oS(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Rm(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Mm(n){const e=new jr(n.seconds,n.nanoseconds);return zt.fromTimestamp(e)}function km(n,e){const t=(e.baseMutations||[]).map(s=>BP(n.se,s));for(let s=0;s<e.mutations.length-1;++s){const l=e.mutations[s];s+1<e.mutations.length&&void 0!==e.mutations[s+1].transform&&(l.updateTransforms=e.mutations[s+1].transform.fieldTransforms,e.mutations.splice(s+1,1),++s)}const r=e.mutations.map(s=>BP(n.se,s)),i=jr.fromMillis(e.localWriteTimeMs);return new NP(e.batchId,i,t,r)}function pE(n){const e=Mm(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Mm(n.lastLimboFreeSnapshotVersion):zt.min();let r;var i;return void 0!==n.query.documents?(Lt(1===(i=n.query).documents.length),r=Vo(Jy(oj(i.documents[0])))):r=Vo(dj(n.query)),new Xf(r,n.targetId,0,n.lastListenSequenceNumber,e,t,Yi.fromBase64String(n.resumeToken))}function _j(n,e){const t=Rm(e.snapshotVersion),r=Rm(e.lastLimboFreeSnapshotVersion);let i;i=YA(e.target)?cj(n.se,e.target):HP(n.se,e.target);const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Tm(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function jP(n){const e=dj({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?XA(e,e.limit,"L"):e}function $P(n,e){return new OP(e.largestBatchId,BP(n.se,e.overlayMutation))}function yj(n,e){const t=e.path.lastSegment();return[n,Uo(e.path.popLast()),t]}function vj(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:Rm(r.readTime),documentKey:Uo(r.documentKey.path),largestBatchId:r.largestBatchId}}class mK{getBundleMetadata(e,t){return wj(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:Mm(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return wj(e).put({bundleId:(r=t).id,createTime:Rm(Ii(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return bj(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:jP(i.bundledQuery),readTime:Mm(i.readTime)};var i})}saveNamedQuery(e,t){return bj(e).put({name:(r=t).name,readTime:Rm(Ii(r.readTime)),bundledQuery:r.bundledQuery});var r}}function wj(n){return hs(n,"bundles")}function bj(n){return hs(n,"namedQueries")}class aS{constructor(e,t){this.serializer=e,this.userId=t}static ie(e,t){return new aS(e,t.uid||"")}getOverlay(e,t){return gE(e).get(yj(this.userId,t)).next(r=>r?$P(this.serializer,r):null)}getOverlays(e,t){const r=nd();return me.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((s,l)=>{const d=new OP(t,l);i.push(this.re(e,d))}),me.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(l=>i.add(Uo(l.getCollectionPath())));const s=[];return i.forEach(l=>{const d=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,r+1],!1,!0);s.push(gE(e).J("collectionPathOverlayIndex",d))}),me.waitFor(s)}getOverlaysForCollection(e,t,r){const i=nd(),s=Uo(t),l=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return gE(e).j("collectionPathOverlayIndex",l).next(d=>{for(const f of d){const y=$P(this.serializer,f);i.set(y.getKey(),y)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const s=nd();let l;const d=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return gE(e).Z({index:"collectionGroupOverlayIndex",range:d},(f,y,w)=>{const D=$P(this.serializer,y);s.size()<i||D.largestBatchId===l?(s.set(D.getKey(),D),l=D.largestBatchId):w.done()}).next(()=>s)}re(e,t){return gE(e).put(function(r,i,s){const[l,d,f]=yj(i,s.mutation.key);return{userId:i,collectionPath:d,documentId:f,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:fE(r.se,s.mutation)}}(this.serializer,this.userId,t))}}function gE(n){return hs(n,"documentOverlays")}class Nm{constructor(){}oe(e,t){this.ue(e,t),t.ce()}ue(e,t){if("nullValue"in e)this.ae(t,5);else if("booleanValue"in e)this.ae(t,10),t.he(e.booleanValue?1:0);else if("integerValue"in e)this.ae(t,15),t.he(fi(e.integerValue));else if("doubleValue"in e){const r=fi(e.doubleValue);isNaN(r)?this.ae(t,13):(this.ae(t,15),Q0(r)?t.he(0):t.he(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ae(t,20),"string"==typeof r?t.le(r):(t.le(`${r.seconds||""}`),t.he(r.nanos||0))}else if("stringValue"in e)this.fe(e.stringValue,t),this.de(t);else if("bytesValue"in e)this.ae(t,30),t.we(Cm(e.bytesValue)),this.de(t);else if("referenceValue"in e)this._e(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ae(t,45),t.he(r.latitude||0),t.he(r.longitude||0)}else"mapValue"in e?gH(e)?this.ae(t,Number.MAX_SAFE_INTEGER):(this.me(e.mapValue,t),this.de(t)):"arrayValue"in e?(this.ge(e.arrayValue,t),this.de(t)):bt()}fe(e,t){this.ae(t,25),this.ye(e,t)}ye(e,t){t.le(e)}me(e,t){const r=e.fields||{};this.ae(t,55);for(const i of Object.keys(r))this.fe(i,t),this.ue(r[i],t)}ge(e,t){const r=e.values||[];this.ae(t,50);for(const i of r)this.ue(i,t)}_e(e,t){this.ae(t,37),ct.fromName(e).path.forEach(r=>{this.ae(t,60),this.ye(r,t)})}ae(e,t){e.he(t)}de(e){e.he(2)}}function _K(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function Ej(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const s=_K(255&t[i]);if(r+=s,8!==s)break}return r}(n);return Math.ceil(e/8)}Nm.pe=new Nm;class yK{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ie(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Te(r.value),r=t.next();this.Ee()}Ae(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Re(r.value),r=t.next();this.ve()}be(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Te(r);else if(r<2048)this.Te(960|r>>>6),this.Te(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Te(480|r>>>12),this.Te(128|63&r>>>6),this.Te(128|63&r);else{const i=t.codePointAt(0);this.Te(240|i>>>18),this.Te(128|63&i>>>12),this.Te(128|63&i>>>6),this.Te(128|63&i)}}this.Ee()}Pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Re(r);else if(r<2048)this.Re(960|r>>>6),this.Re(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Re(480|r>>>12),this.Re(128|63&r>>>6),this.Re(128|63&r);else{const i=t.codePointAt(0);this.Re(240|i>>>18),this.Re(128|63&i>>>12),this.Re(128|63&i>>>6),this.Re(128|63&i)}}this.ve()}Ve(e){const t=this.Se(e),r=Ej(t);this.De(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Ce(e){const t=this.Se(e),r=Ej(t);this.De(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}xe(){this.Ne(255),this.Ne(255)}ke(){this.Oe(255),this.Oe(255)}reset(){this.position=0}seed(e){this.De(e.length),this.buffer.set(e,this.position),this.position+=e.length}$e(){return this.buffer.slice(0,this.position)}Se(e){const t=function(i){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,i,!1),new Uint8Array(s.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Te(e){const t=255&e;0===t?(this.Ne(0),this.Ne(255)):255===t?(this.Ne(255),this.Ne(0)):this.Ne(t)}Re(e){const t=255&e;0===t?(this.Oe(0),this.Oe(255)):255===t?(this.Oe(255),this.Oe(0)):this.Oe(e)}Ee(){this.Ne(0),this.Ne(1)}ve(){this.Oe(0),this.Oe(1)}Ne(e){this.De(1),this.buffer[this.position++]=e}Oe(e){this.De(1),this.buffer[this.position++]=~e}De(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class vK{constructor(e){this.Me=e}we(e){this.Me.Ie(e)}le(e){this.Me.be(e)}he(e){this.Me.Ve(e)}ce(){this.Me.xe()}}class wK{constructor(e){this.Me=e}we(e){this.Me.Ae(e)}le(e){this.Me.Pe(e)}he(e){this.Me.Ce(e)}ce(){this.Me.ke()}}class mE{constructor(){this.Me=new yK,this.Fe=new vK(this.Me),this.Be=new wK(this.Me)}seed(e){this.Me.seed(e)}Le(e){return 0===e?this.Fe:this.Be}$e(){return this.Me.$e()}reset(){this.Me.reset()}}class Pm{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}qe(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Pm(this.indexId,this.documentKey,this.arrayValue,r)}}function ep(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=Cj(n.arrayValue,e.arrayValue),0!==t?t:(t=Cj(n.directionalValue,e.directionalValue),0!==t?t:ct.comparator(n.documentKey,e.documentKey)))}function Cj(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class bK{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ue=e.orderBy,this.Ke=[];for(const t of e.filters){const r=t;r.isInequality()?this.Ge=r:this.Ke.push(r)}}Qe(e){Lt(e.collectionGroup===this.collectionId);const t=mP(e);if(void 0!==t&&!this.ze(t))return!1;const r=wm(e);let i=0,s=0;for(;i<r.length&&this.ze(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.Ge){const l=r[i];if(!this.je(this.Ge,l)||!this.We(this.Ue[s++],l))return!1;++i}for(;i<r.length;++i){const l=r[i];if(s>=this.Ue.length||!this.We(this.Ue[s++],l))return!1}return!0}ze(e){for(const t of this.Ke)if(this.je(t,e))return!0;return!1}je(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}We(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function Ij(n){var e,t;if(Lt(n instanceof Sn||n instanceof ar),n instanceof Sn){if(n instanceof AH){const i=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(s=>Sn.create(n.field,"==",s)))||[];return ar.create(i,"or")}return n}const r=n.filters.map(i=>Ij(i));return ar.create(r,n.op)}function EK(n){if(0===n.getFilters().length)return[];const e=WP(Ij(n));return Lt(Dj(e)),zP(e)||GP(e)?[e]:e.getFilters()}function zP(n){return n instanceof Sn}function GP(n){return n instanceof ar&&DP(n)}function Dj(n){return zP(n)||GP(n)||function(e){if(e instanceof ar&&IP(e)){for(const t of e.getFilters())if(!zP(t)&&!GP(t))return!1;return!0}return!1}(n)}function WP(n){if(Lt(n instanceof Sn||n instanceof ar),n instanceof Sn)return n;if(1===n.filters.length)return WP(n.filters[0]);const e=n.filters.map(r=>WP(r));let t=ar.create(e,n.op);return t=lS(t),Dj(t)?t:(Lt(t instanceof ar),Lt(Qy(t)),Lt(t.filters.length>1),t.filters.reduce((r,i)=>qP(r,i)))}function qP(n,e){let t;return Lt(n instanceof Sn||n instanceof ar),Lt(e instanceof Sn||e instanceof ar),t=n instanceof Sn?e instanceof Sn?ar.create([n,e],"and"):Tj(n,e):e instanceof Sn?Tj(e,n):function(r,i){if(Lt(r.filters.length>0&&i.filters.length>0),Qy(r)&&Qy(i))return IH(r,i.getFilters());const s=IP(r)?r:i,l=IP(r)?i:r,d=s.filters.map(f=>qP(f,l));return ar.create(d,"or")}(n,e),lS(t)}function Tj(n,e){if(Qy(e))return IH(e,n.getFilters());{const t=e.filters.map(r=>qP(n,r));return ar.create(t,"or")}}function lS(n){if(Lt(n instanceof Sn||n instanceof ar),n instanceof Sn)return n;const e=n.getFilters();if(1===e.length)return lS(e[0]);if(EH(n))return n;const t=e.map(i=>lS(i)),r=[];return t.forEach(i=>{i instanceof Sn?r.push(i):i instanceof ar&&(i.op===n.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:ar.create(r,n.op)}class CK{constructor(){this.He=new ZP}addToCollectionParentIndex(e,t){return this.He.add(t),me.resolve()}getCollectionParents(e,t){return me.resolve(this.He.getEntries(t))}addFieldIndex(e,t){return me.resolve()}deleteFieldIndex(e,t){return me.resolve()}getDocumentsMatchingTarget(e,t){return me.resolve(null)}getIndexType(e,t){return me.resolve(0)}getFieldIndexes(e,t){return me.resolve([])}getNextCollectionGroupToUpdate(e){return me.resolve(null)}getMinOffset(e,t){return me.resolve(za.min())}getMinOffsetFromCollectionGroup(e,t){return me.resolve(za.min())}updateCollectionGroup(e,t,r){return me.resolve()}updateIndexEntries(e,t){return me.resolve()}}class ZP{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new dr(Ln.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new dr(Ln.comparator)).toArray()}}const uS=new Uint8Array(0);class IK{constructor(e,t){this.user=e,this.databaseId=t,this.Je=new ZP,this.Ye=new Qf(r=>Tm(r),(r,i)=>nE(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Je.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.Je.add(t)});const s={collectionId:r,parent:Uo(i)};return Aj(e).put(s)}return me.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[KB(t),""],!1,!0);return Aj(e).j(i).next(s=>{for(const l of s){if(l.collectionId!==t)break;r.push(ed(l.parent))}return r})}addFieldIndex(e,t){const r=cS(e),i={indexId:(l=t).indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(d=>[d.fieldPath.canonicalString(),d.kind])};var l;delete i.indexId;const s=r.add(i);if(t.indexState){const l=yE(e);return s.next(d=>{l.put(vj(d,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return s.next()}deleteFieldIndex(e,t){const r=cS(e),i=yE(e),s=_E(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=_E(e);let i=!0;const s=new Map;return me.forEach(this.Ze(t),l=>this.Xe(e,l).next(d=>{i&&(i=!!d),s.set(l,d)})).next(()=>{if(i){let l=fn();const d=[];return me.forEach(s,(f,y)=>{var w;Ke("IndexedDbIndexManager",`Using index ${w=f,`id=${w.indexId}|cg=${w.collectionGroup}|f=${w.fields.map(je=>`${je.fieldPath}:${je.kind}`).join(",")}`} to execute ${Tm(t)}`);const D=function(je,Ye){const St=mP(Ye);if(void 0===St)return null;for(const Nt of QA(je,St.fieldPath))switch(Nt.op){case"array-contains-any":return Nt.value.arrayValue.values||[];case"array-contains":return[Nt.value]}return null}(y,f),x=function(je,Ye){const St=new Map;for(const Nt of wm(Ye))for(const mn of QA(je,Nt.fieldPath))switch(mn.op){case"==":case"in":St.set(Nt.fieldPath.canonicalString(),mn.value);break;case"not-in":case"!=":return St.set(Nt.fieldPath.canonicalString(),mn.value),Array.from(St.values())}return null}(y,f),N=function(je,Ye){const St=[];let Nt=!0;for(const mn of wm(Ye)){const nn=0===mn.kind?SH(je,mn.fieldPath,je.startAt):xH(je,mn.fieldPath,je.startAt);St.push(nn.value),Nt&&(Nt=nn.inclusive)}return new Yf(St,Nt)}(y,f),U=function(je,Ye){const St=[];let Nt=!0;for(const mn of wm(Ye)){const nn=0===mn.kind?xH(je,mn.fieldPath,je.endAt):SH(je,mn.fieldPath,je.endAt);St.push(nn.value),Nt&&(Nt=nn.inclusive)}return new Yf(St,Nt)}(y,f),Q=this.tn(f,y,N),X=this.tn(f,y,U),ae=this.en(f,y,x),Le=this.nn(f.indexId,D,Q,N.inclusive,X,U.inclusive,ae);return me.forEach(Le,je=>r.H(je,t.limit).next(Ye=>{Ye.forEach(St=>{const Nt=ct.fromSegments(St.documentKey);l.has(Nt)||(l=l.add(Nt),d.push(Nt))})}))}).next(()=>d)}return me.resolve(null)})}Ze(e){let t=this.Ye.get(e);return t||(t=0===e.filters.length?[e]:EK(ar.create(e.filters,"and")).map(r=>AP(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.Ye.set(e,t),t)}nn(e,t,r,i,s,l,d){const f=(null!=t?t.length:1)*Math.max(r.length,s.length),y=f/(null!=t?t.length:1),w=[];for(let D=0;D<f;++D){const x=t?this.sn(t[D/y]):uS,N=this.rn(e,x,r[D%y],i),U=this.on(e,x,s[D%y],l),Q=d.map(X=>this.rn(e,x,X,!0));w.push(...this.createRange(N,U,Q))}return w}rn(e,t,r,i){const s=new Pm(e,ct.empty(),t,r);return i?s:s.qe()}on(e,t,r,i){const s=new Pm(e,ct.empty(),t,r);return i?s.qe():s}Xe(e,t){const r=new bK(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let l=null;for(const d of s)r.Qe(d)&&(!l||d.fields.length>l.fields.length)&&(l=d);return l})}getIndexType(e,t){let r=2;const i=this.Ze(t);return me.forEach(i,s=>this.Xe(e,s).next(l=>{l?0!==r&&l.fields.length<function(d){let f=new dr(di.comparator),y=!1;for(const w of d.filters)for(const D of w.getFlattenedFilters())D.field.isKeyField()||("array-contains"===D.op||"array-contains-any"===D.op?y=!0:f=f.add(D.field));for(const w of d.orderBy)w.field.isKeyField()||(f=f.add(w.field));return f.size+(y?1:0)}(s)&&(r=1):r=0})).next(()=>null!==t.limit&&i.length>1&&2===r?1:r)}un(e,t){const r=new mE;for(const i of wm(e)){const s=t.data.field(i.fieldPath);if(null==s)return null;const l=r.Le(i.kind);Nm.pe.oe(s,l)}return r.$e()}sn(e){const t=new mE;return Nm.pe.oe(e,t.Le(0)),t.$e()}cn(e,t){const r=new mE;return Nm.pe.oe(Dm(this.databaseId,t),r.Le(function(i){const s=wm(i);return 0===s.length?0:s[s.length-1].kind}(e))),r.$e()}en(e,t,r){if(null===r)return[];let i=[];i.push(new mE);let s=0;for(const l of wm(e)){const d=r[s++];for(const f of i)if(this.an(t,l.fieldPath)&&eE(d))i=this.hn(i,l,d);else{const y=f.Le(l.kind);Nm.pe.oe(d,y)}}return this.ln(i)}tn(e,t,r){return this.en(e,t,r.position)}ln(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].$e();return t}hn(e,t,r){const i=[...e],s=[];for(const l of r.arrayValue.values||[])for(const d of i){const f=new mE;f.seed(d.$e()),Nm.pe.oe(l,f.Le(t.kind)),s.push(f)}return s}an(e,t){return!!e.filters.find(r=>r instanceof Sn&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=cS(e),i=yE(e);return(t?r.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.j()).next(s=>{const l=[];return me.forEach(s,d=>i.get([d.indexId,this.uid]).next(f=>{l.push(function(y,w){const D=w?new Z0(w.sequenceNumber,new za(Mm(w.readTime),new ct(ed(w.documentKey)),w.largestBatchId)):Z0.empty(),x=y.fields.map(([N,U])=>new zA(di.fromServerFormat(N),U));return new $A(y.indexId,y.collectionGroup,x,D)}(d,f))})).next(()=>l)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==s?s:sn(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=cS(e),s=yE(e);return this.fn(e).next(l=>i.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(d=>me.forEach(d,f=>s.put(vj(f.indexId,this.user,l,r)))))}updateIndexEntries(e,t){const r=new Map;return me.forEach(t,(i,s)=>{const l=r.get(i.collectionGroup);return(l?me.resolve(l):this.getFieldIndexes(e,i.collectionGroup)).next(d=>(r.set(i.collectionGroup,d),me.forEach(d,f=>this.dn(e,i,f).next(y=>{const w=this.wn(s,f);return y.isEqual(w)?me.resolve():this._n(e,s,f,y,w)}))))})}mn(e,t,r,i){return _E(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.cn(r,t.key),documentKey:t.key.path.toArray()})}gn(e,t,r,i){return _E(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.cn(r,t.key),t.key.path.toArray()])}dn(e,t,r){const i=_E(e);let s=new dr(ep);return i.Z({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.cn(r,t)])},(l,d)=>{s=s.add(new Pm(r.indexId,t,d.arrayValue,d.directionalValue))}).next(()=>s)}wn(e,t){let r=new dr(ep);const i=this.un(t,e);if(null==i)return r;const s=mP(t);if(null!=s){const l=e.data.field(s.fieldPath);if(eE(l))for(const d of l.arrayValue.values||[])r=r.add(new Pm(t.indexId,e.key,this.sn(d),i))}else r=r.add(new Pm(t.indexId,e.key,uS,i));return r}_n(e,t,r,i,s){Ke("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const l=[];return function(d,f,y,w,D){const x=d.getIterator(),N=f.getIterator();let U=Zy(x),Q=Zy(N);for(;U||Q;){let X=!1,ae=!1;if(U&&Q){const Le=y(U,Q);Le<0?ae=!0:Le>0&&(X=!0)}else null!=U?ae=!0:X=!0;X?(w(Q),Q=Zy(N)):ae?(D(U),U=Zy(x)):(U=Zy(x),Q=Zy(N))}}(i,s,ep,d=>{l.push(this.mn(e,t,r,d))},d=>{l.push(this.gn(e,t,r,d))}),me.waitFor(l)}fn(e){let t=1;return yE(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((l,d)=>ep(l,d)).filter((l,d,f)=>!d||0!==ep(l,f[d-1]));const i=[];i.push(e);for(const l of r){const d=ep(l,e),f=ep(l,t);if(0===d)i[0]=e.qe();else if(d>0&&f<0)i.push(l),i.push(l.qe());else if(f>0)break}i.push(t);const s=[];for(let l=0;l<i.length;l+=2){if(this.yn(i[l],i[l+1]))return[];s.push(IDBKeyRange.bound([i[l].indexId,this.uid,i[l].arrayValue,i[l].directionalValue,uS,[]],[i[l+1].indexId,this.uid,i[l+1].arrayValue,i[l+1].directionalValue,uS,[]]))}return s}yn(e,t){return ep(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Sj)}getMinOffset(e,t){return me.mapArray(this.Ze(t),r=>this.Xe(e,r).next(i=>i||bt())).next(Sj)}}function Aj(n){return hs(n,"collectionParents")}function _E(n){return hs(n,"indexEntries")}function cS(n){return hs(n,"indexConfiguration")}function yE(n){return hs(n,"indexState")}function Sj(n){Lt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;_P(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new za(e.readTime,e.documentKey,t)}const xj={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class la{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new la(e,la.DEFAULT_COLLECTION_PERCENTILE,la.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Rj(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),s=[],l=IDBKeyRange.only(t.batchId);let d=0;const f=r.Z({range:l},(w,D,x)=>(d++,x.delete()));s.push(f.next(()=>{Lt(1===d)}));const y=[];for(const w of t.mutations){const D=iH(e,w.key.path,t.batchId);s.push(i.delete(D)),y.push(w.key)}return me.waitFor(s).next(()=>y)}function dS(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw bt();e=n.noDocument}return JSON.stringify(e).length}la.DEFAULT_COLLECTION_PERCENTILE=10,la.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,la.DEFAULT=new la(41943040,la.DEFAULT_COLLECTION_PERCENTILE,la.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),la.DISABLED=new la(-1,0,0);class hS{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.pn={}}static ie(e,t,r,i){Lt(""!==e.uid);const s=e.isAuthenticated()?e.uid:"";return new hS(s,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return tp(e).Z({index:"userMutationsIndex",range:r},(i,s,l)=>{t=!1,l.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const s=sv(e),l=tp(e);return l.add({}).next(d=>{Lt("number"==typeof d);const f=new NP(d,t,r,i),y=function(x,N,U){const Q=U.baseMutations.map(ae=>fE(x.se,ae)),X=U.mutations.map(ae=>fE(x.se,ae));return{userId:N,batchId:U.batchId,localWriteTimeMs:U.localWriteTime.toMillis(),baseMutations:Q,mutations:X}}(this.serializer,this.userId,f),w=[];let D=new dr((x,N)=>sn(x.canonicalString(),N.canonicalString()));for(const x of i){const N=iH(this.userId,x.key.path,d);D=D.add(x.key.path.popLast()),w.push(l.put(y)),w.push(s.put(N,c7))}return D.forEach(x=>{w.push(this.indexManager.addToCollectionParentIndex(e,x))}),e.addOnCommittedListener(()=>{this.pn[d]=f.keys()}),me.waitFor(w).next(()=>f)})}lookupMutationBatch(e,t){return tp(e).get(t).next(r=>r?(Lt(r.userId===this.userId),km(this.serializer,r)):null)}In(e,t){return this.pn[t]?me.resolve(this.pn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.pn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return tp(e).Z({index:"userMutationsIndex",range:i},(l,d,f)=>{d.userId===this.userId&&(Lt(d.batchId>=r),s=km(this.serializer,d)),f.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return tp(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(i,s,l)=>{r=s.batchId,l.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return tp(e).j("userMutationsIndex",t).next(r=>r.map(i=>km(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=WA(this.userId,t.path),i=IDBKeyRange.lowerBound(r),s=[];return sv(e).Z({range:i},(l,d,f)=>{const[y,w,D]=l,x=ed(w);if(y===this.userId&&t.path.isEqual(x))return tp(e).get(D).next(N=>{if(!N)throw bt();Lt(N.userId===this.userId),s.push(km(this.serializer,N))});f.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new dr(sn);const i=[];return t.forEach(s=>{const l=WA(this.userId,s.path),d=IDBKeyRange.lowerBound(l),f=sv(e).Z({range:d},(y,w,D)=>{const[x,N,U]=y,Q=ed(N);x===this.userId&&s.path.isEqual(Q)?r=r.add(U):D.done()});i.push(f)}),me.waitFor(i).next(()=>this.Tn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,s=WA(this.userId,r),l=IDBKeyRange.lowerBound(s);let d=new dr(sn);return sv(e).Z({range:l},(f,y,w)=>{const[D,x,N]=f,U=ed(x);D===this.userId&&r.isPrefixOf(U)?U.length===i&&(d=d.add(N)):w.done()}).next(()=>this.Tn(e,d))}Tn(e,t){const r=[],i=[];return t.forEach(s=>{i.push(tp(e).get(s).next(l=>{if(null===l)throw bt();Lt(l.userId===this.userId),r.push(km(this.serializer,l))}))}),me.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return Rj(e.at,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.En(t.batchId)}),me.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}En(e){delete this.pn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return me.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return sv(e).Z({range:r},(s,l,d)=>{if(s[0]===this.userId){const f=ed(s[1]);i.push(f)}else d.done()}).next(()=>{Lt(0===i.length)})})}containsKey(e,t){return Mj(e,this.userId,t)}An(e){return kj(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Mj(n,e,t){const r=WA(e,t.path),i=r[1],s=IDBKeyRange.lowerBound(r);let l=!1;return sv(n).Z({range:s,Y:!0},(d,f,y)=>{const[w,D,x]=d;w===e&&D===i&&(l=!0),y.done()}).next(()=>l)}function tp(n){return hs(n,"mutations")}function sv(n){return hs(n,"documentMutations")}function kj(n){return hs(n,"mutationQueues")}class Om{constructor(e){this.Rn=e}next(){return this.Rn+=2,this.Rn}static vn(){return new Om(0)}static bn(){return new Om(-1)}}class DK{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Pn(e).next(t=>{const r=new Om(t.highestTargetId);return t.highestTargetId=r.next(),this.Vn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Pn(e).next(t=>zt.fromTimestamp(new jr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Pn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Pn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Vn(e,i)))}addTargetData(e,t){return this.Sn(e,t).next(()=>this.Pn(e).next(r=>(r.targetCount+=1,this.Dn(t,r),this.Vn(e,r))))}updateTargetData(e,t){return this.Sn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>ov(e).delete(t.targetId)).next(()=>this.Pn(e)).next(r=>(Lt(r.targetCount>0),r.targetCount-=1,this.Vn(e,r)))}removeTargets(e,t,r){let i=0;const s=[];return ov(e).Z((l,d)=>{const f=pE(d);f.sequenceNumber<=t&&null===r.get(f.targetId)&&(i++,s.push(this.removeTargetData(e,f)))}).next(()=>me.waitFor(s)).next(()=>i)}forEachTarget(e,t){return ov(e).Z((r,i)=>{const s=pE(i);t(s)})}Pn(e){return Nj(e).get("targetGlobalKey").next(t=>(Lt(null!==t),t))}Vn(e,t){return Nj(e).put("targetGlobalKey",t)}Sn(e,t){return ov(e).put(_j(this.serializer,t))}Dn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Pn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Tm(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return ov(e).Z({range:i,index:"queryTargetsIndex"},(l,d,f)=>{const y=pE(d);nE(t,y.target)&&(s=y,f.done())}).next(()=>s)}addMatchingKeys(e,t,r){const i=[],s=np(e);return t.forEach(l=>{const d=Uo(l.path);i.push(s.put({targetId:r,path:d})),i.push(this.referenceDelegate.addReference(e,r,l))}),me.waitFor(i)}removeMatchingKeys(e,t,r){const i=np(e);return me.forEach(t,s=>{const l=Uo(s.path);return me.waitFor([i.delete([r,l]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,t){const r=np(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=np(e);let s=fn();return i.Z({range:r,Y:!0},(l,d,f)=>{const y=ed(l[1]),w=new ct(y);s=s.add(w)}).next(()=>s)}containsKey(e,t){const r=Uo(t.path),i=IDBKeyRange.bound([r],[KB(r)],!1,!0);let s=0;return np(e).Z({index:"documentTargetsIndex",Y:!0,range:i},([l,d],f,y)=>{0!==l&&(s++,y.done())}).next(()=>s>0)}ne(e,t){return ov(e).get(t).next(r=>r?pE(r):null)}}function ov(n){return hs(n,"targets")}function Nj(n){return hs(n,"targetGlobal")}function np(n){return hs(n,"targetDocuments")}function Pj([n,e],[t,r]){const i=sn(n,t);return 0===i?sn(e,r):i}class TK{constructor(e){this.Cn=e,this.buffer=new dr(Pj),this.xn=0}Nn(){return++this.xn}kn(e){const t=[e,this.Nn()];if(this.buffer.size<this.Cn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();Pj(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class AK{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.On=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.$n(6e4)}stop(){this.On&&(this.On.cancel(),this.On=null)}get started(){return null!==this.On}$n(e){var t=this;Ke("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.On=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,Se.Z)(function*(){t.On=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){Gf(r)?Ke("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield zf(r)}yield t.$n(3e5)}))}}class SK{constructor(e,t){this.Mn=e,this.params=t}calculateTargetCount(e,t){return this.Mn.Fn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return me.resolve(Ga.ct);const r=new TK(t);return this.Mn.forEachTarget(e,i=>r.kn(i.sequenceNumber)).next(()=>this.Mn.Bn(e,i=>r.kn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Mn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Mn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Ke("LruGarbageCollector","Garbage collection skipped; disabled"),me.resolve(xj)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Ke("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),xj):this.Ln(e,t))}getCacheSize(e){return this.Mn.getCacheSize(e)}Ln(e,t){let r,i,s,l,d,f,y;const w=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(D=>(D>this.params.maximumSequenceNumbersToCollect?(Ke("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${D}`),i=this.params.maximumSequenceNumbersToCollect):i=D,l=Date.now(),this.nthSequenceNumber(e,i))).next(D=>(r=D,d=Date.now(),this.removeTargets(e,r,t))).next(D=>(s=D,f=Date.now(),this.removeOrphanedDocuments(e,r))).next(D=>(y=Date.now(),pP()<=na.in.DEBUG&&Ke("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${l-w}ms\n\tDetermined least recently used ${i} in `+(d-l)+`ms\n\tRemoved ${s} targets in `+(f-d)+`ms\n\tRemoved ${D} documents in `+(y-f)+`ms\nTotal Duration: ${y-w}ms`),me.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:D})))}}class xK{constructor(e,t){this.db=e,this.garbageCollector=new SK(this,t)}Fn(e){const t=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}qn(e){let t=0;return this.Bn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Bn(e,t){return this.Un(e,(r,i)=>t(i))}addReference(e,t,r){return fS(e,r)}removeReference(e,t,r){return fS(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return fS(e,t)}Kn(e,t){return function(r,i){let s=!1;return kj(r).X(l=>Mj(r,l,i).next(d=>(d&&(s=!0),me.resolve(!d)))).next(()=>s)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.Un(e,(l,d)=>{if(d<=t){const f=this.Kn(e,l).next(y=>{if(!y)return s++,r.getEntry(e,l).next(()=>(r.removeEntry(l,zt.min()),np(e).delete([0,Uo(l.path)])))});i.push(f)}}).next(()=>me.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return fS(e,t)}Un(e,t){const r=np(e);let i,s=Ga.ct;return r.Z({index:"documentTargetsIndex"},([l,d],{path:f,sequenceNumber:y})=>{0===l?(s!==Ga.ct&&t(new ct(ed(i)),s),s=y,i=f):s=Ga.ct}).next(()=>{s!==Ga.ct&&t(new ct(ed(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function fS(n,e){return np(n).put((r=n.currentSequenceNumber,{targetId:0,path:Uo(e.path),sequenceNumber:r}));var r}class Oj{constructor(){this.changes=new Qf(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Pr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?me.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class RK{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Lm(e).put(r)}removeEntry(e,t,r){return Lm(e).delete(function(i,s){const l=i.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],oS(s),l[l.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Gn(e,r)))}getEntry(e,t){let r=Pr.newInvalidDocument(t);return Lm(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(vE(t))},(i,s)=>{r=this.Qn(t,s)}).next(()=>r)}zn(e,t){let r={size:0,document:Pr.newInvalidDocument(t)};return Lm(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(vE(t))},(i,s)=>{r={document:this.Qn(t,s),size:dS(s)}}).next(()=>r)}getEntries(e,t){let r=aa();return this.jn(e,t,(i,s)=>{const l=this.Qn(i,s);r=r.insert(i,l)}).next(()=>r)}Wn(e,t){let r=aa(),i=new hi(ct.comparator);return this.jn(e,t,(s,l)=>{const d=this.Qn(s,l);r=r.insert(s,d),i=i.insert(s,dS(l))}).next(()=>({documents:r,Hn:i}))}jn(e,t,r){if(t.isEmpty())return me.resolve();let i=new dr(Vj);t.forEach(f=>i=i.add(f));const s=IDBKeyRange.bound(vE(i.first()),vE(i.last())),l=i.getIterator();let d=l.getNext();return Lm(e).Z({index:"documentKeyIndex",range:s},(f,y,w)=>{const D=ct.fromSegments([...y.prefixPath,y.collectionGroup,y.documentId]);for(;d&&Vj(d,D)<0;)r(d,null),d=l.getNext();d&&d.isEqual(D)&&(r(d,y),d=l.hasNext()?l.getNext():null),d?w.G(vE(d)):w.done()}).next(()=>{for(;d;)r(d,null),d=l.hasNext()?l.getNext():null})}getDocumentsMatchingQuery(e,t,r,i){const s=t.path,l=[s.popLast().toArray(),s.lastSegment(),oS(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],d=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Lm(e).j(IDBKeyRange.bound(l,d,!0)).next(f=>{let y=aa();for(const w of f){const D=this.Qn(ct.fromSegments(w.prefixPath.concat(w.collectionGroup,w.documentId)),w);D.isFoundDocument()&&(iE(t,D)||i.has(D.key))&&(y=y.insert(D.key,D))}return y})}getAllFromCollectionGroup(e,t,r,i){let s=aa();const l=Uj(t,r),d=Uj(t,za.max());return Lm(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(l,d,!0)},(f,y,w)=>{const D=this.Qn(ct.fromSegments(y.prefixPath.concat(y.collectionGroup,y.documentId)),y);s=s.insert(D.key,D),s.size===i&&w.done()}).next(()=>s)}newChangeBuffer(e){return new MK(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return Fj(e).get("remoteDocumentGlobalKey").next(t=>(Lt(!!t),t))}Gn(e,t){return Fj(e).put("remoteDocumentGlobalKey",t)}Qn(e,t){if(t){const r=function gK(n,e){let t;if(e.document)t=uj(n.se,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=ct.fromSegments(e.noDocument.path),i=Mm(e.noDocument.readTime);t=Pr.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return bt();{const r=ct.fromSegments(e.unknownDocument.path),i=Mm(e.unknownDocument.version);t=Pr.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new jr(r[0],r[1]);return zt.fromTimestamp(i)}(e.readTime)),t}(this.serializer,t);if(!r.isNoDocument()||!r.version.isEqual(zt.min()))return r}return Pr.newInvalidDocument(e)}}function Lj(n){return new RK(n)}class MK extends Oj{constructor(e,t){super(),this.Jn=e,this.trackRemovals=t,this.Yn=new Qf(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new dr((s,l)=>sn(s.canonicalString(),l.canonicalString()));return this.changes.forEach((s,l)=>{const d=this.Yn.get(s);if(t.push(this.Jn.removeEntry(e,s,d.readTime)),l.isValidDocument()){const f=mj(this.Jn.serializer,l);i=i.add(s.path.popLast()),r+=dS(f)-d.size,t.push(this.Jn.addEntry(e,s,f))}else if(r-=d.size,this.trackRemovals){const f=mj(this.Jn.serializer,l.convertToNoDocument(zt.min()));t.push(this.Jn.addEntry(e,s,f))}}),i.forEach(s=>{t.push(this.Jn.indexManager.addToCollectionParentIndex(e,s))}),t.push(this.Jn.updateMetadata(e,r)),me.waitFor(t)}getFromCache(e,t){return this.Jn.zn(e,t).next(r=>(this.Yn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Jn.Wn(e,t).next(({documents:r,Hn:i})=>(i.forEach((s,l)=>{this.Yn.set(s,{size:l,readTime:r.get(s).readTime})}),r))}}function Fj(n){return hs(n,"remoteDocumentGlobal")}function Lm(n){return hs(n,"remoteDocumentsV14")}function vE(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Uj(n,e){const t=e.documentKey.path.toArray();return[n,oS(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Vj(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<t.length-2&&s<r.length-2;++s)if(i=sn(t[s],r[s]),i)return i;return i=sn(t.length,r.length),i||(i=sn(t[t.length-2],r[r.length-2]),i||sn(t[t.length-1],r[r.length-1]))}class kK{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Bj{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&lE(r.mutation,i,oa.empty(),jr.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,fn()).next(()=>r))}getLocalViewOfDocuments(e,t,r=fn()){const i=nd();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let l=sE();return s.forEach((d,f)=>{l=l.insert(d,f.overlayedDocument)}),l}))}getOverlayedDocuments(e,t){const r=nd();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,fn()))}populateOverlays(e,t,r){const i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((l,d)=>{t.set(l,d)})})}computeViews(e,t,r,i){let s=aa();const l=oE(),d=oE();return t.forEach((f,y)=>{const w=r.get(y.key);i.has(y.key)&&(void 0===w||w.mutation instanceof ch)?s=s.insert(y.key,y):void 0!==w?(l.set(y.key,w.mutation.getFieldMask()),lE(w.mutation,y,w.mutation.getFieldMask(),jr.now())):l.set(y.key,oa.empty())}),this.recalculateAndSaveOverlays(e,s).next(f=>(f.forEach((y,w)=>l.set(y,w)),t.forEach((y,w)=>{var D;return d.set(y,new kK(w,null!==(D=l.get(y))&&void 0!==D?D:null))}),d))}recalculateAndSaveOverlays(e,t){const r=oE();let i=new hi((l,d)=>l-d),s=fn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(l=>{for(const d of l)d.keys().forEach(f=>{const y=t.get(f);if(null===y)return;let w=r.get(f)||oa.empty();w=d.applyToLocalView(y,w),r.set(f,w);const D=(i.get(d.batchId)||fn()).add(f);i=i.insert(d.batchId,D)})}).next(()=>{const l=[],d=i.getReverseIterator();for(;d.hasNext();){const f=d.getNext(),y=f.key,w=f.value,D=FH();w.forEach(x=>{if(!s.has(x)){const N=WH(t.get(x),r.get(x));null!==N&&D.set(x,N),s=s.add(x)}}),l.push(this.documentOverlayCache.saveOverlays(e,y,D))}return me.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return ct.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):xP(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{const l=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):me.resolve(nd());let d=-1,f=s;return l.next(y=>me.forEach(y,(w,D)=>(d<D.largestBatchId&&(d=D.largestBatchId),s.get(w)?me.resolve():this.remoteDocumentCache.getEntry(e,w).next(x=>{f=f.insert(w,x)}))).next(()=>this.populateOverlays(e,y,s)).next(()=>this.computeViews(e,f,y,fn())).next(w=>({batchId:d,changes:LH(w)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ct(t)).next(r=>{let i=sE();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let s=sE();return this.indexManager.getCollectionParents(e,i).next(l=>me.forEach(l,d=>{const f=(y=t,w=d.child(i),new uh(w,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt));var y,w;return this.getDocumentsMatchingCollectionQuery(e,f,r).next(y=>{y.forEach((w,D)=>{s=s.insert(w,D)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,i))).next(s=>{i.forEach((d,f)=>{const y=f.getKey();null===s.get(y)&&(s=s.insert(y,Pr.newInvalidDocument(y)))});let l=sE();return s.forEach((d,f)=>{const y=i.get(d);void 0!==y&&lE(y.mutation,f,oa.empty(),jr.now()),iE(t,f)&&(l=l.insert(d,f))}),l})}}class NK{constructor(e){this.serializer=e,this.Zn=new Map,this.Xn=new Map}getBundleMetadata(e,t){return me.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var r;return this.Zn.set(t.id,{id:(r=t).id,version:r.version,createTime:Ii(r.createTime)}),me.resolve()}getNamedQuery(e,t){return me.resolve(this.Xn.get(t))}saveNamedQuery(e,t){return this.Xn.set(t.name,{name:(r=t).name,query:jP(r.bundledQuery),readTime:Ii(r.readTime)}),me.resolve();var r}}class PK{constructor(){this.overlays=new hi(ct.comparator),this.ts=new Map}getOverlay(e,t){return me.resolve(this.overlays.get(t))}getOverlays(e,t){const r=nd();return me.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.re(e,t,s)}),me.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.ts.get(r);return void 0!==i&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.ts.delete(r)),me.resolve()}getOverlaysForCollection(e,t,r){const i=nd(),s=t.length+1,l=new ct(t.child("")),d=this.overlays.getIteratorFrom(l);for(;d.hasNext();){const f=d.getNext().value,y=f.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===s&&f.largestBatchId>r&&i.set(f.getKey(),f)}return me.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new hi((y,w)=>y-w);const l=this.overlays.getIterator();for(;l.hasNext();){const y=l.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>r){let w=s.get(y.largestBatchId);null===w&&(w=nd(),s=s.insert(y.largestBatchId,w)),w.set(y.getKey(),y)}}const d=nd(),f=s.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach((y,w)=>d.set(y,w)),!(d.size()>=i)););return me.resolve(d)}re(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const l=this.ts.get(i.largestBatchId).delete(r.key);this.ts.set(i.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new OP(t,r));let s=this.ts.get(t);void 0===s&&(s=fn(),this.ts.set(t,s)),this.ts.set(t,s.add(r.key))}}class KP{constructor(){this.es=new dr(ps.ns),this.ss=new dr(ps.rs)}isEmpty(){return this.es.isEmpty()}addReference(e,t){const r=new ps(e,t);this.es=this.es.add(r),this.ss=this.ss.add(r)}os(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.us(new ps(e,t))}cs(e,t){e.forEach(r=>this.removeReference(r,t))}hs(e){const t=new ct(new Ln([])),r=new ps(t,e),i=new ps(t,e+1),s=[];return this.ss.forEachInRange([r,i],l=>{this.us(l),s.push(l.key)}),s}ls(){this.es.forEach(e=>this.us(e))}us(e){this.es=this.es.delete(e),this.ss=this.ss.delete(e)}fs(e){const t=new ct(new Ln([])),r=new ps(t,e),i=new ps(t,e+1);let s=fn();return this.ss.forEachInRange([r,i],l=>{s=s.add(l.key)}),s}containsKey(e){const t=new ps(e,0),r=this.es.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class ps{constructor(e,t){this.key=e,this.ds=t}static ns(e,t){return ct.comparator(e.key,t.key)||sn(e.ds,t.ds)}static rs(e,t){return sn(e.ds,t.ds)||ct.comparator(e.key,t.key)}}class OK{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this._s=new dr(ps.ns)}checkEmpty(e){return me.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const s=this.ws;this.ws++;const l=new NP(s,t,r,i);this.mutationQueue.push(l);for(const d of i)this._s=this._s.add(new ps(d.key,s)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return me.resolve(l)}lookupMutationBatch(e,t){return me.resolve(this.gs(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.ys(t+1),s=i<0?0:i;return me.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return me.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return me.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new ps(t,0),i=new ps(t,Number.POSITIVE_INFINITY),s=[];return this._s.forEachInRange([r,i],l=>{const d=this.gs(l.ds);s.push(d)}),me.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new dr(sn);return t.forEach(i=>{const s=new ps(i,0),l=new ps(i,Number.POSITIVE_INFINITY);this._s.forEachInRange([s,l],d=>{r=r.add(d.ds)})}),me.resolve(this.ps(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;ct.isDocumentKey(s)||(s=s.child(""));const l=new ps(new ct(s),0);let d=new dr(sn);return this._s.forEachWhile(f=>{const y=f.key.path;return!!r.isPrefixOf(y)&&(y.length===i&&(d=d.add(f.ds)),!0)},l),me.resolve(this.ps(d))}ps(e){const t=[];return e.forEach(r=>{const i=this.gs(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){Lt(0===this.Is(t.batchId,"removed")),this.mutationQueue.shift();let r=this._s;return me.forEach(t.mutations,i=>{const s=new ps(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this._s=r})}En(e){}containsKey(e,t){const r=new ps(t,0),i=this._s.firstAfterOrEqual(r);return me.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return me.resolve()}Is(e,t){return this.ys(e)}ys(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}gs(e){const t=this.ys(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class LK{constructor(e){this.Ts=e,this.docs=new hi(ct.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,l=this.Ts(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return me.resolve(r?r.document.mutableCopy():Pr.newInvalidDocument(t))}getEntries(e,t){let r=aa();return t.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Pr.newInvalidDocument(i))}),me.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=aa();const l=t.path,d=new ct(l.child("")),f=this.docs.getIteratorFrom(d);for(;f.hasNext();){const{key:y,value:{document:w}}=f.getNext();if(!l.isPrefixOf(y.path))break;y.path.length>l.length+1||_P(QB(w),r)<=0||(i.has(w.key)||iE(t,w))&&(s=s.insert(w.key,w.mutableCopy()))}return me.resolve(s)}getAllFromCollectionGroup(e,t,r,i){bt()}Es(e,t){return me.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new FK(this)}getSize(e){return me.resolve(this.size)}}class FK extends Oj{constructor(e){super(),this.Jn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Jn.addEntry(e,i)):this.Jn.removeEntry(r)}),me.waitFor(t)}getFromCache(e,t){return this.Jn.getEntry(e,t)}getAllFromCache(e,t){return this.Jn.getEntries(e,t)}}class UK{constructor(e){this.persistence=e,this.As=new Qf(t=>Tm(t),nE),this.lastRemoteSnapshotVersion=zt.min(),this.highestTargetId=0,this.Rs=0,this.vs=new KP,this.targetCount=0,this.bs=Om.vn()}forEachTarget(e,t){return this.As.forEach((r,i)=>t(i)),me.resolve()}getLastRemoteSnapshotVersion(e){return me.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return me.resolve(this.Rs)}allocateTargetId(e){return this.highestTargetId=this.bs.next(),me.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Rs&&(this.Rs=t),me.resolve()}Sn(e){this.As.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.bs=new Om(t),this.highestTargetId=t),e.sequenceNumber>this.Rs&&(this.Rs=e.sequenceNumber)}addTargetData(e,t){return this.Sn(t),this.targetCount+=1,me.resolve()}updateTargetData(e,t){return this.Sn(t),me.resolve()}removeTargetData(e,t){return this.As.delete(t.target),this.vs.hs(t.targetId),this.targetCount-=1,me.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.As.forEach((l,d)=>{d.sequenceNumber<=t&&null===r.get(d.targetId)&&(this.As.delete(l),s.push(this.removeMatchingKeysForTargetId(e,d.targetId)),i++)}),me.waitFor(s).next(()=>i)}getTargetCount(e){return me.resolve(this.targetCount)}getTargetData(e,t){const r=this.As.get(t)||null;return me.resolve(r)}addMatchingKeys(e,t,r){return this.vs.os(t,r),me.resolve()}removeMatchingKeys(e,t,r){this.vs.cs(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(l=>{s.push(i.markPotentiallyOrphaned(e,l))}),me.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.vs.hs(t),me.resolve()}getMatchingKeysForTargetId(e,t){const r=this.vs.fs(t);return me.resolve(r)}containsKey(e,t){return me.resolve(this.vs.containsKey(t))}}class Hj{constructor(e,t){this.Ps={},this.overlays={},this.Vs=new Ga(0),this.Ss=!1,this.Ss=!0,this.referenceDelegate=e(this),this.Ds=new UK(this),this.indexManager=new CK,this.remoteDocumentCache=new LK(r=>this.referenceDelegate.Cs(r)),this.serializer=new gj(t),this.xs=new NK(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Ss=!1,Promise.resolve()}get started(){return this.Ss}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new PK,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Ps[e.toKey()];return r||(r=new OK(t,this.referenceDelegate),this.Ps[e.toKey()]=r),r}getTargetCache(){return this.Ds}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.xs}runTransaction(e,t,r){Ke("MemoryPersistence","Starting transaction:",e);const i=new VK(this.Vs.next());return this.referenceDelegate.Ns(),r(i).next(s=>this.referenceDelegate.ks(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Os(e,t){return me.or(Object.values(this.Ps).map(r=>()=>r.containsKey(e,t)))}}class VK extends XB{constructor(e){super(),this.currentSequenceNumber=e}}class pS{constructor(e){this.persistence=e,this.$s=new KP,this.Ms=null}static Fs(e){return new pS(e)}get Bs(){if(this.Ms)return this.Ms;throw bt()}addReference(e,t,r){return this.$s.addReference(r,t),this.Bs.delete(r.toString()),me.resolve()}removeReference(e,t,r){return this.$s.removeReference(r,t),this.Bs.add(r.toString()),me.resolve()}markPotentiallyOrphaned(e,t){return this.Bs.add(t.toString()),me.resolve()}removeTarget(e,t){this.$s.hs(t.targetId).forEach(i=>this.Bs.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Bs.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}Ns(){this.Ms=new Set}ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return me.forEach(this.Bs,r=>{const i=ct.fromPath(r);return this.Ls(e,i).next(s=>{s||t.removeEntry(i,zt.min())})}).next(()=>(this.Ms=null,t.apply(e)))}updateLimboDocument(e,t){return this.Ls(e,t).next(r=>{r?this.Bs.delete(t.toString()):this.Bs.add(t.toString())})}Cs(e){return 0}Ls(e,t){return me.or([()=>me.resolve(this.$s.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Os(e,t)])}}class BK{constructor(e){this.serializer=e}M(e,t,r,i){const s=new GA("createOrUpgrade",t);var d;r<1&&i>=1&&(e.createObjectStore("owner"),(d=e).createObjectStore("mutationQueues",{keyPath:"userId"}),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",rH,{unique:!0}),d.createObjectStore("documentMutations"),jj(e),function(d){d.createObjectStore("remoteDocuments")}(e));let l=me.resolve();return r<3&&i>=3&&(0!==r&&(function(d){d.deleteObjectStore("targetDocuments"),d.deleteObjectStore("targets"),d.deleteObjectStore("targetGlobal")}(e),jj(e)),l=l.next(()=>function(d){const f=d.store("targetGlobal"),y={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:zt.min().toTimestamp(),targetCount:0};return f.put("targetGlobalKey",y)}(s))),r<4&&i>=4&&(0!==r&&(l=l.next(()=>function(d,f){return f.store("mutations").j().next(y=>{d.deleteObjectStore("mutations"),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",rH,{unique:!0});const w=f.store("mutations"),D=y.map(x=>w.put(x));return me.waitFor(D)})}(e,s))),l=l.next(()=>{!function(d){d.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(l=l.next(()=>this.qs(s))),r<6&&i>=6&&(l=l.next(()=>(function(d){d.createObjectStore("remoteDocumentGlobal")}(e),this.Us(s)))),r<7&&i>=7&&(l=l.next(()=>this.Ks(s))),r<8&&i>=8&&(l=l.next(()=>this.Gs(e,s))),r<9&&i>=9&&(l=l.next(()=>{!function(d){d.objectStoreNames.contains("remoteDocumentChanges")&&d.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(l=l.next(()=>this.Qs(s))),r<11&&i>=11&&(l=l.next(()=>{(function(d){d.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(d){d.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(l=l.next(()=>{!function(d){const f=d.createObjectStore("documentOverlays",{keyPath:E7});f.createIndex("collectionPathOverlayIndex",C7,{unique:!1}),f.createIndex("collectionGroupOverlayIndex",I7,{unique:!1})}(e)})),r<13&&i>=13&&(l=l.next(()=>function(d){const f=d.createObjectStore("remoteDocumentsV14",{keyPath:d7});f.createIndex("documentKeyIndex",h7),f.createIndex("collectionGroupIndex",f7)}(e)).next(()=>this.zs(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(l=l.next(()=>this.js(e,s))),r<15&&i>=15&&(l=l.next(()=>function(d){d.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),d.createObjectStore("indexState",{keyPath:y7}).createIndex("sequenceNumberIndex",v7,{unique:!1}),d.createObjectStore("indexEntries",{keyPath:w7}).createIndex("documentKeyIndex",b7,{unique:!1})}(e))),l}Us(e){let t=0;return e.store("remoteDocuments").Z((r,i)=>{t+=dS(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}qs(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.j().next(i=>me.forEach(i,s=>{const l=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.j("userMutationsIndex",l).next(d=>me.forEach(d,f=>{Lt(f.userId===s.userId);const y=km(this.serializer,f);return Rj(e,s.userId,y).next(()=>{})}))}))}Ks(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.Z((l,d)=>{const f=new Ln(l),y=[0,Uo(f)];s.push(t.get(y).next(w=>w?me.resolve():t.put({targetId:0,path:Uo(f),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>me.waitFor(s))})}Gs(e,t){e.createObjectStore("collectionParents",{keyPath:_7});const r=t.store("collectionParents"),i=new ZP,s=l=>{if(i.add(l)){const d=l.lastSegment(),f=l.popLast();return r.put({collectionId:d,parent:Uo(f)})}};return t.store("remoteDocuments").Z({Y:!0},(l,d)=>{const f=new Ln(l);return s(f.popLast())}).next(()=>t.store("documentMutations").Z({Y:!0},([l,d,f],y)=>{const w=ed(d);return s(w.popLast())}))}Qs(e){const t=e.store("targets");return t.Z((r,i)=>{const s=pE(i),l=_j(this.serializer,s);return t.put(l)})}zs(e,t){const r=t.store("remoteDocuments"),i=[];return r.Z((s,l)=>{const d=t.store("remoteDocumentsV14"),f=(y=l,y.document?new ct(Ln.fromString(y.document.name).popFirst(5)):y.noDocument?ct.fromSegments(y.noDocument.path):y.unknownDocument?ct.fromSegments(y.unknownDocument.path):bt()).path.toArray();var y;const w={prefixPath:f.slice(0,f.length-2),collectionGroup:f[f.length-2],documentId:f[f.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};i.push(d.put(w))}).next(()=>me.waitFor(i))}js(e,t){const r=t.store("mutations"),i=Lj(this.serializer),s=new Hj(pS.Fs,this.serializer.se);return r.j().next(l=>{const d=new Map;return l.forEach(f=>{var y;let w=null!==(y=d.get(f.userId))&&void 0!==y?y:fn();km(this.serializer,f).keys().forEach(D=>w=w.add(D)),d.set(f.userId,w)}),me.forEach(d,(f,y)=>{const w=new ds(y),D=aS.ie(this.serializer,w),x=s.getIndexManager(w),N=hS.ie(w,this.serializer,x,s.referenceDelegate);return new Bj(i,N,D,x).recalculateAndSaveOverlaysForDocumentKeys(new wP(t,Ga.ct),f).next()})})}}function jj(n){n.createObjectStore("targetDocuments",{keyPath:g7}).createIndex("documentTargetsIndex",m7,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",p7,{unique:!0}),n.createObjectStore("targetGlobal")}const YP="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class QP{constructor(e,t,r,i,s,l,d,f,y,w,D=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Ws=s,this.window=l,this.document=d,this.Hs=y,this.Js=w,this.Ys=D,this.Vs=null,this.Ss=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.Xs=null,this.ti=null,this.ei=Number.NEGATIVE_INFINITY,this.ni=x=>Promise.resolve(),!QP.D())throw new ze(we.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new xK(this,i),this.si=t+"main",this.serializer=new gj(f),this.ii=new Hu(this.si,this.Ys,new BK(this.serializer)),this.Ds=new DK(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Lj(this.serializer),this.xs=new mK,this.window&&this.window.localStorage?this.ri=this.window.localStorage:(this.ri=null,!1===w&&Ci("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.oi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ze(we.FAILED_PRECONDITION,YP);return this.ui(),this.ci(),this.ai(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ds.getHighestSequenceNumber(e))}).then(e=>{this.Vs=new Ga(e,this.Hs)}).then(()=>{this.Ss=!0}).catch(e=>(this.ii&&this.ii.close(),Promise.reject(e)))}hi(e){var t=this;return this.ni=function(){var r=(0,Se.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ii.B(function(){var t=(0,Se.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Ws.enqueueAndForget((0,Se.Z)(function*(){t.started&&(yield t.oi())})))}oi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>gS(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.li(e).next(t=>{t||(this.isPrimary=!1,this.Ws.enqueueRetryable(()=>this.ni(!1)))})}).next(()=>this.fi(e)).next(t=>this.isPrimary&&!t?this.di(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(Gf(e))return Ke("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ke("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Ws.enqueueRetryable(()=>this.ni(e)),this.isPrimary=e})}li(e){return wE(e).get("owner").next(t=>me.resolve(this._i(t)))}mi(e){return gS(e).delete(this.clientId)}gi(){var e=this;return(0,Se.Z)(function*(){if(e.isPrimary&&!e.yi(e.ei,18e5)){e.ei=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=hs(r,"clientMetadata");return i.j().next(s=>{const l=e.pi(s,18e5),d=s.filter(f=>-1===l.indexOf(f));return me.forEach(d,f=>i.delete(f.clientId)).next(()=>d)})}).catch(()=>[]);if(e.ri)for(const r of t)e.ri.removeItem(e.Ii(r.clientId))}})()}ai(){this.ti=this.Ws.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.oi().then(()=>this.gi()).then(()=>this.ai()))}_i(e){return!!e&&e.ownerId===this.clientId}fi(e){return this.Js?me.resolve(!0):wE(e).get("owner").next(t=>{if(null!==t&&this.yi(t.leaseTimestampMs,5e3)&&!this.Ti(t.ownerId)){if(this._i(t)&&this.networkEnabled)return!0;if(!this._i(t)){if(!t.allowTabSynchronization)throw new ze(we.FAILED_PRECONDITION,YP);return!1}}return!(!this.networkEnabled||!this.inForeground)||gS(e).j().next(r=>void 0===this.pi(r,5e3).find(i=>{if(this.clientId!==i.clientId){const l=!this.inForeground&&i.inForeground,d=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||l&&d)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Ke("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,Se.Z)(function*(){e.Ss=!1,e.Ei(),e.ti&&(e.ti.cancel(),e.ti=null),e.Ai(),e.Ri(),yield e.ii.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new wP(t,Ga.ct);return e.di(r).next(()=>e.mi(r))}),e.ii.close(),e.vi()})()}pi(e,t){return e.filter(r=>this.yi(r.updateTimeMs,t)&&!this.Ti(r.clientId))}bi(){return this.runTransaction("getActiveClients","readonly",e=>gS(e).j().next(t=>this.pi(t,18e5).map(r=>r.clientId)))}get started(){return this.Ss}getMutationQueue(e,t){return hS.ie(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Ds}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new IK(e,this.serializer.se.databaseId)}getDocumentOverlayCache(e){return aS.ie(this.serializer,e)}getBundleCache(){return this.xs}runTransaction(e,t,r){Ke("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",s=15===(l=this.Ys)?T7:14===l?aH:13===l?oH:12===l?D7:11===l?sH:void bt();var l;let d;return this.ii.runTransaction(e,i,s,f=>(d=new wP(f,this.Vs?this.Vs.next():Ga.ct),"readwrite-primary"===t?this.li(d).next(y=>!!y||this.fi(d)).next(y=>{if(!y)throw Ci(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Ws.enqueueRetryable(()=>this.ni(!1)),new ze(we.FAILED_PRECONDITION,JB);return r(d)}).next(y=>this.wi(d).next(()=>y)):this.Pi(d).next(()=>r(d)))).then(f=>(d.raiseOnCommittedEvent(),f))}Pi(e){return wE(e).get("owner").next(t=>{if(null!==t&&this.yi(t.leaseTimestampMs,5e3)&&!this.Ti(t.ownerId)&&!this._i(t)&&!(this.Js||this.allowTabSynchronization&&t.allowTabSynchronization))throw new ze(we.FAILED_PRECONDITION,YP)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return wE(e).put("owner",t)}static D(){return Hu.D()}di(e){const t=wE(e);return t.get("owner").next(r=>this._i(r)?(Ke("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):me.resolve())}yi(e,t){const r=Date.now();return!(e<r-t||e>r&&(Ci(`Detected an update time that is in the future: ${e} > ${r}`),1))}ui(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Xs=()=>{this.Ws.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.oi()))},this.document.addEventListener("visibilitychange",this.Xs),this.inForeground="visible"===this.document.visibilityState)}Ai(){this.Xs&&(this.document.removeEventListener("visibilitychange",this.Xs),this.Xs=null)}ci(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ei();const t=/(?:Version|Mobile)\/1[456]/;(0,V.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.Ws.enterRestrictedMode(!0),this.Ws.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}Ri(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ti(e){var t;try{const r=null!==(null===(t=this.ri)||void 0===t?void 0:t.getItem(this.Ii(e)));return Ke("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Ci("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ei(){if(this.ri)try{this.ri.setItem(this.Ii(this.clientId),String(Date.now()))}catch(e){Ci("Failed to set zombie client id.",e)}}vi(){if(this.ri)try{this.ri.removeItem(this.Ii(this.clientId))}catch{}}Ii(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function wE(n){return hs(n,"owner")}function gS(n){return hs(n,"clientMetadata")}function JP(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class XP{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Vi=r,this.Si=i}static Di(e,t){let r=fn(),i=fn();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new XP(e,t.fromCache,r,i)}}class $j{constructor(){this.Ci=!1}initialize(e,t){this.xi=e,this.indexManager=t,this.Ci=!0}getDocumentsMatchingQuery(e,t,r,i){return this.Ni(e,t).next(s=>s||this.ki(e,t,i,r)).next(s=>s||this.Oi(e,t))}Ni(e,t){if(MH(t))return me.resolve(null);let r=Vo(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=XA(t,null,"F"),r=Vo(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const l=fn(...s);return this.xi.getDocuments(e,l).next(d=>this.indexManager.getMinOffset(e,r).next(f=>{const y=this.$i(t,d);return this.Mi(t,y,l,f.readTime)?this.Ni(e,XA(t,null,"F")):this.Fi(e,y,t,f)}))})))}ki(e,t,r,i){return MH(t)||i.isEqual(zt.min())?this.Oi(e,t):this.xi.getDocuments(e,r).next(s=>{const l=this.$i(t,s);return this.Mi(t,l,r,i)?this.Oi(e,t):(pP()<=na.in.DEBUG&&Ke("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),MP(t)),this.Fi(e,l,t,YB(i,-1)))})}$i(e,t){let r=new dr(PH(e));return t.forEach((i,s)=>{iE(e,s)&&(r=r.add(s))}),r}Mi(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Oi(e,t){return pP()<=na.in.DEBUG&&Ke("QueryEngine","Using full collection scan to execute query:",MP(t)),this.xi.getDocumentsMatchingQuery(e,t,za.min())}Fi(e,t,r,i){return this.xi.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(l=>{s=s.insert(l.key,l)}),s))}}class HK{constructor(e,t,r,i){this.persistence=e,this.Bi=t,this.serializer=i,this.Li=new hi(sn),this.qi=new Qf(s=>Tm(s),nE),this.Ui=new Map,this.Ki=e.getRemoteDocumentCache(),this.Ds=e.getTargetCache(),this.xs=e.getBundleCache(),this.Gi(r)}Gi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Bj(this.Ki,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ki.setIndexManager(this.indexManager),this.Bi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Li))}}function zj(n,e,t,r){return new HK(n,e,t,r)}function Gj(n,e){return eO.apply(this,arguments)}function eO(){return eO=(0,Se.Z)(function*(n,e){const t=gt(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.Gi(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{const l=[],d=[];let f=fn();for(const y of i){l.push(y.batchId);for(const w of y.mutations)f=f.add(w.key)}for(const y of s){d.push(y.batchId);for(const w of y.mutations)f=f.add(w.key)}return t.localDocuments.getDocuments(r,f).next(y=>({Qi:y,removedBatchIds:l,addedBatchIds:d}))})})}),eO.apply(this,arguments)}function jK(n,e){const t=gt(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=t.Ki.newChangeBuffer({trackRemovals:!0});return function(l,d,f,y){const w=f.batch,D=w.keys();let x=me.resolve();return D.forEach(N=>{x=x.next(()=>y.getEntry(d,N)).next(U=>{const Q=f.docVersions.get(N);Lt(null!==Q),U.version.compareTo(Q)<0&&(w.applyToRemoteDocument(U,f),U.isValidDocument()&&(U.setReadTime(f.commitVersion),y.addEntry(U)))})}),x.next(()=>l.mutationQueue.removeMutationBatch(d,w))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let d=fn();for(let f=0;f<l.mutationResults.length;++f)l.mutationResults[f].transformResults.length>0&&(d=d.add(l.batch.mutations[f].key));return d}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function Wj(n){const e=gt(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ds.getLastRemoteSnapshotVersion(t))}function $K(n,e){const t=gt(n),r=e.snapshotVersion;let i=t.Li;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const l=t.Ki.newChangeBuffer({trackRemovals:!0});i=t.Li;const d=[];e.targetChanges.forEach((w,D)=>{const x=i.get(D);if(!x)return;d.push(t.Ds.removeMatchingKeys(s,w.removedDocuments,D).next(()=>t.Ds.addMatchingKeys(s,w.addedDocuments,D)));let N=x.withSequenceNumber(s.currentSequenceNumber);var U,Q,X;e.targetMismatches.has(D)?N=N.withResumeToken(Yi.EMPTY_BYTE_STRING,zt.min()).withLastLimboFreeSnapshotVersion(zt.min()):w.resumeToken.approximateByteSize()>0&&(N=N.withResumeToken(w.resumeToken,r)),i=i.insert(D,N),Q=N,X=w,(0===(U=x).resumeToken.approximateByteSize()||Q.snapshotVersion.toMicroseconds()-U.snapshotVersion.toMicroseconds()>=3e8||X.addedDocuments.size+X.modifiedDocuments.size+X.removedDocuments.size>0)&&d.push(t.Ds.updateTargetData(s,N))});let f=aa(),y=fn();if(e.documentUpdates.forEach(w=>{e.resolvedLimboDocuments.has(w)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(s,w))}),d.push(qj(s,l,e.documentUpdates).next(w=>{f=w.zi,y=w.ji})),!r.isEqual(zt.min())){const w=t.Ds.getLastRemoteSnapshotVersion(s).next(D=>t.Ds.setTargetsMetadata(s,s.currentSequenceNumber,r));d.push(w)}return me.waitFor(d).next(()=>l.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,f,y)).next(()=>f)}).then(s=>(t.Li=i,s))}function qj(n,e,t){let r=fn(),i=fn();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let l=aa();return t.forEach((d,f)=>{const y=s.get(d);f.isFoundDocument()!==y.isFoundDocument()&&(i=i.add(d)),f.isNoDocument()&&f.version.isEqual(zt.min())?(e.removeEntry(d,f.readTime),l=l.insert(d,f)):!y.isValidDocument()||f.version.compareTo(y.version)>0||0===f.version.compareTo(y.version)&&y.hasPendingWrites?(e.addEntry(f),l=l.insert(d,f)):Ke("LocalStore","Ignoring outdated watch update for ",d,". Current version:",y.version," Watch version:",f.version)}),{zi:l,ji:i}})}function zK(n,e){const t=gt(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function av(n,e){const t=gt(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ds.getTargetData(r,e).next(s=>s?(i=s,me.resolve(i)):t.Ds.allocateTargetId(r).next(l=>(i=new Xf(e,l,0,r.currentSequenceNumber),t.Ds.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Li.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Li=t.Li.insert(r.targetId,r),t.qi.set(e,r.targetId)),r})}function lv(n,e,t){return tO.apply(this,arguments)}function tO(){return tO=(0,Se.Z)(function*(n,e,t){const r=gt(n),i=r.Li.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,l=>r.persistence.referenceDelegate.removeTarget(l,i)))}catch(l){if(!Gf(l))throw l;Ke("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}r.Li=r.Li.remove(e),r.qi.delete(i.target)}),tO.apply(this,arguments)}function mS(n,e,t){const r=gt(n);let i=zt.min(),s=fn();return r.persistence.runTransaction("Execute query","readonly",l=>function(d,f,y){const w=gt(d),D=w.qi.get(y);return void 0!==D?me.resolve(w.Li.get(D)):w.Ds.getTargetData(f,y)}(r,l,Vo(e)).next(d=>{if(d)return i=d.lastLimboFreeSnapshotVersion,r.Ds.getMatchingKeysForTargetId(l,d.targetId).next(f=>{s=f})}).next(()=>r.Bi.getDocumentsMatchingQuery(l,e,t?i:zt.min(),t?s:fn())).next(d=>(Yj(r,NH(e),d),{documents:d,Wi:s})))}function Zj(n,e){const t=gt(n),r=gt(t.Ds),i=t.Li.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",s=>r.ne(s,e).next(l=>l?l.target:null))}function Kj(n,e){const t=gt(n),r=t.Ui.get(e)||zt.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Ki.getAllFromCollectionGroup(i,e,YB(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(Yj(t,e,i),i))}function Yj(n,e,t){let r=n.Ui.get(e)||zt.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.Ui.set(e,r)}function nO(){return nO=(0,Se.Z)(function*(n,e,t,r){const i=gt(n);let s=fn(),l=aa();for(const y of t){const w=e.Hi(y.metadata.name);y.document&&(s=s.add(w));const D=e.Ji(y);D.setReadTime(e.Yi(y.metadata.readTime)),l=l.insert(w,D)}const d=i.Ki.newChangeBuffer({trackRemovals:!0}),f=yield av(i,(y=r,Vo(Jy(Ln.fromString(`__bundle__/docs/${y}`)))));var y;return i.persistence.runTransaction("Apply bundle documents","readwrite",y=>qj(y,d,l).next(w=>(d.apply(y),w)).next(w=>i.Ds.removeMatchingKeysForTargetId(y,f.targetId).next(()=>i.Ds.addMatchingKeys(y,s,f.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(y,w.zi,w.ji)).next(()=>w.zi)))}),nO.apply(this,arguments)}function WK(n,e){return rO.apply(this,arguments)}function rO(){return rO=(0,Se.Z)(function*(n,e,t=fn()){const r=yield av(n,Vo(jP(e.bundledQuery))),i=gt(n);return i.persistence.runTransaction("Save named query","readwrite",s=>{const l=Ii(e.readTime);if(r.snapshotVersion.compareTo(l)>=0)return i.xs.saveNamedQuery(s,e);const d=r.withResumeToken(Yi.EMPTY_BYTE_STRING,l);return i.Li=i.Li.insert(d.targetId,d),i.Ds.updateTargetData(s,d).next(()=>i.Ds.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.Ds.addMatchingKeys(s,t,r.targetId)).next(()=>i.xs.saveNamedQuery(s,e))})}),rO.apply(this,arguments)}function Qj(n,e){return`firestore_clients_${n}_${e}`}function Jj(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function iO(n,e){return`firestore_targets_${n}_${e}`}class _S{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Zi(e,t,r){const i=JSON.parse(r);let s,l="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return l&&i.error&&(l="string"==typeof i.error.message&&"string"==typeof i.error.code,l&&(s=new ze(i.error.code,i.error.message))),l?new _S(e,t,i.state,s):(Ci("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Xi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class bE{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Zi(e,t){const r=JSON.parse(t);let i,s="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new ze(r.error.code,r.error.message))),s?new bE(e,r.state,i):(Ci("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Xi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class yS{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,s=eS();for(let l=0;i&&l<r.activeTargetIds.length;++l)i=tH(r.activeTargetIds[l]),s=s.add(r.activeTargetIds[l]);return i?new yS(e,s):(Ci("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class sO{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new sO(t.clientId,t.onlineState):(Ci("SharedClientState",`Failed to parse online state: ${e}`),null)}}class oO{constructor(){this.activeTargetIds=eS()}tr(e){this.activeTargetIds=this.activeTargetIds.add(e)}er(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Xi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class aO{constructor(e,t,r,i,s){this.window=e,this.Ws=t,this.persistenceKey=r,this.nr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.sr=this.ir.bind(this),this.rr=new hi(sn),this.started=!1,this.ur=[];const l=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.cr=Qj(this.persistenceKey,this.nr),this.ar=`firestore_sequence_number_${this.persistenceKey}`,this.rr=this.rr.insert(this.nr,new oO),this.hr=new RegExp(`^firestore_clients_${l}_([^_]*)$`),this.lr=new RegExp(`^firestore_mutations_${l}_(\\d+)(?:_(.*))?$`),this.dr=new RegExp(`^firestore_targets_${l}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this._r=function(d){return`firestore_bundle_loaded_v2_${d}`}(this.persistenceKey),this.window.addEventListener("storage",this.sr)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Se.Z)(function*(){const t=yield e.syncEngine.bi();for(const i of t){if(i===e.nr)continue;const s=e.getItem(Qj(e.persistenceKey,i));if(s){const l=yS.Zi(i,s);l&&(e.rr=e.rr.insert(l.clientId,l))}}e.mr();const r=e.storage.getItem(e.wr);if(r){const i=e.gr(r);i&&e.yr(i)}for(const i of e.ur)e.ir(i);e.ur=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ar,JSON.stringify(e))}getAllActiveQueryTargets(){return this.pr(this.rr)}isActiveQueryTarget(e){let t=!1;return this.rr.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Ir(e,"pending")}updateMutationState(e,t,r){this.Ir(e,t,r),this.Tr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(iO(this.persistenceKey,e));if(r){const i=bE.Zi(e,r);i&&(t=i.state)}}return this.Er.tr(e),this.mr(),t}removeLocalQueryTarget(e){this.Er.er(e),this.mr()}isLocalQueryTarget(e){return this.Er.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(iO(this.persistenceKey,e))}updateQueryState(e,t,r){this.Ar(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Tr(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Rr(e)}notifyBundleLoaded(e){this.vr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.sr),this.removeItem(this.cr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Ke("SharedClientState","READ",e,t),t}setItem(e,t){Ke("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Ke("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ir(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Ke("SharedClientState","EVENT",r.key,r.newValue),r.key===this.cr)return void Ci("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Ws.enqueueRetryable((0,Se.Z)(function*(){if(t.started){if(null!==r.key)if(t.hr.test(r.key)){if(null==r.newValue){const i=t.br(r.key);return t.Pr(i,null)}{const i=t.Vr(r.key,r.newValue);if(i)return t.Pr(i.clientId,i)}}else if(t.lr.test(r.key)){if(null!==r.newValue){const i=t.Sr(r.key,r.newValue);if(i)return t.Dr(i)}}else if(t.dr.test(r.key)){if(null!==r.newValue){const i=t.Cr(r.key,r.newValue);if(i)return t.Nr(i)}}else if(r.key===t.wr){if(null!==r.newValue){const i=t.gr(r.newValue);if(i)return t.yr(i)}}else if(r.key===t.ar){const i=function(s){let l=Ga.ct;if(null!=s)try{const d=JSON.parse(s);Lt("number"==typeof d),l=d}catch(d){Ci("SharedClientState","Failed to read sequence number from WebStorage",d)}return l}(r.newValue);i!==Ga.ct&&t.sequenceNumberHandler(i)}else if(r.key===t._r){const i=t.kr(r.newValue);yield Promise.all(i.map(s=>t.syncEngine.Or(s)))}}else t.ur.push(r)}))}}get Er(){return this.rr.get(this.nr)}mr(){this.setItem(this.cr,this.Er.Xi())}Ir(e,t,r){const i=new _S(this.currentUser,e,t,r),s=Jj(this.persistenceKey,this.currentUser,e);this.setItem(s,i.Xi())}Tr(e){const t=Jj(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Rr(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.nr,onlineState:e}))}Ar(e,t,r){const i=iO(this.persistenceKey,e),s=new bE(e,t,r);this.setItem(i,s.Xi())}vr(e){const t=JSON.stringify(Array.from(e));this.setItem(this._r,t)}br(e){const t=this.hr.exec(e);return t?t[1]:null}Vr(e,t){const r=this.br(e);return yS.Zi(r,t)}Sr(e,t){const r=this.lr.exec(e),i=Number(r[1]);return _S.Zi(new ds(void 0!==r[2]?r[2]:null),i,t)}Cr(e,t){const r=this.dr.exec(e),i=Number(r[1]);return bE.Zi(i,t)}gr(e){return sO.Zi(e)}kr(e){return JSON.parse(e)}Dr(e){var t=this;return(0,Se.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.$r(e.batchId,e.state,e.error);Ke("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Nr(e){return this.syncEngine.Mr(e.targetId,e.state,e.error)}Pr(e,t){const r=t?this.rr.insert(e,t):this.rr.remove(e),i=this.pr(this.rr),s=this.pr(r),l=[],d=[];return s.forEach(f=>{i.has(f)||l.push(f)}),i.forEach(f=>{s.has(f)||d.push(f)}),this.syncEngine.Fr(l,d).then(()=>{this.rr=r})}yr(e){this.rr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}pr(e){let t=eS();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class Xj{constructor(){this.Br=new oO,this.Lr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Br.tr(e),this.Lr[e]||"not-current"}updateQueryState(e,t,r){this.Lr[e]=t}removeLocalQueryTarget(e){this.Br.er(e)}isLocalQueryTarget(e){return this.Br.activeTargetIds.has(e)}clearQueryState(e){delete this.Lr[e]}getAllActiveQueryTargets(){return this.Br.activeTargetIds}isActiveQueryTarget(e){return this.Br.activeTargetIds.has(e)}start(){return this.Br=new oO,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class qK{qr(e){}shutdown(){}}class e${constructor(){this.Ur=()=>this.Kr(),this.Gr=()=>this.Qr(),this.zr=[],this.jr()}qr(e){this.zr.push(e)}shutdown(){window.removeEventListener("online",this.Ur),window.removeEventListener("offline",this.Gr)}jr(){window.addEventListener("online",this.Ur),window.addEventListener("offline",this.Gr)}Kr(){Ke("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.zr)e(0)}Qr(){Ke("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.zr)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let vS=null;function lO(){return null===vS?vS=268435456+Math.round(2147483648*Math.random()):vS++,"0x"+vS.toString(16)}const ZK={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class KK{constructor(e){this.Wr=e.Wr,this.Hr=e.Hr}Jr(e){this.Yr=e}Zr(e){this.Xr=e}onMessage(e){this.eo=e}close(){this.Hr()}send(e){this.Wr(e)}no(){this.Yr()}so(e){this.Xr(e)}io(e){this.eo(e)}}const uo="WebChannelConnection";class YK extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.ro=(e.ssl?"https":"http")+"://"+e.host,this.oo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get uo(){return!1}co(e,t,r,i,s){const l=lO(),d=this.ao(e,t);Ke("RestConnection",`Sending RPC '${e}' ${l}:`,d,r);const f={};return this.ho(f,i,s),this.lo(e,d,f,r).then(y=>(Ke("RestConnection",`Received RPC '${e}' ${l}: `,y),y),y=>{throw Xc("RestConnection",`RPC '${e}' ${l} failed with error: `,y,"url: ",d,"request:",r),y})}fo(e,t,r,i,s,l){return this.co(e,t,r,i,s)}ho(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Wy,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}ao(e,t){return`${this.ro}/v1/${t}:${ZK[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}lo(e,t,r,i){const s=lO();return new Promise((l,d)=>{const f=new W8;f.setWithCredentials(!0),f.listenOnce($8.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case fP.NO_ERROR:const w=f.getResponseJson();Ke(uo,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(w)),l(w);break;case fP.TIMEOUT:Ke(uo,`RPC '${e}' ${s} timed out`),d(new ze(we.DEADLINE_EXCEEDED,"Request time out"));break;case fP.HTTP_ERROR:const D=f.getStatus();if(Ke(uo,`RPC '${e}' ${s} failed with status:`,D,"response text:",f.getResponseText()),D>0){let x=f.getResponseJson();Array.isArray(x)&&(x=x[0]);const N=x?.error;if(N&&N.status&&N.message){const U=function(Q){const X=Q.toLowerCase().replace(/_/g,"-");return Object.values(we).indexOf(X)>=0?X:we.UNKNOWN}(N.status);d(new ze(U,N.message))}else d(new ze(we.UNKNOWN,"Server responded with status "+f.getStatus()))}else d(new ze(we.UNAVAILABLE,"Connection failed."));break;default:bt()}}finally{Ke(uo,`RPC '${e}' ${s} completed.`)}});const y=JSON.stringify(i);Ke(uo,`RPC '${e}' ${s} sending request:`,i),f.send(t,"POST",y,r,15)})}wo(e,t,r){const i=lO(),s=[this.ro,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=H8(),d=j8(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(f.xmlHttpFactory=new G8({})),this.ho(f.initMessageHeaders,t,r),f.encodeInitMessageHeaders=!0;const y=s.join("");Ke(uo,`Creating RPC '${e}' stream ${i}: ${y}`,f);const w=l.createWebChannel(y,f);let D=!1,x=!1;const N=new KK({Wr:Q=>{x?Ke(uo,`Not sending because RPC '${e}' stream ${i} is closed:`,Q):(D||(Ke(uo,`Opening RPC '${e}' stream ${i} transport.`),w.open(),D=!0),Ke(uo,`RPC '${e}' stream ${i} sending:`,Q),w.send(Q))},Hr:()=>w.close()}),U=(Q,X,ae)=>{Q.listen(X,Le=>{try{ae(Le)}catch(je){setTimeout(()=>{throw je},0)}})};return U(w,jA.EventType.OPEN,()=>{x||Ke(uo,`RPC '${e}' stream ${i} transport opened.`)}),U(w,jA.EventType.CLOSE,()=>{x||(x=!0,Ke(uo,`RPC '${e}' stream ${i} transport closed`),N.so())}),U(w,jA.EventType.ERROR,Q=>{x||(x=!0,Xc(uo,`RPC '${e}' stream ${i} transport errored:`,Q),N.so(new ze(we.UNAVAILABLE,"The operation could not be completed")))}),U(w,jA.EventType.MESSAGE,Q=>{var X;if(!x){const ae=Q.data[0];Lt(!!ae);const Le=ae,je=Le.error||(null===(X=Le[0])||void 0===X?void 0:X.error);if(je){Ke(uo,`RPC '${e}' stream ${i} received error:`,je);const Ye=je.status;let St=function(mn){const nn=ji[mn];if(void 0!==nn)return JH(nn)}(Ye),Nt=je.message;void 0===St&&(St=we.INTERNAL,Nt="Unknown error status: "+Ye+" with message "+je.message),x=!0,N.so(new ze(St,Nt)),w.close()}else Ke(uo,`RPC '${e}' stream ${i} received:`,ae),N.io(ae)}}),U(d,z8.STAT_EVENT,Q=>{Q.stat===zB.PROXY?Ke(uo,`RPC '${e}' stream ${i} detected buffering proxy`):Q.stat===zB.NOPROXY&&Ke(uo,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{N.no()},0),N}}function t$(){return typeof window<"u"?window:null}function wS(){return typeof document<"u"?document:null}function EE(n){return new sK(n,!0)}class uO{constructor(e,t,r=1e3,i=1.5,s=6e4){this.Ws=e,this.timerId=t,this._o=r,this.mo=i,this.yo=s,this.po=0,this.Io=null,this.To=Date.now(),this.reset()}reset(){this.po=0}Eo(){this.po=this.yo}Ao(e){this.cancel();const t=Math.floor(this.po+this.Ro()),r=Math.max(0,Date.now()-this.To),i=Math.max(0,t-r);i>0&&Ke("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.po} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Io=this.Ws.enqueueAfterDelay(this.timerId,i,()=>(this.To=Date.now(),e())),this.po*=this.mo,this.po<this._o&&(this.po=this._o),this.po>this.yo&&(this.po=this.yo)}vo(){null!==this.Io&&(this.Io.skipDelay(),this.Io=null)}cancel(){null!==this.Io&&(this.Io.cancel(),this.Io=null)}Ro(){return(Math.random()-.5)*this.po}}class n${constructor(e,t,r,i,s,l,d,f){this.Ws=e,this.bo=r,this.Po=i,this.connection=s,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=d,this.listener=f,this.state=0,this.Vo=0,this.So=null,this.Do=null,this.stream=null,this.Co=new uO(e,t)}xo(){return 1===this.state||5===this.state||this.No()}No(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.ko()}stop(){var e=this;return(0,Se.Z)(function*(){e.xo()&&(yield e.close(0))})()}Oo(){this.state=0,this.Co.reset()}$o(){this.No()&&null===this.So&&(this.So=this.Ws.enqueueAfterDelay(this.bo,6e4,()=>this.Mo()))}Fo(e){this.Bo(),this.stream.send(e)}Mo(){var e=this;return(0,Se.Z)(function*(){if(e.No())return e.close(0)})()}Bo(){this.So&&(this.So.cancel(),this.So=null)}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}close(e,t){var r=this;return(0,Se.Z)(function*(){r.Bo(),r.Lo(),r.Co.cancel(),r.Vo++,4!==e?r.Co.reset():t&&t.code===we.RESOURCE_EXHAUSTED?(Ci(t.toString()),Ci("Using maximum backoff delay to prevent overloading the backend."),r.Co.Eo()):t&&t.code===we.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.qo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Zr(t)})()}qo(){}auth(){this.state=1;const e=this.Uo(this.Vo),t=this.Vo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Vo===t&&this.Ko(r,i)},r=>{e(()=>{const i=new ze(we.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Go(i)})})}Ko(e,t){const r=this.Uo(this.Vo);this.stream=this.Qo(e,t),this.stream.Jr(()=>{r(()=>(this.state=2,this.Do=this.Ws.enqueueAfterDelay(this.Po,1e4,()=>(this.No()&&(this.state=3),Promise.resolve())),this.listener.Jr()))}),this.stream.Zr(i=>{r(()=>this.Go(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}ko(){var e=this;this.state=5,this.Co.Ao((0,Se.Z)(function*(){e.state=0,e.start()}))}Go(e){return Ke("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Uo(e){return t=>{this.Ws.enqueueAndForget(()=>this.Vo===e?t():(Ke("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class QK extends n${constructor(e,t,r,i,s,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,l),this.serializer=s}Qo(e,t){return this.connection.wo("Listen",e,t)}onMessage(e){this.Co.reset();const t=function lK(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(f=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===f?1:"REMOVE"===f?2:"CURRENT"===f?3:"RESET"===f?4:bt(),i=e.targetChange.targetIds||[],s=function(f,y){return f.useProto3Json?(Lt(void 0===y||"string"==typeof y),Yi.fromBase64String(y||"")):(Lt(void 0===y||y instanceof Uint8Array),Yi.fromUint8Array(y||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,d=l&&function(f){const y=void 0===f.code?we.UNKNOWN:JH(f.code);return new ze(y,f.message||"")}(l);t=new ej(r,i,s,d||null)}else if("documentChange"in e){const r=e.documentChange,i=rd(n,r.document.name),s=Ii(r.document.updateTime),l=r.document.createTime?Ii(r.document.createTime):zt.min(),d=new fs({mapValue:{fields:r.document.fields}}),f=Pr.newFoundDocument(i,s,l,d);t=new sS(r.targetIds||[],r.removedTargetIds||[],f.key,f)}else if("documentDelete"in e){const r=e.documentDelete,i=rd(n,r.document),s=r.readTime?Ii(r.readTime):zt.min(),l=Pr.newNoDocument(i,s);t=new sS([],r.removedTargetIds||[],l.key,l)}else if("documentRemove"in e){const r=e.documentRemove,i=rd(n,r.document);t=new sS([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return bt();{const r=e.filter,s=new eK(r.count||0);t=new XH(r.targetId,s)}}var f;return t}(this.serializer,e),r=function(i){if(!("targetChange"in i))return zt.min();const s=i.targetChange;return s.targetIds&&s.targetIds.length?zt.min():s.readTime?Ii(s.readTime):zt.min()}(e);return this.listener.zo(t,r)}jo(e){const t={};t.database=hE(this.serializer),t.addTarget=function(i,s){let l;const d=s.target;return l=YA(d)?{documents:cj(i,d)}:{query:HP(i,d)},l.targetId=s.targetId,s.resumeToken.approximateByteSize()>0?l.resumeToken=ij(i,s.resumeToken):s.snapshotVersion.compareTo(zt.min())>0&&(l.readTime=rv(i,s.snapshotVersion.toTimestamp())),l}(this.serializer,e);const r=function cK(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return bt()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Fo(t)}Wo(e){const t={};t.database=hE(this.serializer),t.removeTarget=e,this.Fo(t)}}class JK extends n${constructor(e,t,r,i,s,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,l),this.serializer=s,this.Ho=!1}get Jo(){return this.Ho}start(){this.Ho=!1,this.lastStreamToken=void 0,super.start()}qo(){this.Ho&&this.Yo([])}Qo(e,t){return this.connection.wo("Write",e,t)}onMessage(e){if(Lt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Ho){this.Co.reset();const t=function uK(n,e){return n&&n.length>0?(Lt(void 0!==e),n.map(t=>function(r,i){let s=Ii(r.updateTime?r.updateTime:i);return s.isEqual(zt.min())&&(s=Ii(i)),new K7(s,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Ii(e.commitTime);return this.listener.Zo(r,t)}return Lt(!e.writeResults||0===e.writeResults.length),this.Ho=!0,this.listener.Xo()}tu(){const e={};e.database=hE(this.serializer),this.Fo(e)}Yo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>fE(this.serializer,r))};this.Fo(t)}}class XK extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.eu=!1}nu(){if(this.eu)throw new ze(we.FAILED_PRECONDITION,"The client has already been terminated.")}co(e,t,r){return this.nu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.connection.co(e,t,r,i,s)).catch(i=>{throw"FirebaseError"===i.name?(i.code===we.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new ze(we.UNKNOWN,i.toString())})}fo(e,t,r,i){return this.nu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,l])=>this.connection.fo(e,t,r,s,l,i)).catch(s=>{throw"FirebaseError"===s.name?(s.code===we.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new ze(we.UNKNOWN,s.toString())})}terminate(){this.eu=!0}}class tY{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.su=0,this.iu=null,this.ru=!0}ou(){0===this.su&&(this.uu("Unknown"),this.iu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.iu=null,this.cu("Backend didn't respond within 10 seconds."),this.uu("Offline"),Promise.resolve())))}au(e){"Online"===this.state?this.uu("Unknown"):(this.su++,this.su>=1&&(this.hu(),this.cu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.uu("Offline")))}set(e){this.hu(),this.su=0,"Online"===e&&(this.ru=!1),this.uu(e)}uu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}cu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ru?(Ci(t),this.ru=!1):Ke("OnlineStateTracker",t)}hu(){null!==this.iu&&(this.iu.cancel(),this.iu=null)}}class nY{constructor(e,t,r,i,s){var l=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.lu=[],this.fu=new Map,this.du=new Set,this.wu=[],this._u=s,this._u.qr(d=>{r.enqueueAndForget((0,Se.Z)(function*(){var f;rp(l)&&(Ke("RemoteStore","Restarting streams for network reachability change."),yield(f=(0,Se.Z)(function*(y){const w=gt(y);w.du.add(4),yield uv(w),w.mu.set("Unknown"),w.du.delete(4),yield CE(w)}),function(y){return f.apply(this,arguments)})(l))}))}),this.mu=new tY(r,i)}}function CE(n){return dO.apply(this,arguments)}function dO(){return dO=(0,Se.Z)(function*(n){if(rp(n))for(const e of n.wu)yield e(!0)}),dO.apply(this,arguments)}function uv(n){return hO.apply(this,arguments)}function hO(){return hO=(0,Se.Z)(function*(n){for(const e of n.wu)yield e(!1)}),hO.apply(this,arguments)}function bS(n,e){const t=gt(n);t.fu.has(e.targetId)||(t.fu.set(e.targetId,e),gO(t)?pO(t):dv(t).No()&&fO(t,e))}function IE(n,e){const t=gt(n),r=dv(t);t.fu.delete(e),r.No()&&r$(t,e),0===t.fu.size&&(r.No()?r.$o():rp(t)&&t.mu.set("Unknown"))}function fO(n,e){n.gu.Ot(e.targetId),dv(n).jo(e)}function r$(n,e){n.gu.Ot(e),dv(n).Wo(e)}function pO(n){n.gu=new tK({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ne:e=>n.fu.get(e)||null}),dv(n).start(),n.mu.ou()}function gO(n){return rp(n)&&!dv(n).xo()&&n.fu.size>0}function rp(n){return 0===gt(n).du.size}function i$(n){n.gu=void 0}function rY(n){return mO.apply(this,arguments)}function mO(){return mO=(0,Se.Z)(function*(n){n.fu.forEach((e,t)=>{fO(n,e)})}),mO.apply(this,arguments)}function iY(n,e){return _O.apply(this,arguments)}function _O(){return _O=(0,Se.Z)(function*(n,e){i$(n),gO(n)?(n.mu.au(e),pO(n)):n.mu.set("Unknown")}),_O.apply(this,arguments)}function sY(n,e,t){return yO.apply(this,arguments)}function yO(){return yO=(0,Se.Z)(function*(n,e,t){if(n.mu.set("Online"),e instanceof ej&&2===e.state&&e.cause)try{yield(r=(0,Se.Z)(function*(i,s){const l=s.cause;for(const d of s.targetIds)i.fu.has(d)&&(yield i.remoteSyncer.rejectListen(d,l),i.fu.delete(d),i.gu.removeTarget(d))}),function(i,s){return r.apply(this,arguments)})(n,e)}catch(r){Ke("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield ES(n,r)}else if(e instanceof sS?n.gu.Kt(e):e instanceof XH?n.gu.Jt(e):n.gu.zt(e),!t.isEqual(zt.min()))try{const r=yield Wj(n.localStore);t.compareTo(r)>=0&&(yield function(i,s){const l=i.gu.Xt(s);return l.targetChanges.forEach((d,f)=>{if(d.resumeToken.approximateByteSize()>0){const y=i.fu.get(f);y&&i.fu.set(f,y.withResumeToken(d.resumeToken,s))}}),l.targetMismatches.forEach(d=>{const f=i.fu.get(d);if(!f)return;i.fu.set(d,f.withResumeToken(Yi.EMPTY_BYTE_STRING,f.snapshotVersion)),r$(i,d);const y=new Xf(f.target,d,1,f.sequenceNumber);fO(i,y)}),i.remoteSyncer.applyRemoteEvent(l)}(n,t))}catch(r){Ke("RemoteStore","Failed to raise snapshot:",r),yield ES(n,r)}var r}),yO.apply(this,arguments)}function ES(n,e,t){return vO.apply(this,arguments)}function vO(){return vO=(0,Se.Z)(function*(n,e,t){if(!Gf(e))throw e;n.du.add(1),yield uv(n),n.mu.set("Offline"),t||(t=()=>Wj(n.localStore)),n.asyncQueue.enqueueRetryable((0,Se.Z)(function*(){Ke("RemoteStore","Retrying IndexedDB access"),yield t(),n.du.delete(1),yield CE(n)}))}),vO.apply(this,arguments)}function s$(n,e){return e().catch(t=>ES(n,t,e))}function cv(n){return wO.apply(this,arguments)}function wO(){return wO=(0,Se.Z)(function*(n){const e=gt(n),t=ip(e);let r=e.lu.length>0?e.lu[e.lu.length-1].batchId:-1;for(;oY(e);)try{const i=yield zK(e.localStore,r);if(null===i){0===e.lu.length&&t.$o();break}r=i.batchId,aY(e,i)}catch(i){yield ES(e,i)}o$(e)&&a$(e)}),wO.apply(this,arguments)}function oY(n){return rp(n)&&n.lu.length<10}function aY(n,e){n.lu.push(e);const t=ip(n);t.No()&&t.Jo&&t.Yo(e.mutations)}function o$(n){return rp(n)&&!ip(n).xo()&&n.lu.length>0}function a$(n){ip(n).start()}function lY(n){return bO.apply(this,arguments)}function bO(){return bO=(0,Se.Z)(function*(n){ip(n).tu()}),bO.apply(this,arguments)}function uY(n){return EO.apply(this,arguments)}function EO(){return EO=(0,Se.Z)(function*(n){const e=ip(n);for(const t of n.lu)e.Yo(t.mutations)}),EO.apply(this,arguments)}function cY(n,e,t){return CO.apply(this,arguments)}function CO(){return CO=(0,Se.Z)(function*(n,e,t){const r=n.lu.shift(),i=PP.from(r,e,t);yield s$(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield cv(n)}),CO.apply(this,arguments)}function dY(n,e){return IO.apply(this,arguments)}function IO(){return IO=(0,Se.Z)(function*(n,e){var t;e&&ip(n).Jo&&(yield(t=(0,Se.Z)(function*(r,i){if(QH(s=i.code)&&s!==we.ABORTED){const l=r.lu.shift();ip(r).Oo(),yield s$(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,i)),yield cv(r)}var s}),function(r,i){return t.apply(this,arguments)})(n,e)),o$(n)&&a$(n)}),IO.apply(this,arguments)}function l$(n,e){return DO.apply(this,arguments)}function DO(){return DO=(0,Se.Z)(function*(n,e){const t=gt(n);t.asyncQueue.verifyOperationInProgress(),Ke("RemoteStore","RemoteStore received new credentials");const r=rp(t);t.du.add(3),yield uv(t),r&&t.mu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.du.delete(3),yield CE(t)}),DO.apply(this,arguments)}function TO(n,e){return AO.apply(this,arguments)}function AO(){return AO=(0,Se.Z)(function*(n,e){const t=gt(n);e?(t.du.delete(2),yield CE(t)):e||(t.du.add(2),yield uv(t),t.mu.set("Unknown"))}),AO.apply(this,arguments)}function dv(n){return n.yu||(n.yu=function(e,t,r){const i=gt(e);return i.nu(),new QK(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(n.datastore,n.asyncQueue,{Jr:rY.bind(null,n),Zr:iY.bind(null,n),zo:sY.bind(null,n)}),n.wu.push(function(){var e=(0,Se.Z)(function*(t){t?(n.yu.Oo(),gO(n)?pO(n):n.mu.set("Unknown")):(yield n.yu.stop(),i$(n))});return function(t){return e.apply(this,arguments)}}())),n.yu}function ip(n){return n.pu||(n.pu=function(e,t,r){const i=gt(e);return i.nu(),new JK(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(n.datastore,n.asyncQueue,{Jr:lY.bind(null,n),Zr:dY.bind(null,n),Xo:uY.bind(null,n),Zo:cY.bind(null,n)}),n.wu.push(function(){var e=(0,Se.Z)(function*(t){t?(n.pu.Oo(),yield cv(n)):(yield n.pu.stop(),n.lu.length>0&&(Ke("RemoteStore",`Stopping write stream with ${n.lu.length} pending writes`),n.lu=[]))});return function(t){return e.apply(this,arguments)}}())),n.pu}class SO{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Ki,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}static createAndSchedule(e,t,r,i,s){const l=Date.now()+r,d=new SO(e,t,l,i,s);return d.start(r),d}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new ze(we.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function hv(n,e){if(Ci("AsyncQueue",`${e}: ${n}`),Gf(n))return new ze(we.UNAVAILABLE,`${e}: ${n}`);throw n}class fv{constructor(e){this.comparator=e?(t,r)=>e(t,r)||ct.comparator(t.key,r.key):(t,r)=>ct.comparator(t.key,r.key),this.keyedMap=sE(),this.sortedSet=new hi(this.comparator)}static emptySet(e){return new fv(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof fv)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new fv;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class u${constructor(){this.Iu=new hi(ct.comparator)}track(e){const t=e.doc.key,r=this.Iu.get(t);r?0!==e.type&&3===r.type?this.Iu=this.Iu.insert(t,e):3===e.type&&1!==r.type?this.Iu=this.Iu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Iu=this.Iu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Iu=this.Iu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Iu=this.Iu.remove(t):1===e.type&&2===r.type?this.Iu=this.Iu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Iu=this.Iu.insert(t,{type:2,doc:e.doc}):bt():this.Iu=this.Iu.insert(t,e)}Tu(){const e=[];return this.Iu.inorderTraversal((t,r)=>{e.push(r)}),e}}class pv{constructor(e,t,r,i,s,l,d,f,y){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=l,this.syncStateChanged=d,this.excludesMetadataChanges=f,this.hasCachedResults=y}static fromInitialDocuments(e,t,r,i,s){const l=[];return t.forEach(d=>{l.push({type:0,doc:d})}),new pv(e,t,fv.emptySet(t),l,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&rE(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class hY{constructor(){this.Eu=void 0,this.listeners=[]}}class fY{constructor(){this.queries=new Qf(e=>kH(e),rE),this.onlineState="Unknown",this.Au=new Set}}function xO(n,e){return RO.apply(this,arguments)}function RO(){return RO=(0,Se.Z)(function*(n,e){const t=gt(n),r=e.query;let i=!1,s=t.queries.get(r);if(s||(i=!0,s=new hY),i)try{s.Eu=yield t.onListen(r)}catch(l){const d=hv(l,`Initialization of query '${MP(e.query)}' failed`);return void e.onError(d)}t.queries.set(r,s),s.listeners.push(e),e.Ru(t.onlineState),s.Eu&&e.vu(s.Eu)&&NO(t)}),RO.apply(this,arguments)}function MO(n,e){return kO.apply(this,arguments)}function kO(){return kO=(0,Se.Z)(function*(n,e){const t=gt(n),r=e.query;let i=!1;const s=t.queries.get(r);if(s){const l=s.listeners.indexOf(e);l>=0&&(s.listeners.splice(l,1),i=0===s.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),kO.apply(this,arguments)}function pY(n,e){const t=gt(n);let r=!1;for(const i of e){const l=t.queries.get(i.query);if(l){for(const d of l.listeners)d.vu(i)&&(r=!0);l.Eu=i}}r&&NO(t)}function gY(n,e,t){const r=gt(n),i=r.queries.get(e);if(i)for(const s of i.listeners)s.onError(t);r.queries.delete(e)}function NO(n){n.Au.forEach(e=>{e.next()})}class PO{constructor(e,t,r){this.query=e,this.bu=t,this.Pu=!1,this.Vu=null,this.onlineState="Unknown",this.options=r||{}}vu(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new pv(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Pu?this.Su(e)&&(this.bu.next(e),t=!0):this.Du(e,this.onlineState)&&(this.Cu(e),t=!0),this.Vu=e,t}onError(e){this.bu.error(e)}Ru(e){this.onlineState=e;let t=!1;return this.Vu&&!this.Pu&&this.Du(this.Vu,e)&&(this.Cu(this.Vu),t=!0),t}Du(e,t){return!e.fromCache||(!this.options.xu||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Su(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Vu&&this.Vu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Cu(e){e=pv.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Pu=!0,this.bu.next(e)}}class mY{constructor(e,t){this.Nu=e,this.byteLength=t}ku(){return"metadata"in this.Nu}}class c${constructor(e){this.serializer=e}Hi(e){return rd(this.serializer,e)}Ji(e){return e.metadata.exists?uj(this.serializer,e.document,!1):Pr.newNoDocument(this.Hi(e.metadata.name),this.Yi(e.metadata.readTime))}Yi(e){return Ii(e)}}class _Y{constructor(e,t,r){this.Ou=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=d$(e)}$u(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Nu.namedQuery)this.queries.push(e.Nu.namedQuery);else if(e.Nu.documentMetadata){this.documents.push({metadata:e.Nu.documentMetadata}),e.Nu.documentMetadata.exists||++t;const r=Ln.fromString(e.Nu.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Nu.document&&(this.documents[this.documents.length-1].document=e.Nu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Mu(e){const t=new Map,r=new c$(this.serializer);for(const i of e)if(i.metadata.queries){const s=r.Hi(i.metadata.name);for(const l of i.metadata.queries){const d=(t.get(l)||fn()).add(s);t.set(l,d)}}return t}complete(){var e=this;return(0,Se.Z)(function*(){const t=yield function GK(n,e,t,r){return nO.apply(this,arguments)}(e.localStore,new c$(e.serializer),e.documents,e.Ou.id),r=e.Mu(e.documents);for(const i of e.queries)yield WK(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Fu:e.collectionGroups,Bu:t}})()}}function d$(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class h${constructor(e){this.key=e}}class f${constructor(e){this.key=e}}class p${constructor(e,t){this.query=e,this.Lu=t,this.qu=null,this.hasCachedResults=!1,this.current=!1,this.Uu=fn(),this.mutatedKeys=fn(),this.Ku=PH(e),this.Gu=new fv(this.Ku)}get Qu(){return this.Lu}zu(e,t){const r=t?t.ju:new u$,i=t?t.Gu:this.Gu;let s=t?t.mutatedKeys:this.mutatedKeys,l=i,d=!1;const f="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,y="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((w,D)=>{const x=i.get(w),N=iE(this.query,D)?D:null,U=!!x&&this.mutatedKeys.has(x.key),Q=!!N&&(N.hasLocalMutations||this.mutatedKeys.has(N.key)&&N.hasCommittedMutations);let X=!1;x&&N?x.data.isEqual(N.data)?U!==Q&&(r.track({type:3,doc:N}),X=!0):this.Wu(x,N)||(r.track({type:2,doc:N}),X=!0,(f&&this.Ku(N,f)>0||y&&this.Ku(N,y)<0)&&(d=!0)):!x&&N?(r.track({type:0,doc:N}),X=!0):x&&!N&&(r.track({type:1,doc:x}),X=!0,(f||y)&&(d=!0)),X&&(N?(l=l.add(N),s=Q?s.add(w):s.delete(w)):(l=l.delete(w),s=s.delete(w)))}),null!==this.query.limit)for(;l.size>this.query.limit;){const w="F"===this.query.limitType?l.last():l.first();l=l.delete(w.key),s=s.delete(w.key),r.track({type:1,doc:w})}return{Gu:l,ju:r,Mi:d,mutatedKeys:s}}Wu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.Gu;this.Gu=e.Gu,this.mutatedKeys=e.mutatedKeys;const s=e.ju.Tu();s.sort((y,w)=>function(D,x){const N=U=>{switch(U){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return bt()}};return N(D)-N(x)}(y.type,w.type)||this.Ku(y.doc,w.doc)),this.Hu(r);const l=t?this.Ju():[],d=0===this.Uu.size&&this.current?1:0,f=d!==this.qu;return this.qu=d,0!==s.length||f?{snapshot:new pv(this.query,e.Gu,i,s,e.mutatedKeys,0===d,f,!1,!!r&&r.resumeToken.approximateByteSize()>0),Yu:l}:{Yu:l}}Ru(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Gu:this.Gu,ju:new u$,mutatedKeys:this.mutatedKeys,Mi:!1},!1)):{Yu:[]}}Zu(e){return!this.Lu.has(e)&&!!this.Gu.has(e)&&!this.Gu.get(e).hasLocalMutations}Hu(e){e&&(e.addedDocuments.forEach(t=>this.Lu=this.Lu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Lu=this.Lu.delete(t)),this.current=e.current)}Ju(){if(!this.current)return[];const e=this.Uu;this.Uu=fn(),this.Gu.forEach(r=>{this.Zu(r.key)&&(this.Uu=this.Uu.add(r.key))});const t=[];return e.forEach(r=>{this.Uu.has(r)||t.push(new f$(r))}),this.Uu.forEach(r=>{e.has(r)||t.push(new h$(r))}),t}Xu(e){this.Lu=e.Wi,this.Uu=fn();const t=this.zu(e.documents);return this.applyChanges(t,!0)}tc(){return pv.fromInitialDocuments(this.query,this.Gu,this.mutatedKeys,0===this.qu,this.hasCachedResults)}}class yY{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class vY{constructor(e){this.key=e,this.ec=!1}}class wY{constructor(e,t,r,i,s,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=l,this.nc={},this.sc=new Qf(d=>kH(d),rE),this.ic=new Map,this.rc=new Set,this.oc=new hi(ct.comparator),this.uc=new Map,this.cc=new KP,this.ac={},this.hc=new Map,this.lc=Om.bn(),this.onlineState="Unknown",this.fc=void 0}get isPrimaryClient(){return!0===this.fc}}function bY(n,e){return OO.apply(this,arguments)}function OO(){return OO=(0,Se.Z)(function*(n,e){const t=i1(n);let r,i;const s=t.sc.get(e);if(s)r=s.targetId,t.sharedClientState.addLocalQueryTarget(r),i=s.view.tc();else{const l=yield av(t.localStore,Vo(e));t.isPrimaryClient&&bS(t.remoteStore,l);const d=t.sharedClientState.addLocalQueryTarget(l.targetId);r=l.targetId,i=yield LO(t,e,r,"current"===d,l.resumeToken)}return i}),OO.apply(this,arguments)}function LO(n,e,t,r,i){return FO.apply(this,arguments)}function FO(){return FO=(0,Se.Z)(function*(n,e,t,r,i){n.dc=(D,x,N)=>{return(U=(0,Se.Z)(function*(Q,X,ae,Le){let je=X.view.zu(ae);je.Mi&&(je=yield mS(Q.localStore,X.query,!1).then(({documents:Nt})=>X.view.zu(Nt,je)));const Ye=Le&&Le.targetChanges.get(X.targetId),St=X.view.applyChanges(je,Q.isPrimaryClient,Ye);return qO(Q,X.targetId,St.Yu),St.snapshot}),function(Q,X,ae,Le){return U.apply(this,arguments)})(n,D,x,N);var U};const s=yield mS(n.localStore,e,!0),l=new p$(e,s.Wi),d=l.zu(s.documents),f=cE.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),y=l.applyChanges(d,n.isPrimaryClient,f);qO(n,t,y.Yu);const w=new yY(e,t,l);return n.sc.set(e,w),n.ic.has(t)?n.ic.get(t).push(e):n.ic.set(t,[e]),y.snapshot}),FO.apply(this,arguments)}function EY(n,e){return UO.apply(this,arguments)}function UO(){return UO=(0,Se.Z)(function*(n,e){const t=gt(n),r=t.sc.get(e),i=t.ic.get(r.targetId);if(i.length>1)return t.ic.set(r.targetId,i.filter(s=>!rE(s,e))),void t.sc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield lv(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),IE(t.remoteStore,r.targetId),gv(t,r.targetId)}).catch(zf))):(gv(t,r.targetId),yield lv(t.localStore,r.targetId,!0))}),UO.apply(this,arguments)}function VO(){return VO=(0,Se.Z)(function*(n,e,t){const r=s1(n);try{const i=yield function(s,l){const d=gt(s),f=jr.now(),y=l.reduce((x,N)=>x.add(N.key),fn());let w,D;return d.persistence.runTransaction("Locally write mutations","readwrite",x=>{let N=aa(),U=fn();return d.Ki.getEntries(x,y).next(Q=>{N=Q,N.forEach((X,ae)=>{ae.isValidDocument()||(U=U.add(X))})}).next(()=>d.localDocuments.getOverlayedDocuments(x,N)).next(Q=>{w=Q;const X=[];for(const ae of l){const Le=Q7(ae,w.get(ae.key).overlayedDocument);null!=Le&&X.push(new ch(ae.key,Le,yH(Le.value.mapValue),$r.exists(!0)))}return d.mutationQueue.addMutationBatch(x,f,X,l)}).next(Q=>{D=Q;const X=Q.applyToLocalDocumentSet(w,U);return d.documentOverlayCache.saveOverlays(x,Q.batchId,X)})}).then(()=>({batchId:D.batchId,changes:LH(w)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,l,d){let f=s.ac[s.currentUser.toKey()];f||(f=new hi(sn)),f=f.insert(l,d),s.ac[s.currentUser.toKey()]=f}(r,i.batchId,t),yield dh(r,i.changes),yield cv(r.remoteStore)}catch(i){const s=hv(i,"Failed to persist write");t.reject(s)}}),VO.apply(this,arguments)}function g$(n,e){return BO.apply(this,arguments)}function BO(){return BO=(0,Se.Z)(function*(n,e){const t=gt(n);try{const r=yield $K(t.localStore,e);e.targetChanges.forEach((i,s)=>{const l=t.uc.get(s);l&&(Lt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?l.ec=!0:i.modifiedDocuments.size>0?Lt(l.ec):i.removedDocuments.size>0&&(Lt(l.ec),l.ec=!1))}),yield dh(t,r,e)}catch(r){yield zf(r)}}),BO.apply(this,arguments)}function m$(n,e,t){const r=gt(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.sc.forEach((s,l)=>{const d=l.view.Ru(e);d.snapshot&&i.push(d.snapshot)}),function(s,l){const d=gt(s);d.onlineState=l;let f=!1;d.queries.forEach((y,w)=>{for(const D of w.listeners)D.Ru(l)&&(f=!0)}),f&&NO(d)}(r.eventManager,e),i.length&&r.nc.zo(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function IY(n,e,t){return HO.apply(this,arguments)}function HO(){return HO=(0,Se.Z)(function*(n,e,t){const r=gt(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.uc.get(e),s=i&&i.key;if(s){let l=new hi(ct.comparator);l=l.insert(s,Pr.newNoDocument(s,zt.min()));const d=fn().add(s),f=new uE(zt.min(),new Map,new dr(sn),l,d);yield g$(r,f),r.oc=r.oc.remove(s),r.uc.delete(e),ZO(r)}else yield lv(r.localStore,e,!1).then(()=>gv(r,e,t)).catch(zf)}),HO.apply(this,arguments)}function DY(n,e){return jO.apply(this,arguments)}function jO(){return jO=(0,Se.Z)(function*(n,e){const t=gt(n),r=e.batch.batchId;try{const i=yield jK(t.localStore,e);WO(t,r,null),GO(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield dh(t,i)}catch(i){yield zf(i)}}),jO.apply(this,arguments)}function TY(n,e,t){return $O.apply(this,arguments)}function $O(){return $O=(0,Se.Z)(function*(n,e,t){const r=gt(n);try{const i=yield function(s,l){const d=gt(s);return d.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let y;return d.mutationQueue.lookupMutationBatch(f,l).next(w=>(Lt(null!==w),y=w.keys(),d.mutationQueue.removeMutationBatch(f,w))).next(()=>d.mutationQueue.performConsistencyCheck(f)).next(()=>d.documentOverlayCache.removeOverlaysForBatchId(f,y,l)).next(()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,y)).next(()=>d.localDocuments.getDocuments(f,y))})}(r.localStore,e);WO(r,e,t),GO(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield dh(r,i)}catch(i){yield zf(i)}}),$O.apply(this,arguments)}function zO(){return zO=(0,Se.Z)(function*(n,e){const t=gt(n);rp(t.remoteStore)||Ke("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(s){const l=gt(s);return l.persistence.runTransaction("Get highest unacknowledged batch id","readonly",d=>l.mutationQueue.getHighestUnacknowledgedBatchId(d))}(t.localStore);if(-1===r)return void e.resolve();const i=t.hc.get(r)||[];i.push(e),t.hc.set(r,i)}catch(r){const i=hv(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),zO.apply(this,arguments)}function GO(n,e){(n.hc.get(e)||[]).forEach(t=>{t.resolve()}),n.hc.delete(e)}function WO(n,e,t){const r=gt(n);let i=r.ac[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.ac[r.currentUser.toKey()]=i}}function gv(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.ic.get(e))n.sc.delete(r),t&&n.nc.wc(r,t);n.ic.delete(e),n.isPrimaryClient&&n.cc.hs(e).forEach(r=>{n.cc.containsKey(r)||_$(n,r)})}function _$(n,e){n.rc.delete(e.path.canonicalString());const t=n.oc.get(e);null!==t&&(IE(n.remoteStore,t),n.oc=n.oc.remove(e),n.uc.delete(t),ZO(n))}function qO(n,e,t){for(const r of t)r instanceof h$?(n.cc.addReference(r.key,e),SY(n,r)):r instanceof f$?(Ke("SyncEngine","Document no longer in limbo: "+r.key),n.cc.removeReference(r.key,e),n.cc.containsKey(r.key)||_$(n,r.key)):bt()}function SY(n,e){const t=e.key,r=t.path.canonicalString();n.oc.get(t)||n.rc.has(r)||(Ke("SyncEngine","New document in limbo: "+t),n.rc.add(r),ZO(n))}function ZO(n){for(;n.rc.size>0&&n.oc.size<n.maxConcurrentLimboResolutions;){const e=n.rc.values().next().value;n.rc.delete(e);const t=new ct(Ln.fromString(e)),r=n.lc.next();n.uc.set(r,new vY(t)),n.oc=n.oc.insert(t,r),bS(n.remoteStore,new Xf(Vo(Jy(t.path)),r,2,Ga.ct))}}function dh(n,e,t){return KO.apply(this,arguments)}function KO(){return KO=(0,Se.Z)(function*(n,e,t){const r=gt(n),i=[],s=[],l=[];var d;r.sc.isEmpty()||(r.sc.forEach((d,f)=>{l.push(r.dc(f,e,t).then(y=>{if((y||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(f.targetId,y?.fromCache?"not-current":"current"),y){i.push(y);const w=XP.Di(f.targetId,y);s.push(w)}}))}),yield Promise.all(l),r.nc.zo(i),yield(d=(0,Se.Z)(function*(f,y){const w=gt(f);try{yield w.persistence.runTransaction("notifyLocalViewChanges","readwrite",D=>me.forEach(y,x=>me.forEach(x.Vi,N=>w.persistence.referenceDelegate.addReference(D,x.targetId,N)).next(()=>me.forEach(x.Si,N=>w.persistence.referenceDelegate.removeReference(D,x.targetId,N)))))}catch(D){if(!Gf(D))throw D;Ke("LocalStore","Failed to update sequence numbers: "+D)}for(const D of y){const x=D.targetId;if(!D.fromCache){const N=w.Li.get(x),Q=N.withLastLimboFreeSnapshotVersion(N.snapshotVersion);w.Li=w.Li.insert(x,Q)}}}),function(f,y){return d.apply(this,arguments)})(r.localStore,s))}),KO.apply(this,arguments)}function xY(n,e){return YO.apply(this,arguments)}function YO(){return YO=(0,Se.Z)(function*(n,e){const t=gt(n);if(!t.currentUser.isEqual(e)){Ke("SyncEngine","User change. New user:",e.toKey());const r=yield Gj(t.localStore,e);t.currentUser=e,(i=t).hc.forEach(l=>{l.forEach(d=>{d.reject(new ze(we.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.hc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield dh(t,r.Qi)}var i}),YO.apply(this,arguments)}function RY(n,e){const t=gt(n),r=t.uc.get(e);if(r&&r.ec)return fn().add(r.key);{let i=fn();const s=t.ic.get(e);if(!s)return i;for(const l of s){const d=t.sc.get(l);i=i.unionWith(d.view.Qu)}return i}}function MY(n,e){return QO.apply(this,arguments)}function QO(){return QO=(0,Se.Z)(function*(n,e){const t=gt(n),r=yield mS(t.localStore,e.query,!0),i=e.view.Xu(r);return t.isPrimaryClient&&qO(t,e.targetId,i.Yu),i}),QO.apply(this,arguments)}function kY(n,e){return JO.apply(this,arguments)}function JO(){return JO=(0,Se.Z)(function*(n,e){const t=gt(n);return Kj(t.localStore,e).then(r=>dh(t,r))}),JO.apply(this,arguments)}function NY(n,e,t,r){return XO.apply(this,arguments)}function XO(){return XO=(0,Se.Z)(function*(n,e,t,r){const i=gt(n),s=yield function(l,d){const f=gt(l),y=gt(f.mutationQueue);return f.persistence.runTransaction("Lookup mutation documents","readonly",w=>y.In(w,d).next(D=>D?f.localDocuments.getDocuments(w,D):me.resolve(null)))}(i.localStore,e);var d;null!==s?("pending"===t?yield cv(i.remoteStore):"acknowledged"===t||"rejected"===t?(WO(i,e,r||null),GO(i,e),d=e,gt(gt(i.localStore).mutationQueue).En(d)):bt(),yield dh(i,s)):Ke("SyncEngine","Cannot apply mutation batch with id: "+e)}),XO.apply(this,arguments)}function e1(){return e1=(0,Se.Z)(function*(n,e){const t=gt(n);if(i1(t),s1(t),!0===e&&!0!==t.fc){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield y$(t,r.toArray());t.fc=!0,yield TO(t.remoteStore,!0);for(const s of i)bS(t.remoteStore,s)}else if(!1===e&&!1!==t.fc){const r=[];let i=Promise.resolve();t.ic.forEach((s,l)=>{t.sharedClientState.isLocalQueryTarget(l)?r.push(l):i=i.then(()=>(gv(t,l),lv(t.localStore,l,!0))),IE(t.remoteStore,l)}),yield i,yield y$(t,r),function(s){const l=gt(s);l.uc.forEach((d,f)=>{IE(l.remoteStore,f)}),l.cc.ls(),l.uc=new Map,l.oc=new hi(ct.comparator)}(t),t.fc=!1,yield TO(t.remoteStore,!1)}}),e1.apply(this,arguments)}function y$(n,e,t){return t1.apply(this,arguments)}function t1(){return t1=(0,Se.Z)(function*(n,e,t){const r=gt(n),i=[],s=[];for(const l of e){let d;const f=r.ic.get(l);if(f&&0!==f.length){d=yield av(r.localStore,Vo(f[0]));for(const y of f){const w=r.sc.get(y),D=yield MY(r,w);D.snapshot&&s.push(D.snapshot)}}else{const y=yield Zj(r.localStore,l);d=yield av(r.localStore,y),yield LO(r,v$(y),l,!1,d.resumeToken)}i.push(d)}return r.nc.zo(s),i}),t1.apply(this,arguments)}function v$(n){return RH(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function OY(n){const e=gt(n);return gt(gt(e.localStore).persistence).bi()}function LY(n,e,t,r){return n1.apply(this,arguments)}function n1(){return n1=(0,Se.Z)(function*(n,e,t,r){const i=gt(n);if(i.fc)return void Ke("SyncEngine","Ignoring unexpected query state notification.");const s=i.ic.get(e);if(s&&s.length>0)switch(t){case"current":case"not-current":{const l=yield Kj(i.localStore,NH(s[0])),d=uE.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,Yi.EMPTY_BYTE_STRING);yield dh(i,l,d);break}case"rejected":yield lv(i.localStore,e,!0),gv(i,e,r);break;default:bt()}}),n1.apply(this,arguments)}function FY(n,e,t){return r1.apply(this,arguments)}function r1(){return r1=(0,Se.Z)(function*(n,e,t){const r=i1(n);if(r.fc){for(const i of e){if(r.ic.has(i)){Ke("SyncEngine","Adding an already active target "+i);continue}const s=yield Zj(r.localStore,i),l=yield av(r.localStore,s);yield LO(r,v$(s),l.targetId,!1,l.resumeToken),bS(r.remoteStore,l)}for(const i of t)r.ic.has(i)&&(yield lv(r.localStore,i,!1).then(()=>{IE(r.remoteStore,i),gv(r,i)}).catch(zf))}}),r1.apply(this,arguments)}function i1(n){const e=gt(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=g$.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=RY.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=IY.bind(null,e),e.nc.zo=pY.bind(null,e.eventManager),e.nc.wc=gY.bind(null,e.eventManager),e}function s1(n){const e=gt(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=DY.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=TY.bind(null,e),e}class CS{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,Se.Z)(function*(){t.serializer=EE(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return zj(this.persistence,new $j,e.initialUser,this.serializer)}createPersistence(e){return new Hj(pS.Fs,this.serializer)}createSharedClientState(e){return new Xj}terminate(){var e=this;return(0,Se.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class o1 extends CS{constructor(e,t,r){super(),this.mc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,Se.Z)(function*(){yield t().call(r,e),yield r.mc.initialize(r,e),yield s1(r.mc.syncEngine),yield cv(r.mc.remoteStore),yield r.persistence.hi(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return zj(this.persistence,new $j,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new AK(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const r=new l7(t,this.persistence);return new a7(e.asyncQueue,r)}createPersistence(e){const t=JP(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?la.withCacheSize(this.cacheSizeBytes):la.DEFAULT;return new QP(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,t$(),wS(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new Xj}}class w$ extends o1{constructor(e,t){super(e,t,!1),this.mc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,Se.Z)(function*(){yield t().call(r,e);const i=r.mc.syncEngine;r.sharedClientState instanceof aO&&(r.sharedClientState.syncEngine={$r:NY.bind(null,i),Mr:LY.bind(null,i),Fr:FY.bind(null,i),bi:OY.bind(null,i),Or:kY.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.hi(function(){var s=(0,Se.Z)(function*(l){yield function PY(n,e){return e1.apply(this,arguments)}(r.mc.syncEngine,l),r.gcScheduler&&(l&&!r.gcScheduler.started?r.gcScheduler.start():l||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(l&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():l||r.indexBackfillerScheduler.stop())});return function(l){return s.apply(this,arguments)}}())})()}createSharedClientState(e){const t=t$();if(!aO.D(t))throw new ze(we.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=JP(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new aO(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class mv{initialize(e,t){var r=this;return(0,Se.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>m$(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=xY.bind(null,r.syncEngine),yield TO(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new fY}createDatastore(e){const t=EE(e.databaseInfo.databaseId),r=new YK(e.databaseInfo);return new XK(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,s=d=>m$(this.syncEngine,d,0),l=e$.D()?new e$:new qK,new nY(t,r,i,s,l);var t,r,i,s,l}createSyncEngine(e,t){return function(r,i,s,l,d,f,y){const w=new wY(r,i,s,l,d,f);return y&&(w.fc=!0),w}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,Se.Z)(function*(t){const r=gt(t);Ke("RemoteStore","RemoteStore shutting down."),r.du.add(5),yield uv(r),r._u.shutdown(),r.mu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function b$(n,e=10240){let t=0;return{read:()=>(0,Se.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,Se.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class IS{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.gc(this.observer.next,e)}error(e){this.observer.error?this.gc(this.observer.error,e):Ci("Uncaught Error in snapshot listener:",e.toString())}yc(){this.muted=!0}gc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class VY{constructor(e,t){this.Ic=e,this.serializer=t,this.metadata=new Ki,this.buffer=new Uint8Array,this.Tc=new TextDecoder("utf-8"),this.Ec().then(r=>{r&&r.ku()?this.metadata.resolve(r.Nu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.Nu)}`))},r=>this.metadata.reject(r))}close(){return this.Ic.cancel()}getMetadata(){var e=this;return(0,Se.Z)(function*(){return e.metadata.promise})()}_c(){var e=this;return(0,Se.Z)(function*(){return yield e.getMetadata(),e.Ec()})()}Ec(){var e=this;return(0,Se.Z)(function*(){const t=yield e.Ac();if(null===t)return null;const r=e.Tc.decode(t),i=Number(r);isNaN(i)&&e.Rc(`length string (${r}) is not valid number`);const s=yield e.vc(i);return new mY(JSON.parse(s),t.length+i)})()}bc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Ac(){var e=this;return(0,Se.Z)(function*(){for(;e.bc()<0&&!(yield e.Pc()););if(0===e.buffer.length)return null;const t=e.bc();t<0&&e.Rc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}vc(e){var t=this;return(0,Se.Z)(function*(){for(;t.buffer.length<e;)(yield t.Pc())&&t.Rc("Reached the end of bundle when more is expected.");const r=t.Tc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Rc(e){throw this.Ic.cancel(),new Error(`Invalid bundle format: ${e}`)}Pc(){var e=this;return(0,Se.Z)(function*(){const t=yield e.Ic.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class BY{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,Se.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new ze(we.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,Se.Z)(function*(s,l){const d=gt(s),f=hE(d.serializer)+"/documents",y={documents:l.map(N=>dE(d.serializer,N))},w=yield d.fo("BatchGetDocuments",f,y,l.length),D=new Map;w.forEach(N=>{const U=function aK(n,e){return"found"in e?function(t,r){Lt(!!r.found);const i=rd(t,r.found.name),s=Ii(r.found.updateTime),l=r.found.createTime?Ii(r.found.createTime):zt.min(),d=new fs({mapValue:{fields:r.found.fields}});return Pr.newFoundDocument(i,s,l,d)}(n,e):"missing"in e?function(t,r){Lt(!!r.missing),Lt(!!r.readTime);const i=rd(t,r.missing),s=Ii(r.readTime);return Pr.newNoDocument(i,s)}(n,e):bt()}(d.serializer,N);D.set(U.key.toString(),U)});const x=[];return l.forEach(N=>{const U=D.get(N.toString());Lt(!!U),x.push(U)}),x}),function(s,l){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new nv(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Se.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const s=ct.fromPath(i);e.mutations.push(new kP(s,e.precondition(s)))}),yield(r=(0,Se.Z)(function*(i,s){const l=gt(i),d=hE(l.serializer)+"/documents",f={writes:s.map(y=>fE(l.serializer,y))};yield l.co("Commit",d,f)}),function(i,s){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw bt();t=zt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new ze(we.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(zt.min())?$r.exists(!1):$r.updateTime(t):$r.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(zt.min()))throw new ze(we.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return $r.updateTime(t)}return $r.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class HY{constructor(e,t,r,i,s){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=s,this.Vc=r.maxAttempts,this.Co=new uO(this.asyncQueue,"transaction_retry")}run(){this.Vc-=1,this.Sc()}Sc(){var e=this;this.Co.Ao((0,Se.Z)(function*(){const t=new BY(e.datastore),r=e.Dc(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(s=>{e.Cc(s)}))}).catch(i=>{e.Cc(i)})}))}Dc(e){try{const t=this.updateFunction(e);return!Y0(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Cc(e){this.Vc>0&&this.xc(e)?(this.Vc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Sc(),Promise.resolve()))):this.deferred.reject(e)}xc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!QH(t)}return!1}}class jY{constructor(e,t,r,i){var s=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=ds.UNAUTHENTICATED,this.clientId=ZB.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var l=(0,Se.Z)(function*(d){Ke("FirestoreClient","Received user=",d.uid),yield s.authCredentialListener(d),s.user=d});return function(d){return l.apply(this,arguments)}}()),this.appCheckCredentials.start(r,l=>(Ke("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}getConfiguration(){var e=this;return(0,Se.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new ze(we.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Ki;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Se.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=hv(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function DS(n,e){return a1.apply(this,arguments)}function a1(){return a1=(0,Se.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Ke("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,Se.Z)(function*(s){r.isEqual(s)||(yield Gj(e.localStore,s),r=s)});return function(s){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),a1.apply(this,arguments)}function l1(n,e){return u1.apply(this,arguments)}function u1(){return u1=(0,Se.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield c1(n);Ke("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>l$(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,s)=>l$(e.remoteStore,s)),n._onlineComponents=e}),u1.apply(this,arguments)}function E$(n){return"FirebaseError"===n.name?n.code===we.FAILED_PRECONDITION||n.code===we.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function c1(n){return d1.apply(this,arguments)}function d1(){return d1=(0,Se.Z)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Ke("FirestoreClient","Using user provided OfflineComponentProvider");try{yield DS(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!E$(t))throw t;Xc("Error using user provided cache. Falling back to memory cache: "+t),yield DS(n,new CS)}}else Ke("FirestoreClient","Using default OfflineComponentProvider"),yield DS(n,new CS);return n._offlineComponents}),d1.apply(this,arguments)}function TS(n){return h1.apply(this,arguments)}function h1(){return h1=(0,Se.Z)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Ke("FirestoreClient","Using user provided OnlineComponentProvider"),yield l1(n,n._uninitializedComponentsProvider._online)):(Ke("FirestoreClient","Using default OnlineComponentProvider"),yield l1(n,new mv))),n._onlineComponents}),h1.apply(this,arguments)}function C$(n){return c1(n).then(e=>e.persistence)}function AS(n){return c1(n).then(e=>e.localStore)}function I$(n){return TS(n).then(e=>e.remoteStore)}function f1(n){return TS(n).then(e=>e.syncEngine)}function _v(n){return p1.apply(this,arguments)}function p1(){return p1=(0,Se.Z)(function*(n){const e=yield TS(n),t=e.eventManager;return t.onListen=bY.bind(null,e.syncEngine),t.onUnlisten=EY.bind(null,e.syncEngine),t}),p1.apply(this,arguments)}function T$(n,e,t={}){const r=new Ki;return n.asyncQueue.enqueueAndForget((0,Se.Z)(function*(){return function(i,s,l,d,f){const y=new IS({next:D=>{s.enqueueAndForget(()=>MO(i,w));const x=D.docs.has(l);!x&&D.fromCache?f.reject(new ze(we.UNAVAILABLE,"Failed to get document because the client is offline.")):x&&D.fromCache&&d&&"server"===d.source?f.reject(new ze(we.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(D)},error:D=>f.reject(D)}),w=new PO(Jy(l.path),y,{includeMetadataChanges:!0,xu:!0});return xO(i,w)}(yield _v(n),n.asyncQueue,e,t,r)})),r.promise}function A$(n,e,t={}){const r=new Ki;return n.asyncQueue.enqueueAndForget((0,Se.Z)(function*(){return function(i,s,l,d,f){const y=new IS({next:D=>{s.enqueueAndForget(()=>MO(i,w)),D.fromCache&&"server"===d.source?f.reject(new ze(we.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(D)},error:D=>f.reject(D)}),w=new PO(l,y,{includeMetadataChanges:!0,xu:!0});return xO(i,w)}(yield _v(n),n.asyncQueue,e,t,r)})),r.promise}const S$=new Map;function g1(n,e,t){if(!t)throw new ze(we.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function x$(n,e,t,r){if(!0===e&&!0===r)throw new ze(we.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function R$(n){if(!ct.isDocumentKey(n))throw new ze(we.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function M$(n){if(ct.isDocumentKey(n))throw new ze(we.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function SS(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":bt()}function xn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ze(we.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=SS(n);throw new ze(we.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function k$(n,e){if(e<=0)throw new ze(we.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class N${constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new ze(we.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new ze(we.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,x$("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class DE{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new N$({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new ze(we.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new ze(we.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new N$(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new K8;switch(t.type){case"firstParty":return new X8(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new ze(we.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=S$.get(e);t&&(Ke("ComponentProvider","Removing Datastore"),S$.delete(e),t.terminate())}(this),Promise.resolve()}}class Or{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new id(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Or(this.firestore,e,this._key)}}class Os{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Os(this.firestore,e,this._query)}}class id extends Os{constructor(e,t,r){super(e,t,Jy(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Or(this.firestore,null,new ct(e))}withConverter(e){return new id(this.firestore,e,this._path)}}function O$(n,e,...t){if(n=(0,V.m9)(n),g1("collection","path",e),n instanceof DE){const r=Ln.fromString(e,...t);return M$(r),new id(n,null,r)}{if(!(n instanceof Or||n instanceof id))throw new ze(we.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Ln.fromString(e,...t));return M$(r),new id(n.firestore,null,r)}}function xS(n,e,...t){if(n=(0,V.m9)(n),1===arguments.length&&(e=ZB.A()),g1("doc","path",e),n instanceof DE){const r=Ln.fromString(e,...t);return R$(r),new Or(n,null,new ct(r))}{if(!(n instanceof Or||n instanceof id))throw new ze(we.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Ln.fromString(e,...t));return R$(r),new Or(n.firestore,n instanceof id?n.converter:null,new ct(r))}}function L$(n,e){return n=(0,V.m9)(n),e=(0,V.m9)(e),(n instanceof Or||n instanceof id)&&(e instanceof Or||e instanceof id)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function m1(n,e){return n=(0,V.m9)(n),e=(0,V.m9)(e),n instanceof Os&&e instanceof Os&&n.firestore===e.firestore&&rE(n._query,e._query)&&n.converter===e.converter}class JY{constructor(){this.Nc=Promise.resolve(),this.kc=[],this.Oc=!1,this.$c=[],this.Mc=null,this.Fc=!1,this.Bc=!1,this.Lc=[],this.Co=new uO(this,"async_queue_retry"),this.qc=()=>{const t=wS();t&&Ke("AsyncQueue","Visibility state changed to "+t.visibilityState),this.Co.vo()};const e=wS();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.qc)}get isShuttingDown(){return this.Oc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Uc(),this.Kc(e)}enterRestrictedMode(e){if(!this.Oc){this.Oc=!0,this.Bc=e||!1;const t=wS();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.qc)}}enqueue(e){if(this.Uc(),this.Oc)return new Promise(()=>{});const t=new Ki;return this.Kc(()=>this.Oc&&this.Bc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.kc.push(e),this.Gc()))}Gc(){var e=this;return(0,Se.Z)(function*(){if(0!==e.kc.length){try{yield e.kc[0](),e.kc.shift(),e.Co.reset()}catch(t){if(!Gf(t))throw t;Ke("AsyncQueue","Operation failed with retryable error: "+t)}e.kc.length>0&&e.Co.Ao(()=>e.Gc())}})()}Kc(e){const t=this.Nc.then(()=>(this.Fc=!0,e().catch(r=>{throw this.Mc=r,this.Fc=!1,Ci("INTERNAL UNHANDLED ERROR: ",function(s){let l=s.message||"";return s.stack&&(l=s.stack.includes(s.message)?s.stack:s.message+"\n"+s.stack),l}(r)),r}).then(r=>(this.Fc=!1,r))));return this.Nc=t,t}enqueueAfterDelay(e,t,r){this.Uc(),this.Lc.indexOf(e)>-1&&(t=0);const i=SO.createAndSchedule(this,e,t,r,s=>this.Qc(s));return this.$c.push(i),i}Uc(){this.Mc&&bt()}verifyOperationInProgress(){}zc(){var e=this;return(0,Se.Z)(function*(){let t;do{t=e.Nc,yield t}while(t!==e.Nc)})()}jc(e){for(const t of this.$c)if(t.timerId===e)return!0;return!1}Wc(e){return this.zc().then(()=>{this.$c.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.$c)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.zc()})}Hc(e){this.Lc.push(e)}Qc(e){const t=this.$c.indexOf(e);this.$c.splice(t,1)}}function _1(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class XY{constructor(){this._progressObserver={},this._taskCompletionResolver=new Ki,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Lr extends DE{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new JY,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||F$(this),this._firestoreClient.terminate()}}function Di(n){return n._firestoreClient||F$(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function F$(n){var e,t,r;const i=n._freezeSettings(),s=(d=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new R7(n._databaseId,d,n._persistenceKey,(y=i).host,y.ssl,y.experimentalForceLongPolling,y.experimentalAutoDetectLongPolling,y.useFetchStreams));var d,y;n._firestoreClient=new jY(n._authCredentials,n._appCheckCredentials,n._queue,s),(null===(t=i.cache)||void 0===t?void 0:t._offlineComponentProvider)&&(null===(r=i.cache)||void 0===r?void 0:r._onlineComponentProvider)&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}function U$(n,e,t){const r=new Ki;return n.asyncQueue.enqueue((0,Se.Z)(function*(){try{yield DS(n,t),yield l1(n,e),r.resolve()}catch(i){const s=i;if(!E$(s))throw s;Xc("Error enabling indexeddb cache. Falling back to memory cache: "+s),r.reject(s)}})).then(()=>r.promise)}function V$(n){if(n._initialized||n._terminated)throw new ze(we.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class sd{constructor(e){this._byteString=e}static fromBase64String(e){try{return new sd(Yi.fromBase64String(e))}catch(t){throw new ze(we.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new sd(Yi.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class hh{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new ze(we.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new di(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Fm{constructor(e){this._methodName=e}}class RS{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ze(we.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ze(we.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return sn(this._lat,e._lat)||sn(this._long,e._long)}}const c9=/^__.*__$/;class d9{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new ch(e,this.data,this.fieldMask,t,this.fieldTransforms):new tv(e,this.data,t,this.fieldTransforms)}}class B${constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new ch(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function H$(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw bt()}}class MS{constructor(e,t,r,i,s,l){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===s&&this.Jc(),this.fieldTransforms=s||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Yc(){return this.settings.Yc}Zc(e){return new MS(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Xc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Zc({path:r,ta:!1});return i.ea(e),i}na(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Zc({path:r,ta:!1});return i.Jc(),i}sa(e){return this.Zc({path:void 0,ta:!0})}ia(e){return PS(e,this.settings.methodName,this.settings.ra||!1,this.path,this.settings.oa)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Jc(){if(this.path)for(let e=0;e<this.path.length;e++)this.ea(this.path.get(e))}ea(e){if(0===e.length)throw this.ia("Document fields must not be empty");if(H$(this.Yc)&&c9.test(e))throw this.ia('Document fields cannot begin and end with "__"')}}class h9{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||EE(e)}ua(e,t,r,i=!1){return new MS({Yc:e,methodName:t,oa:r,path:di.emptyPath(),ta:!1,ra:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Um(n){const e=n._freezeSettings(),t=EE(n._databaseId);return new h9(n._databaseId,!!e.ignoreUndefinedProperties,t)}function kS(n,e,t,r,i,s={}){const l=n.ua(s.merge||s.mergeFields?2:0,e,t,i);b1("Data must be an object, but it was:",l,r);const d=z$(r,l);let f,y;if(s.merge)f=new oa(l.fieldMask),y=l.fieldTransforms;else if(s.mergeFields){const w=[];for(const D of s.mergeFields){const x=SE(e,D,t);if(!l.contains(x))throw new ze(we.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);W$(w,x)||w.push(x)}f=new oa(w),y=l.fieldTransforms.filter(D=>f.covers(D.field))}else f=null,y=l.fieldTransforms;return new d9(new fs(d),f,y)}class AE extends Fm{_toFieldTransform(e){if(2!==e.Yc)throw e.ia(1===e.Yc?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof AE}}function j$(n,e,t){return new MS({Yc:3,oa:e.settings.oa,methodName:n._methodName,ta:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class y1 extends Fm{_toFieldTransform(e){return new aE(e.path,new Xy)}isEqual(e){return e instanceof y1}}class f9 extends Fm{constructor(e,t){super(e),this.ca=t}_toFieldTransform(e){const t=j$(this,e,!0),r=this.ca.map(s=>Vm(s,t)),i=new Sm(r);return new aE(e.path,i)}isEqual(e){return this===e}}class p9 extends Fm{constructor(e,t){super(e),this.ca=t}_toFieldTransform(e){const t=j$(this,e,!0),r=this.ca.map(s=>Vm(s,t)),i=new xm(r);return new aE(e.path,i)}isEqual(e){return this===e}}class g9 extends Fm{constructor(e,t){super(e),this.aa=t}_toFieldTransform(e){const t=new ev(e.serializer,BH(e.serializer,this.aa));return new aE(e.path,t)}isEqual(e){return this===e}}function v1(n,e,t,r){const i=n.ua(1,e,t);b1("Data must be an object, but it was:",i,r);const s=[],l=fs.empty();Em(r,(f,y)=>{const w=NS(e,f,t);y=(0,V.m9)(y);const D=i.na(w);if(y instanceof AE)s.push(w);else{const x=Vm(y,D);null!=x&&(s.push(w),l.set(w,x))}});const d=new oa(s);return new B$(l,d,i.fieldTransforms)}function w1(n,e,t,r,i,s){const l=n.ua(1,e,t),d=[SE(e,r,t)],f=[i];if(s.length%2!=0)throw new ze(we.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let x=0;x<s.length;x+=2)d.push(SE(e,s[x])),f.push(s[x+1]);const y=[],w=fs.empty();for(let x=d.length-1;x>=0;--x)if(!W$(y,d[x])){const N=d[x];let U=f[x];U=(0,V.m9)(U);const Q=l.na(N);if(U instanceof AE)y.push(N);else{const X=Vm(U,Q);null!=X&&(y.push(N),w.set(N,X))}}const D=new oa(y);return new B$(w,D,l.fieldTransforms)}function $$(n,e,t,r=!1){return Vm(t,n.ua(r?4:3,e))}function Vm(n,e){if(G$(n=(0,V.m9)(n)))return b1("Unsupported field value:",e,n),z$(n,e);if(n instanceof Fm)return function(t,r){if(!H$(r.Yc))throw r.ia(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ia(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.ta&&4!==e.Yc)throw e.ia("Nested arrays are not supported");return function(t,r){const i=[];let s=0;for(const l of t){let d=Vm(l,r.sa(s));null==d&&(d={nullValue:"NULL_VALUE"}),i.push(d),s++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,V.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return BH(r.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=jr.fromDate(t);return{timestampValue:rv(r.serializer,i)}}if(t instanceof jr){const i=new jr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:rv(r.serializer,i)}}if(t instanceof RS)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof sd)return{bytesValue:ij(r.serializer,t._byteString)};if(t instanceof Or){const i=r.databaseId,s=t.firestore._databaseId;if(!s.isEqual(i))throw r.ia(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:UP(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ia(`Unsupported field value: ${SS(t)}`)}(n,e)}function z$(n,e){const t={};return uH(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Em(n,(r,i)=>{const s=Vm(i,e.Xc(r));null!=s&&(t[r]=s)}),{mapValue:{fields:t}}}function G$(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof jr||n instanceof RS||n instanceof sd||n instanceof Or||n instanceof Fm)}function b1(n,e,t){if(!G$(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=SS(t);throw e.ia("an object"===r?n+" a custom object":n+" "+r)}var r}function SE(n,e,t){if((e=(0,V.m9)(e))instanceof hh)return e._internalPath;if("string"==typeof e)return NS(n,e);throw PS("Field path arguments must be of type string or ",n,!1,void 0,t)}const m9=new RegExp("[~\\*/\\[\\]]");function NS(n,e,t){if(e.search(m9)>=0)throw PS(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new hh(...e.split("."))._internalPath}catch{throw PS(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function PS(n,e,t,r,i){const s=r&&!r.isEmpty(),l=void 0!==i;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let f="";return(s||l)&&(f+=" (found",s&&(f+=` in field ${r}`),l&&(f+=` in document ${i}`),f+=")"),new ze(we.INVALID_ARGUMENT,d+n+f)}function W$(n,e){return n.some(t=>t.isEqual(e))}class xE{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Or(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new _9(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(OS("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class _9 extends xE{data(){return super.data()}}function OS(n,e){return"string"==typeof e?NS(n,e):e instanceof hh?e._internalPath:e._delegate._internalPath}function q$(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new ze(we.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class E1{}class RE extends E1{}function sp(n,e,...t){let r=[];e instanceof E1&&r.push(e),r=r.concat(t),function(i){const s=i.filter(d=>d instanceof yv).length,l=i.filter(d=>d instanceof ME).length;if(s>1||s>0&&l>0)throw new ze(we.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class ME extends RE{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new ME(e,t,r)}_apply(e){const t=this._parse(e);return Q$(e._query,t),new Os(e.firestore,e.converter,RP(e._query,t))}_parse(e){const t=Um(e.firestore);return function(i,s,l,d,f,y,w){let D;if(f.isKeyField()){if("array-contains"===y||"array-contains-any"===y)throw new ze(we.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if("in"===y||"not-in"===y){Y$(w,y);const x=[];for(const N of w)x.push(K$(d,i,N));D={arrayValue:{values:x}}}else D=K$(d,i,w)}else"in"!==y&&"not-in"!==y&&"array-contains-any"!==y||Y$(w,y),D=$$(l,"where",w,"in"===y||"not-in"===y);return Sn.create(f,y,D)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class yv extends E1{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new yv(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:ar.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(r,i){let s=r;const l=i.getFlattenedFilters();for(const d of l)Q$(s,d),s=RP(s,d)}(e._query,t),new Os(e.firestore,e.converter,RP(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class C1 extends RE{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new C1(e,t)}_apply(e){const t=function(r,i,s){if(null!==r.startAt)throw new ze(we.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new ze(we.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const l=new Yy(i,s);return function(d,f){if(null===SP(d)){const y=JA(d);null!==y&&J$(0,y,f.field)}}(r,l),l}(e._query,this._field,this._direction);return new Os(e.firestore,e.converter,function(r,i){const s=r.explicitOrderBy.concat([i]);return new uh(r.path,r.collectionGroup,s,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class LS extends RE{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new LS(e,t,r)}_apply(e){return new Os(e.firestore,e.converter,XA(e._query,this._limit,this._limitType))}}class FS extends RE{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new FS(e,t,r)}_apply(e){const t=Z$(e,this.type,this._docOrFields,this._inclusive);return new Os(e.firestore,e.converter,(i=t,new uh((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class US extends RE{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new US(e,t,r)}_apply(e){const t=Z$(e,this.type,this._docOrFields,this._inclusive);return new Os(e.firestore,e.converter,(i=t,new uh((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function Z$(n,e,t,r){if(t[0]=(0,V.m9)(t[0]),t[0]instanceof xE)return function(i,s,l,d,f){if(!d)throw new ze(we.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const y=[];for(const w of Am(i))if(w.field.isKeyField())y.push(Dm(s,d.key));else{const D=d.data.field(w.field);if(bP(D))throw new ze(we.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+w.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===D){const x=w.field.canonicalString();throw new ze(we.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${x}' (used as the orderBy) does not exist.`)}y.push(D)}return new Yf(y,f)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=Um(n.firestore);return function(s,l,d,f,y,w){const D=s.explicitOrderBy;if(y.length>D.length)throw new ze(we.INVALID_ARGUMENT,`Too many arguments provided to ${f}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const x=[];for(let N=0;N<y.length;N++){const U=y[N];if(D[N].field.isKeyField()){if("string"!=typeof U)throw new ze(we.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${f}(), but got a ${typeof U}`);if(!xP(s)&&-1!==U.indexOf("/"))throw new ze(we.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${f}() must be a plain document ID, but '${U}' contains a slash.`);const Q=s.path.child(Ln.fromString(U));if(!ct.isDocumentKey(Q))throw new ze(we.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${f}() must result in a valid document path, but '${Q}' is not because it contains an odd number of segments.`);const X=new ct(Q);x.push(Dm(l,X))}else{const Q=$$(d,f,U);x.push(Q)}}return new Yf(x,w)}(n._query,n.firestore._databaseId,i,e,t,r)}}function K$(n,e,t){if("string"==typeof(t=(0,V.m9)(t))){if(""===t)throw new ze(we.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!xP(e)&&-1!==t.indexOf("/"))throw new ze(we.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Ln.fromString(t));if(!ct.isDocumentKey(r))throw new ze(we.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Dm(n,new ct(r))}if(t instanceof Or)return Dm(n,t._key);throw new ze(we.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${SS(t)}.`)}function Y$(n,e){if(!Array.isArray(n)||0===n.length)throw new ze(we.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Q$(n,e){if(e.isInequality()){const r=JA(n),i=e.field;if(null!==r&&!r.isEqual(i))throw new ze(we.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${i.toString()}'`);const s=SP(n);null!==s&&J$(0,i,s)}const t=function(r,i){for(const s of r)for(const l of s.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new ze(we.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function J$(n,e,t){if(!t.isEqual(e))throw new ze(we.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class I1{convertValue(e,t="none"){switch(Im(e)){case 0:return null;case 1:return e.booleanValue;case 2:return fi(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Cm(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw bt()}}convertObject(e,t){const r={};return Em(e.fields,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertGeoPoint(e){return new RS(fi(e.latitude),fi(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=dH(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(J0(e));default:return null}}convertTimestamp(e){const t=Wf(e);return new jr(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Ln.fromString(e);Lt(pj(r));const i=new qf(r.get(1),r.get(3)),s=new ct(r.popFirst(5));return i.isEqual(t)||Ci(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}function VS(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class T9 extends I1{constructor(e){super(),this.firestore=e}convertBytes(e){return new sd(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Or(this.firestore,null,t)}}class Bm{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class fh extends xE{constructor(e,t,r,i,s,l){super(e,t,r,i,l),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new kE(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(OS("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class kE extends fh{data(e={}){return super.data(e)}}class op{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Bm(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new kE(this._firestore,this._userDataWriter,r.key,r,new Bm(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ze(we.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let s=0;return r._snapshot.docChanges.map(l=>({type:"added",doc:new kE(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Bm(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:s++}))}{let s=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>i||3!==l.type).map(l=>{const d=new kE(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Bm(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let f=-1,y=-1;return 0!==l.type&&(f=s.indexOf(l.doc.key),s=s.delete(l.doc.key)),1!==l.type&&(s=s.add(l.doc),y=s.indexOf(l.doc.key)),{type:S9(l.type),doc:d,oldIndex:f,newIndex:y}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function S9(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return bt()}}function ez(n,e){return n instanceof fh&&e instanceof fh?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof op&&e instanceof op&&n._firestore===e._firestore&&m1(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class ap extends I1{constructor(e){super(),this.firestore=e}convertBytes(e){return new sd(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Or(this.firestore,null,t)}}function tz(n,e,t){n=xn(n,Or);const r=xn(n.firestore,Lr),i=VS(n.converter,e,t);return vv(r,[kS(Um(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,$r.none())])}function nz(n,e,t,...r){n=xn(n,Or);const i=xn(n.firestore,Lr),s=Um(i);let l;return l="string"==typeof(e=(0,V.m9)(e))||e instanceof hh?w1(s,"updateDoc",n._key,e,t,r):v1(s,"updateDoc",n._key,e),vv(i,[l.toMutation(n._key,$r.exists(!0))])}function rz(n,...e){var t,r,i;n=(0,V.m9)(n);let s={includeMetadataChanges:!1},l=0;"object"!=typeof e[l]||_1(e[l])||(s=e[l],l++);const d={includeMetadataChanges:s.includeMetadataChanges};if(_1(e[l])){const D=e[l];e[l]=null===(t=D.next)||void 0===t?void 0:t.bind(D),e[l+1]=null===(r=D.error)||void 0===r?void 0:r.bind(D),e[l+2]=null===(i=D.complete)||void 0===i?void 0:i.bind(D)}let f,y,w;if(n instanceof Or)y=xn(n.firestore,Lr),w=Jy(n._key.path),f={next:D=>{e[l]&&e[l](D1(y,n,D))},error:e[l+1],complete:e[l+2]};else{const D=xn(n,Os);y=xn(D.firestore,Lr),w=D._query;const x=new ap(y);f={next:N=>{e[l]&&e[l](new op(y,x,D,N))},error:e[l+1],complete:e[l+2]},q$(n._query)}return function(D,x,N,U){const Q=new IS(U),X=new PO(x,Q,N);return D.asyncQueue.enqueueAndForget((0,Se.Z)(function*(){return xO(yield _v(D),X)})),()=>{Q.yc(),D.asyncQueue.enqueueAndForget((0,Se.Z)(function*(){return MO(yield _v(D),X)}))}}(Di(y),w,d,f)}function vv(n,e){return function(t,r){const i=new Ki;return t.asyncQueue.enqueueAndForget((0,Se.Z)(function*(){return function CY(n,e,t){return VO.apply(this,arguments)}(yield f1(t),r,i)})),i.promise}(Di(n),e)}function D1(n,e,t){const r=t.docs.get(e._key),i=new ap(n);return new fh(n,i,e._key,r,new Bm(t.hasPendingWrites,t.fromCache),e.converter)}const z9={maxAttempts:5};class iz{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Um(e)}set(e,t,r){this._verifyNotCommitted();const i=lp(e,this._firestore),s=VS(i.converter,t,r),l=kS(this._dataReader,"WriteBatch.set",i._key,s,null!==i.converter,r);return this._mutations.push(l.toMutation(i._key,$r.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const s=lp(e,this._firestore);let l;return l="string"==typeof(t=(0,V.m9)(t))||t instanceof hh?w1(this._dataReader,"WriteBatch.update",s._key,t,r,i):v1(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(l.toMutation(s._key,$r.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=lp(e,this._firestore);return this._mutations=this._mutations.concat(new nv(t._key,$r.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ze(we.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function lp(n,e){if((n=(0,V.m9)(n)).firestore!==e)throw new ze(we.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class G9 extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Um(e)}get(e){const t=lp(e,this._firestore),r=new T9(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return bt();const s=i[0];if(s.isFoundDocument())return new xE(this._firestore,r,s.key,s,t.converter);if(s.isNoDocument())return new xE(this._firestore,r,t._key,null,t.converter);throw bt()})}set(e,t,r){const i=lp(e,this._firestore),s=VS(i.converter,t,r),l=kS(this._dataReader,"Transaction.set",i._key,s,null!==i.converter,r);return this._transaction.set(i._key,l),this}update(e,t,r,...i){const s=lp(e,this._firestore);let l;return l="string"==typeof(t=(0,V.m9)(t))||t instanceof hh?w1(this._dataReader,"Transaction.update",s._key,t,r,i):v1(this._dataReader,"Transaction.update",s._key,t),this._transaction.update(s._key,l),this}delete(e){const t=lp(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=lp(e,this._firestore),r=new ap(this._firestore);return super.get(e).then(i=>new fh(this._firestore,r,t._key,i._document,new Bm(!1,!1),t.converter))}}function T1(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new ze("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function oz(){if(typeof Uint8Array>"u")throw new ze("unimplemented","Uint8Arrays are not available in this environment.")}function az(){if(!function S7(){return typeof atob<"u"}())throw new ze("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){Wy=xs.SDK_VERSION,(0,xs._registerComponent)(new Sl.wA("firestore",(t,{instanceIdentifier:r,options:i})=>{const s=t.getProvider("app").getImmediate(),l=new Lr(new Q8(t.getProvider("auth-internal")),new e7(t.getProvider("app-check-internal")),function(d,f){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new ze(we.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new qf(d.options.projectId,f)}(s,r),s);return i=Object.assign({useFetchStreams:e},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),(0,xs.registerVersion)(GB,"3.10.1",n),(0,xs.registerVersion)(GB,"3.10.1","esm2017")}();class NE{constructor(e){this._delegate=e}static fromBase64String(e){return az(),new NE(sd.fromBase64String(e))}static fromUint8Array(e){return oz(),new NE(sd.fromUint8Array(e))}toBase64(){return az(),this._delegate.toBase64()}toUint8Array(){return oz(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function A1(n){return function eQ(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class tQ{enableIndexedDbPersistence(e,t){return function t9(n,e){V$(n=xn(n,Lr));const t=Di(n);if(t._uninitializedComponentsProvider)throw new ze(we.FAILED_PRECONDITION,"SDK cache is already specified.");Xc("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=n._freezeSettings(),i=new mv;return U$(t,i,new o1(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function n9(n){V$(n=xn(n,Lr));const e=Di(n);if(e._uninitializedComponentsProvider)throw new ze(we.FAILED_PRECONDITION,"SDK cache is already specified.");Xc("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings(),r=new mv;return U$(e,r,new w$(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function r9(n){if(n._initialized&&!n._terminated)throw new ze(we.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Ki;return n._queue.enqueueAndForgetEvenWhileRestricted((0,Se.Z)(function*(){try{yield(t=(0,Se.Z)(function*(r){if(!Hu.D())return Promise.resolve();const i=r+"main";yield Hu.delete(i)}),function(r){return t.apply(this,arguments)})(JP(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class lz{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof qf||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Xc("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function P$(n,e,t,r={}){var i;const s=(n=xn(n,DE))._getSettings();if("firestore.googleapis.com"!==s.host&&s.host!==e&&Xc("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},s),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let l,d;if("string"==typeof r.mockUserToken)l=r.mockUserToken,d=ds.MOCK_USER;else{l=(0,V.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const f=r.mockUserToken.sub||r.mockUserToken.user_id;if(!f)throw new ze(we.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new ds(f)}n._authCredentials=new Y8(new WB(l,d))}}(this._delegate,e,t,r)}enableNetwork(){return function s9(n){return function $Y(n){return n.asyncQueue.enqueue((0,Se.Z)(function*(){const e=yield C$(n),t=yield I$(n);return e.setNetworkEnabled(!0),function(r){const i=gt(r);return i.du.delete(0),CE(i)}(t)}))}(Di(n=xn(n,Lr)))}(this._delegate)}disableNetwork(){return function o9(n){return function zY(n){return n.asyncQueue.enqueue((0,Se.Z)(function*(){const e=yield C$(n),t=yield I$(n);return e.setNetworkEnabled(!1),(r=(0,Se.Z)(function*(i){const s=gt(i);s.du.add(0),yield uv(s),s.mu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(Di(n=xn(n,Lr)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,x$("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function i9(n){return function(e){const t=new Ki;return e.asyncQueue.enqueueAndForget((0,Se.Z)(function*(){return function AY(n,e){return zO.apply(this,arguments)}(yield f1(e),t)})),t.promise}(Di(n=xn(n,Lr)))}(this._delegate)}onSnapshotsInSync(e){return function F9(n,e){return function qY(n,e){const t=new IS(e);return n.asyncQueue.enqueueAndForget((0,Se.Z)(function*(){return r=yield _v(n),i=t,gt(r).Au.add(i),void i.next();var r,i})),()=>{t.yc(),n.asyncQueue.enqueueAndForget((0,Se.Z)(function*(){return r=yield _v(n),i=t,void gt(r).Au.delete(i);var r,i}))}}(Di(n=xn(n,Lr)),_1(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new ze("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new wv(this,O$(this._delegate,e))}catch(t){throw Bo(t,"collection()","Firestore.collection()")}}doc(e){try{return new jl(this,xS(this._delegate,e))}catch(t){throw Bo(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Ho(this,function QY(n,e){if(n=xn(n,DE),g1("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new ze(we.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Os(n,null,(t=e,new uh(Ln.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Bo(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function W9(n,e,t){n=xn(n,Lr);const r=Object.assign(Object.assign({},z9),t);return function(i){if(i.maxAttempts<1)throw new ze(we.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,s,l){const d=new Ki;return i.asyncQueue.enqueueAndForget((0,Se.Z)(function*(){const f=yield function D$(n){return TS(n).then(e=>e.datastore)}(i);new HY(i.asyncQueue,f,l,s,d).run()})),d.promise}(Di(n),i=>e(new G9(n,i)),r)}(this._delegate,t=>e(new uz(this,t)))}batch(){return Di(this._delegate),new cz(new iz(this._delegate,e=>vv(this._delegate,e)))}loadBundle(e){return function a9(n,e){const t=Di(n=xn(n,Lr)),r=new XY;return function ZY(n,e,t,r){const i=function(s,l){let d;return d="string"==typeof s?(new TextEncoder).encode(s):s,f=function(f,y){if(f instanceof Uint8Array)return b$(f,y);if(f instanceof ArrayBuffer)return b$(new Uint8Array(f),y);if(f instanceof ReadableStream)return f.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(d),new VY(f,l);var f}(t,EE(e));n.asyncQueue.enqueueAndForget((0,Se.Z)(function*(){!function UY(n,e,t){const r=gt(n);var i;(i=(0,Se.Z)(function*(s,l,d){try{const f=yield l.getMetadata();if(yield function(x,N){const U=gt(x),Q=Ii(N.createTime);return U.persistence.runTransaction("hasNewerBundle","readonly",X=>U.xs.getBundleMetadata(X,N.id)).then(X=>!!X&&X.createTime.compareTo(Q)>=0)}(s.localStore,f))return yield l.close(),d._completeWith({taskState:"Success",documentsLoaded:(x=f).totalDocuments,bytesLoaded:x.totalBytes,totalDocuments:x.totalDocuments,totalBytes:x.totalBytes}),Promise.resolve(new Set);d._updateProgress(d$(f));const y=new _Y(f,s.localStore,l.serializer);let w=yield l._c();for(;w;){const x=yield y.$u(w);x&&d._updateProgress(x),w=yield l._c()}const D=yield y.complete();return yield dh(s,D.Bu,void 0),yield function(x,N){const U=gt(x);return U.persistence.runTransaction("Save bundle","readwrite",Q=>U.xs.saveBundleMetadata(Q,N))}(s.localStore,f),d._completeWith(D.progress),Promise.resolve(D.Fu)}catch(f){return Xc("SyncEngine",`Loading bundle failed with ${f}`),d._failWith(f),Promise.resolve(new Set)}var x}),function(s,l,d){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield f1(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function l9(n,e){return function KY(n,e){return n.asyncQueue.enqueue((0,Se.Z)(function*(){return function(t,r){const i=gt(t);return i.persistence.runTransaction("Get named query","readonly",s=>i.xs.getNamedQuery(s,r))}(yield AS(n),e)}))}(Di(n=xn(n,Lr)),e).then(t=>t?new Os(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Ho(this,t):null)}}class BS extends I1{constructor(e){super(),this.firestore=e}convertBytes(e){return new NE(new sd(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return jl.forKey(t,this.firestore,null)}}class uz{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new BS(e)}get(e){const t=jm(e);return this._delegate.get(t).then(r=>new PE(this._firestore,new fh(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=jm(e);return r?(T1("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=jm(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=jm(e);return this._delegate.delete(t),this}}class cz{constructor(e){this._delegate=e}set(e,t,r){const i=jm(e);return r?(T1("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=jm(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=jm(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Hm{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new kE(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new OE(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Hm.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(t);return s||(s=new Hm(e,new BS(e),t),i.set(t,s)),s}}Hm.INSTANCES=new WeakMap;class jl{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new BS(e)}static forPath(e,t,r){if(e.length%2!=0)throw new ze("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new jl(t,new Or(t._delegate,r,new ct(e)))}static forKey(e,t,r){return new jl(t,new Or(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new wv(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new wv(this.firestore,O$(this._delegate,e))}catch(t){throw Bo(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,V.m9)(e))instanceof Or&&L$(this._delegate,e)}set(e,t){t=T1("DocumentReference.set",t);try{return t?tz(this._delegate,e,t):tz(this._delegate,e)}catch(r){throw Bo(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?nz(this._delegate,e):nz(this._delegate,e,t,...r)}catch(i){throw Bo(i,"updateDoc()","DocumentReference.update()")}}delete(){return function O9(n){return vv(xn(n.firestore,Lr),[new nv(n._key,$r.none())])}(this._delegate)}onSnapshot(...e){const t=dz(e),r=hz(e,i=>new PE(this.firestore,new fh(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return rz(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function R9(n){n=xn(n,Or);const e=xn(n.firestore,Lr),t=Di(e),r=new ap(e);return function GY(n,e){const t=new Ki;return n.asyncQueue.enqueueAndForget((0,Se.Z)(function*(){return(r=(0,Se.Z)(function*(i,s,l){try{const d=yield function(f,y){const w=gt(f);return w.persistence.runTransaction("read document","readonly",D=>w.localDocuments.getDocument(D,y))}(i,s);d.isFoundDocument()?l.resolve(d):d.isNoDocument()?l.resolve(null):l.reject(new ze(we.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(d){const f=hv(d,`Failed to get document '${s} from cache`);l.reject(f)}}),function(i,s,l){return r.apply(this,arguments)})(yield AS(n),e,t);var r})),t.promise}(t,n._key).then(i=>new fh(e,r,n._key,i,new Bm(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function M9(n){n=xn(n,Or);const e=xn(n.firestore,Lr);return T$(Di(e),n._key,{source:"server"}).then(t=>D1(e,n,t))}(this._delegate):function x9(n){n=xn(n,Or);const e=xn(n.firestore,Lr);return T$(Di(e),n._key).then(t=>D1(e,n,t))}(this._delegate),t.then(r=>new PE(this.firestore,new fh(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new jl(this.firestore,this._delegate.withConverter(e?Hm.getInstance(this.firestore,e):null))}}function Bo(n,e,t){return n.message=n.message.replace(e,t),n}function dz(n){for(const e of n)if("object"==typeof e&&!A1(e))return e;return{}}function hz(n,e){var t,r;let i;return i=A1(n[0])?n[0]:A1(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:s=>{i.next&&i.next(e(s))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class PE{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new jl(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return ez(this._delegate,e._delegate)}}class OE extends PE{data(e){const t=this._delegate.data(e);return function Z8(n,e){n||bt()}(void 0!==t),t}}class Ho{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new BS(e)}where(e,t,r){try{return new Ho(this.firestore,sp(this._delegate,function y9(n,e,t){const r=e,i=OS("where",n);return ME._create(i,r,t)}(e,t,r)))}catch(i){throw Bo(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Ho(this.firestore,sp(this._delegate,function v9(n,e="asc"){const t=e,r=OS("orderBy",n);return C1._create(r,t)}(e,t)))}catch(r){throw Bo(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Ho(this.firestore,sp(this._delegate,function w9(n){return k$("limit",n),LS._create("limit",n,"F")}(e)))}catch(t){throw Bo(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Ho(this.firestore,sp(this._delegate,function b9(n){return k$("limitToLast",n),LS._create("limitToLast",n,"L")}(e)))}catch(t){throw Bo(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Ho(this.firestore,sp(this._delegate,function E9(...n){return FS._create("startAt",n,!0)}(...e)))}catch(t){throw Bo(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Ho(this.firestore,sp(this._delegate,function C9(...n){return FS._create("startAfter",n,!1)}(...e)))}catch(t){throw Bo(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Ho(this.firestore,sp(this._delegate,function I9(...n){return US._create("endBefore",n,!1)}(...e)))}catch(t){throw Bo(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Ho(this.firestore,sp(this._delegate,function D9(...n){return US._create("endAt",n,!0)}(...e)))}catch(t){throw Bo(t,"endAt()","Query.endAt()")}}isEqual(e){return m1(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function N9(n){n=xn(n,Os);const e=xn(n.firestore,Lr),t=Di(e),r=new ap(e);return function WY(n,e){const t=new Ki;return n.asyncQueue.enqueueAndForget((0,Se.Z)(function*(){return(r=(0,Se.Z)(function*(i,s,l){try{const d=yield mS(i,s,!0),f=new p$(s,d.Wi),y=f.zu(d.documents),w=f.applyChanges(y,!1);l.resolve(w.snapshot)}catch(d){const f=hv(d,`Failed to execute query '${s} against cache`);l.reject(f)}}),function(i,s,l){return r.apply(this,arguments)})(yield AS(n),e,t);var r})),t.promise}(t,n._query).then(i=>new op(e,r,n,i))}(this._delegate):"server"===e?.source?function P9(n){n=xn(n,Os);const e=xn(n.firestore,Lr),t=Di(e),r=new ap(e);return A$(t,n._query,{source:"server"}).then(i=>new op(e,r,n,i))}(this._delegate):function k9(n){n=xn(n,Os);const e=xn(n.firestore,Lr),t=Di(e),r=new ap(e);return q$(n._query),A$(t,n._query).then(i=>new op(e,r,n,i))}(this._delegate),t.then(r=>new S1(this.firestore,new op(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=dz(e),r=hz(e,i=>new S1(this.firestore,new op(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return rz(this._delegate,t,r)}withConverter(e){return new Ho(this.firestore,this._delegate.withConverter(e?Hm.getInstance(this.firestore,e):null))}}class rQ{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new OE(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class S1{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Ho(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new OE(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new rQ(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new OE(this._firestore,r))})}isEqual(e){return ez(this._delegate,e._delegate)}}class wv extends Ho{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new jl(this.firestore,e):null}doc(e){try{return new jl(this.firestore,void 0===e?xS(this._delegate):xS(this._delegate,e))}catch(t){throw Bo(t,"doc()","CollectionReference.doc()")}}add(e){return function L9(n,e){const t=xn(n.firestore,Lr),r=xS(n),i=VS(n.converter,e);return vv(t,[kS(Um(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,$r.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new jl(this.firestore,t))}isEqual(e){return L$(this._delegate,e._delegate)}withConverter(e){return new wv(this.firestore,this._delegate.withConverter(e?Hm.getInstance(this.firestore,e):null))}}function jm(n){return xn(n,Or)}class x1{constructor(...e){this._delegate=new hh(...e)}static documentId(){return new x1(di.keyField().canonicalString())}isEqual(e){return(e=(0,V.m9)(e))instanceof hh&&this._delegate._internalPath.isEqual(e._internalPath)}}class $m{constructor(e){this._delegate=e}static serverTimestamp(){const e=function Z9(){return new y1("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new $m(e)}static delete(){const e=function q9(){return new AE("deleteField")}();return e._methodName="FieldValue.delete",new $m(e)}static arrayUnion(...e){const t=function K9(...n){return new f9("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new $m(t)}static arrayRemove(...e){const t=function Y9(...n){return new p9("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new $m(t)}static increment(e){const t=function Q9(n){return new g9("increment",n)}(e);return t._methodName="FieldValue.increment",new $m(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const iQ={Firestore:lz,GeoPoint:RS,Timestamp:jr,Blob:NE,Transaction:uz,WriteBatch:cz,DocumentReference:jl,DocumentSnapshot:PE,Query:Ho,QueryDocumentSnapshot:OE,QuerySnapshot:S1,CollectionReference:wv,FieldPath:x1,FieldValue:$m,setLogLevel:function nQ(n){!function q8(n){$f.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function fz(n,e){return function aQ(n,e=fN.z){return new ss.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function R1(n,e){return fz(n,e).pipe((0,Ct.U)(t=>({payload:t,type:"query"})))}function HS(n,e){return R1(n,e).pipe(wu(void 0),AN(),(0,Ct.U)(([t,r])=>{const i=r.payload.docChanges(),s=i.map(l=>({type:l.type,payload:l}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((l,d)=>{const f=i.find(w=>w.doc.ref.isEqual(l.ref)),y=t?.payload.docs.find(w=>w.ref.isEqual(l.ref));f&&JSON.stringify(f.doc.metadata)===JSON.stringify(l.metadata)||!f&&y&&JSON.stringify(y.metadata)===JSON.stringify(l.metadata)||s.push({type:"modified",payload:{oldIndex:d,newIndex:d,type:"modified",doc:l}})}),s}))}function pz(n,e,t){return HS(n,t).pipe(Ma((r,i)=>function uQ(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function cQ(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return M1(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return M1(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return M1(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(s=>s.payload),e),[]),xV(),(0,Ct.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function M1(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function gz(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function oQ(n){(function sQ(n,e){n.INTERNAL.registerComponent(new Sl.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},iQ)))})(n,(e,t)=>new lz(e,t,new tQ)),n.registerVersion("@firebase/firestore-compat","0.3.7")}(pN.Z);class mz{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=HS(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,Ct.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(wu(void 0),AN(),as(([r,i])=>i.length>0||!r),(0,Ct.U)(([r,i])=>i),An.iC)}auditTrail(e){return this.stateChanges(e).pipe(Ma((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=gz(e);return pz(this.query,t,this.afs.schedulers.outsideAngular).pipe(An.iC)}valueChanges(e={}){return R1(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ct.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),An.iC)}get(e){return(0,Tn.D)(this.query.get(e)).pipe(An.iC)}add(e){return this.ref.add(e)}doc(e){return new _z(this.ref.doc(e),this.afs)}}class _z{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:s}=wz(r,t);return new mz(i,s,this.afs)}snapshotChanges(){return function lQ(n,e){return fz(n,e).pipe(wu(void 0),AN(),(0,Ct.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(An.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Ct.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Tn.D)(this.ref.get(e)).pipe(An.iC)}}class dQ{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?HS(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ct.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),as(t=>t.length>0),An.iC):HS(this.query,this.afs.schedulers.outsideAngular).pipe(An.iC)}auditTrail(e){return this.stateChanges(e).pipe(Ma((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=gz(e);return pz(this.query,t,this.afs.schedulers.outsideAngular).pipe(An.iC)}valueChanges(e={}){return R1(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ct.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),An.iC)}get(e){return(0,Tn.D)(this.query.get(e)).pipe(An.iC)}}const yz=new c.OlP("angularfire2.enableFirestorePersistence"),vz=new c.OlP("angularfire2.firestore.persistenceSettings"),hQ=new c.OlP("angularfire2.firestore.settings"),fQ=new c.OlP("angularfire2.firestore.use-emulator");function wz(n,e=(t=>t)){return{query:e(n),ref:n}}let pQ=(()=>{class n{constructor(t,r,i,s,l,d,f,y,w,D,x,N,U,Q,X,ae,Le){this.schedulers=f;const je=(0,bi.on)(t,d,r),Ye=w;D&&ff(je,d,x,U,Q,X,N,ae),[this.firestore,this.persistenceEnabled$]=(0,bi.cc)(`${je.name}.firestore`,"AngularFirestore",je.name,()=>{const St=d.runOutsideAngular(()=>je.firestore());if(s&&St.settings(s),Ye&&St.useEmulator(...Ye),i&&!bs(l)){const Nt=()=>{try{return(0,Tn.D)(St.enablePersistence(y||void 0).then(()=>!0,()=>!1))}catch(mn){return typeof console<"u"&&console.warn(mn),_t(!1)}};return[St,d.runOutsideAngular(Nt)]}return[St,_t(!1)]},[s,Ye,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:s,query:l}=wz(i,r),d=this.schedulers.ngZone.run(()=>s);return new mz(d,l,this)}collectionGroup(t,r){const i=r||(l=>l),s=this.firestore.collectionGroup(t);return new dQ(i(s),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new _z(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(bi.Dh),c.LFG(bi.xv,8),c.LFG(yz,8),c.LFG(hQ,8),c.LFG(c.Lbi),c.LFG(c.R0b),c.LFG(An.HU),c.LFG(vz,8),c.LFG(fQ,8),c.LFG(Mc,8),c.LFG(Pg,8),c.LFG(Gw,8),c.LFG(df,8),c.LFG(hf,8),c.LFG(Og,8),c.LFG(Ww,8),c.LFG(Rl,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),gQ=(()=>{class n{constructor(){Ng.Z.registerVersion("angularfire",An.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:yz,useValue:!0},{provide:vz,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[pQ]}),n})();var mQ=H(5032);const bz="@firebase/database";let k1="";function Cz(n){k1=n}class vQ{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,V.Wl)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,V.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class wQ{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,V.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const Iz=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new vQ(e)}}catch{}return new wQ},zm=Iz("localStorage"),N1=Iz("sessionStorage"),bv=new na.Yd("@firebase/database"),Dz=function(){let n=1;return function(){return n++}}(),Tz=function(n){const e=(0,V.dS)(n),t=new V.gQ;t.update(e);const r=t.digest();return V.US.encodeByteArray(r)},LE=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=LE.apply(null,r):e+="object"==typeof r?(0,V.Wl)(r):r,e+=" "}return e};let Gm=null,Az=!0;const Sz=function(n,e){(0,V.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(bv.logLevel=na.in.VERBOSE,Gm=bv.log.bind(bv),e&&N1.set("logging_enabled",!0)):"function"==typeof n?Gm=n:(Gm=null,N1.remove("logging_enabled"))},gs=function(...n){if(!0===Az&&(Az=!1,null===Gm&&!0===N1.get("logging_enabled")&&Sz(!0)),Gm){const e=LE.apply(null,n);Gm(e)}},FE=function(n){return function(...e){gs(n,...e)}},P1=function(...n){const e="FIREBASE INTERNAL ERROR: "+LE(...n);bv.error(e)},od=function(...n){const e=`FIREBASE FATAL ERROR: ${LE(...n)}`;throw bv.error(e),new Error(e)},co=function(...n){const e="FIREBASE WARNING: "+LE(...n);bv.warn(e)},jS=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},up="[MIN_NAME]",ph="[MAX_NAME]",Wm=function(n,e){if(n===e)return 0;if(n===up||e===ph)return-1;if(e===up||n===ph)return 1;{const t=Mz(n),r=Mz(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},CQ=function(n,e){return n===e?0:n<e?-1:1},UE=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,V.Wl)(e))},O1=function(n){if("object"!=typeof n||null===n)return(0,V.Wl)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,V.Wl)(e[r]),t+=":",t+=O1(n[e[r]]);return t+="}",t},xz=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function ms(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const Rz=function(n){(0,V.hu)(!jS(n),"Invalid JSON number");const r=1023;let i,s,l,d,f;0===n?(s=0,l=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(d=Math.min(Math.floor(Math.log(n)/Math.LN2),r),s=d+r,l=Math.round(n*Math.pow(2,52-d)-Math.pow(2,52))):(s=0,l=Math.round(n/Math.pow(2,-1074))));const y=[];for(f=52;f;f-=1)y.push(l%2?1:0),l=Math.floor(l/2);for(f=11;f;f-=1)y.push(s%2?1:0),s=Math.floor(s/2);y.push(i?1:0),y.reverse();const w=y.join("");let D="";for(f=0;f<64;f+=8){let x=parseInt(w.substr(f,8),2).toString(16);1===x.length&&(x="0"+x),D+=x}return D.toLowerCase()},AQ=new RegExp("^-?(0*)\\d{1,10}$"),Mz=function(n){if(AQ.test(n)){const e=Number(n);if(e>=-2147483648&&e<=2147483647)return e}return null},Ev=function(n){try{n()}catch(e){setTimeout(()=>{throw co("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},VE=function(n,e){const t=setTimeout(n,e);return"number"==typeof t&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class MQ{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){co(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class kQ{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(gs("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',co(e)}}let BE=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const Lz=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Vz="websocket",Bz="long_polling";class F1{constructor(e,t,r,i,s=!1,l="",d=!1,f=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=l,this.includeNamespaceInQueryParams=d,this.isUsingEmulator=f,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=zm.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&zm.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function Hz(n,e,t){let r;if((0,V.hu)("string"==typeof e,"typeof type must == string"),(0,V.hu)("object"==typeof t,"typeof params must == object"),e===Vz)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==Bz)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function NQ(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return ms(t,(s,l)=>{i.push(s+"="+l)}),r+i.join("&")}class PQ{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,V.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,V.p$)(this.counters_)}}const U1={},V1={};function B1(n){const e=n.toString();return U1[e]||(U1[e]=new PQ),U1[e]}class LQ{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Ev(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class cp{constructor(e,t,r,i,s,l,d){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=l,this.lastSessionId=d,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=FE(e),this.stats_=B1(t),this.urlFn=f=>(this.appCheckToken&&(f.ac=this.appCheckToken),Hz(t,Bz,f))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new LQ(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,V.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new H1((...s)=>{const[l,d,f,y,w]=s;if(this.incrementIncomingBytes_(s),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===l)this.id=d,this.password=f;else{if("close"!==l)throw new Error("Unrecognized command received: "+l);d?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(d,()=>{this.onClosed_()})):this.onClosed_()}},(...s)=>{const[l,d]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(l,d)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&Lz.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){cp.forceAllow_=!0}static forceDisallow(){cp.forceDisallow_=!0}static isAvailable(){return!((0,V.Yr)()||!cp.forceAllow_&&(cp.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,V.Wl)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,V.h$)(t),i=xz(r,1840);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,V.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,V.Wl)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class H1{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,V.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=Dz(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=H1.createIFrame_();let s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(s='<script>document.domain="'+document.domain+'";<\/script>');const l="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(l),this.myIFrame.doc.close()}catch(d){gs("frame writing exception"),d.stack&&gs(d.stack),gs(d)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||gs("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const l=this.pendingSegs.shift();r=r+"&seg"+i+"="+l.seg+"&ts"+i+"="+l.ts+"&d"+i+"="+l.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,V.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{gs("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}let zS=null;typeof MozWebSocket<"u"?zS=MozWebSocket:typeof WebSocket<"u"&&(zS=WebSocket);let Cv=(()=>{class n{constructor(t,r,i,s,l,d,f){this.connId=t,this.applicationId=i,this.appCheckToken=s,this.authToken=l,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=FE(this.connId),this.stats_=B1(r),this.connURL=n.connectionURL_(r,d,f,s,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,s,l){const d={v:"5"};return!(0,V.Yr)()&&typeof location<"u"&&location.hostname&&Lz.test(location.hostname)&&(d.r="f"),r&&(d.s=r),i&&(d.ls=i),s&&(d.ac=s),l&&(d.p=l),Hz(t,Vz,d)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,zm.set("previous_websocket_failure",!0);try{let i;if((0,V.Yr)()){i={headers:{"User-Agent":`Firebase/5/${k1}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);const l=process.env,d=0===this.connURL.indexOf("wss://")?l.HTTPS_PROXY||l.https_proxy:l.HTTP_PROXY||l.http_proxy;d&&(i.proxy={origin:d})}this.mySock=new zS(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const s=i.message||i.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const s=i.message||i.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==zS&&!n.forceDisallow_}static previouslyFailed(){return zm.isInMemoryStorage||!0===zm.get("previous_websocket_failure")}markConnectionHealthy(){zm.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,V.cI)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,V.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,V.Wl)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=xz(r,16384);i.length>1&&this.sendString_(String(i.length));for(let s=0;s<i.length;s++)this.sendString_(i[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),Zz=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[cp,Cv]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=Cv&&Cv.isAvailable();let i=r&&!Cv.previouslyFailed();if(t.webSocketOnly&&(r||co("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Cv];else{const s=this.transports_=[];for(const l of n.ALL_TRANSPORTS)l&&l.isAvailable()&&s.push(l);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class tG{constructor(e,t,r,i,s,l,d,f,y,w){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=l,this.onReady_=d,this.onDisconnect_=f,this.onKill_=y,this.lastSessionId=w,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=FE("c:"+this.id+":"),this.transportManager_=new Zz(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=VE(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=UE("t",e),r=UE("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=UE("t",e),r=UE("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=UE("t",e);if("d"in e){const r=e.d;if("h"===t){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?P1("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):P1("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&co("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),VE(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):VE(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(zm.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class nG{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class rG{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,V.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===t&&(!r||r===i[s].context))return void i.splice(s,1)}validateEventType_(e){(0,V.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class GS extends rG{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,V.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new GS}getInitialEvent(e){return(0,V.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class tr{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function Wn(){return new tr("")}function yn(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function dp(n){return n.pieces_.length-n.pieceNum_}function gr(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new tr(n.pieces_,e)}function $1(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function HE(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function oG(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new tr(e,0)}function zr(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof tr)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new tr(t,0)}function vn(n){return n.pieceNum_>=n.pieces_.length}function jo(n,e){const t=yn(n),r=yn(e);if(null===t)return e;if(t===r)return jo(gr(n),gr(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function iJ(n,e){const t=HE(n,0),r=HE(e,0);for(let i=0;i<t.length&&i<r.length;i++){const s=Wm(t[i],r[i]);if(0!==s)return s}return t.length===r.length?0:t.length<r.length?-1:1}function z1(n,e){if(dp(n)!==dp(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function $l(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(dp(n)>dp(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class sJ{constructor(e,t){this.errorPrefix_=t,this.parts_=HE(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,V.ug)(this.parts_[r]);aG(this)}}function aG(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+qm(n))}function qm(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class G1 extends rG{constructor(){let e,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new G1}getInitialEvent(e){return(0,V.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const jE=1e3;let qS,Zm=(()=>{class n extends nG{constructor(t,r,i,s,l,d,f,y){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=s,this.onServerInfoUpdate_=l,this.authTokenProvider_=d,this.appCheckTokenProvider_=f,this.authOverride_=y,this.id=n.nextPersistentConnectionId_++,this.log_=FE("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=jE,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,y&&!(0,V.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");G1.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&GS.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const s=++this.requestNumber_,l={r:s,a:t,b:r};this.log_((0,V.Wl)(l)),(0,V.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(l),i&&(this.requestCBHash_[s]=i)}get(t){this.initConnection_();const r=new V.BH,i={p:t._path.toString(),q:t._queryObject};return this.outstandingGets_.push({action:"g",request:i,onComplete:d=>{const f=d.d;"ok"===d.s?r.resolve(f):r.reject(f)}}),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(t,r,i,s){this.initConnection_();const l=t._queryIdentifier,d=t._path.toString();this.log_("Listen called for "+d+" "+l),this.listens.has(d)||this.listens.set(d,new Map),(0,V.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,V.hu)(!this.listens.get(d).has(l),"listen() called twice for same path/queryId.");const f={onComplete:s,hashFn:r,query:t,tag:i};this.listens.get(d).set(l,f),this.connected_&&this.sendListen_(f)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),s=r._queryIdentifier;this.log_("Listen on "+i+" for "+s);const l={p:i};t.tag&&(l.q=r._queryObject,l.t=t.tag),l.h=t.hashFn(),this.sendRequest("q",l,f=>{const y=f.d,w=f.s;n.warnOnListenWarnings_(y,r),(this.listens.get(i)&&this.listens.get(i).get(s))===t&&(this.log_("listen response",f),"ok"!==w&&this.removeListen_(i,s),t.onComplete&&t.onComplete(w,y))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,V.r3)(t,"w")){const i=(0,V.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const s='".indexOn": "'+r._queryParams.getIndex().toString()+'"',l=r._path.toString();co(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${l} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,V.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,V.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,s=>{const l=s.s,d=s.d||"error";this.authToken_===t&&("ok"===l?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(l,d))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),s=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),(0,V.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,s)&&this.connected_&&this.sendUnlisten_(i,s,t._queryObject,r)}sendUnlisten_(t,r,i,s){this.log_("Unlisten on "+t+" for "+r);const l={p:t};s&&(l.q=i,l.t=s),this.sendRequest("n",l)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,s){const l={p:r,d:i};this.log_("onDisconnect "+t,l),this.sendRequest(t,l,d=>{s&&setTimeout(()=>{s(d.s,d.d)},Math.floor(0))})}put(t,r,i,s){this.putInternal("p",t,r,i,s)}merge(t,r,i,s){this.putInternal("m",t,r,i,s)}putInternal(t,r,i,s,l){this.initConnection_();const d={p:r,d:i};void 0!==l&&(d.h=l),this.outstandingPuts_.push({action:t,request:d,onComplete:s}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,s=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,l=>{this.log_(r+" response",l),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),s&&s(l.s,l.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,V.Wl)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):P1("Unrecognized action received from server: "+(0,V.Wl)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,V.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=jE,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=jE,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=jE),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,Se.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),s=t.onRealtimeDisconnect_.bind(t),l=t.id+":"+n.nextConnectionId_++,d=t.lastSessionId;let f=!1,y=null;const w=function(){y?y.close():(f=!0,s())};t.realtime_={close:w,sendRequest:function(N){(0,V.hu)(y,"sendRequest call when we're not connected not allowed."),y.sendRequest(N)}};const x=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[N,U]=yield Promise.all([t.authTokenProvider_.getToken(x),t.appCheckTokenProvider_.getToken(x)]);f?gs("getToken() completed but was canceled"):(gs("getToken() completed. Creating connection."),t.authToken_=N&&N.accessToken,t.appCheckToken_=U&&U.token,y=new tG(l,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,s,Q=>{co(Q+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},d))}catch(N){t.log_("Failed to get token: "+N),f||(t.repoInfo_.nodeAdmin&&co(N),w())}}})()}interrupt(t){gs("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){gs("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,V.xb)(this.interruptReasons_)&&(this.reconnectDelay_=jE,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(l=>O1(l)).join("$"):"default";const s=this.removeListen_(t,i);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(t,r){const i=new tr(t).toString();let s;if(this.listens.has(i)){const l=this.listens.get(i);s=l.get(r),l.delete(r),0===l.size&&this.listens.delete(i)}else s=void 0;return s}onAuthRevoked_(t,r){gs("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){gs("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,V.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+k1.replace(/\./g,"-")]=1,(0,V.uI)()?t["framework.cordova"]=1:(0,V.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=GS.getInstance().currentlyOnline();return(0,V.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class wn{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new wn(e,t)}}class WS{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new wn(up,e),i=new wn(up,t);return 0!==this.compare(r,i)}minPost(){return wn.MIN}}class cG extends WS{static get __EMPTY_NODE(){return qS}static set __EMPTY_NODE(e){qS=e}compare(e,t){return Wm(e.name,t.name)}isDefinedOn(e){throw(0,V.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return wn.MIN}maxPost(){return new wn(ph,qS)}makePost(e,t){return(0,V.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new wn(e,qS)}toString(){return".key"}}const ad=new cG;class ZS{constructor(e,t,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let l=1;for(;!e.isEmpty();)if(l=t?r(e.key,t):1,i&&(l*=-1),l<0)e=this.isReverse_?e.left:e.right;else{if(0===l){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let q1,ju=(()=>{class n{constructor(t,r,i,s,l){this.key=t,this.value=r,this.color=i??n.RED,this.left=s??ua.EMPTY_NODE,this.right=l??ua.EMPTY_NODE}copy(t,r,i,s,l){return new n(t??this.key,r??this.value,i??this.color,s??this.left,l??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let s=this;const l=i(t,s.key);return s=l<0?s.copy(null,null,null,s.left.insert(t,r,i),null):0===l?s.copy(null,r,null,null,null):s.copy(null,null,null,null,s.right.insert(t,r,i)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return ua.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,s;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return ua.EMPTY_NODE;s=i.right.min_(),i=i.copy(s.key,s.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class ua{constructor(e,t=ua.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new ua(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,ju.BLACK,null,null))}remove(e){return new ua(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,ju.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new ZS(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new ZS(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new ZS(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new ZS(this.root_,null,this.comparator_,!0,e)}}function fJ(n,e){return Wm(n.name,e.name)}function W1(n,e){return Wm(n,e)}ua.EMPTY_NODE=new class hJ{copy(e,t,r,i,s){return this}insert(e,t,r){return new ju(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const dG=function(n){return"number"==typeof n?"number:"+Rz(n):"string:"+n},hG=function(n){if(n.isLeafNode()){const e=n.val();(0,V.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,V.r3)(e,".sv"),"Priority must be a string or number.")}else(0,V.hu)(n===q1||n.isEmpty(),"priority of unexpected type.");(0,V.hu)(n===q1||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let fG,pG,gG,Iv=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,V.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),hG(this.priorityNode_)}static set __childrenNodeConstructor(t){fG=t}static get __childrenNodeConstructor(){return fG}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return vn(t)?this:".priority"===yn(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=yn(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,V.hu)(".priority"!==i||1===dp(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(gr(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+dG(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?Rz(this.value_):this.value_,this.lazyHash_=Tz(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,V.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,s=n.VALUE_TYPE_ORDER.indexOf(r),l=n.VALUE_TYPE_ORDER.indexOf(i);return(0,V.hu)(s>=0,"Unknown leaf type: "+r),(0,V.hu)(l>=0,"Unknown leaf type: "+i),s===l?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:l-s}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const Ar=new class _J extends WS{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),s=r.compareTo(i);return 0===s?Wm(e.name,t.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return wn.MIN}maxPost(){return new wn(ph,new Iv("[PRIORITY-POST]",gG))}makePost(e,t){const r=pG(e);return new wn(t,new Iv("[PRIORITY-POST]",r))}toString(){return".priority"}},yJ=Math.log(2);class vJ{constructor(e){this.count=parseInt(Math.log(e+1)/yJ,10),this.current_=this.count-1;const i=(s=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const KS=function(n,e,t,r){n.sort(e);const i=function(f,y){const w=y-f;let D,x;if(0===w)return null;if(1===w)return D=n[f],x=t?t(D):D,new ju(x,D.node,ju.BLACK,null,null);{const N=parseInt(w/2,10)+f,U=i(f,N),Q=i(N+1,y);return D=n[N],x=t?t(D):D,new ju(x,D.node,ju.BLACK,U,Q)}},d=function(f){let y=null,w=null,D=n.length;const x=function(U,Q){const X=D-U,ae=D;D-=U;const Le=i(X+1,ae),je=n[X],Ye=t?t(je):je;N(new ju(Ye,je.node,Q,null,Le))},N=function(U){y?(y.left=U,y=U):(w=U,y=U)};for(let U=0;U<f.count;++U){const Q=f.nextBitIsOne(),X=Math.pow(2,f.count-(U+1));Q?x(X,ju.BLACK):(x(X,ju.BLACK),x(X,ju.RED))}return w}(new vJ(n.length));return new ua(r||e,d)};let Z1;const Dv={};class gh{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,V.hu)(Dv&&Ar,"ChildrenNode.ts has not been loaded"),Z1=Z1||new gh({".priority":Dv},{".priority":Ar}),Z1}get(e){const t=(0,V.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof ua?t:null}hasIndex(e){return(0,V.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,V.hu)(e!==ad,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const s=t.getIterator(wn.Wrap);let d,l=s.getNext();for(;l;)i=i||e.isDefinedOn(l.node),r.push(l),l=s.getNext();d=i?KS(r,e.getCompare()):Dv;const f=e.toString(),y=Object.assign({},this.indexSet_);y[f]=e;const w=Object.assign({},this.indexes_);return w[f]=d,new gh(w,y)}addToIndexes(e,t){const r=(0,V.UI)(this.indexes_,(i,s)=>{const l=(0,V.DV)(this.indexSet_,s);if((0,V.hu)(l,"Missing index implementation for "+s),i===Dv){if(l.isDefinedOn(e.node)){const d=[],f=t.getIterator(wn.Wrap);let y=f.getNext();for(;y;)y.name!==e.name&&d.push(y),y=f.getNext();return d.push(e),KS(d,l.getCompare())}return Dv}{const d=t.get(e.name);let f=i;return d&&(f=f.remove(new wn(e.name,d))),f.insert(e,e.node)}});return new gh(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,V.UI)(this.indexes_,i=>{if(i===Dv)return i;{const s=t.get(e.name);return s?i.remove(new wn(e.name,s)):i}});return new gh(r,this.indexSet_)}}let $E,dn=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&hG(this.priorityNode_),this.children_.isEmpty()&&(0,V.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return $E||($E=new n(new ua(W1),null,gh.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||$E}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?$E:r}}getChild(t){const r=yn(t);return null===r?this:this.getImmediateChild(r).getChild(gr(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,V.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new wn(t,r);let s,l;r.isEmpty()?(s=this.children_.remove(t),l=this.indexMap_.removeFromIndexes(i,this.children_)):(s=this.children_.insert(t,r),l=this.indexMap_.addToIndexes(i,this.children_));const d=s.isEmpty()?$E:this.priorityNode_;return new n(s,d,l)}}updateChild(t,r){const i=yn(t);if(null===i)return r;{(0,V.hu)(".priority"!==yn(t)||1===dp(t),".priority must be the last token in a path");const s=this.getImmediateChild(i).updateChild(gr(t),r);return this.updateImmediateChild(i,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,s=0,l=!0;if(this.forEachChild(Ar,(d,f)=>{r[d]=f.val(t),i++,l&&n.INTEGER_REGEXP_.test(d)?s=Math.max(s,Number(d)):l=!1}),!t&&l&&s<2*i){const d=[];for(const f in r)d[f]=r[f];return d}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+dG(this.getPriority().val())+":"),this.forEachChild(Ar,(r,i)=>{const s=i.hash();""!==s&&(t+=":"+r+":"+s)}),this.lazyHash_=""===t?"":Tz(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const s=this.resolveIndex_(i);if(s){const l=s.getPredecessorKey(new wn(t,r));return l?l.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new wn(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new wn(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(s=>r(s.name,s.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,s=>s);{const s=this.children_.getIteratorFrom(t.name,wn.Wrap);let l=s.peek();for(;null!=l&&r.compare(l,t)<0;)s.getNext(),l=s.peek();return s}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,s=>s);{const s=this.children_.getReverseIteratorFrom(t.name,wn.Wrap);let l=s.peek();for(;null!=l&&r.compare(l,t)>0;)s.getNext(),l=s.peek();return s}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===zE?-1:0}withIndex(t){if(t===ad||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===ad||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(Ar),s=r.getIterator(Ar);let l=i.getNext(),d=s.getNext();for(;l&&d;){if(l.name!==d.name||!l.node.equals(d.node))return!1;l=i.getNext(),d=s.getNext()}return null===l&&null===d}return!1}return!1}}resolveIndex_(t){return t===ad?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const zE=new class wJ extends dn{constructor(){super(new ua(W1),dn.EMPTY_NODE,gh.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return dn.EMPTY_NODE}isEmpty(){return!1}};function ni(n,e=null){if(null===n)return dn.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,V.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new Iv(n,ni(e));if(n instanceof Array){let t=dn.EMPTY_NODE;return ms(n,(r,i)=>{if((0,V.r3)(n,r)&&"."!==r.substring(0,1)){const s=ni(i);(s.isLeafNode()||!s.isEmpty())&&(t=t.updateImmediateChild(r,s))}}),t.updatePriority(ni(e))}{const t=[];let r=!1;if(ms(n,(l,d)=>{if("."!==l.substring(0,1)){const f=ni(d);f.isEmpty()||(r=r||!f.getPriority().isEmpty(),t.push(new wn(l,f)))}}),0===t.length)return dn.EMPTY_NODE;const s=KS(t,fJ,l=>l.name,W1);if(r){const l=KS(t,Ar.getCompare());return new dn(s,ni(e),new gh({".priority":l},{".priority":Ar}))}return new dn(s,ni(e),gh.Default)}}Object.defineProperties(wn,{MIN:{value:new wn(up,dn.EMPTY_NODE)},MAX:{value:new wn(ph,zE)}}),cG.__EMPTY_NODE=dn.EMPTY_NODE,Iv.__childrenNodeConstructor=dn,function pJ(n){q1=n}(zE),function mJ(n){gG=n}(zE),function gJ(n){pG=n}(ni);class K1 extends WS{constructor(e){super(),this.indexPath_=e,(0,V.hu)(!vn(e)&&".priority"!==yn(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),s=r.compareTo(i);return 0===s?Wm(e.name,t.name):s}makePost(e,t){const r=ni(e),i=dn.EMPTY_NODE.updateChild(this.indexPath_,r);return new wn(t,i)}maxPost(){const e=dn.EMPTY_NODE.updateChild(this.indexPath_,zE);return new wn(ph,e)}toString(){return HE(this.indexPath_,0).join("/")}}const Y1=new class EJ extends WS{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?Wm(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return wn.MIN}maxPost(){return wn.MAX}makePost(e,t){const r=ni(e);return new wn(t,r)}toString(){return".value"}};function mG(n){return{type:"value",snapshotNode:n}}function Tv(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function GE(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function WE(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class Q1{constructor(e){this.index_=e}updateChild(e,t,r,i,s,l){(0,V.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const d=e.getImmediateChild(t);return d.getChild(i).equals(r.getChild(i))&&d.isEmpty()===r.isEmpty()||(null!=l&&(r.isEmpty()?e.hasChild(t)?l.trackChildChange(GE(t,d)):(0,V.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):d.isEmpty()?l.trackChildChange(Tv(t,r)):l.trackChildChange(WE(t,r,d))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(Ar,(i,s)=>{t.hasChild(i)||r.trackChildChange(GE(i,s))}),t.isLeafNode()||t.forEachChild(Ar,(i,s)=>{if(e.hasChild(i)){const l=e.getImmediateChild(i);l.equals(s)||r.trackChildChange(WE(i,s,l))}else r.trackChildChange(Tv(i,s))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?dn.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class qE{constructor(e){this.indexedFilter_=new Q1(e.getIndex()),this.index_=e.getIndex(),this.startPost_=qE.getStartPost_(e),this.endPost_=qE.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&r}updateChild(e,t,r,i,s,l){return this.matches(new wn(t,r))||(r=dn.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,s,l)}updateFullNode(e,t,r){t.isLeafNode()&&(t=dn.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(dn.EMPTY_NODE);const s=this;return t.forEachChild(Ar,(l,d)=>{s.matches(new wn(l,d))||(i=i.updateImmediateChild(l,dn.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class IJ{constructor(e){this.withinDirectionalStart=t=>this.reverse_?this.withinEndPost(t):this.withinStartPost(t),this.withinDirectionalEnd=t=>this.reverse_?this.withinStartPost(t):this.withinEndPost(t),this.withinStartPost=t=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),t);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=t=>{const r=this.index_.compare(t,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new qE(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,r,i,s,l){return this.rangedFilter_.matches(new wn(t,r))||(r=dn.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,s,l):this.fullLimitUpdateChild_(e,t,r,s,l)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=dn.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let s;i=dn.EMPTY_NODE.withIndex(this.index_),s=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let l=0;for(;s.hasNext()&&l<this.limit_;){const d=s.getNext();if(this.withinDirectionalStart(d)){if(!this.withinDirectionalEnd(d))break;i=i.updateImmediateChild(d.name,d.node),l++}}}else{let s;i=t.withIndex(this.index_),i=i.updatePriority(dn.EMPTY_NODE),s=this.reverse_?i.getReverseIterator(this.index_):i.getIterator(this.index_);let l=0;for(;s.hasNext();){const d=s.getNext();l<this.limit_&&this.withinDirectionalStart(d)&&this.withinDirectionalEnd(d)?l++:i=i.updateImmediateChild(d.name,dn.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,s){let l;if(this.reverse_){const D=this.index_.getCompare();l=(x,N)=>D(N,x)}else l=this.index_.getCompare();const d=e;(0,V.hu)(d.numChildren()===this.limit_,"");const f=new wn(t,r),y=this.reverse_?d.getFirstChild(this.index_):d.getLastChild(this.index_),w=this.rangedFilter_.matches(f);if(d.hasChild(t)){const D=d.getImmediateChild(t);let x=i.getChildAfterChild(this.index_,y,this.reverse_);for(;null!=x&&(x.name===t||d.hasChild(x.name));)x=i.getChildAfterChild(this.index_,x,this.reverse_);const N=null==x?1:l(x,f);if(w&&!r.isEmpty()&&N>=0)return s?.trackChildChange(WE(t,r,D)),d.updateImmediateChild(t,r);{s?.trackChildChange(GE(t,D));const Q=d.updateImmediateChild(t,dn.EMPTY_NODE);return null!=x&&this.rangedFilter_.matches(x)?(s?.trackChildChange(Tv(x.name,x.node)),Q.updateImmediateChild(x.name,x.node)):Q}}return r.isEmpty()?e:w&&l(y,f)>=0?(null!=s&&(s.trackChildChange(GE(y.name,y.node)),s.trackChildChange(Tv(t,r))),d.updateImmediateChild(t,r).updateImmediateChild(y.name,dn.EMPTY_NODE)):e}}class YS{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Ar}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,V.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,V.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:up}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,V.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,V.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:ph}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,V.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Ar}copy(){const e=new YS;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function J1(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function X1(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function QS(n,e){const t=n.copy();return t.index_=e,t}function _G(n){const e={};if(n.isDefault())return e;let t;if(n.index_===Ar?t="$priority":n.index_===Y1?t="$value":n.index_===ad?t="$key":((0,V.hu)(n.index_ instanceof K1,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,V.Wl)(t),n.startSet_){const r=n.startAfterSet_?"startAfter":"startAt";e[r]=(0,V.Wl)(n.indexStartValue_),n.startNameSet_&&(e[r]+=","+(0,V.Wl)(n.indexStartName_))}if(n.endSet_){const r=n.endBeforeSet_?"endBefore":"endAt";e[r]=(0,V.Wl)(n.indexEndValue_),n.endNameSet_&&(e[r]+=","+(0,V.Wl)(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function yG(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==Ar&&(e.i=n.index_.toString()),e}class JS extends nG{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=FE("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,V.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const l=JS.getListenId_(e,r),d={};this.listens_[l]=d;const f=_G(e._queryParams);this.restRequest_(s+".json",f,(y,w)=>{let D=w;if(404===y&&(D=null,y=null),null===y&&this.onDataUpdate_(s,D,!1,r),(0,V.DV)(this.listens_,l)===d){let x;x=y?401===y?"permission_denied":"rest_error:"+y:"ok",i(x,null)}})}unlisten(e,t){const r=JS.getListenId_(e,t);delete this.listens_[r]}get(e){const t=_G(e._queryParams),r=e._path.toString(),i=new V.BH;return this.restRequest_(r+".json",t,(s,l)=>{let d=l;404===s&&(d=null,s=null),null===s?(this.onDataUpdate_(r,d,!1,null),i.resolve(d)):i.reject(new Error(d))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(t.auth=i.accessToken),s&&s.token&&(t.ac=s.token);const l=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,V.xO)(t);this.log_("Sending REST request for "+l);const d=new XMLHttpRequest;d.onreadystatechange=()=>{if(r&&4===d.readyState){this.log_("REST Response for "+l+" received. status:",d.status,"response:",d.responseText);let f=null;if(d.status>=200&&d.status<300){try{f=(0,V.cI)(d.responseText)}catch{co("Failed to parse JSON response for "+l+": "+d.responseText)}r(null,f)}else 401!==d.status&&404!==d.status&&co("Got unsuccessful REST response for "+l+" Status: "+d.status),r(d.status);r=null}},d.open("GET",l,!0),d.send()})}}class RJ{constructor(){this.rootNode_=dn.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function XS(){return{value:null,children:new Map}}function Av(n,e,t){if(vn(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=yn(e);n.children.has(r)||n.children.set(r,XS()),Av(n.children.get(r),e=gr(e),t)}}function eL(n,e){if(vn(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(Ar,(r,i)=>{Av(n,new tr(r),i)}),eL(n,e)}}if(n.children.size>0){const t=yn(e);return e=gr(e),n.children.has(t)&&eL(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function tL(n,e,t){null!==n.value?t(e,n.value):function MJ(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{tL(i,new tr(e.toString()+"/"+r),t)})}class kJ{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&ms(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class OJ{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new kJ(e);const r=1e4+2e4*Math.random();VE(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;ms(e,(i,s)=>{s>0&&(0,V.r3)(this.statsToReport_,i)&&(t[i]=s,r=!0)}),r&&this.server_.reportStats(t),VE(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var zl=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(zl||(zl={})),zl))();function iL(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class ex{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=zl.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(vn(this.path)){if(null!=this.affectedTree.value)return(0,V.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new tr(e));return new ex(Wn(),t,this.revert)}}return(0,V.hu)(yn(this.path)===e,"operationForChild called for unrelated child."),new ex(gr(this.path),this.affectedTree,this.revert)}}class ZE{constructor(e,t){this.source=e,this.path=t,this.type=zl.LISTEN_COMPLETE}operationForChild(e){return vn(this.path)?new ZE(this.source,Wn()):new ZE(this.source,gr(this.path))}}class Km{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=zl.OVERWRITE}operationForChild(e){return vn(this.path)?new Km(this.source,Wn(),this.snap.getImmediateChild(e)):new Km(this.source,gr(this.path),this.snap)}}class Sv{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=zl.MERGE}operationForChild(e){if(vn(this.path)){const t=this.children.subtree(new tr(e));return t.isEmpty()?null:t.value?new Km(this.source,Wn(),t.value):new Sv(this.source,Wn(),t)}return(0,V.hu)(yn(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Sv(this.source,gr(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class hp{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(vn(e))return this.isFullyInitialized()&&!this.filtered_;const t=yn(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class LJ{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function KE(n,e,t,r,i,s){const l=r.filter(d=>d.type===t);l.sort((d,f)=>function VJ(n,e,t){if(null==e.childName||null==t.childName)throw(0,V.g5)("Should only compare child_ events.");const r=new wn(e.childName,e.snapshotNode),i=new wn(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,d,f)),l.forEach(d=>{const f=function UJ(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,d,s);i.forEach(y=>{y.respondsTo(d.type)&&e.push(y.createEvent(f,n.query_))})})}function tx(n,e){return{eventCache:n,serverCache:e}}function YE(n,e,t,r){return tx(new hp(e,t,r),n.serverCache)}function wG(n,e,t,r){return tx(n.eventCache,new hp(e,t,r))}function nx(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Ym(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let sL;class Sr{constructor(e,t=(()=>(sL||(sL=new ua(CQ)),sL))()){this.value=e,this.children=t}static fromObject(e){let t=new Sr(null);return ms(e,(r,i)=>{t=t.set(new tr(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:Wn(),value:this.value};if(vn(e))return null;{const r=yn(e),i=this.children.get(r);if(null!==i){const s=i.findRootMostMatchingPathAndValue(gr(e),t);return null!=s?{path:zr(new tr(r),s.path),value:s.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(vn(e))return this;{const t=yn(e),r=this.children.get(t);return null!==r?r.subtree(gr(e)):new Sr(null)}}set(e,t){if(vn(e))return new Sr(t,this.children);{const r=yn(e),s=(this.children.get(r)||new Sr(null)).set(gr(e),t),l=this.children.insert(r,s);return new Sr(this.value,l)}}remove(e){if(vn(e))return this.children.isEmpty()?new Sr(null):new Sr(null,this.children);{const t=yn(e),r=this.children.get(t);if(r){const i=r.remove(gr(e));let s;return s=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&s.isEmpty()?new Sr(null):new Sr(this.value,s)}return this}}get(e){if(vn(e))return this.value;{const t=yn(e),r=this.children.get(t);return r?r.get(gr(e)):null}}setTree(e,t){if(vn(e))return t;{const r=yn(e),s=(this.children.get(r)||new Sr(null)).setTree(gr(e),t);let l;return l=s.isEmpty()?this.children.remove(r):this.children.insert(r,s),new Sr(this.value,l)}}fold(e){return this.fold_(Wn(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(zr(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,Wn(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(vn(e))return null;{const s=yn(e),l=this.children.get(s);return l?l.findOnPath_(gr(e),zr(t,s),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,Wn(),t)}foreachOnPath_(e,t,r){if(vn(e))return this;{this.value&&r(t,this.value);const i=yn(e),s=this.children.get(i);return s?s.foreachOnPath_(gr(e),zr(t,i),r):new Sr(null)}}foreach(e){this.foreach_(Wn(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(zr(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class $u{constructor(e){this.writeTree_=e}static empty(){return new $u(new Sr(null))}}function QE(n,e,t){if(vn(e))return new $u(new Sr(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let s=r.value;const l=jo(i,e);return s=s.updateChild(l,t),new $u(n.writeTree_.set(i,s))}{const i=new Sr(t),s=n.writeTree_.setTree(e,i);return new $u(s)}}}function oL(n,e,t){let r=n;return ms(t,(i,s)=>{r=QE(r,zr(e,i),s)}),r}function bG(n,e){if(vn(e))return $u.empty();{const t=n.writeTree_.setTree(e,new Sr(null));return new $u(t)}}function aL(n,e){return null!=Qm(n,e)}function Qm(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(jo(t.path,e)):null}function EG(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(Ar,(r,i)=>{e.push(new wn(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new wn(r,i.value))}),e}function fp(n,e){if(vn(e))return n;{const t=Qm(n,e);return new $u(null!=t?new Sr(t):n.writeTree_.subtree(e))}}function lL(n){return n.writeTree_.isEmpty()}function xv(n,e){return CG(Wn(),n.writeTree_,e)}function CG(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{".priority"===i?((0,V.hu)(null!==s.value,"Priority writes must always be leaf nodes"),r=s.value):t=CG(zr(n,i),s,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(zr(n,".priority"),r)),t}}function rx(n,e){return SG(e,n)}function GJ(n,e){if(n.snap)return $l(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&$l(zr(n.path,t),e))return!0;return!1}function qJ(n){return n.visible}function IG(n,e,t){let r=$u.empty();for(let i=0;i<n.length;++i){const s=n[i];if(e(s)){const l=s.path;let d;if(s.snap)$l(t,l)?(d=jo(t,l),r=QE(r,d,s.snap)):$l(l,t)&&(d=jo(l,t),r=QE(r,Wn(),s.snap.getChild(d)));else{if(!s.children)throw(0,V.g5)("WriteRecord should have .snap or .children");if($l(t,l))d=jo(t,l),r=oL(r,d,s.children);else if($l(l,t))if(d=jo(l,t),vn(d))r=oL(r,Wn(),s.children);else{const f=(0,V.DV)(s.children,yn(d));if(f){const y=f.getChild(gr(d));r=QE(r,Wn(),y)}}}}}return r}function DG(n,e,t,r,i){if(r||i){const s=fp(n.visibleWrites,e);return!i&&lL(s)?t:i||null!=t||aL(s,Wn())?xv(IG(n.allWrites,function(y){return(y.visible||i)&&(!r||!~r.indexOf(y.writeId))&&($l(y.path,e)||$l(e,y.path))},e),t||dn.EMPTY_NODE):null}{const s=Qm(n.visibleWrites,e);if(null!=s)return s;{const l=fp(n.visibleWrites,e);return lL(l)?t:null!=t||aL(l,Wn())?xv(l,t||dn.EMPTY_NODE):null}}}function ix(n,e,t,r){return DG(n.writeTree,n.treePath,e,t,r)}function uL(n,e){return function ZJ(n,e,t){let r=dn.EMPTY_NODE;const i=Qm(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Ar,(s,l)=>{r=r.updateImmediateChild(s,l)}),r;if(t){const s=fp(n.visibleWrites,e);return t.forEachChild(Ar,(l,d)=>{const f=xv(fp(s,new tr(l)),d);r=r.updateImmediateChild(l,f)}),EG(s).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}return EG(fp(n.visibleWrites,e)).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}(n.writeTree,n.treePath,e)}function TG(n,e,t,r){return function KJ(n,e,t,r,i){(0,V.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=zr(e,t);if(aL(n.visibleWrites,s))return null;{const l=fp(n.visibleWrites,s);return lL(l)?i.getChild(t):xv(l,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function sx(n,e){return function QJ(n,e){return Qm(n.visibleWrites,e)}(n.writeTree,zr(n.treePath,e))}function cL(n,e,t){return function YJ(n,e,t,r){const i=zr(e,t),s=Qm(n.visibleWrites,i);return null!=s?s:r.isCompleteForChild(t)?xv(fp(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function AG(n,e){return SG(zr(n.treePath,e),n.writeTree)}function SG(n,e){return{treePath:n,writeTree:e}}class tX{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,V.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,V.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const s=i.type;if("child_added"===t&&"child_removed"===s)this.changeMap.set(r,WE(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===s)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===s)this.changeMap.set(r,GE(r,i.oldSnap));else if("child_changed"===t&&"child_added"===s)this.changeMap.set(r,Tv(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==s)throw(0,V.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,WE(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const xG=new class nX{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class dL{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new hp(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return cL(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Ym(this.viewCache_),s=function eX(n,e,t,r,i,s){return function JJ(n,e,t,r,i,s,l){let d;const f=fp(n.visibleWrites,e),y=Qm(f,Wn());if(null!=y)d=y;else{if(null==t)return[];d=xv(f,t)}if(d=d.withIndex(l),d.isEmpty()||d.isLeafNode())return[];{const w=[],D=l.getCompare(),x=s?d.getReverseIteratorFrom(r,l):d.getIteratorFrom(r,l);let N=x.getNext();for(;N&&w.length<i;)0!==D(N,r)&&w.push(N),N=x.getNext();return w}}(n.writeTree,n.treePath,e,t,r,i,s)}(this.writes_,i,t,1,r,e);return 0===s.length?null:s[0]}}function RG(n,e,t,r,i,s){const l=e.eventCache;if(null!=sx(r,t))return e;{let d,f;if(vn(t))if((0,V.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const y=Ym(e),D=uL(r,y instanceof dn?y:dn.EMPTY_NODE);d=n.filter.updateFullNode(e.eventCache.getNode(),D,s)}else{const y=ix(r,Ym(e));d=n.filter.updateFullNode(e.eventCache.getNode(),y,s)}else{const y=yn(t);if(".priority"===y){(0,V.hu)(1===dp(t),"Can't have a priority with additional path components");const w=l.getNode();f=e.serverCache.getNode();const D=TG(r,t,w,f);d=null!=D?n.filter.updatePriority(w,D):l.getNode()}else{const w=gr(t);let D;if(l.isCompleteForChild(y)){f=e.serverCache.getNode();const x=TG(r,t,l.getNode(),f);D=null!=x?l.getNode().getImmediateChild(y).updateChild(w,x):l.getNode().getImmediateChild(y)}else D=cL(r,y,e.serverCache);d=null!=D?n.filter.updateChild(l.getNode(),y,D,w,i,s):l.getNode()}}return YE(e,d,l.isFullyInitialized()||vn(t),n.filter.filtersNodes())}}function ox(n,e,t,r,i,s,l,d){const f=e.serverCache;let y;const w=l?n.filter:n.filter.getIndexedFilter();if(vn(t))y=w.updateFullNode(f.getNode(),r,null);else if(w.filtersNodes()&&!f.isFiltered()){const N=f.getNode().updateChild(t,r);y=w.updateFullNode(f.getNode(),N,null)}else{const N=yn(t);if(!f.isCompleteForPath(t)&&dp(t)>1)return e;const U=gr(t),X=f.getNode().getImmediateChild(N).updateChild(U,r);y=".priority"===N?w.updatePriority(f.getNode(),X):w.updateChild(f.getNode(),N,X,U,xG,null)}const D=wG(e,y,f.isFullyInitialized()||vn(t),w.filtersNodes());return RG(n,D,t,i,new dL(i,D,s),d)}function hL(n,e,t,r,i,s,l){const d=e.eventCache;let f,y;const w=new dL(i,e,s);if(vn(t))y=n.filter.updateFullNode(e.eventCache.getNode(),r,l),f=YE(e,y,!0,n.filter.filtersNodes());else{const D=yn(t);if(".priority"===D)y=n.filter.updatePriority(e.eventCache.getNode(),r),f=YE(e,y,d.isFullyInitialized(),d.isFiltered());else{const x=gr(t),N=d.getNode().getImmediateChild(D);let U;if(vn(x))U=r;else{const Q=w.getCompleteChild(D);U=null!=Q?".priority"===$1(x)&&Q.getChild(oG(x)).isEmpty()?Q:Q.updateChild(x,r):dn.EMPTY_NODE}f=N.equals(U)?e:YE(e,n.filter.updateChild(d.getNode(),D,U,x,w,l),d.isFullyInitialized(),n.filter.filtersNodes())}}return f}function MG(n,e){return n.eventCache.isCompleteForChild(e)}function kG(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function fL(n,e,t,r,i,s,l,d){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let y,f=e;y=vn(t)?r:new Sr(null).setTree(t,r);const w=e.serverCache.getNode();return y.children.inorderTraversal((D,x)=>{if(w.hasChild(D)){const U=kG(0,e.serverCache.getNode().getImmediateChild(D),x);f=ox(n,f,new tr(D),U,i,s,l,d)}}),y.children.inorderTraversal((D,x)=>{const N=!e.serverCache.isCompleteForChild(D)&&null===x.value;if(!w.hasChild(D)&&!N){const Q=kG(0,e.serverCache.getNode().getImmediateChild(D),x);f=ox(n,f,new tr(D),Q,i,s,l,d)}}),f}class dX{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new Q1(r.getIndex()),s=function DJ(n){return n.loadsAllData()?new Q1(n.getIndex()):n.hasLimit()?new IJ(n):new qE(n)}(r);this.processor_=function rX(n){return{filter:n}}(s);const l=t.serverCache,d=t.eventCache,f=i.updateFullNode(dn.EMPTY_NODE,l.getNode(),null),y=s.updateFullNode(dn.EMPTY_NODE,d.getNode(),null),w=new hp(f,l.isFullyInitialized(),i.filtersNodes()),D=new hp(y,d.isFullyInitialized(),s.filtersNodes());this.viewCache_=tx(D,w),this.eventGenerator_=new LJ(this.query_)}get query(){return this.query_}}function pX(n,e){const t=Ym(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!vn(e)&&!t.getImmediateChild(yn(e)).isEmpty())?t.getChild(e):null}function NG(n){return 0===n.eventRegistrations_.length}function PG(n,e,t){const r=[];if(t){(0,V.hu)(null==e,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(s=>{const l=s.createCancelEvent(t,i);l&&r.push(l)})}if(e){let i=[];for(let s=0;s<n.eventRegistrations_.length;++s){const l=n.eventRegistrations_[s];if(l.matches(e)){if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(s+1));break}}else i.push(l)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function OG(n,e,t,r){e.type===zl.MERGE&&null!==e.source.queryId&&((0,V.hu)(Ym(n.viewCache_),"We should always have a full cache before handling merges"),(0,V.hu)(nx(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,s=function sX(n,e,t,r,i){const s=new tX;let l,d;if(t.type===zl.OVERWRITE){const y=t;y.source.fromUser?l=hL(n,e,y.path,y.snap,r,i,s):((0,V.hu)(y.source.fromServer,"Unknown source."),d=y.source.tagged||e.serverCache.isFiltered()&&!vn(y.path),l=ox(n,e,y.path,y.snap,r,i,d,s))}else if(t.type===zl.MERGE){const y=t;y.source.fromUser?l=function aX(n,e,t,r,i,s,l){let d=e;return r.foreach((f,y)=>{const w=zr(t,f);MG(e,yn(w))&&(d=hL(n,d,w,y,i,s,l))}),r.foreach((f,y)=>{const w=zr(t,f);MG(e,yn(w))||(d=hL(n,d,w,y,i,s,l))}),d}(n,e,y.path,y.children,r,i,s):((0,V.hu)(y.source.fromServer,"Unknown source."),d=y.source.tagged||e.serverCache.isFiltered(),l=fL(n,e,y.path,y.children,r,i,d,s))}else if(t.type===zl.ACK_USER_WRITE){const y=t;l=y.revert?function cX(n,e,t,r,i,s){let l;if(null!=sx(r,t))return e;{const d=new dL(r,e,i),f=e.eventCache.getNode();let y;if(vn(t)||".priority"===yn(t)){let w;if(e.serverCache.isFullyInitialized())w=ix(r,Ym(e));else{const D=e.serverCache.getNode();(0,V.hu)(D instanceof dn,"serverChildren would be complete if leaf node"),w=uL(r,D)}y=n.filter.updateFullNode(f,w,s)}else{const w=yn(t);let D=cL(r,w,e.serverCache);null==D&&e.serverCache.isCompleteForChild(w)&&(D=f.getImmediateChild(w)),y=null!=D?n.filter.updateChild(f,w,D,gr(t),d,s):e.eventCache.getNode().hasChild(w)?n.filter.updateChild(f,w,dn.EMPTY_NODE,gr(t),d,s):f,y.isEmpty()&&e.serverCache.isFullyInitialized()&&(l=ix(r,Ym(e)),l.isLeafNode()&&(y=n.filter.updateFullNode(y,l,s)))}return l=e.serverCache.isFullyInitialized()||null!=sx(r,Wn()),YE(e,y,l,n.filter.filtersNodes())}}(n,e,y.path,r,i,s):function lX(n,e,t,r,i,s,l){if(null!=sx(i,t))return e;const d=e.serverCache.isFiltered(),f=e.serverCache;if(null!=r.value){if(vn(t)&&f.isFullyInitialized()||f.isCompleteForPath(t))return ox(n,e,t,f.getNode().getChild(t),i,s,d,l);if(vn(t)){let y=new Sr(null);return f.getNode().forEachChild(ad,(w,D)=>{y=y.set(new tr(w),D)}),fL(n,e,t,y,i,s,d,l)}return e}{let y=new Sr(null);return r.foreach((w,D)=>{const x=zr(t,w);f.isCompleteForPath(x)&&(y=y.set(w,f.getNode().getChild(x)))}),fL(n,e,t,y,i,s,d,l)}}(n,e,y.path,y.affectedTree,r,i,s)}else{if(t.type!==zl.LISTEN_COMPLETE)throw(0,V.g5)("Unknown operation type: "+t.type);l=function uX(n,e,t,r,i){const s=e.serverCache;return RG(n,wG(e,s.getNode(),s.isFullyInitialized()||vn(t),s.isFiltered()),t,r,xG,i)}(n,e,t.path,r,s)}const f=s.getChanges();return function oX(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=nx(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&t.push(mG(nx(e)))}}(e,l,f),{viewCache:l,changes:f}}(n.processor_,i,e,t,r);return function iX(n,e){(0,V.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,V.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,s.viewCache),(0,V.hu)(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=s.viewCache,LG(n,s.changes,s.viewCache.eventCache.getNode(),null)}function LG(n,e,t,r){return function FJ(n,e,t,r){const i=[],s=[];return e.forEach(l=>{"child_changed"===l.type&&n.index_.indexedValueChanged(l.oldSnap,l.snapshotNode)&&s.push(function CJ(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(l.childName,l.snapshotNode))}),KE(n,i,"child_removed",e,r,t),KE(n,i,"child_added",e,r,t),KE(n,i,"child_moved",s,r,t),KE(n,i,"child_changed",e,r,t),KE(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let ax,ux;class FG{constructor(){this.views=new Map}}function pL(n,e,t,r){const i=e.source.queryId;if(null!==i){const s=n.views.get(i);return(0,V.hu)(null!=s,"SyncTree gave us an op for an invalid query."),OG(s,e,t,r)}{let s=[];for(const l of n.views.values())s=s.concat(OG(l,e,t,r));return s}}function UG(n,e,t,r,i){const l=n.views.get(e._queryIdentifier);if(!l){let d=ix(t,i?r:null),f=!1;d?f=!0:r instanceof dn?(d=uL(t,r),f=!1):(d=dn.EMPTY_NODE,f=!1);const y=tx(new hp(d,f,!1),new hp(r,i,!1));return new dX(e,y)}return l}function VG(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function pp(n,e){let t=null;for(const r of n.views.values())t=t||pX(r,e);return t}function BG(n,e){return e._queryParams.loadsAllData()?lx(n):n.views.get(e._queryIdentifier)}function HG(n,e){return null!=BG(n,e)}function gp(n){return null!=lx(n)}function lx(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let IX=1;class jG{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Sr(null),this.pendingWriteTree_=function XJ(){return{visibleWrites:$u.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function gL(n,e,t,r,i){return function HJ(n,e,t,r,i){(0,V.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=QE(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?Rv(n,new Km({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function mp(n,e,t=!1){const r=function $J(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function zJ(n,e){const t=n.allWrites.findIndex(d=>d.writeId===e);(0,V.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,s=!1,l=n.allWrites.length-1;for(;i&&l>=0;){const d=n.allWrites[l];d.visible&&(l>=t&&GJ(d,r.path)?i=!1:$l(r.path,d.path)&&(s=!0)),l--}return!!i&&(s?(function WJ(n){n.visibleWrites=IG(n.allWrites,qJ,Wn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=bG(n.visibleWrites,r.path):ms(r.children,f=>{n.visibleWrites=bG(n.visibleWrites,zr(r.path,f))}),!0))}(n.pendingWriteTree_,e)){let s=new Sr(null);return null!=r.snap?s=s.set(Wn(),!0):ms(r.children,l=>{s=s.set(new tr(l),!0)}),Rv(n,new ex(r.path,s,t))}return[]}function JE(n,e,t){return Rv(n,new Km({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function cx(n,e,t,r,i=!1){const s=e._path,l=n.syncPointTree_.get(s);let d=[];if(l&&("default"===e._queryIdentifier||HG(l,e))){const f=function bX(n,e,t,r){const i=e._queryIdentifier,s=[];let l=[];const d=gp(n);if("default"===i)for(const[f,y]of n.views.entries())l=l.concat(PG(y,t,r)),NG(y)&&(n.views.delete(f),y.query._queryParams.loadsAllData()||s.push(y.query));else{const f=n.views.get(i);f&&(l=l.concat(PG(f,t,r)),NG(f)&&(n.views.delete(i),f.query._queryParams.loadsAllData()||s.push(f.query)))}return d&&!gp(n)&&s.push(new(function yX(){return(0,V.hu)(ax,"Reference.ts has not been loaded"),ax}())(e._repo,e._path)),{removed:s,events:l}}(l,e,t,r);(function vX(n){return 0===n.views.size})(l)&&(n.syncPointTree_=n.syncPointTree_.remove(s));const y=f.removed;if(d=f.events,!i){const w=-1!==y.findIndex(x=>x._queryParams.loadsAllData()),D=n.syncPointTree_.findOnPath(s,(x,N)=>gp(N));if(w&&!D){const x=n.syncPointTree_.subtree(s);if(!x.isEmpty()){const N=function MX(n){return n.fold((e,t,r)=>{if(t&&gp(t))return[lx(t)];{let i=[];return t&&(i=VG(t)),ms(r,(s,l)=>{i=i.concat(l)}),i}})}(x);for(let U=0;U<N.length;++U){const Q=N[U],X=Q.query,ae=WG(n,Q);n.listenProvider_.startListening(eC(X),XE(n,X),ae.hashFn,ae.onComplete)}}}!D&&y.length>0&&!r&&(w?n.listenProvider_.stopListening(eC(e),null):y.forEach(x=>{const N=n.queryToTagMap.get(hx(x));n.listenProvider_.stopListening(eC(x),N)}))}!function kX(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const i=hx(r),s=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(s)}}}(n,y)}return d}function $G(n,e,t,r){const i=_L(n,r);if(null!=i){const s=yL(i),l=s.path,d=s.queryId,f=jo(l,e);return vL(n,l,new Km(iL(d),f,t))}return[]}function mL(n,e,t,r=!1){const i=e._path;let s=null,l=!1;n.syncPointTree_.foreachOnPath(i,(x,N)=>{const U=jo(x,i);s=s||pp(N,U),l=l||gp(N)});let f,d=n.syncPointTree_.get(i);d?(l=l||gp(d),s=s||pp(d,Wn())):(d=new FG,n.syncPointTree_=n.syncPointTree_.set(i,d)),null!=s?f=!0:(f=!1,s=dn.EMPTY_NODE,n.syncPointTree_.subtree(i).foreachChild((N,U)=>{const Q=pp(U,Wn());Q&&(s=s.updateImmediateChild(N,Q))}));const y=HG(d,e);if(!y&&!e._queryParams.loadsAllData()){const x=hx(e);(0,V.hu)(!n.queryToTagMap.has(x),"View does not exist, but we have a tag");const N=function NX(){return IX++}();n.queryToTagMap.set(x,N),n.tagToQueryMap.set(N,x)}let D=function wX(n,e,t,r,i,s){const l=UG(n,e,r,i,s);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,l),function gX(n,e){n.eventRegistrations_.push(e)}(l,t),function mX(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(Ar,(s,l)=>{r.push(Tv(s,l))}),t.isFullyInitialized()&&r.push(mG(t.getNode())),LG(n,r,t.getNode(),e)}(l,t)}(d,e,t,rx(n.pendingWriteTree_,i),s,f);if(!y&&!l&&!r){const x=BG(d,e);D=D.concat(function PX(n,e,t){const r=e._path,i=XE(n,e),s=WG(n,t),l=n.listenProvider_.startListening(eC(e),i,s.hashFn,s.onComplete),d=n.syncPointTree_.subtree(r);if(i)(0,V.hu)(!gp(d.value),"If we're adding a query, it shouldn't be shadowed");else{const f=d.fold((y,w,D)=>{if(!vn(y)&&w&&gp(w))return[lx(w).query];{let x=[];return w&&(x=x.concat(VG(w).map(N=>N.query))),ms(D,(N,U)=>{x=x.concat(U)}),x}});for(let y=0;y<f.length;++y){const w=f[y];n.listenProvider_.stopListening(eC(w),XE(n,w))}}return l}(n,e,x))}return D}function dx(n,e,t){const i=n.pendingWriteTree_,s=n.syncPointTree_.findOnPath(e,(l,d)=>{const y=pp(d,jo(l,e));if(y)return y});return DG(i,e,s,t,!0)}function Rv(n,e){return zG(e,n.syncPointTree_,null,rx(n.pendingWriteTree_,Wn()))}function zG(n,e,t,r){if(vn(n.path))return GG(n,e,t,r);{const i=e.get(Wn());null==t&&null!=i&&(t=pp(i,Wn()));let s=[];const l=yn(n.path),d=n.operationForChild(l),f=e.children.get(l);if(f&&d){const y=t?t.getImmediateChild(l):null,w=AG(r,l);s=s.concat(zG(d,f,y,w))}return i&&(s=s.concat(pL(i,n,r,t))),s}}function GG(n,e,t,r){const i=e.get(Wn());null==t&&null!=i&&(t=pp(i,Wn()));let s=[];return e.children.inorderTraversal((l,d)=>{const f=t?t.getImmediateChild(l):null,y=AG(r,l),w=n.operationForChild(l);w&&(s=s.concat(GG(w,d,f,y)))}),i&&(s=s.concat(pL(i,n,r,t))),s}function WG(n,e){const t=e.query,r=XE(n,t);return{hashFn:()=>(function hX(n){return n.viewCache_.serverCache.getNode()}(e)||dn.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function SX(n,e,t){const r=_L(n,t);if(r){const i=yL(r),s=i.path,l=i.queryId,d=jo(s,e);return vL(n,s,new ZE(iL(l),d))}return[]}(n,t._path,r):function AX(n,e){return Rv(n,new ZE({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const s=function TQ(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(i,t);return cx(n,t,null,s)}}}}function XE(n,e){const t=hx(e);return n.queryToTagMap.get(t)}function hx(n){return n._path.toString()+"$"+n._queryIdentifier}function _L(n,e){return n.tagToQueryMap.get(e)}function yL(n){const e=n.indexOf("$");return(0,V.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new tr(n.substr(0,e))}}function vL(n,e,t){const r=n.syncPointTree_.get(e);return(0,V.hu)(r,"Missing sync point for query tag that we're tracking"),pL(r,t,rx(n.pendingWriteTree_,e),null)}function eC(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function CX(){return(0,V.hu)(ux,"Reference.ts has not been loaded"),ux}())(n._repo,n._path):n}class wL{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new wL(t)}node(){return this.node_}}class bL{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=zr(this.path_,e);return new bL(this.syncTree_,t)}node(){return dx(this.syncTree_,this.path_)}}const qG=function(n,e,t){return n&&"object"==typeof n?((0,V.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?LX(n[".sv"],e,t):"object"==typeof n[".sv"]?FX(n[".sv"],e):void(0,V.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},LX=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,V.hu)(!1,"Unexpected server value: "+n)},FX=function(n,e,t){n.hasOwnProperty("increment")||(0,V.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,V.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,V.hu)(null!==i&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const l=i.getValue();return"number"!=typeof l?r:l+r},ZG=function(n,e,t,r){return CL(e,new bL(t,n),r)},EL=function(n,e,t){return CL(n,new wL(e),t)};function CL(n,e,t){const r=n.getPriority().val(),i=qG(r,e.getImmediateChild(".priority"),t);let s;if(n.isLeafNode()){const l=n,d=qG(l.getValue(),e,t);return d!==l.getValue()||i!==l.getPriority().val()?new Iv(d,ni(i)):n}{const l=n;return s=l,i!==l.getPriority().val()&&(s=s.updatePriority(new Iv(i))),l.forEachChild(Ar,(d,f)=>{const y=CL(f,e.getImmediateChild(d),t);y!==f&&(s=s.updateImmediateChild(d,y))}),s}}class IL{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function fx(n,e){let t=e instanceof tr?e:new tr(e),r=n,i=yn(t);for(;null!==i;){const s=(0,V.DV)(r.node.children,i)||{children:{},childCount:0};r=new IL(i,r,s),t=gr(t),i=yn(t)}return r}function Jm(n){return n.node.value}function DL(n,e){n.node.value=e,TL(n)}function KG(n){return n.node.childCount>0}function px(n,e){ms(n.node.children,(t,r)=>{e(new IL(t,n,r))})}function YG(n,e,t,r){t&&!r&&e(n),px(n,i=>{YG(i,e,!0,r)}),t&&r&&e(n)}function tC(n){return new tr(null===n.parent?n.name:tC(n.parent)+"/"+n.name)}function TL(n){null!==n.parent&&function BX(n,e,t){const r=function UX(n){return void 0===Jm(n)&&!KG(n)}(t),i=(0,V.r3)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,TL(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,TL(n))}(n.parent,n.name,n)}const HX=/[\[\].#$\/\u0000-\u001F\u007F]/,jX=/[\[\].#$\u0000-\u001F\u007F]/,AL=10485760,gx=function(n){return"string"==typeof n&&0!==n.length&&!HX.test(n)},QG=function(n){return"string"==typeof n&&0!==n.length&&!jX.test(n)},nC=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!jS(n)||n&&"object"==typeof n&&(0,V.r3)(n,".sv")},ld=function(n,e,t,r){r&&void 0===e||rC((0,V.gK)(n,"value"),e,t)},rC=function(n,e,t){const r=t instanceof tr?new sJ(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+qm(r));if("function"==typeof e)throw new Error(n+"contains a function "+qm(r)+" with contents = "+e.toString());if(jS(e))throw new Error(n+"contains "+e.toString()+" "+qm(r));if("string"==typeof e&&e.length>AL/3&&(0,V.ug)(e)>AL)throw new Error(n+"contains a string greater than "+AL+" utf8 bytes "+qm(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,s=!1;if(ms(e,(l,d)=>{if(".value"===l)i=!0;else if(".priority"!==l&&".sv"!==l&&(s=!0,!gx(l)))throw new Error(n+" contains an invalid key ("+l+") "+qm(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function oJ(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,V.ug)(e),aG(n)})(r,l),rC(n,d,r),function aJ(n){const e=n.parts_.pop();n.byteLength_-=(0,V.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&s)throw new Error(n+' contains ".value" child '+qm(r)+" in addition to actual children.")}},JG=function(n,e,t,r){if(r&&void 0===e)return;const i=(0,V.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const s=[];ms(e,(l,d)=>{const f=new tr(l);if(rC(i,d,zr(t,f)),".priority"===$1(f)&&!nC(d))throw new Error(i+"contains an invalid value for '"+f.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(f)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const s=HE(r);for(let l=0;l<s.length;l++)if((".priority"!==s[l]||l!==s.length-1)&&!gx(s[l]))throw new Error(n+"contains an invalid key ("+s[l]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(iJ);let i=null;for(t=0;t<e.length;t++){if(r=e[t],null!==i&&$l(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,s)},SL=function(n,e,t){if(!t||void 0!==e){if(jS(e))throw new Error((0,V.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!nC(e))throw new Error((0,V.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},iC=function(n,e,t,r){if(!(r&&void 0===t||gx(t)))throw new Error((0,V.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},sC=function(n,e,t,r){if(!(r&&void 0===t||QG(t)))throw new Error((0,V.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Gl=function(n,e){if(".info"===yn(e))throw new Error(n+" failed = Can't modify data under /.info/")},XG=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!gx(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),QG(n)}(t))throw new Error((0,V.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class WX{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function mx(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],s=i.getPath();null!==t&&!z1(s,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:s}),t.events.push(i)}t&&n.eventLists_.push(t)}function e3(n,e,t){mx(n,t),t3(n,r=>z1(r,e))}function Wa(n,e,t){mx(n,t),t3(n,r=>$l(r,e)||$l(e,r))}function t3(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(qX(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function qX(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();Gm&&gs("event: "+t.toString()),Ev(r)}}}const n3="repo_interrupt";class KX{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new WX,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=XS(),this.transactionQueueTree_=new IL,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function r3(n){const t=n.infoData_.getNode(new tr(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function oC(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:r3(n)})}function i3(n,e,t,r,i){n.dataUpdateCount++;const s=new tr(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let l=[];if(i)if(r){const f=(0,V.UI)(t,y=>ni(y));l=function xX(n,e,t,r){const i=_L(n,r);if(i){const s=yL(i),l=s.path,d=s.queryId,f=jo(l,e),y=Sr.fromObject(t);return vL(n,l,new Sv(iL(d),f,y))}return[]}(n.serverSyncTree_,s,f,i)}else{const f=ni(t);l=$G(n.serverSyncTree_,s,f,i)}else if(r){const f=(0,V.UI)(t,y=>ni(y));l=function TX(n,e,t){const r=Sr.fromObject(t);return Rv(n,new Sv({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,s,f)}else{const f=ni(t);l=JE(n.serverSyncTree_,s,f)}let d=s;l.length>0&&(d=kv(n,s)),Wa(n.eventQueue_,d,l)}function s3(n,e){xL(n,"connected",e),!1===e&&function eee(n){Mv(n,"onDisconnectEvents");const e=oC(n),t=XS();tL(n.onDisconnect_,Wn(),(i,s)=>{const l=ZG(i,s,n.serverSyncTree_,e);Av(t,i,l)});let r=[];tL(t,Wn(),(i,s)=>{r=r.concat(JE(n.serverSyncTree_,i,s));const l=NL(n,i);kv(n,l)}),n.onDisconnect_=XS(),Wa(n.eventQueue_,Wn(),r)}(n)}function xL(n,e,t){const r=new tr("/.info/"+e),i=ni(t);n.infoData_.updateSnapshot(r,i);const s=JE(n.infoSyncTree_,r,i);Wa(n.eventQueue_,r,s)}function _x(n){return n.nextWriteId_++}function RL(n,e,t,r,i){Mv(n,"set",{path:e.toString(),value:t,priority:r});const s=oC(n),l=ni(t,r),d=dx(n.serverSyncTree_,e),f=EL(l,d,s),y=_x(n),w=gL(n.serverSyncTree_,e,f,y,!0);mx(n.eventQueue_,w),n.server_.put(e.toString(),l.val(!0),(x,N)=>{const U="ok"===x;U||co("set at "+e+" failed: "+x);const Q=mp(n.serverSyncTree_,y,!U);Wa(n.eventQueue_,e,Q),_p(0,i,x,N)});const D=NL(n,e);kv(n,D),Wa(n.eventQueue_,D,[])}function tee(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,i)=>{"ok"===r&&eL(n.onDisconnect_,e),_p(0,t,r,i)})}function o3(n,e,t,r){const i=ni(t);n.server_.onDisconnectPut(e.toString(),i.val(!0),(s,l)=>{"ok"===s&&Av(n.onDisconnect_,e,i),_p(0,r,s,l)})}function ML(n,e,t){let r;r=".info"===yn(e._path)?cx(n.infoSyncTree_,e,t):cx(n.serverSyncTree_,e,t),e3(n.eventQueue_,e._path,r)}function a3(n){n.persistentConnection_&&n.persistentConnection_.interrupt(n3)}function Mv(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),gs(t,...e)}function _p(n,e,t,r){e&&Ev(()=>{if("ok"===t)e(null);else{const i=(t||"error").toUpperCase();let s=i;r&&(s+=": "+r);const l=new Error(s);l.code=i,e(l)}})}function kL(n,e,t){return dx(n.serverSyncTree_,e,t)||dn.EMPTY_NODE}function yx(n,e=n.transactionQueueTree_){if(e||vx(n,e),Jm(e)){const t=u3(n,e);(0,V.hu)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function aee(n,e,t){const r=t.map(y=>y.currentWriteId),i=kL(n,e,r);let s=i;const l=i.hash();for(let y=0;y<t.length;y++){const w=t[y];(0,V.hu)(0===w.status,"tryToSendTransactionQueue_: items in queue should all be run."),w.status=1,w.retryCount++;const D=jo(e,w.path);s=s.updateChild(D,w.currentOutputSnapshotRaw)}const d=s.val(!0),f=e;n.server_.put(f.toString(),d,y=>{Mv(n,"transaction put response",{path:f.toString(),status:y});let w=[];if("ok"===y){const D=[];for(let x=0;x<t.length;x++)t[x].status=2,w=w.concat(mp(n.serverSyncTree_,t[x].currentWriteId)),t[x].onComplete&&D.push(()=>t[x].onComplete(null,!0,t[x].currentOutputSnapshotResolved)),t[x].unwatcher();vx(n,fx(n.transactionQueueTree_,e)),yx(n,n.transactionQueueTree_),Wa(n.eventQueue_,e,w);for(let x=0;x<D.length;x++)Ev(D[x])}else{if("datastale"===y)for(let D=0;D<t.length;D++)t[D].status=3===t[D].status?4:0;else{co("transaction at "+f.toString()+" failed: "+y);for(let D=0;D<t.length;D++)t[D].status=4,t[D].abortReason=y}kv(n,e)}},l)}(n,tC(e),t)}else KG(e)&&px(e,t=>{yx(n,t)})}function kv(n,e){const t=l3(n,e),r=tC(t);return function lee(n,e,t){if(0===e.length)return;const r=[];let i=[];const l=e.filter(d=>0===d.status).map(d=>d.currentWriteId);for(let d=0;d<e.length;d++){const f=e[d],y=jo(t,f.path);let D,w=!1;if((0,V.hu)(null!==y,"rerunTransactionsUnderNode_: relativePath should not be null."),4===f.status)w=!0,D=f.abortReason,i=i.concat(mp(n.serverSyncTree_,f.currentWriteId,!0));else if(0===f.status)if(f.retryCount>=25)w=!0,D="maxretry",i=i.concat(mp(n.serverSyncTree_,f.currentWriteId,!0));else{const x=kL(n,f.path,l);f.currentInputSnapshot=x;const N=e[d].update(x.val());if(void 0!==N){rC("transaction failed: Data returned ",N,f.path);let U=ni(N);"object"==typeof N&&null!=N&&(0,V.r3)(N,".priority")||(U=U.updatePriority(x.getPriority()));const X=f.currentWriteId,ae=oC(n),Le=EL(U,x,ae);f.currentOutputSnapshotRaw=U,f.currentOutputSnapshotResolved=Le,f.currentWriteId=_x(n),l.splice(l.indexOf(X),1),i=i.concat(gL(n.serverSyncTree_,f.path,Le,f.currentWriteId,f.applyLocally)),i=i.concat(mp(n.serverSyncTree_,X,!0))}else w=!0,D="nodata",i=i.concat(mp(n.serverSyncTree_,f.currentWriteId,!0))}Wa(n.eventQueue_,t,i),i=[],w&&(e[d].status=2,setTimeout(e[d].unwatcher,Math.floor(0)),e[d].onComplete&&r.push("nodata"===D?()=>e[d].onComplete(null,!1,e[d].currentInputSnapshot):()=>e[d].onComplete(new Error(D),!1,null)))}vx(n,n.transactionQueueTree_);for(let d=0;d<r.length;d++)Ev(r[d]);yx(n,n.transactionQueueTree_)}(n,u3(n,t),r),r}function l3(n,e){let t,r=n.transactionQueueTree_;for(t=yn(e);null!==t&&void 0===Jm(r);)r=fx(r,t),t=yn(e=gr(e));return r}function u3(n,e){const t=[];return c3(n,e,t),t.sort((r,i)=>r.order-i.order),t}function c3(n,e,t){const r=Jm(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);px(e,i=>{c3(n,i,t)})}function vx(n,e){const t=Jm(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,DL(e,t.length>0?t:void 0)}px(e,r=>{vx(n,r)})}function NL(n,e){const t=tC(l3(n,e)),r=fx(n.transactionQueueTree_,e);return function VX(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{PL(n,i)}),PL(n,r),YG(r,i=>{PL(n,i)}),t}function PL(n,e){const t=Jm(e);if(t){const r=[];let i=[],s=-1;for(let l=0;l<t.length;l++)3===t[l].status||(1===t[l].status?((0,V.hu)(s===l-1,"All SENT items should be at beginning of queue."),s=l,t[l].status=3,t[l].abortReason="set"):((0,V.hu)(0===t[l].status,"Unexpected transaction status in abort"),t[l].unwatcher(),i=i.concat(mp(n.serverSyncTree_,t[l].currentWriteId,!0)),t[l].onComplete&&r.push(t[l].onComplete.bind(null,new Error("set"),!1,null))));-1===s?DL(e,void 0):t.length=s+1,Wa(n.eventQueue_,tC(e),i);for(let l=0;l<r.length;l++)Ev(r[l])}}const OL=function(n,e){const t=dee(n),r=t.namespace;return"firebase.com"===t.domain&&od(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&od("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&co("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new F1(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new tr(t.pathString)}},dee=function(n){let e="",t="",r="",i="",s="",l=!0,d="https",f=443;if("string"==typeof n){let y=n.indexOf("//");y>=0&&(d=n.substring(0,y-1),n=n.substring(y+2));let w=n.indexOf("/");-1===w&&(w=n.length);let D=n.indexOf("?");-1===D&&(D=n.length),e=n.substring(0,Math.min(w,D)),w<D&&(i=function uee(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}(n.substring(w,D)));const x=function cee(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):co(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,D)));y=e.indexOf(":"),y>=0?(l="https"===d||"wss"===d,f=parseInt(e.substring(y+1),10)):y=e.length;const N=e.slice(0,y);if("localhost"===N.toLowerCase())t="localhost";else if(N.split(".").length<=2)t=N;else{const U=e.indexOf(".");r=e.substring(0,U).toLowerCase(),t=e.substring(U+1),s=r}"ns"in x&&(s=x.ns)}return{host:e,port:f,domain:t,subdomain:r,secure:l,scheme:d,pathString:i,namespace:s}},d3="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",hee=function(){let n=0;const e=[];return function(t){const r=t===n;let i;n=t;const s=new Array(8);for(i=7;i>=0;i--)s[i]=d3.charAt(t%64),t=Math.floor(t/64);(0,V.hu)(0===t,"Cannot push at time == 0");let l=s.join("");if(r){for(i=11;i>=0&&63===e[i];i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)l+=d3.charAt(e[i]);return(0,V.hu)(20===l.length,"nextPushId: Length should be 20."),l}}();class h3{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,V.Wl)(this.snapshot.exportVal())}}class f3{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class LL{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,V.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class p3{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new V.BH;return tee(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){Gl("OnDisconnect.remove",this._path);const e=new V.BH;return o3(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){Gl("OnDisconnect.set",this._path),ld("OnDisconnect.set",e,this._path,!1);const t=new V.BH;return o3(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){Gl("OnDisconnect.setWithPriority",this._path),ld("OnDisconnect.setWithPriority",e,this._path,!1),SL("OnDisconnect.setWithPriority",t,!1);const r=new V.BH;return function nee(n,e,t,r,i){const s=ni(t,r);n.server_.onDisconnectPut(e.toString(),s.val(!0),(l,d)=>{"ok"===l&&Av(n.onDisconnect_,e,s),_p(0,i,l,d)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){Gl("OnDisconnect.update",this._path),JG("OnDisconnect.update",e,this._path,!1);const t=new V.BH;return function ree(n,e,t,r){if((0,V.xb)(t))return gs("onDisconnect().update() called with empty data.  Don't do anything."),void _p(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(i,s)=>{"ok"===i&&ms(t,(l,d)=>{const f=ni(d);Av(n.onDisconnect_,zr(e,l),f)}),_p(0,r,i,s)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class ca{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return vn(this._path)?null:$1(this._path)}get ref(){return new Wl(this._repo,this._path)}get _queryIdentifier(){const e=yG(this._queryParams),t=O1(e);return"{}"===t?"default":t}get _queryObject(){return yG(this._queryParams)}isEqual(e){if(!((e=(0,V.m9)(e))instanceof ca))return!1;const t=this._repo===e._repo,r=z1(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function rJ(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function wx(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function yp(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===ad){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==up)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(n.hasEnd()){if(n.getIndexEndName()!==ph)throw new Error(r);if("string"!=typeof t)throw new Error(i)}}else if(n.getIndex()===Ar){if(null!=e&&!nC(e)||null!=t&&!nC(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,V.hu)(n.getIndex()instanceof K1||n.getIndex()===Y1,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function bx(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Wl extends ca{constructor(e,t){super(e,t,new YS,!1)}get parent(){const e=oG(this._path);return null===e?null:new Wl(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class Xm{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new tr(e),r=e_(this.ref,e);return new Xm(this._node.getChild(t),r,Ar)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new Xm(i,e_(this.ref,r),Ar)))}hasChild(e){const t=new tr(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function g3(n,e){return(n=(0,V.m9)(n))._checkNotDeleted("ref"),void 0!==e?e_(n._root,e):n._root}function m3(n,e){(n=(0,V.m9)(n))._checkNotDeleted("refFromURL");const t=OL(e,n._repo.repoInfo_.nodeAdmin);XG("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&od("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),g3(n,t.path.toString())}function e_(n,e){return null===yn((n=(0,V.m9)(n))._path)?(t=e,t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),sC("child","path",t,!1)):sC("child","path",e,!1),new Wl(n._repo,zr(n._path,e));var t}function FL(n,e){n=(0,V.m9)(n),Gl("set",n._path),ld("set",e,n._path,!1);const t=new V.BH;return RL(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function _ee(n,e){JG("update",e,n._path,!1);const t=new V.BH;return function XX(n,e,t,r){Mv(n,"update",{path:e.toString(),value:t});let i=!0;const s=oC(n),l={};if(ms(t,(d,f)=>{i=!1,l[d]=ZG(zr(e,d),ni(f),n.serverSyncTree_,s)}),i)gs("update() called with empty data.  Don't do anything."),_p(0,r,"ok",void 0);else{const d=_x(n),f=function DX(n,e,t,r){!function jJ(n,e,t,r){(0,V.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=oL(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const i=Sr.fromObject(t);return Rv(n,new Sv({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,e,l,d);mx(n.eventQueue_,f),n.server_.merge(e.toString(),t,(y,w)=>{const D="ok"===y;D||co("update at "+e+" failed: "+y);const x=mp(n.serverSyncTree_,d,!D),N=x.length>0?kv(n,e):e;Wa(n.eventQueue_,N,x),_p(0,r,y,w)}),ms(t,y=>{const w=NL(n,zr(e,y));kv(n,w)}),Wa(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function yee(n){n=(0,V.m9)(n);const e=new LL(()=>{}),t=new aC(e);return function JX(n,e,t){const r=function RX(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(y,w)=>{const D=jo(y,t);r=r||pp(w,D)});let i=n.syncPointTree_.get(t);i?r=r||pp(i,Wn()):(i=new FG,n.syncPointTree_=n.syncPointTree_.set(t,i));const s=null!=r,l=s?new hp(r,!0,!1):null;return function fX(n){return nx(n.viewCache_)}(UG(i,e,rx(n.pendingWriteTree_,e._path),s?l.getNode():dn.EMPTY_NODE,s))}(n.serverSyncTree_,e);return null!=r?Promise.resolve(r):n.server_.get(e).then(i=>{const s=ni(i).withIndex(e._queryParams.getIndex());let l;if(mL(n.serverSyncTree_,e,t,!0),e._queryParams.loadsAllData())l=JE(n.serverSyncTree_,e._path,s);else{const d=XE(n.serverSyncTree_,e);l=$G(n.serverSyncTree_,e._path,s,d)}return Wa(n.eventQueue_,e._path,l),cx(n.serverSyncTree_,e,t,null,!0),s},i=>(Mv(n,"get for query "+(0,V.Wl)(e)+" failed: "+i),Promise.reject(new Error(i))))}(n._repo,n,t).then(r=>new Xm(r,new Wl(n._repo,n._path),n._queryParams.getIndex()))}class aC{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new h3("value",this,new Xm(e.snapshotNode,new Wl(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new f3(this,e,t):null}matches(e){return e instanceof aC&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class Ex{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new f3(this,e,t):null}createEvent(e,t){(0,V.hu)(null!=e.childName,"Child events should have a childName.");const r=e_(new Wl(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new h3(e.type,this,new Xm(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof Ex&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function lC(n,e,t,r,i){let s;if("object"==typeof r&&(s=void 0,i=r),"function"==typeof r&&(s=r),i&&i.onlyOnce){const f=t,y=(w,D)=>{ML(n._repo,n,d),f(w,D)};y.userCallback=t.userCallback,y.context=t.context,t=y}const l=new LL(t,s||void 0),d="value"===e?new aC(l):new Ex(e,l);return function iee(n,e,t){let r;r=".info"===yn(e._path)?mL(n.infoSyncTree_,e,t):mL(n.serverSyncTree_,e,t),e3(n.eventQueue_,e._path,r)}(n._repo,n,d),()=>ML(n._repo,n,d)}function UL(n,e,t,r){return lC(n,"value",e,t,r)}function _3(n,e,t,r){return lC(n,"child_added",e,t,r)}function y3(n,e,t,r){return lC(n,"child_changed",e,t,r)}function v3(n,e,t,r){return lC(n,"child_moved",e,t,r)}function w3(n,e,t,r){return lC(n,"child_removed",e,t,r)}function b3(n,e,t){let r=null;const i=t?new LL(t):null;"value"===e?r=new aC(i):e&&(r=new Ex(e,i)),ML(n._repo,n,r)}class zu{}class E3 extends zu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){ld("endAt",this._value,e._path,!0);const t=X1(e._queryParams,this._value,this._key);if(bx(t),yp(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new ca(e._repo,e._path,t,e._orderByCalled)}}class wee extends zu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){ld("endBefore",this._value,e._path,!1);const t=function xJ(n,e,t){let r;return r=X1(n,e,n.index_===ad||t?t:up),r.endBeforeSet_=!0,r}(e._queryParams,this._value,this._key);if(bx(t),yp(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new ca(e._repo,e._path,t,e._orderByCalled)}}class C3 extends zu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){ld("startAt",this._value,e._path,!0);const t=J1(e._queryParams,this._value,this._key);if(bx(t),yp(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new ca(e._repo,e._path,t,e._orderByCalled)}}class Cee extends zu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){ld("startAfter",this._value,e._path,!1);const t=function SJ(n,e,t){let r;return r=J1(n,e,n.index_===ad||t?t:ph),r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(bx(t),yp(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new ca(e._repo,e._path,t,e._orderByCalled)}}class Dee extends zu{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new ca(e._repo,e._path,function TJ(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class Aee extends zu{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new ca(e._repo,e._path,function AJ(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class xee extends zu{constructor(e){super(),this._path=e}_apply(e){wx(e,"orderByChild");const t=new tr(this._path);if(vn(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new K1(t),i=QS(e._queryParams,r);return yp(i),new ca(e._repo,e._path,i,!0)}}class Mee extends zu{_apply(e){wx(e,"orderByKey");const t=QS(e._queryParams,ad);return yp(t),new ca(e._repo,e._path,t,!0)}}class Nee extends zu{_apply(e){wx(e,"orderByPriority");const t=QS(e._queryParams,Ar);return yp(t),new ca(e._repo,e._path,t,!0)}}class Oee extends zu{_apply(e){wx(e,"orderByValue");const t=QS(e._queryParams,Y1);return yp(t),new ca(e._repo,e._path,t,!0)}}class Fee extends zu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(ld("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new E3(this._value,this._key)._apply(new C3(this._value,this._key)._apply(e))}}function Gu(n,...e){let t=(0,V.m9)(n);for(const r of e)t=r._apply(t);return t}(function _X(n){(0,V.hu)(!ax,"__referenceConstructor has already been defined"),ax=n})(Wl),function EX(n){(0,V.hu)(!ux,"__referenceConstructor has already been defined"),ux=n}(Wl);const VL={};function D3(n,e,t,r,i){let s=r||n.options.databaseURL;void 0===s&&(n.options.projectId||od("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),gs("Using default host for project ",n.options.projectId),s=`${n.options.projectId}-default-rtdb.firebaseio.com`);let f,y,l=OL(s,i),d=l.repoInfo;typeof process<"u"&&process.env&&(y=process.env.FIREBASE_DATABASE_EMULATOR_HOST),y?(f=!0,s=`http://${y}?ns=${d.namespace}`,l=OL(s,i),d=l.repoInfo):f=!l.repoInfo.secure;const w=i&&f?new BE(BE.OWNER):new kQ(n.name,n.options,e);XG("Invalid Firebase Database URL",l),vn(l.path)||od("Database URL must point to the root of a Firebase Database (not including a child path).");const D=function jee(n,e,t,r){let i=VL[e.name];i||(i={},VL[e.name]=i);let s=i[n.toURLString()];return s&&od("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new KX(n,false,t,r),i[n.toURLString()]=s,s}(d,n,w,new MQ(n.name,t));return new zee(D,n)}class zee{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function YX(n,e,t){if(n.stats_=B1(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new JS(n.repoInfo_,(r,i,s,l)=>{i3(n,r,i,s,l)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>s3(n,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,V.Wl)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new Zm(n.repoInfo_,e,(r,i,s,l)=>{i3(n,r,i,s,l)},r=>{s3(n,r)},r=>{!function QX(n,e){ms(e,(t,r)=>{xL(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function OQ(n,e){const t=n.toString();return V1[t]||(V1[t]=e()),V1[t]}(n.repoInfo_,()=>new OJ(n.stats_,n.server_)),n.infoData_=new RJ,n.infoSyncTree_=new jG({startListening:(r,i,s,l)=>{let d=[];const f=n.infoData_.getNode(r._path);return f.isEmpty()||(d=JE(n.infoSyncTree_,r._path,f),setTimeout(()=>{l("ok")},0)),d},stopListening:()=>{}}),xL(n,"connected",!1),n.serverSyncTree_=new jG({startListening:(r,i,s,l)=>(n.server_.listen(r,s,i,(d,f)=>{const y=l(d,f);Wa(n.eventQueue_,r._path,y)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Wl(this._repo,Wn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function Hee(n,e){const t=VL[e];(!t||t[n.key]!==n)&&od(`Database ${e}(${n.repoInfo_}) has already been deleted.`),a3(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&od("Cannot call "+e+" on a deleted database.")}}function T3(){Zz.IS_TRANSPORT_INITIALIZED&&co("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function Gee(){T3(),cp.forceDisallow()}function Wee(){T3(),Cv.forceDisallow(),cp.forceAllow()}function Kee(n,e){Sz(n,e)}const Qee={".sv":"timestamp"};class ete{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}Zm.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},Zm.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function Yee(n){Cz(xs.SDK_VERSION),(0,xs._registerComponent)(new Sl.wA("database",(e,{instanceIdentifier:t})=>D3(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,xs.registerVersion)(bz,"0.14.4",n),(0,xs.registerVersion)(bz,"0.14.4","esm2017")}();const ite=new na.Yd("@firebase/database-compat"),S3=function(n){ite.warn("FIREBASE WARNING: "+n)};class ate{constructor(e){this._delegate=e}cancel(e){(0,V.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,V.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,V.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,V.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,V.Dv)("OnDisconnect.set",1,2,arguments.length),(0,V.Wj)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,V.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,V.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(e,t);return r&&i.then(()=>r(null),s=>r(s)),i}update(e,t){if((0,V.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let s=0;s<e.length;++s)i[""+s]=e[s];e=i,S3("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,V.Wj)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),i=>t(i)),r}}class lte{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,V.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class vp{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,V.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,V.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,V.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,V.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,V.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),sC("DataSnapshot.child","path",e,!1),new vp(this._database,this._delegate.child(e))}hasChild(e){return(0,V.Dv)("DataSnapshot.hasChild",1,1,arguments.length),sC("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,V.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,V.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,V.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new vp(this._database,t)))}hasChildren(){return(0,V.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,V.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,V.Dv)("DataSnapshot.ref",0,0,arguments.length),new qa(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class Ls{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,i){var s;(0,V.Dv)("Query.on",2,4,arguments.length),(0,V.Wj)("Query.on","callback",t,!1);const l=Ls.getCancelAndContextArgs_("Query.on",r,i),d=(y,w)=>{t.call(l.context,new vp(this.database,y),w)};d.userCallback=t,d.context=l.context;const f=null===(s=l.cancel)||void 0===s?void 0:s.bind(l.context);switch(e){case"value":return UL(this._delegate,d,f),t;case"child_added":return _3(this._delegate,d,f),t;case"child_removed":return w3(this._delegate,d,f),t;case"child_changed":return y3(this._delegate,d,f),t;case"child_moved":return v3(this._delegate,d,f),t;default:throw new Error((0,V.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,V.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,V.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,V.Wj)("Query.off","callback",t,!0),(0,V.lb)("Query.off","context",r,!0),t){const i=()=>{};i.userCallback=t,i.context=r,b3(this._delegate,e,i)}else b3(this._delegate,e)}get(){return yee(this._delegate).then(e=>new vp(this.database,e))}once(e,t,r,i){(0,V.Dv)("Query.once",1,4,arguments.length),(0,V.Wj)("Query.once","callback",t,!0);const s=Ls.getCancelAndContextArgs_("Query.once",r,i),l=new V.BH,d=(y,w)=>{const D=new vp(this.database,y);t&&t.call(s.context,D,w),l.resolve(D)};d.userCallback=t,d.context=s.context;const f=y=>{s.cancel&&s.cancel.call(s.context,y),l.reject(y)};switch(e){case"value":UL(this._delegate,d,f,{onlyOnce:!0});break;case"child_added":_3(this._delegate,d,f,{onlyOnce:!0});break;case"child_removed":w3(this._delegate,d,f,{onlyOnce:!0});break;case"child_changed":y3(this._delegate,d,f,{onlyOnce:!0});break;case"child_moved":v3(this._delegate,d,f,{onlyOnce:!0});break;default:throw new Error((0,V.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return l.promise}limitToFirst(e){return(0,V.Dv)("Query.limitToFirst",1,1,arguments.length),new Ls(this.database,Gu(this._delegate,function Tee(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new Dee(n)}(e)))}limitToLast(e){return(0,V.Dv)("Query.limitToLast",1,1,arguments.length),new Ls(this.database,Gu(this._delegate,function See(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new Aee(n)}(e)))}orderByChild(e){return(0,V.Dv)("Query.orderByChild",1,1,arguments.length),new Ls(this.database,Gu(this._delegate,function Ree(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return sC("orderByChild","path",n,!1),new xee(n)}(e)))}orderByKey(){return(0,V.Dv)("Query.orderByKey",0,0,arguments.length),new Ls(this.database,Gu(this._delegate,function kee(){return new Mee}()))}orderByPriority(){return(0,V.Dv)("Query.orderByPriority",0,0,arguments.length),new Ls(this.database,Gu(this._delegate,function Pee(){return new Nee}()))}orderByValue(){return(0,V.Dv)("Query.orderByValue",0,0,arguments.length),new Ls(this.database,Gu(this._delegate,function Lee(){return new Oee}()))}startAt(e=null,t){return(0,V.Dv)("Query.startAt",0,2,arguments.length),new Ls(this.database,Gu(this._delegate,function Eee(n=null,e){return iC("startAt","key",e,!0),new C3(n,e)}(e,t)))}startAfter(e=null,t){return(0,V.Dv)("Query.startAfter",0,2,arguments.length),new Ls(this.database,Gu(this._delegate,function Iee(n,e){return iC("startAfter","key",e,!0),new Cee(n,e)}(e,t)))}endAt(e=null,t){return(0,V.Dv)("Query.endAt",0,2,arguments.length),new Ls(this.database,Gu(this._delegate,function vee(n,e){return iC("endAt","key",e,!0),new E3(n,e)}(e,t)))}endBefore(e=null,t){return(0,V.Dv)("Query.endBefore",0,2,arguments.length),new Ls(this.database,Gu(this._delegate,function bee(n,e){return iC("endBefore","key",e,!0),new wee(n,e)}(e,t)))}equalTo(e,t){return(0,V.Dv)("Query.equalTo",1,2,arguments.length),new Ls(this.database,Gu(this._delegate,function Uee(n,e){return iC("equalTo","key",e,!0),new Fee(n,e)}(e,t)))}toString(){return(0,V.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,V.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,V.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof Ls))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const i={cancel:void 0,context:void 0};if(t&&r)i.cancel=t,(0,V.Wj)(e,"cancel",i.cancel,!0),i.context=r,(0,V.lb)(e,"context",i.context,!0);else if(t)if("object"==typeof t&&null!==t)i.context=t;else{if("function"!=typeof t)throw new Error((0,V.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=t}return i}get ref(){return new qa(this.database,new Wl(this._delegate._repo,this._delegate._path))}}class qa extends Ls{constructor(e,t){super(e,new ca(t._repo,t._path,new YS,!1)),this.database=e,this._delegate=t}getKey(){return(0,V.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,V.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new qa(this.database,e_(this._delegate,e))}getParent(){(0,V.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new qa(this.database,e):null}getRoot(){return(0,V.Dv)("Reference.root",0,0,arguments.length),new qa(this.database,this._delegate.root)}set(e,t){(0,V.Dv)("Reference.set",1,2,arguments.length),(0,V.Wj)("Reference.set","onComplete",t,!0);const r=FL(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}update(e,t){if((0,V.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let s=0;s<e.length;++s)i[""+s]=e[s];e=i,S3("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Gl("Reference.update",this._delegate._path),(0,V.Wj)("Reference.update","onComplete",t,!0);const r=_ee(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,V.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,V.Wj)("Reference.setWithPriority","onComplete",r,!0);const i=function mee(n,e,t){if(Gl("setWithPriority",n._path),ld("setWithPriority",e,n._path,!1),SL("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new V.BH;return RL(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&i.then(()=>r(null),s=>r(s)),i}remove(e){(0,V.Dv)("Reference.remove",0,1,arguments.length),(0,V.Wj)("Reference.remove","onComplete",e,!0);const t=function pee(n){return Gl("remove",n._path),FL(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,V.Dv)("Reference.transaction",1,3,arguments.length),(0,V.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,V.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,r){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,V.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const i=function tte(n,e,t){var r;if(n=(0,V.m9)(n),Gl("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const i=null===(r=t?.applyLocally)||void 0===r||r,s=new V.BH,d=UL(n,()=>{});return function oee(n,e,t,r,i,s){Mv(n,"transaction on "+e);const l={path:e,update:t,onComplete:r,status:null,order:Dz(),applyLocally:s,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},d=kL(n,e,void 0);l.currentInputSnapshot=d;const f=l.update(d.val());if(void 0===f)l.unwatcher(),l.currentOutputSnapshotRaw=null,l.currentOutputSnapshotResolved=null,l.onComplete&&l.onComplete(null,!1,l.currentInputSnapshot);else{rC("transaction failed: Data returned ",f,l.path),l.status=0;const y=fx(n.transactionQueueTree_,e),w=Jm(y)||[];let D;w.push(l),DL(y,w),"object"==typeof f&&null!==f&&(0,V.r3)(f,".priority")?(D=(0,V.DV)(f,".priority"),(0,V.hu)(nC(D),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):D=(dx(n.serverSyncTree_,e)||dn.EMPTY_NODE).getPriority().val();const x=oC(n),N=ni(f,D),U=EL(N,d,x);l.currentOutputSnapshotRaw=N,l.currentOutputSnapshotResolved=U,l.currentWriteId=_x(n);const Q=gL(n.serverSyncTree_,e,U,l.currentWriteId,l.applyLocally);Wa(n.eventQueue_,e,Q),yx(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(f,y,w)=>{let D=null;f?s.reject(f):(D=new Xm(w,new Wl(n._repo,n._path),Ar),s.resolve(new ete(y,D)))},d,i),s.promise}(this._delegate,e,{applyLocally:r}).then(s=>new lte(s.committed,new vp(this.database,s.snapshot)));return t&&i.then(s=>t(null,s.committed,s.snapshot),s=>t(s,!1,null)),i}setPriority(e,t){(0,V.Dv)("Reference.setPriority",1,2,arguments.length),(0,V.Wj)("Reference.setPriority","onComplete",t,!0);const r=function gee(n,e){n=(0,V.m9)(n),Gl("setPriority",n._path),SL("setPriority",e,!1);const t=new V.BH;return RL(n._repo,zr(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}push(e,t){(0,V.Dv)("Reference.push",0,2,arguments.length),(0,V.Wj)("Reference.push","onComplete",t,!0);const r=function fee(n,e){n=(0,V.m9)(n),Gl("push",n._path),ld("push",e,n._path,!0);const t=r3(n._repo),r=hee(t),i=e_(n,r),s=e_(n,r);let l;return l=null!=e?FL(s,e).then(()=>s):Promise.resolve(s),i.then=l.then.bind(l),i.catch=l.then.bind(l,void 0),i}(this._delegate,e),i=r.then(l=>new qa(this.database,l));t&&i.then(()=>t(null),l=>t(l));const s=new qa(this.database,r);return s.then=i.then.bind(i),s.catch=i.catch.bind(i,void 0),s}onDisconnect(){return Gl("Reference.onDisconnect",this._delegate._path),new ate(new p3(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class uC{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:Gee,forceLongPolling:Wee}}useEmulator(e,t,r={}){!function A3(n,e,t,r={}){(n=(0,V.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&od("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&od('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new BE(BE.OWNER);else if(r.mockUserToken){const l="string"==typeof r.mockUserToken?r.mockUserToken:(0,V.Sg)(r.mockUserToken,n.app.options.projectId);s=new BE(l)}!function Bee(n,e,t,r){n.repoInfo_=new F1(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),r&&(n.authTokenProvider_=r)}(i,e,t,s)}(this._delegate,e,t,r)}ref(e){if((0,V.Dv)("database.ref",0,1,arguments.length),e instanceof qa){const t=m3(this._delegate,e.toString());return new qa(this,t)}{const t=g3(this._delegate,e);return new qa(this,t)}}refFromURL(e){(0,V.Dv)("database.refFromURL",1,1,arguments.length);const r=m3(this._delegate,e);return new qa(this,r)}goOffline(){return(0,V.Dv)("database.goOffline",0,0,arguments.length),function qee(n){(n=(0,V.m9)(n))._checkNotDeleted("goOffline"),a3(n._repo)}(this._delegate)}goOnline(){return(0,V.Dv)("database.goOnline",0,0,arguments.length),function Zee(n){(n=(0,V.m9)(n))._checkNotDeleted("goOnline"),function see(n){n.persistentConnection_&&n.persistentConnection_.resume(n3)}(n._repo)}(this._delegate)}}uC.ServerValue={TIMESTAMP:function Jee(){return Qee}(),increment:n=>function Xee(n){return{".sv":{increment:n}}}(n)};var cte=Object.freeze({__proto__:null,initStandalone:function ute({app:n,url:e,version:t,customAuthImpl:r,namespace:i,nodeAdmin:s=!1}){Cz(t);const l=new Sl.zt("auth-internal",new Sl.H0("database-standalone"));return l.setComponent(new Sl.wA("auth-internal",()=>r,"PRIVATE")),{instance:new uC(D3(n,l,void 0,e,s),n),namespace:i}}});const dte=uC.ServerValue;function x3(n){return null==n}function R3(n){return"function"==typeof n.set}function M3(n,e){return R3(e)?e:n.ref(e)}function k3(n,e){if(function fte(n){return"string"==typeof n}(n))return e.stringCase();if(R3(n))return e.firebaseCase();if(function pte(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function cC(n,e,t="on",r=fN.z){return new ss.y(i=>{let s=null;return s=n[t](e,(l,d)=>{r.schedule(()=>{i.next({snapshot:l,prevKey:d})}),"once"===t&&r.schedule(()=>i.complete())},l=>{r.schedule(()=>i.error(l))}),"on"===t?{unsubscribe(){null!=s&&n.off(e,s)}}:{unsubscribe(){}}}).pipe((0,Ct.U)(i=>{const{snapshot:s,prevKey:l}=i;let d=null;return s.exists()&&(d=s.key),{type:e,payload:s,prevKey:l,key:d}}),(0,lI.B)())}function N3(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function _te(n,e){const{payload:t,prevKey:r,key:i}=e,s=N3(n,i),l=function mte(n,e){if(x3(e))return 0;{const t=N3(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let d=null;e.payload.forEach(f=>{const y={payload:f,type:"value",prevKey:d,key:f.key};return d=f.key,n=[...n,y],!1})}return n;case"child_added":if(s>-1){const d=n[s-1];(d&&d.key||null)!==r&&(n=n.filter(f=>f.payload.key!==t.key)).splice(l,0,e)}else{if(null==r)return[e,...n];(n=n.slice()).splice(l,0,e)}return n;case"child_removed":return n.filter(d=>d.payload.key!==t.key);case"child_changed":return n.map(d=>d.payload.key===i?e:d);case"child_moved":if(s>-1){const d=n.splice(s,1)[0];return(n=n.slice()).splice(l,0,d),n}return n;default:return n}}function P3(n){return(x3(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function O3(n,e,t){return function gte(n,e,t){return cC(n,"value","once",t).pipe(Br(r=>{const i=[_t(r)];return e.forEach(s=>i.push(cC(n,s,"on",t))),(0,aI.T)(...i).pipe(Ma(_te,[]))}),xV())}(n,e=P3(e),t)}function L3(n,e,t){const r=(e=P3(e)).map(i=>cC(n,i,"on",t));return(0,aI.T)(...r)}function F3(n,e){return function(r,i){return k3(r,{stringCase:()=>n.child(r)[e](i),firebaseCase:()=>r[e](i),snapshotCase:()=>r.ref[e](i)})}}function bte(n){return function(t){return t?k3(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function U3(n,e){return function(){return cC(n,"value","on",e)}}!function hte(n){n.INTERNAL.registerComponent(new Sl.wA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:t});return new uC(i,r)},"PUBLIC").setServiceProps({Reference:qa,Query:Ls,Database:uC,DataSnapshot:vp,enableLogging:Kee,INTERNAL:cte,ServerValue:dte}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.3.4")}(pN.Z);const Ite=new c.OlP("angularfire2.realtimeDatabaseURL"),Dte=new c.OlP("angularfire2.database.use-emulator");let Tte=(()=>{class n{constructor(t,r,i,s,l,d,f,y,w,D,x,N,U,Q,X){this.schedulers=d;const ae=f,Le=(0,bi.on)(t,l,r);y&&ff(Le,l,w,x,N,U,D,Q),this.database=(0,bi.cc)(`${Le.name}.database.${i}`,"AngularFireDatabase",Le.name,()=>{const je=l.runOutsideAngular(()=>Le.database(i||void 0));return ae&&je.useEmulator(...ae),je},[ae])}list(t,r){const i=this.schedulers.ngZone.runOutsideAngular(()=>M3(this.database,t));let s=i;return r&&(s=r(i)),function Ete(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:F3(r,"update"),set:F3(r,"set"),push:i=>r.push(i),remove:bte(r),snapshotChanges:i=>O3(n,i,t).pipe(An.iC),stateChanges:i=>L3(n,i,t).pipe(An.iC),auditTrail:i=>function yte(n,e,t){return function wte(n,e,t){return function vte(n,e){return cC(n,"value","on",e).pipe((0,Ct.U)(t=>{let r;return t.payload.forEach(i=>(r=i.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(function _Q(...n){const e=(0,Ds.jO)(n);return(0,Xn.e)((t,r)=>{const i=n.length,s=new Array(i);let l=n.map(()=>!1),d=!1;for(let f=0;f<i;f++)(0,Ot.Xf)(n[f]).subscribe((0,z.x)(r,y=>{s[f]=y,!d&&!l[f]&&(l[f]=!0,(d=l.every(Eo.y))&&(l=null))},mQ.Z));t.subscribe((0,z.x)(r,f=>{if(d){const y=[f,...s];r.next(e?e(...y):y)}}))})}(e),(0,Ct.U)(([i,s])=>{const l=i.lastKeyToLoad,d=s.map(f=>f.key);return{actions:s,lastKeyToLoad:l,loadedKeys:d}}),function yQ(n){return(0,Xn.e)((e,t)=>{let r=!1,i=0;e.subscribe((0,z.x)(t,s=>(r||(r=!n(s,i++)))&&t.next(s)))})}(i=>-1===i.loadedKeys.indexOf(i.lastKeyToLoad)),(0,Ct.U)(i=>i.actions))}(n,L3(n,e).pipe(Ma((i,s)=>[...i,s],[])),t)}(n,i,t).pipe(An.iC),valueChanges:(i,s)=>O3(n,i,t).pipe((0,Ct.U)(d=>d.map(f=>s&&s.idField?Object.assign(Object.assign({},f.payload.val()),{[s.idField]:f.key}):f.payload.val())),An.iC)}}(s,this)}object(t){return function Cte(n,e){return{query:n,snapshotChanges:()=>U3(n,e.schedulers.outsideAngular)().pipe(An.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>U3(n,e.schedulers.outsideAngular)().pipe(An.iC,(0,Ct.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>M3(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(bi.Dh),c.LFG(bi.xv,8),c.LFG(Ite,8),c.LFG(c.Lbi),c.LFG(c.R0b),c.LFG(An.HU),c.LFG(Dte,8),c.LFG(Mc,8),c.LFG(Pg,8),c.LFG(Gw,8),c.LFG(df,8),c.LFG(hf,8),c.LFG(Og,8),c.LFG(Ww,8),c.LFG(Rl,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),Ate=(()=>{class n{constructor(){Ng.Z.registerVersion("angularfire",An.q4.full,"rtdb-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[Tte]}),n})();const V3_firebase={apiKey:"AIzaSyAMLO5xAiElT_dALE01YFEtSE4NEttZShA",authDomain:"dishdash-26e0b.firebaseapp.com",databaseURL:"https://dishdash-26e0b-default-rtdb.europe-west1.firebasedatabase.app",projectId:"dishdash-26e0b",storageBucket:"dishdash-26e0b.appspot.com",messagingSenderId:"547101967860",appId:"1:547101967860:web:ece5d7950bb0634c4ea5a1"};let Ste=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n,bootstrap:[X4]}),n.\u0275inj=c.cJS({imports:[Cp,J4,aF,Nq,c4,bi.hO.initializeApp(V3_firebase),qw,gQ,$Z,Ate,D4]}),n})();(0,c.G48)(),cc().bootstrapModule(Ste).catch(n=>console.error(n))},9751:(Tt,ce,H)=>{"use strict";H.d(ce,{y:()=>ye});var c=H(930),B=H(727),j=H(8822),fe=H(9635),de=H(2416),ve=H(576),ue=H(2806);let ye=(()=>{class te{constructor(Fe){Fe&&(this._subscribe=Fe)}lift(Fe){const Me=new te;return Me.source=this,Me.operator=Fe,Me}subscribe(Fe,Me,ot){const Ae=function J(te){return te&&te instanceof c.Lv||function Y(te){return te&&(0,ve.m)(te.next)&&(0,ve.m)(te.error)&&(0,ve.m)(te.complete)}(te)&&(0,B.Nn)(te)}(Fe)?Fe:new c.Hp(Fe,Me,ot);return(0,ue.x)(()=>{const{operator:pe,source:Ge}=this;Ae.add(pe?pe.call(Ae,Ge):Ge?this._subscribe(Ae):this._trySubscribe(Ae))}),Ae}_trySubscribe(Fe){try{return this._subscribe(Fe)}catch(Me){Fe.error(Me)}}forEach(Fe,Me){return new(Me=Ee(Me))((ot,Ae)=>{const pe=new c.Hp({next:Ge=>{try{Fe(Ge)}catch(Et){Ae(Et),pe.unsubscribe()}},error:Ae,complete:ot});this.subscribe(pe)})}_subscribe(Fe){var Me;return null===(Me=this.source)||void 0===Me?void 0:Me.subscribe(Fe)}[j.L](){return this}pipe(...Fe){return(0,fe.U)(Fe)(this)}toPromise(Fe){return new(Fe=Ee(Fe))((Me,ot)=>{let Ae;this.subscribe(pe=>Ae=pe,pe=>ot(pe),()=>Me(Ae))})}}return te.create=nt=>new te(nt),te})();function Ee(te){var nt;return null!==(nt=te??de.v.Promise)&&void 0!==nt?nt:Promise}},7579:(Tt,ce,H)=>{"use strict";H.d(ce,{x:()=>ue});var c=H(9751),B=H(727);const fe=(0,H(3888).d)(Ee=>function(){Ee(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var de=H(8737),ve=H(2806);let ue=(()=>{class Ee extends c.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(J){const te=new ye(this,this);return te.operator=J,te}_throwIfClosed(){if(this.closed)throw new fe}next(J){(0,ve.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const te of this.currentObservers)te.next(J)}})}error(J){(0,ve.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=J;const{observers:te}=this;for(;te.length;)te.shift().error(J)}})}complete(){(0,ve.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:J}=this;for(;J.length;)J.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var J;return(null===(J=this.observers)||void 0===J?void 0:J.length)>0}_trySubscribe(J){return this._throwIfClosed(),super._trySubscribe(J)}_subscribe(J){return this._throwIfClosed(),this._checkFinalizedStatuses(J),this._innerSubscribe(J)}_innerSubscribe(J){const{hasError:te,isStopped:nt,observers:Fe}=this;return te||nt?B.Lc:(this.currentObservers=null,Fe.push(J),new B.w0(()=>{this.currentObservers=null,(0,de.P)(Fe,J)}))}_checkFinalizedStatuses(J){const{hasError:te,thrownError:nt,isStopped:Fe}=this;te?J.error(nt):Fe&&J.complete()}asObservable(){const J=new c.y;return J.source=this,J}}return Ee.create=(Y,J)=>new ye(Y,J),Ee})();class ye extends ue{constructor(Y,J){super(),this.destination=Y,this.source=J}next(Y){var J,te;null===(te=null===(J=this.destination)||void 0===J?void 0:J.next)||void 0===te||te.call(J,Y)}error(Y){var J,te;null===(te=null===(J=this.destination)||void 0===J?void 0:J.error)||void 0===te||te.call(J,Y)}complete(){var Y,J;null===(J=null===(Y=this.destination)||void 0===Y?void 0:Y.complete)||void 0===J||J.call(Y)}_subscribe(Y){var J,te;return null!==(te=null===(J=this.source)||void 0===J?void 0:J.subscribe(Y))&&void 0!==te?te:B.Lc}}},930:(Tt,ce,H)=>{"use strict";H.d(ce,{Hp:()=>ot,Lv:()=>te});var c=H(576),B=H(727),j=H(2416),fe=H(7849),de=H(5032);const ve=Ee("C",void 0,void 0);function Ee(We,xe,Ce){return{kind:We,value:xe,error:Ce}}var Y=H(3410),J=H(2806);class te extends B.w0{constructor(xe){super(),this.isStopped=!1,xe?(this.destination=xe,(0,B.Nn)(xe)&&xe.add(this)):this.destination=Et}static create(xe,Ce,st){return new ot(xe,Ce,st)}next(xe){this.isStopped?Ge(function ye(We){return Ee("N",We,void 0)}(xe),this):this._next(xe)}error(xe){this.isStopped?Ge(function ue(We){return Ee("E",void 0,We)}(xe),this):(this.isStopped=!0,this._error(xe))}complete(){this.isStopped?Ge(ve,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(xe){this.destination.next(xe)}_error(xe){try{this.destination.error(xe)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const nt=Function.prototype.bind;function Fe(We,xe){return nt.call(We,xe)}class Me{constructor(xe){this.partialObserver=xe}next(xe){const{partialObserver:Ce}=this;if(Ce.next)try{Ce.next(xe)}catch(st){Ae(st)}}error(xe){const{partialObserver:Ce}=this;if(Ce.error)try{Ce.error(xe)}catch(st){Ae(st)}else Ae(xe)}complete(){const{partialObserver:xe}=this;if(xe.complete)try{xe.complete()}catch(Ce){Ae(Ce)}}}class ot extends te{constructor(xe,Ce,st){let Xe;if(super(),(0,c.m)(xe)||!xe)Xe={next:xe??void 0,error:Ce??void 0,complete:st??void 0};else{let _e;this&&j.v.useDeprecatedNextContext?(_e=Object.create(xe),_e.unsubscribe=()=>this.unsubscribe(),Xe={next:xe.next&&Fe(xe.next,_e),error:xe.error&&Fe(xe.error,_e),complete:xe.complete&&Fe(xe.complete,_e)}):Xe=xe}this.destination=new Me(Xe)}}function Ae(We){j.v.useDeprecatedSynchronousErrorHandling?(0,J.O)(We):(0,fe.h)(We)}function Ge(We,xe){const{onStoppedNotification:Ce}=j.v;Ce&&Y.z.setTimeout(()=>Ce(We,xe))}const Et={closed:!0,next:de.Z,error:function pe(We){throw We},complete:de.Z}},727:(Tt,ce,H)=>{"use strict";H.d(ce,{Lc:()=>ve,w0:()=>de,Nn:()=>ue});var c=H(576);const j=(0,H(3888).d)(Ee=>function(J){Ee(this),this.message=J?`${J.length} errors occurred during unsubscription:\n${J.map((te,nt)=>`${nt+1}) ${te.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=J});var fe=H(8737);class de{constructor(Y){this.initialTeardown=Y,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let Y;if(!this.closed){this.closed=!0;const{_parentage:J}=this;if(J)if(this._parentage=null,Array.isArray(J))for(const Fe of J)Fe.remove(this);else J.remove(this);const{initialTeardown:te}=this;if((0,c.m)(te))try{te()}catch(Fe){Y=Fe instanceof j?Fe.errors:[Fe]}const{_finalizers:nt}=this;if(nt){this._finalizers=null;for(const Fe of nt)try{ye(Fe)}catch(Me){Y=Y??[],Me instanceof j?Y=[...Y,...Me.errors]:Y.push(Me)}}if(Y)throw new j(Y)}}add(Y){var J;if(Y&&Y!==this)if(this.closed)ye(Y);else{if(Y instanceof de){if(Y.closed||Y._hasParent(this))return;Y._addParent(this)}(this._finalizers=null!==(J=this._finalizers)&&void 0!==J?J:[]).push(Y)}}_hasParent(Y){const{_parentage:J}=this;return J===Y||Array.isArray(J)&&J.includes(Y)}_addParent(Y){const{_parentage:J}=this;this._parentage=Array.isArray(J)?(J.push(Y),J):J?[J,Y]:Y}_removeParent(Y){const{_parentage:J}=this;J===Y?this._parentage=null:Array.isArray(J)&&(0,fe.P)(J,Y)}remove(Y){const{_finalizers:J}=this;J&&(0,fe.P)(J,Y),Y instanceof de&&Y._removeParent(this)}}de.EMPTY=(()=>{const Ee=new de;return Ee.closed=!0,Ee})();const ve=de.EMPTY;function ue(Ee){return Ee instanceof de||Ee&&"closed"in Ee&&(0,c.m)(Ee.remove)&&(0,c.m)(Ee.add)&&(0,c.m)(Ee.unsubscribe)}function ye(Ee){(0,c.m)(Ee)?Ee():Ee.unsubscribe()}},2416:(Tt,ce,H)=>{"use strict";H.d(ce,{v:()=>c});const c={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(Tt,ce,H)=>{"use strict";H.d(ce,{E:()=>B});const B=new(H(9751).y)(de=>de.complete())},8996:(Tt,ce,H)=>{"use strict";H.d(ce,{D:()=>xe});var c=H(8421),B=H(5363),j=H(9468),ve=H(9751),ye=H(2202),Ee=H(576),Y=H(9672);function te(Ce,st){if(!Ce)throw new Error("Iterable cannot be null");return new ve.y(Xe=>{(0,Y.f)(Xe,st,()=>{const _e=Ce[Symbol.asyncIterator]();(0,Y.f)(Xe,st,()=>{_e.next().then(K=>{K.done?Xe.complete():Xe.next(K.value)})},0,!0)})})}var nt=H(3670),Fe=H(8239),Me=H(1144),ot=H(6495),Ae=H(2206),pe=H(4532),Ge=H(3260);function xe(Ce,st){return st?function We(Ce,st){if(null!=Ce){if((0,nt.c)(Ce))return function fe(Ce,st){return(0,c.Xf)(Ce).pipe((0,j.R)(st),(0,B.Q)(st))}(Ce,st);if((0,Me.z)(Ce))return function ue(Ce,st){return new ve.y(Xe=>{let _e=0;return st.schedule(function(){_e===Ce.length?Xe.complete():(Xe.next(Ce[_e++]),Xe.closed||this.schedule())})})}(Ce,st);if((0,Fe.t)(Ce))return function de(Ce,st){return(0,c.Xf)(Ce).pipe((0,j.R)(st),(0,B.Q)(st))}(Ce,st);if((0,Ae.D)(Ce))return te(Ce,st);if((0,ot.T)(Ce))return function J(Ce,st){return new ve.y(Xe=>{let _e;return(0,Y.f)(Xe,st,()=>{_e=Ce[ye.h](),(0,Y.f)(Xe,st,()=>{let K,Qe;try{({value:K,done:Qe}=_e.next())}catch(rt){return void Xe.error(rt)}Qe?Xe.complete():Xe.next(K)},0,!0)}),()=>(0,Ee.m)(_e?.return)&&_e.return()})}(Ce,st);if((0,Ge.L)(Ce))return function Et(Ce,st){return te((0,Ge.Q)(Ce),st)}(Ce,st)}throw(0,pe.z)(Ce)}(Ce,st):(0,c.Xf)(Ce)}},8421:(Tt,ce,H)=>{"use strict";H.d(ce,{Xf:()=>nt});var c=H(655),B=H(1144),j=H(8239),fe=H(9751),de=H(3670),ve=H(2206),ue=H(4532),ye=H(6495),Ee=H(3260),Y=H(576),J=H(7849),te=H(8822);function nt(We){if(We instanceof fe.y)return We;if(null!=We){if((0,de.c)(We))return function Fe(We){return new fe.y(xe=>{const Ce=We[te.L]();if((0,Y.m)(Ce.subscribe))return Ce.subscribe(xe);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(We);if((0,B.z)(We))return function Me(We){return new fe.y(xe=>{for(let Ce=0;Ce<We.length&&!xe.closed;Ce++)xe.next(We[Ce]);xe.complete()})}(We);if((0,j.t)(We))return function ot(We){return new fe.y(xe=>{We.then(Ce=>{xe.closed||(xe.next(Ce),xe.complete())},Ce=>xe.error(Ce)).then(null,J.h)})}(We);if((0,ve.D)(We))return pe(We);if((0,ye.T)(We))return function Ae(We){return new fe.y(xe=>{for(const Ce of We)if(xe.next(Ce),xe.closed)return;xe.complete()})}(We);if((0,Ee.L)(We))return function Ge(We){return pe((0,Ee.Q)(We))}(We)}throw(0,ue.z)(We)}function pe(We){return new fe.y(xe=>{(function Et(We,xe){var Ce,st,Xe,_e;return(0,c.mG)(this,void 0,void 0,function*(){try{for(Ce=(0,c.KL)(We);!(st=yield Ce.next()).done;)if(xe.next(st.value),xe.closed)return}catch(K){Xe={error:K}}finally{try{st&&!st.done&&(_e=Ce.return)&&(yield _e.call(Ce))}finally{if(Xe)throw Xe.error}}xe.complete()})})(We,xe).catch(Ce=>xe.error(Ce))})}},6451:(Tt,ce,H)=>{"use strict";H.d(ce,{T:()=>ve});var c=H(8189),B=H(8421),j=H(515),fe=H(7669),de=H(8996);function ve(...ue){const ye=(0,fe.yG)(ue),Ee=(0,fe._6)(ue,1/0),Y=ue;return Y.length?1===Y.length?(0,B.Xf)(Y[0]):(0,c.J)(Ee)((0,de.D)(Y,ye)):j.E}},5403:(Tt,ce,H)=>{"use strict";H.d(ce,{x:()=>B});var c=H(930);function B(fe,de,ve,ue,ye){return new j(fe,de,ve,ue,ye)}class j extends c.Lv{constructor(de,ve,ue,ye,Ee,Y){super(de),this.onFinalize=Ee,this.shouldUnsubscribe=Y,this._next=ve?function(J){try{ve(J)}catch(te){de.error(te)}}:super._next,this._error=ye?function(J){try{ye(J)}catch(te){de.error(te)}finally{this.unsubscribe()}}:super._error,this._complete=ue?function(){try{ue()}catch(J){de.error(J)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var de;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ve}=this;super.unsubscribe(),!ve&&(null===(de=this.onFinalize)||void 0===de||de.call(this))}}}},4004:(Tt,ce,H)=>{"use strict";H.d(ce,{U:()=>j});var c=H(4482),B=H(5403);function j(fe,de){return(0,c.e)((ve,ue)=>{let ye=0;ve.subscribe((0,B.x)(ue,Ee=>{ue.next(fe.call(de,Ee,ye++))}))})}},8189:(Tt,ce,H)=>{"use strict";H.d(ce,{J:()=>j});var c=H(5577),B=H(4671);function j(fe=1/0){return(0,c.z)(B.y,fe)}},5577:(Tt,ce,H)=>{"use strict";H.d(ce,{z:()=>ye});var c=H(4004),B=H(8421),j=H(4482),fe=H(9672),de=H(5403),ue=H(576);function ye(Ee,Y,J=1/0){return(0,ue.m)(Y)?ye((te,nt)=>(0,c.U)((Fe,Me)=>Y(te,Fe,nt,Me))((0,B.Xf)(Ee(te,nt))),J):("number"==typeof Y&&(J=Y),(0,j.e)((te,nt)=>function ve(Ee,Y,J,te,nt,Fe,Me,ot){const Ae=[];let pe=0,Ge=0,Et=!1;const We=()=>{Et&&!Ae.length&&!pe&&Y.complete()},xe=st=>pe<te?Ce(st):Ae.push(st),Ce=st=>{Fe&&Y.next(st),pe++;let Xe=!1;(0,B.Xf)(J(st,Ge++)).subscribe((0,de.x)(Y,_e=>{nt?.(_e),Fe?xe(_e):Y.next(_e)},()=>{Xe=!0},void 0,()=>{if(Xe)try{for(pe--;Ae.length&&pe<te;){const _e=Ae.shift();Me?(0,fe.f)(Y,Me,()=>Ce(_e)):Ce(_e)}We()}catch(_e){Y.error(_e)}}))};return Ee.subscribe((0,de.x)(Y,xe,()=>{Et=!0,We()})),()=>{ot?.()}}(te,nt,Ee,J)))}},5363:(Tt,ce,H)=>{"use strict";H.d(ce,{Q:()=>fe});var c=H(9672),B=H(4482),j=H(5403);function fe(de,ve=0){return(0,B.e)((ue,ye)=>{ue.subscribe((0,j.x)(ye,Ee=>(0,c.f)(ye,de,()=>ye.next(Ee),ve),()=>(0,c.f)(ye,de,()=>ye.complete(),ve),Ee=>(0,c.f)(ye,de,()=>ye.error(Ee),ve)))})}},3099:(Tt,ce,H)=>{"use strict";H.d(ce,{B:()=>de});var c=H(8421),B=H(7579),j=H(930),fe=H(4482);function de(ue={}){const{connector:ye=(()=>new B.x),resetOnError:Ee=!0,resetOnComplete:Y=!0,resetOnRefCountZero:J=!0}=ue;return te=>{let nt,Fe,Me,ot=0,Ae=!1,pe=!1;const Ge=()=>{Fe?.unsubscribe(),Fe=void 0},Et=()=>{Ge(),nt=Me=void 0,Ae=pe=!1},We=()=>{const xe=nt;Et(),xe?.unsubscribe()};return(0,fe.e)((xe,Ce)=>{ot++,!pe&&!Ae&&Ge();const st=Me=Me??ye();Ce.add(()=>{ot--,0===ot&&!pe&&!Ae&&(Fe=ve(We,J))}),st.subscribe(Ce),!nt&&ot>0&&(nt=new j.Hp({next:Xe=>st.next(Xe),error:Xe=>{pe=!0,Ge(),Fe=ve(Et,Ee,Xe),st.error(Xe)},complete:()=>{Ae=!0,Ge(),Fe=ve(Et,Y),st.complete()}}),(0,c.Xf)(xe).subscribe(nt))})(te)}}function ve(ue,ye,...Ee){if(!0===ye)return void ue();if(!1===ye)return;const Y=new j.Hp({next:()=>{Y.unsubscribe(),ue()}});return ye(...Ee).subscribe(Y)}},9468:(Tt,ce,H)=>{"use strict";H.d(ce,{R:()=>B});var c=H(4482);function B(j,fe=0){return(0,c.e)((de,ve)=>{ve.add(j.schedule(()=>de.subscribe(ve),fe))})}},8505:(Tt,ce,H)=>{"use strict";H.d(ce,{b:()=>de});var c=H(576),B=H(4482),j=H(5403),fe=H(4671);function de(ve,ue,ye){const Ee=(0,c.m)(ve)||ue||ye?{next:ve,error:ue,complete:ye}:ve;return Ee?(0,B.e)((Y,J)=>{var te;null===(te=Ee.subscribe)||void 0===te||te.call(Ee);let nt=!0;Y.subscribe((0,j.x)(J,Fe=>{var Me;null===(Me=Ee.next)||void 0===Me||Me.call(Ee,Fe),J.next(Fe)},()=>{var Fe;nt=!1,null===(Fe=Ee.complete)||void 0===Fe||Fe.call(Ee),J.complete()},Fe=>{var Me;nt=!1,null===(Me=Ee.error)||void 0===Me||Me.call(Ee,Fe),J.error(Fe)},()=>{var Fe,Me;nt&&(null===(Fe=Ee.unsubscribe)||void 0===Fe||Fe.call(Ee)),null===(Me=Ee.finalize)||void 0===Me||Me.call(Ee)}))}):fe.y}},4408:(Tt,ce,H)=>{"use strict";H.d(ce,{o:()=>de});var c=H(727);class B extends c.w0{constructor(ue,ye){super()}schedule(ue,ye=0){return this}}const j={setInterval(ve,ue,...ye){const{delegate:Ee}=j;return Ee?.setInterval?Ee.setInterval(ve,ue,...ye):setInterval(ve,ue,...ye)},clearInterval(ve){const{delegate:ue}=j;return(ue?.clearInterval||clearInterval)(ve)},delegate:void 0};var fe=H(8737);class de extends B{constructor(ue,ye){super(ue,ye),this.scheduler=ue,this.work=ye,this.pending=!1}schedule(ue,ye=0){var Ee;if(this.closed)return this;this.state=ue;const Y=this.id,J=this.scheduler;return null!=Y&&(this.id=this.recycleAsyncId(J,Y,ye)),this.pending=!0,this.delay=ye,this.id=null!==(Ee=this.id)&&void 0!==Ee?Ee:this.requestAsyncId(J,this.id,ye),this}requestAsyncId(ue,ye,Ee=0){return j.setInterval(ue.flush.bind(ue,this),Ee)}recycleAsyncId(ue,ye,Ee=0){if(null!=Ee&&this.delay===Ee&&!1===this.pending)return ye;null!=ye&&j.clearInterval(ye)}execute(ue,ye){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Ee=this._execute(ue,ye);if(Ee)return Ee;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ue,ye){let Y,Ee=!1;try{this.work(ue)}catch(J){Ee=!0,Y=J||new Error("Scheduled action threw falsy error")}if(Ee)return this.unsubscribe(),Y}unsubscribe(){if(!this.closed){const{id:ue,scheduler:ye}=this,{actions:Ee}=ye;this.work=this.state=this.scheduler=null,this.pending=!1,(0,fe.P)(Ee,this),null!=ue&&(this.id=this.recycleAsyncId(ye,ue,null)),this.delay=null,super.unsubscribe()}}}},7565:(Tt,ce,H)=>{"use strict";H.d(ce,{v:()=>j});var c=H(6063);class B{constructor(de,ve=B.now){this.schedulerActionCtor=de,this.now=ve}schedule(de,ve=0,ue){return new this.schedulerActionCtor(this,de).schedule(ue,ve)}}B.now=c.l.now;class j extends B{constructor(de,ve=B.now){super(de,ve),this.actions=[],this._active=!1}flush(de){const{actions:ve}=this;if(this._active)return void ve.push(de);let ue;this._active=!0;do{if(ue=de.execute(de.state,de.delay))break}while(de=ve.shift());if(this._active=!1,ue){for(;de=ve.shift();)de.unsubscribe();throw ue}}}},4986:(Tt,ce,H)=>{"use strict";H.d(ce,{z:()=>j});var c=H(4408);const j=new(H(7565).v)(c.o)},6063:(Tt,ce,H)=>{"use strict";H.d(ce,{l:()=>c});const c={now:()=>(c.delegate||Date).now(),delegate:void 0}},3410:(Tt,ce,H)=>{"use strict";H.d(ce,{z:()=>c});const c={setTimeout(B,j,...fe){const{delegate:de}=c;return de?.setTimeout?de.setTimeout(B,j,...fe):setTimeout(B,j,...fe)},clearTimeout(B){const{delegate:j}=c;return(j?.clearTimeout||clearTimeout)(B)},delegate:void 0}},2202:(Tt,ce,H)=>{"use strict";H.d(ce,{h:()=>B});const B=function c(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(Tt,ce,H)=>{"use strict";H.d(ce,{L:()=>c});const c="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(Tt,ce,H)=>{"use strict";H.d(ce,{_6:()=>ve,jO:()=>fe,yG:()=>de});var c=H(576);function j(ue){return ue[ue.length-1]}function fe(ue){return(0,c.m)(j(ue))?ue.pop():void 0}function de(ue){return function B(ue){return ue&&(0,c.m)(ue.schedule)}(j(ue))?ue.pop():void 0}function ve(ue,ye){return"number"==typeof j(ue)?ue.pop():ye}},8737:(Tt,ce,H)=>{"use strict";function c(B,j){if(B){const fe=B.indexOf(j);0<=fe&&B.splice(fe,1)}}H.d(ce,{P:()=>c})},3888:(Tt,ce,H)=>{"use strict";function c(B){const fe=B(de=>{Error.call(de),de.stack=(new Error).stack});return fe.prototype=Object.create(Error.prototype),fe.prototype.constructor=fe,fe}H.d(ce,{d:()=>c})},2806:(Tt,ce,H)=>{"use strict";H.d(ce,{O:()=>fe,x:()=>j});var c=H(2416);let B=null;function j(de){if(c.v.useDeprecatedSynchronousErrorHandling){const ve=!B;if(ve&&(B={errorThrown:!1,error:null}),de(),ve){const{errorThrown:ue,error:ye}=B;if(B=null,ue)throw ye}}else de()}function fe(de){c.v.useDeprecatedSynchronousErrorHandling&&B&&(B.errorThrown=!0,B.error=de)}},9672:(Tt,ce,H)=>{"use strict";function c(B,j,fe,de=0,ve=!1){const ue=j.schedule(function(){fe(),ve?B.add(this.schedule(null,de)):this.unsubscribe()},de);if(B.add(ue),!ve)return ue}H.d(ce,{f:()=>c})},4671:(Tt,ce,H)=>{"use strict";function c(B){return B}H.d(ce,{y:()=>c})},1144:(Tt,ce,H)=>{"use strict";H.d(ce,{z:()=>c});const c=B=>B&&"number"==typeof B.length&&"function"!=typeof B},2206:(Tt,ce,H)=>{"use strict";H.d(ce,{D:()=>B});var c=H(576);function B(j){return Symbol.asyncIterator&&(0,c.m)(j?.[Symbol.asyncIterator])}},576:(Tt,ce,H)=>{"use strict";function c(B){return"function"==typeof B}H.d(ce,{m:()=>c})},3670:(Tt,ce,H)=>{"use strict";H.d(ce,{c:()=>j});var c=H(8822),B=H(576);function j(fe){return(0,B.m)(fe[c.L])}},6495:(Tt,ce,H)=>{"use strict";H.d(ce,{T:()=>j});var c=H(2202),B=H(576);function j(fe){return(0,B.m)(fe?.[c.h])}},8239:(Tt,ce,H)=>{"use strict";H.d(ce,{t:()=>B});var c=H(576);function B(j){return(0,c.m)(j?.then)}},3260:(Tt,ce,H)=>{"use strict";H.d(ce,{L:()=>fe,Q:()=>j});var c=H(655),B=H(576);function j(de){return(0,c.FC)(this,arguments,function*(){const ue=de.getReader();try{for(;;){const{value:ye,done:Ee}=yield(0,c.qq)(ue.read());if(Ee)return yield(0,c.qq)(void 0);yield yield(0,c.qq)(ye)}}finally{ue.releaseLock()}})}function fe(de){return(0,B.m)(de?.getReader)}},4482:(Tt,ce,H)=>{"use strict";H.d(ce,{A:()=>B,e:()=>j});var c=H(576);function B(fe){return(0,c.m)(fe?.lift)}function j(fe){return de=>{if(B(de))return de.lift(function(ve){try{return fe(ve,this)}catch(ue){this.error(ue)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(Tt,ce,H)=>{"use strict";function c(){}H.d(ce,{Z:()=>c})},9635:(Tt,ce,H)=>{"use strict";H.d(ce,{U:()=>j,z:()=>B});var c=H(4671);function B(...fe){return j(fe)}function j(fe){return 0===fe.length?c.y:1===fe.length?fe[0]:function(ve){return fe.reduce((ue,ye)=>ye(ue),ve)}}},7849:(Tt,ce,H)=>{"use strict";H.d(ce,{h:()=>j});var c=H(2416),B=H(3410);function j(fe){B.z.setTimeout(()=>{const{onUnhandledError:de}=c.v;if(!de)throw fe;de(fe)})}},4532:(Tt,ce,H)=>{"use strict";function c(B){return new TypeError(`You provided ${null!==B&&"object"==typeof B?"an invalid object":`'${B}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}H.d(ce,{z:()=>c})},5226:function(Tt){Tt.exports=function(){"use strict";var ce={awaitingPromise:new WeakMap,promise:new WeakMap,innerParams:new WeakMap,domCache:new WeakMap};const c=I=>{const T={};for(const P in I)T[I[P]]="swal2-"+I[P];return T},B=c(["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","default-outline","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error"]),j=c(["success","warning","info","question","error"]),fe="SweetAlert2:",ve=I=>I.charAt(0).toUpperCase()+I.slice(1),ue=I=>{console.warn(`${fe} ${"object"==typeof I?I.join(" "):I}`)},ye=I=>{console.error(`${fe} ${I}`)},Ee=[],J=(I,T)=>{(I=>{Ee.includes(I)||(Ee.push(I),ue(I))})(`"${I}" is deprecated and will be removed in the next major release. Please use "${T}" instead.`)},te=I=>"function"==typeof I?I():I,nt=I=>I&&"function"==typeof I.toPromise,Fe=I=>nt(I)?I.toPromise():Promise.resolve(I),Me=I=>I&&Promise.resolve(I)===I,ot=()=>document.body.querySelector(`.${B.container}`),Ae=I=>{const T=ot();return T?T.querySelector(I):null},pe=I=>Ae(`.${I}`),Ge=()=>pe(B.popup),Et=()=>pe(B.icon),xe=()=>pe(B.title),Ce=()=>pe(B["html-container"]),st=()=>pe(B.image),Xe=()=>pe(B["progress-steps"]),_e=()=>pe(B["validation-message"]),K=()=>Ae(`.${B.actions} .${B.confirm}`),Qe=()=>Ae(`.${B.actions} .${B.cancel}`),rt=()=>Ae(`.${B.actions} .${B.deny}`),at=()=>Ae(`.${B.loader}`),he=()=>pe(B.actions),De=()=>pe(B.footer),Re=()=>pe(B["timer-progress-bar"]),Ue=()=>pe(B.close),Pe=()=>{const I=Array.from(Ge().querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])')).sort((P,G)=>{const Ie=parseInt(P.getAttribute("tabindex")),wt=parseInt(G.getAttribute("tabindex"));return Ie>wt?1:Ie<wt?-1:0}),T=Array.from(Ge().querySelectorAll('\n  a[href],\n  area[href],\n  input:not([disabled]),\n  select:not([disabled]),\n  textarea:not([disabled]),\n  button:not([disabled]),\n  iframe,\n  object,\n  embed,\n  [tabindex="0"],\n  [contenteditable],\n  audio[controls],\n  video[controls],\n  summary\n')).filter(P=>"-1"!==P.getAttribute("tabindex"));return(I=>{const T=[];for(let P=0;P<I.length;P++)-1===T.indexOf(I[P])&&T.push(I[P]);return T})(I.concat(T)).filter(P=>En(P))},At=()=>Zt(document.body,B.shown)&&!Zt(document.body,B["toast-shown"])&&!Zt(document.body,B["no-backdrop"]),Yt=()=>Ge()&&Zt(Ge(),B.toast),qe={previousBodyPadding:null},qt=(I,T)=>{if(I.textContent="",T){const G=(new DOMParser).parseFromString(T,"text/html");Array.from(G.querySelector("head").childNodes).forEach(Ie=>{I.appendChild(Ie)}),Array.from(G.querySelector("body").childNodes).forEach(Ie=>{Ie instanceof HTMLVideoElement||Ie instanceof HTMLAudioElement?I.appendChild(Ie.cloneNode(!0)):I.appendChild(Ie)})}},Zt=(I,T)=>{if(!T)return!1;const P=T.split(/\s+/);for(let G=0;G<P.length;G++)if(!I.classList.contains(P[G]))return!1;return!0},hn=(I,T,P)=>{if(((I,T)=>{Array.from(I.classList).forEach(P=>{!Object.values(B).includes(P)&&!Object.values(j).includes(P)&&!Object.values(T.showClass).includes(P)&&I.classList.remove(P)})})(I,T),T.customClass&&T.customClass[P]){if("string"!=typeof T.customClass[P]&&!T.customClass[P].forEach)return void ue(`Invalid type of customClass.${P}! Expected string or iterable object, got "${typeof T.customClass[P]}"`);Bt(I,T.customClass[P])}},Rn=(I,T)=>{if(!T)return null;switch(T){case"select":case"textarea":case"file":return I.querySelector(`.${B.popup} > .${B[T]}`);case"checkbox":return I.querySelector(`.${B.popup} > .${B.checkbox} input`);case"radio":return I.querySelector(`.${B.popup} > .${B.radio} input:checked`)||I.querySelector(`.${B.popup} > .${B.radio} input:first-child`);case"range":return I.querySelector(`.${B.popup} > .${B.range} input`);default:return I.querySelector(`.${B.popup} > .${B.input}`)}},qn=I=>{if(I.focus(),"file"!==I.type){const T=I.value;I.value="",I.value=T}},ri=(I,T,P)=>{!I||!T||("string"==typeof T&&(T=T.split(/\s+/).filter(Boolean)),T.forEach(G=>{Array.isArray(I)?I.forEach(Ie=>{P?Ie.classList.add(G):Ie.classList.remove(G)}):P?I.classList.add(G):I.classList.remove(G)}))},Bt=(I,T)=>{ri(I,T,!0)},hr=(I,T)=>{ri(I,T,!1)},Yn=(I,T)=>{const P=Array.from(I.children);for(let G=0;G<P.length;G++){const Ie=P[G];if(Ie instanceof HTMLElement&&Zt(Ie,T))return Ie}},pi=(I,T,P)=>{P===`${parseInt(P)}`&&(P=parseInt(P)),P||0===parseInt(P)?I.style[T]="number"==typeof P?`${P}px`:P:I.style.removeProperty(T)},jn=function(I){I.style.display=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"flex"},it=I=>{I.style.display="none"},mr=(I,T,P,G)=>{const Ie=I.querySelector(T);Ie&&(Ie.style[P]=G)},Gr=function(I,T){T?jn(I,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"flex"):it(I)},En=I=>!(!I||!(I.offsetWidth||I.offsetHeight||I.getClientRects().length)),_s=I=>I.scrollHeight>I.clientHeight,Un=I=>{const T=window.getComputedStyle(I),P=parseFloat(T.getPropertyValue("animation-duration")||"0"),G=parseFloat(T.getPropertyValue("transition-duration")||"0");return P>0||G>0},$n=function(I){let T=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const P=Re();En(P)&&(T&&(P.style.transition="none",P.style.width="100%"),setTimeout(()=>{P.style.transition=`width ${I/1e3}s linear`,P.style.width="0%"},10))},Ze={},$i=I=>new Promise(T=>{if(!I)return T();const P=window.scrollX,G=window.scrollY;Ze.restoreFocusTimeout=setTimeout(()=>{Ze.previousActiveElement instanceof HTMLElement?(Ze.previousActiveElement.focus(),Ze.previousActiveElement=null):document.body&&document.body.focus(),T()},100),window.scrollTo(P,G)}),xr=()=>typeof window>"u"||typeof document>"u",nr=`\n <div aria-labelledby="${B.title}" aria-describedby="${B["html-container"]}" class="${B.popup}" tabindex="-1">\n   <button type="button" class="${B.close}"></button>\n   <ul class="${B["progress-steps"]}"></ul>\n   <div class="${B.icon}"></div>\n   <img class="${B.image}" />\n   <h2 class="${B.title}" id="${B.title}"></h2>\n   <div class="${B["html-container"]}" id="${B["html-container"]}"></div>\n   <input class="${B.input}" />\n   <input type="file" class="${B.file}" />\n   <div class="${B.range}">\n     <input type="range" />\n     <output></output>\n   </div>\n   <select class="${B.select}"></select>\n   <div class="${B.radio}"></div>\n   <label for="${B.checkbox}" class="${B.checkbox}">\n     <input type="checkbox" />\n     <span class="${B.label}"></span>\n   </label>\n   <textarea class="${B.textarea}"></textarea>\n   <div class="${B["validation-message"]}" id="${B["validation-message"]}"></div>\n   <div class="${B.actions}">\n     <div class="${B.loader}"></div>\n     <button type="button" class="${B.confirm}"></button>\n     <button type="button" class="${B.deny}"></button>\n     <button type="button" class="${B.cancel}"></button>\n   </div>\n   <div class="${B.footer}"></div>\n   <div class="${B["timer-progress-bar-container"]}">\n     <div class="${B["timer-progress-bar"]}"></div>\n   </div>\n </div>\n`.replace(/(^|\n)\s*/g,""),ii=()=>{Ze.currentInstance.resetValidationMessage()},Fr=I=>{const T=(()=>{const I=ot();return!!I&&(I.remove(),hr([document.documentElement,document.body],[B["no-backdrop"],B["toast-shown"],B["has-column"]]),!0)})();if(xr())return void ye("SweetAlert2 requires document to initialize");const P=document.createElement("div");P.className=B.container,T&&Bt(P,B["no-transition"]),qt(P,nr);const G=(I=>"string"==typeof I?document.querySelector(I):I)(I.target);G.appendChild(P),(I=>{const T=Ge();T.setAttribute("role",I.toast?"alert":"dialog"),T.setAttribute("aria-live",I.toast?"polite":"assertive"),I.toast||T.setAttribute("aria-modal","true")})(I),(I=>{"rtl"===window.getComputedStyle(I).direction&&Bt(ot(),B.rtl)})(G),(()=>{const I=Ge(),T=Yn(I,B.input),P=Yn(I,B.file),G=I.querySelector(`.${B.range} input`),Ie=I.querySelector(`.${B.range} output`),wt=Yn(I,B.select),Dn=I.querySelector(`.${B.checkbox} input`),Zr=Yn(I,B.textarea);T.oninput=ii,P.onchange=ii,wt.onchange=ii,Dn.onchange=ii,Zr.oninput=ii,G.oninput=()=>{ii(),Ie.value=G.value},G.onchange=()=>{ii(),Ie.value=G.value}})()},dt=(I,T)=>{I instanceof HTMLElement?T.appendChild(I):"object"==typeof I?ke(I,T):I&&qt(T,I)},ke=(I,T)=>{I.jquery?ht(T,I):qt(T,I.toString())},ht=(I,T)=>{if(I.textContent="",0 in T)for(let P=0;P in T;P++)I.appendChild(T[P].cloneNode(!0));else I.appendChild(T.cloneNode(!0))},Gt=(()=>{if(xr())return!1;const I=document.createElement("div"),T={WebkitAnimation:"webkitAnimationEnd",animation:"animationend"};for(const P in T)if(Object.prototype.hasOwnProperty.call(T,P)&&typeof I.style[P]<"u")return T[P];return!1})(),pn=(I,T)=>{const P=he(),G=at();T.showConfirmButton||T.showDenyButton||T.showCancelButton?jn(P):it(P),hn(P,T,"actions"),function rr(I,T,P){const G=K(),Ie=rt(),wt=Qe();W(G,"confirm",P),W(Ie,"deny",P),W(wt,"cancel",P),function q(I,T,P,G){G.buttonsStyling?(Bt([I,T,P],B.styled),G.confirmButtonColor&&(I.style.backgroundColor=G.confirmButtonColor,Bt(I,B["default-outline"])),G.denyButtonColor&&(T.style.backgroundColor=G.denyButtonColor,Bt(T,B["default-outline"])),G.cancelButtonColor&&(P.style.backgroundColor=G.cancelButtonColor,Bt(P,B["default-outline"]))):hr([I,T,P],B.styled)}(G,Ie,wt,P),P.reverseButtons&&(P.toast?(I.insertBefore(wt,G),I.insertBefore(Ie,G)):(I.insertBefore(wt,T),I.insertBefore(Ie,T),I.insertBefore(G,T)))}(P,G,T),qt(G,T.loaderHtml),hn(G,T,"loader")};function W(I,T,P){Gr(I,P[`show${ve(T)}Button`],"inline-block"),qt(I,P[`${T}ButtonText`]),I.setAttribute("aria-label",P[`${T}ButtonAriaLabel`]),I.className=B[T],hn(I,P,`${T}Button`),Bt(I,P[`${T}ButtonClass`])}const ge=(I,T)=>{const P=ot();!P||(function se(I,T){"string"==typeof T?I.style.background=T:T||Bt([document.documentElement,document.body],B["no-backdrop"])}(P,T.backdrop),function lt(I,T){T in B?Bt(I,B[T]):(ue('The "position" parameter is not valid, defaulting to "center"'),Bt(I,B.center))}(P,T.position),function jt(I,T){if(T&&"string"==typeof T){const P=`grow-${T}`;P in B&&Bt(I,B[P])}}(P,T.grow),hn(P,T,"container"))};const tn=["input","file","range","select","radio","checkbox","textarea"],Je=I=>{if(!lr[I.input])return void ye(`Unexpected type of input! Expected "text", "email", "password", "number", "tel", "select", "radio", "checkbox", "textarea", "file" or "url", got "${I.input}"`);const T=ho(I.input),P=lr[I.input](T,I);jn(T),I.inputAutoFocus&&setTimeout(()=>{qn(P)})},xt=(I,T)=>{const P=Rn(Ge(),I);if(P){(I=>{for(let T=0;T<I.attributes.length;T++){const P=I.attributes[T].name;["type","value","style"].includes(P)||I.removeAttribute(P)}})(P);for(const G in T)P.setAttribute(G,T[G])}},Qn=I=>{const T=ho(I.input);"object"==typeof I.customClass&&Bt(T,I.customClass.input)},_r=(I,T)=>{(!I.placeholder||T.inputPlaceholder)&&(I.placeholder=T.inputPlaceholder)},Vn=(I,T,P)=>{if(P.inputLabel){I.id=B.input;const G=document.createElement("label"),Ie=B["input-label"];G.setAttribute("for",I.id),G.className=Ie,"object"==typeof P.customClass&&Bt(G,P.customClass.inputLabel),G.innerText=P.inputLabel,T.insertAdjacentElement("beforebegin",G)}},ho=I=>Yn(Ge(),B[I]||B.input),In=(I,T)=>{["string","number"].includes(typeof T)?I.value=`${T}`:Me(T)||ue(`Unexpected type of inputValue! Expected "string", "number" or "Promise", got "${typeof T}"`)},lr={};lr.text=lr.email=lr.password=lr.number=lr.tel=lr.url=(I,T)=>(In(I,T.inputValue),Vn(I,I,T),_r(I,T),I.type=T.input,I),lr.file=(I,T)=>(Vn(I,I,T),_r(I,T),I),lr.range=(I,T)=>{const P=I.querySelector("input"),G=I.querySelector("output");return In(P,T.inputValue),P.type=T.input,In(G,T.inputValue),Vn(P,I,T),I},lr.select=(I,T)=>{if(I.textContent="",T.inputPlaceholder){const P=document.createElement("option");qt(P,T.inputPlaceholder),P.value="",P.disabled=!0,P.selected=!0,I.appendChild(P)}return Vn(I,I,T),I},lr.radio=I=>(I.textContent="",I),lr.checkbox=(I,T)=>{const P=Rn(Ge(),"checkbox");P.value="1",P.id=B.checkbox,P.checked=Boolean(T.inputValue);const G=I.querySelector("span");return qt(G,T.inputPlaceholder),P},lr.textarea=(I,T)=>{In(I,T.inputValue),_r(I,T),Vn(I,I,T);return setTimeout(()=>{if("MutationObserver"in window){const G=parseInt(window.getComputedStyle(Ge()).width);new MutationObserver(()=>{const wt=I.offsetWidth+(G=>parseInt(window.getComputedStyle(G).marginLeft)+parseInt(window.getComputedStyle(G).marginRight))(I);Ge().style.width=wt>G?`${wt}px`:null}).observe(I,{attributes:!0,attributeFilter:["style"]})}}),I};const Fs=(I,T)=>{const P=Ce();hn(P,T,"htmlContainer"),T.html?(dt(T.html,P),jn(P,"block")):T.text?(P.textContent=T.text,jn(P,"block")):it(P),((I,T)=>{const P=Ge(),G=ce.innerParams.get(I),Ie=!G||T.input!==G.input;tn.forEach(wt=>{const Dn=Yn(P,B[wt]);xt(wt,T.inputAttributes),Dn.className=B[wt],Ie&&it(Dn)}),T.input&&(Ie&&Je(T),Qn(T))})(I,T)},Vs=(I,T)=>{for(const P in j)T.icon!==P&&hr(I,j[P]);Bt(I,j[T.icon]),vs(I,T),Za(),hn(I,T,"icon")},Za=()=>{const I=Ge(),T=window.getComputedStyle(I).getPropertyValue("background-color"),P=I.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix");for(let G=0;G<P.length;G++)P[G].style.backgroundColor=T},Xi=(I,T)=>{let G,P=I.innerHTML;T.iconHtml?G=Ti(T.iconHtml):"success"===T.icon?(G='\n  <div class="swal2-success-circular-line-left"></div>\n  <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>\n  <div class="swal2-success-ring"></div> <div class="swal2-success-fix"></div>\n  <div class="swal2-success-circular-line-right"></div>\n',P=P.replace(/ style=".*?"/g,"")):G="error"===T.icon?'\n  <span class="swal2-x-mark">\n    <span class="swal2-x-mark-line-left"></span>\n    <span class="swal2-x-mark-line-right"></span>\n  </span>\n':Ti({question:"?",warning:"!",info:"i"}[T.icon]),P.trim()!==G.trim()&&qt(I,G)},vs=(I,T)=>{if(T.iconColor){I.style.color=T.iconColor,I.style.borderColor=T.iconColor;for(const P of[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"])mr(I,P,"backgroundColor",T.iconColor);mr(I,".swal2-success-ring","borderColor",T.iconColor)}},Ti=I=>`<div class="${B["icon-content"]}">${I}</div>`,un=(I,T)=>{I.className=`${B.popup} ${En(I)?T.showClass.popup:""}`,T.toast?(Bt([document.documentElement,document.body],B["toast-shown"]),Bt(I,B.toast)):Bt(I,B.modal),hn(I,T,"popup"),"string"==typeof T.customClass&&Bt(I,T.customClass),T.icon&&Bt(I,B[`icon-${T.icon}`])},Zl=I=>{const T=document.createElement("li");return Bt(T,B["progress-step"]),qt(T,I),T},da=I=>{const T=document.createElement("li");return Bt(T,B["progress-step-line"]),I.progressStepsDistance&&pi(T,"width",I.progressStepsDistance),T},Ai=(I,T)=>{((I,T)=>{const P=ot(),G=Ge();T.toast?(pi(P,"width",T.width),G.style.width="100%",G.insertBefore(at(),Et())):pi(G,"width",T.width),pi(G,"padding",T.padding),T.color&&(G.style.color=T.color),T.background&&(G.style.background=T.background),it(_e()),un(G,T)})(0,T),ge(0,T),((I,T)=>{const P=Xe();T.progressSteps&&0!==T.progressSteps.length?(jn(P),P.textContent="",T.currentProgressStep>=T.progressSteps.length&&ue("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),T.progressSteps.forEach((G,Ie)=>{const wt=Zl(G);if(P.appendChild(wt),Ie===T.currentProgressStep&&Bt(wt,B["active-progress-step"]),Ie!==T.progressSteps.length-1){const Dn=da(T);P.appendChild(Dn)}})):it(P)})(0,T),((I,T)=>{const P=ce.innerParams.get(I),G=Et();P&&T.icon===P.icon?(Xi(G,T),Vs(G,T)):T.icon||T.iconHtml?T.icon&&-1===Object.keys(j).indexOf(T.icon)?(ye(`Unknown icon! Expected "success", "error", "warning", "info" or "question", got "${T.icon}"`),it(G)):(jn(G),Xi(G,T),Vs(G,T),Bt(G,T.showClass.icon)):it(G)})(I,T),((I,T)=>{const P=st();T.imageUrl?(jn(P,""),P.setAttribute("src",T.imageUrl),P.setAttribute("alt",T.imageAlt),pi(P,"width",T.imageWidth),pi(P,"height",T.imageHeight),P.className=B.image,hn(P,T,"image")):it(P)})(0,T),((I,T)=>{const P=xe();Gr(P,T.title||T.titleText,"block"),T.title&&dt(T.title,P),T.titleText&&(P.innerText=T.titleText),hn(P,T,"title")})(0,T),((I,T)=>{const P=Ue();qt(P,T.closeButtonHtml),hn(P,T,"closeButton"),Gr(P,T.showCloseButton),P.setAttribute("aria-label",T.closeButtonAriaLabel)})(0,T),Fs(I,T),pn(0,T),((I,T)=>{const P=De();Gr(P,T.footer),T.footer&&dt(T.footer,P),hn(P,T,"footer")})(0,T),"function"==typeof T.didRender&&T.didRender(Ge())};function $o(){const I=ce.innerParams.get(this);if(!I)return;const T=ce.domCache.get(this);it(T.loader),Yt()?I.icon&&jn(Et()):ws(T),hr([T.popup,T.actions],B.loading),T.popup.removeAttribute("aria-busy"),T.popup.removeAttribute("data-loading"),T.confirmButton.disabled=!1,T.denyButton.disabled=!1,T.cancelButton.disabled=!1}const ws=I=>{const T=I.popup.getElementsByClassName(I.loader.getAttribute("data-button-to-replace"));T.length?jn(T[0],"inline-block"):!En(K())&&!En(rt())&&!En(Qe())&&it(I.actions)};const vr=()=>K()&&K().click(),mi=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),ha=I=>{I.keydownTarget&&I.keydownHandlerAdded&&(I.keydownTarget.removeEventListener("keydown",I.keydownHandler,{capture:I.keydownListenerCapture}),I.keydownHandlerAdded=!1)},Qa=(I,T)=>{const P=Pe();if(P.length)return(I+=T)===P.length?I=0:-1===I&&(I=P.length-1),void P[I].focus();Ge().focus()},Kl=["ArrowRight","ArrowDown"],Yl=["ArrowLeft","ArrowUp"],Ja=(I,T,P)=>{const G=ce.innerParams.get(I);!G||T.isComposing||229===T.keyCode||(G.stopKeydownPropagation&&T.stopPropagation(),"Enter"===T.key?cd(I,T,G):"Tab"===T.key?Si(T):[...Kl,...Yl].includes(T.key)?Ql(T.key):"Escape"===T.key&&qu(T,G,P))},cd=(I,T,P)=>{if(te(P.allowEnterKey)&&T.target&&I.getInput()&&T.target instanceof HTMLElement&&T.target.outerHTML===I.getInput().outerHTML){if(["textarea","file"].includes(P.input))return;vr(),T.preventDefault()}},Si=I=>{const T=I.target,P=Pe();let G=-1;for(let Ie=0;Ie<P.length;Ie++)if(T===P[Ie]){G=Ie;break}Qa(G,I.shiftKey?-1:1),I.stopPropagation(),I.preventDefault()},Ql=I=>{const T=K(),P=rt(),G=Qe();if(document.activeElement instanceof HTMLElement&&![T,P,G].includes(document.activeElement))return;const wt=Kl.includes(I)?"nextElementSibling":"previousElementSibling";let Dn=document.activeElement;for(let Zr=0;Zr<he().children.length;Zr++){if(Dn=Dn[wt],!Dn)return;if(Dn instanceof HTMLButtonElement&&En(Dn))break}Dn instanceof HTMLButtonElement&&Dn.focus()},qu=(I,T,P)=>{te(T.allowEscapeKey)&&(I.preventDefault(),P(mi.esc))};var Xa={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap};const Jl=()=>{Array.from(document.body.children).forEach(T=>{T.hasAttribute("data-previous-aria-hidden")?(T.setAttribute("aria-hidden",T.getAttribute("data-previous-aria-hidden")),T.removeAttribute("data-previous-aria-hidden")):T.removeAttribute("aria-hidden")})},Bs=()=>{const I=navigator.userAgent,T=!!I.match(/iPad/i)||!!I.match(/iPhone/i),P=!!I.match(/WebKit/i);T&&P&&!I.match(/CriOS/i)&&Ge().scrollHeight>window.innerHeight-44&&(ot().style.paddingBottom="44px")},Ku=()=>{const I=ot();let T;I.ontouchstart=P=>{T=mh(P)},I.ontouchmove=P=>{T&&(P.preventDefault(),P.stopPropagation())}},mh=I=>{const T=I.target,P=ot();return!Yu(I)&&!_h(I)&&(T===P||!_s(P)&&T instanceof HTMLElement&&"INPUT"!==T.tagName&&"TEXTAREA"!==T.tagName&&!(_s(Ce())&&Ce().contains(T)))},Yu=I=>I.touches&&I.touches.length&&"stylus"===I.touches[0].touchType,_h=I=>I.touches&&I.touches.length>1,Ju=()=>{null===qe.previousBodyPadding&&document.body.scrollHeight>window.innerHeight&&(qe.previousBodyPadding=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight=`${qe.previousBodyPadding+(()=>{const I=document.createElement("div");I.className=B["scrollbar-measure"],document.body.appendChild(I);const T=I.getBoundingClientRect().width-I.clientWidth;return document.body.removeChild(I),T})()}px`)};function fo(I,T,P,G){Yt()?rl(I,G):($i(P).then(()=>rl(I,G)),ha(Ze)),/^((?!chrome|android).)*safari/i.test(navigator.userAgent)?(T.setAttribute("style","display:none !important"),T.removeAttribute("class"),T.innerHTML=""):T.remove(),At()&&(null!==qe.previousBodyPadding&&(document.body.style.paddingRight=`${qe.previousBodyPadding}px`,qe.previousBodyPadding=null),(()=>{if(Zt(document.body,B.iosfix)){const I=parseInt(document.body.style.top,10);hr(document.body,B.iosfix),document.body.style.top="",document.body.scrollTop=-1*I}})(),Jl()),function Hs(){hr([document.documentElement,document.body],[B.shown,B["height-auto"],B["no-backdrop"],B["toast-shown"]])}()}function po(I){I=nl(I);const T=Xa.swalPromiseResolve.get(this),P=zi(this);this.isAwaitingPromise()?I.isDismissed||($s(this),T(I)):P&&T(I)}const zi=I=>{const T=Ge();if(!T)return!1;const P=ce.innerParams.get(I);if(!P||Zt(T,P.hideClass.popup))return!1;hr(T,P.showClass.popup),Bt(T,P.hideClass.popup);const G=ot();return hr(G,P.showClass.backdrop),Bt(G,P.hideClass.backdrop),pa(I,T,P),!0};const $s=I=>{I.isAwaitingPromise()&&(ce.awaitingPromise.delete(I),ce.innerParams.get(I)||I._destroy())},nl=I=>typeof I>"u"?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},I),pa=(I,T,P)=>{const G=ot(),Ie=Gt&&Un(T);"function"==typeof P.willClose&&P.willClose(T),Ie?Xu(I,T,G,P.returnFocus,P.didClose):fo(I,G,P.returnFocus,P.didClose)},Xu=(I,T,P,G,Ie)=>{Ze.swalCloseEventFinishedCallback=fo.bind(null,I,P,G,Ie),T.addEventListener(Gt,function(wt){wt.target===T&&(Ze.swalCloseEventFinishedCallback(),delete Ze.swalCloseEventFinishedCallback)})},rl=(I,T)=>{setTimeout(()=>{"function"==typeof T&&T.bind(I.params)(),I._destroy()})};function Xl(I,T,P){const G=ce.domCache.get(I);T.forEach(Ie=>{G[Ie].disabled=P})}function es(I,T){if(I)if("radio"===I.type){const G=I.parentNode.parentNode.querySelectorAll("input");for(let Ie=0;Ie<G.length;Ie++)G[Ie].disabled=T}else I.disabled=T}const zs={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoFocus:!0,inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0},kn=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","willClose"],zo={},ma=["allowOutsideClick","allowEnterKey","backdrop","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],_i=I=>Object.prototype.hasOwnProperty.call(zs,I),Rr=I=>-1!==kn.indexOf(I),_a=I=>zo[I],ya=I=>{_i(I)||ue(`Unknown parameter "${I}"`)},xi=I=>{ma.includes(I)&&ue(`The parameter "${I}" is incompatible with toasts`)},Mr=I=>{_a(I)&&J(I,_a(I))};const Go=I=>{const T={};return Object.keys(I).forEach(P=>{Rr(P)?T[P]=I[P]:ue(`Invalid parameter to update: ${P}`)}),T};const Ur=I=>{ir(I),delete I.params,delete Ze.keydownHandler,delete Ze.keydownTarget,delete Ze.currentInstance},ir=I=>{I.isAwaitingPromise()?(Ft(ce,I),ce.awaitingPromise.set(I,!0)):(Ft(Xa,I),Ft(ce,I))},Ft=(I,T)=>{for(const P in I)I[P].delete(T)};var go=Object.freeze({__proto__:null,_destroy:function Ri(){const I=ce.domCache.get(this),T=ce.innerParams.get(this);T?(I.popup&&Ze.swalCloseEventFinishedCallback&&(Ze.swalCloseEventFinishedCallback(),delete Ze.swalCloseEventFinishedCallback),"function"==typeof T.didDestroy&&T.didDestroy(),Ur(this)):ir(this)},close:po,closeModal:po,closePopup:po,closeToast:po,disableButtons:function wr(){Xl(this,["confirmButton","denyButton","cancelButton"],!0)},disableInput:function yh(){es(this.getInput(),!0)},disableLoading:$o,enableButtons:function Gi(){Xl(this,["confirmButton","denyButton","cancelButton"],!1)},enableInput:function ga(){es(this.getInput(),!1)},getInput:function Kn(I){const T=ce.innerParams.get(I||this),P=ce.domCache.get(I||this);return P?Rn(P.popup,T.input):null},handleAwaitingPromise:$s,hideLoading:$o,isAwaitingPromise:function js(){return!!ce.awaitingPromise.get(this)},rejectPromise:function tl(I){const T=Xa.swalPromiseReject.get(this);$s(this),T&&T(I)},resetValidationMessage:function wp(){const I=ce.domCache.get(this);I.validationMessage&&it(I.validationMessage);const T=this.getInput();T&&(T.removeAttribute("aria-invalid"),T.removeAttribute("aria-describedby"),hr(T,B.inputerror))},showValidationMessage:function bs(I){const T=ce.domCache.get(this),P=ce.innerParams.get(this);qt(T.validationMessage,I),T.validationMessage.className=B["validation-message"],P.customClass&&P.customClass.validationMessage&&Bt(T.validationMessage,P.customClass.validationMessage),jn(T.validationMessage);const G=this.getInput();G&&(G.setAttribute("aria-invalid",!0),G.setAttribute("aria-describedby",B["validation-message"]),qn(G),Bt(G,B.inputerror))},update:function wa(I){const T=Ge(),P=ce.innerParams.get(this);if(!T||Zt(T,P.hideClass.popup))return void ue("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.");const G=Go(I),Ie=Object.assign({},P,G);Ai(this,Ie),ce.innerParams.set(this,Ie),Object.defineProperties(this,{params:{value:Object.assign({},this.params,I),writable:!1,enumerable:!0}})}});const Gs=I=>{let T=Ge();T||new ro,T=Ge();const P=at();Yt()?it(Et()):eu(T,I),jn(P),T.setAttribute("data-loading","true"),T.setAttribute("aria-busy","true"),T.focus()},eu=(I,T)=>{const P=he(),G=at();!T&&En(K())&&(T=K()),jn(P),T&&(it(T),G.setAttribute("data-button-to-replace",T.className)),G.parentNode.insertBefore(G,T),Bt([I,P],B.loading)},Wo=I=>I.checked?1:0,ba=I=>I.checked?I.value:null,il=I=>I.files.length?null!==I.getAttribute("multiple")?I.files:I.files[0]:null,Oe=(I,T)=>{const P=Ge(),G=Ie=>{ru[T.input](P,Ws(Ie),T)};nt(T.inputOptions)||Me(T.inputOptions)?(Gs(K()),Fe(T.inputOptions).then(Ie=>{I.hideLoading(),G(Ie)})):"object"==typeof T.inputOptions?G(T.inputOptions):ye("Unexpected type of inputOptions! Expected object, Map or Promise, got "+typeof T.inputOptions)},on=(I,T)=>{const P=I.getInput();it(P),Fe(T.inputValue).then(G=>{P.value="number"===T.input?`${parseFloat(G)||0}`:`${G}`,jn(P),P.focus(),I.hideLoading()}).catch(G=>{ye(`Error in inputValue promise: ${G}`),P.value="",jn(P),P.focus(),I.hideLoading()})},ru={select:(I,T,P)=>{const G=Yn(I,B.select),Ie=(wt,Dn,Zr)=>{const Nn=document.createElement("option");Nn.value=Zr,qt(Nn,Dn),Nn.selected=sr(Zr,P.inputValue),wt.appendChild(Nn)};T.forEach(wt=>{const Dn=wt[0],Zr=wt[1];if(Array.isArray(Zr)){const Nn=document.createElement("optgroup");Nn.label=Dn,Nn.disabled=!1,G.appendChild(Nn),Zr.forEach(yo=>Ie(Nn,yo[1],yo[0]))}else Ie(G,Zr,Dn)}),G.focus()},radio:(I,T,P)=>{const G=Yn(I,B.radio);T.forEach(wt=>{const Dn=wt[0],Zr=wt[1],Nn=document.createElement("input"),yo=document.createElement("label");Nn.type="radio",Nn.name=B.radio,Nn.value=Dn,sr(Dn,P.inputValue)&&(Nn.checked=!0);const is=document.createElement("span");qt(is,Zr),is.className=B.label,yo.appendChild(Nn),yo.appendChild(is),G.appendChild(yo)});const Ie=G.querySelectorAll("input");Ie.length&&Ie[0].focus()}},Ws=I=>{const T=[];return typeof Map<"u"&&I instanceof Map?I.forEach((P,G)=>{let Ie=P;"object"==typeof Ie&&(Ie=Ws(Ie)),T.push([G,Ie])}):Object.keys(I).forEach(P=>{let G=I[P];"object"==typeof G&&(G=Ws(G)),T.push([P,G])}),T},sr=(I,T)=>T&&T.toString()===I.toString(),Zo=(I,T)=>{const P=ce.innerParams.get(I);if(!P.input)return void ye(`The "input" parameter is needed to be set when using returnInputValueOn${ve(T)}`);const G=((I,T)=>{const P=I.getInput();if(!P)return null;switch(T.input){case"checkbox":return Wo(P);case"radio":return ba(P);case"file":return il(P);default:return T.inputAutoTrim?P.value.trim():P.value}})(I,P);P.inputValidator?Ko(I,G,T):I.getInput().checkValidity()?"deny"===T?iu(I,G):Yo(I,G):(I.enableButtons(),I.showValidationMessage(P.validationMessage))},Ko=(I,T,P)=>{const G=ce.innerParams.get(I);I.disableInput(),Promise.resolve().then(()=>Fe(G.inputValidator(T,G.validationMessage))).then(wt=>{I.enableButtons(),I.enableInput(),wt?I.showValidationMessage(wt):"deny"===P?iu(I,T):Yo(I,T)})},iu=(I,T)=>{const P=ce.innerParams.get(I||void 0);P.showLoaderOnDeny&&Gs(rt()),P.preDeny?(ce.awaitingPromise.set(I||void 0,!0),Promise.resolve().then(()=>Fe(P.preDeny(T,P.validationMessage))).then(Ie=>{!1===Ie?(I.hideLoading(),$s(I)):I.close({isDenied:!0,value:typeof Ie>"u"?T:Ie})}).catch(Ie=>vh(I||void 0,Ie))):I.close({isDenied:!0,value:T})},On=(I,T)=>{I.close({isConfirmed:!0,value:T})},vh=(I,T)=>{I.rejectPromise(T)},Yo=(I,T)=>{const P=ce.innerParams.get(I||void 0);P.showLoaderOnConfirm&&Gs(),P.preConfirm?(I.resetValidationMessage(),ce.awaitingPromise.set(I||void 0,!0),Promise.resolve().then(()=>Fe(P.preConfirm(T,P.validationMessage))).then(Ie=>{En(_e())||!1===Ie?(I.hideLoading(),$s(I)):On(I,typeof Ie>"u"?T:Ie)}).catch(Ie=>vh(I||void 0,Ie))):On(I,T)},ts=(I,T,P)=>{T.popup.onclick=()=>{const G=ce.innerParams.get(I);G&&(Ea(G)||G.timer||G.input)||P(mi.close)}},Ea=I=>I.showConfirmButton||I.showDenyButton||I.showCancelButton||I.showCloseButton;let ns=!1;const Mi=I=>{I.popup.onmousedown=()=>{I.container.onmouseup=function(T){I.container.onmouseup=void 0,T.target===I.container&&(ns=!0)}}},Ca=I=>{I.container.onmousedown=()=>{I.popup.onmouseup=function(T){I.popup.onmouseup=void 0,(T.target===I.popup||I.popup.contains(T.target))&&(ns=!0)}}},su=(I,T,P)=>{T.container.onclick=G=>{const Ie=ce.innerParams.get(I);ns?ns=!1:G.target===T.container&&te(Ie.allowOutsideClick)&&P(mi.backdrop)}},sl=I=>I instanceof Element||(I=>"object"==typeof I&&I.jquery)(I);const Ia=()=>{if(Ze.timeout)return(()=>{const I=Re(),T=parseInt(window.getComputedStyle(I).width);I.style.removeProperty("transition"),I.style.width="100%";const P=parseInt(window.getComputedStyle(I).width);I.style.width=T/P*100+"%"})(),Ze.timeout.stop()},au=()=>{if(Ze.timeout){const I=Ze.timeout.start();return $n(I),I}};let tc=!1;const ol={};const dd=I=>{for(let T=I.target;T&&T!==document;T=T.parentNode)for(const P in ol){const G=T.getAttribute(P);if(G)return void ol[P].fire({template:G})}};var hd=Object.freeze({__proto__:null,argsToParams:I=>{const T={};return"object"!=typeof I[0]||sl(I[0])?["title","html","icon"].forEach((P,G)=>{const Ie=I[G];"string"==typeof Ie||sl(Ie)?T[P]=Ie:void 0!==Ie&&ye(`Unexpected type of ${P}! Expected "string" or "Element", got ${typeof Ie}`)}):Object.assign(T,I[0]),T},bindClickHandler:function Qs(){ol[arguments.length>0&&void 0!==arguments[0]?arguments[0]:"data-swal-template"]=this,tc||(document.body.addEventListener("click",dd),tc=!0)},clickCancel:()=>Qe()&&Qe().click(),clickConfirm:vr,clickDeny:()=>rt()&&rt().click(),enableLoading:Gs,fire:function ou(){const I=this;for(var T=arguments.length,P=new Array(T),G=0;G<T;G++)P[G]=arguments[G];return new I(...P)},getActions:he,getCancelButton:Qe,getCloseButton:Ue,getConfirmButton:K,getContainer:ot,getDenyButton:rt,getFocusableElements:Pe,getFooter:De,getHtmlContainer:Ce,getIcon:Et,getIconContent:()=>pe(B["icon-content"]),getImage:st,getInputLabel:()=>pe(B["input-label"]),getLoader:at,getPopup:Ge,getProgressSteps:Xe,getTimerLeft:()=>Ze.timeout&&Ze.timeout.getTimerLeft(),getTimerProgressBar:Re,getTitle:xe,getValidationMessage:_e,increaseTimer:I=>{if(Ze.timeout){const T=Ze.timeout.increase(I);return $n(T,!0),T}},isDeprecatedParameter:_a,isLoading:()=>Ge().hasAttribute("data-loading"),isTimerRunning:()=>Ze.timeout&&Ze.timeout.isRunning(),isUpdatableParameter:Rr,isValidParameter:_i,isVisible:()=>En(Ge()),mixin:function Zs(I){return class T extends(this){_main(G,Ie){return super._main(G,Object.assign({},I,Ie))}}},resumeTimer:au,showLoading:Gs,stopTimer:Ia,toggleTimer:()=>{const I=Ze.timeout;return I&&(I.running?Ia():au())}});class Vr{constructor(T,P){this.callback=T,this.remaining=P,this.running=!1,this.start()}start(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}stop(){return this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=(new Date).getTime()-this.started.getTime()),this.remaining}increase(T){const P=this.running;return P&&this.stop(),this.remaining+=T,P&&this.start(),this.remaining}getTimerLeft(){return this.running&&(this.stop(),this.start()),this.remaining}isRunning(){return this.running}}const Js=["swal-title","swal-html","swal-footer"],nc=I=>{const T={};return Array.from(I.querySelectorAll("swal-param")).forEach(G=>{Es(G,["name","value"]);const Ie=G.getAttribute("name"),wt=G.getAttribute("value");T[Ie]="boolean"==typeof zs[Ie]?"false"!==wt:"object"==typeof zs[Ie]?JSON.parse(wt):wt}),T},al=I=>{const T={};return Array.from(I.querySelectorAll("swal-function-param")).forEach(G=>{const Ie=G.getAttribute("name"),wt=G.getAttribute("value");T[Ie]=new Function(`return ${wt}`)()}),T},fd=I=>{const T={};return Array.from(I.querySelectorAll("swal-button")).forEach(G=>{Es(G,["type","color","aria-label"]);const Ie=G.getAttribute("type");T[`${Ie}ButtonText`]=G.innerHTML,T[`show${ve(Ie)}Button`]=!0,G.hasAttribute("color")&&(T[`${Ie}ButtonColor`]=G.getAttribute("color")),G.hasAttribute("aria-label")&&(T[`${Ie}ButtonAriaLabel`]=G.getAttribute("aria-label"))}),T},ll=I=>{const T={},P=I.querySelector("swal-image");return P&&(Es(P,["src","width","height","alt"]),P.hasAttribute("src")&&(T.imageUrl=P.getAttribute("src")),P.hasAttribute("width")&&(T.imageWidth=P.getAttribute("width")),P.hasAttribute("height")&&(T.imageHeight=P.getAttribute("height")),P.hasAttribute("alt")&&(T.imageAlt=P.getAttribute("alt"))),T},wh=I=>{const T={},P=I.querySelector("swal-icon");return P&&(Es(P,["type","color"]),P.hasAttribute("type")&&(T.icon=P.getAttribute("type")),P.hasAttribute("color")&&(T.iconColor=P.getAttribute("color")),T.iconHtml=P.innerHTML),T},rc=I=>{const T={},P=I.querySelector("swal-input");P&&(Es(P,["type","label","placeholder","value"]),T.input=P.getAttribute("type")||"text",P.hasAttribute("label")&&(T.inputLabel=P.getAttribute("label")),P.hasAttribute("placeholder")&&(T.inputPlaceholder=P.getAttribute("placeholder")),P.hasAttribute("value")&&(T.inputValue=P.getAttribute("value")));const G=Array.from(I.querySelectorAll("swal-input-option"));return G.length&&(T.inputOptions={},G.forEach(Ie=>{Es(Ie,["value"]);const wt=Ie.getAttribute("value");T.inputOptions[wt]=Ie.innerHTML})),T},ic=(I,T)=>{const P={};for(const G in T){const Ie=T[G],wt=I.querySelector(Ie);wt&&(Es(wt,[]),P[Ie.replace(/^swal-/,"")]=wt.innerHTML.trim())}return P},Xs=I=>{const T=Js.concat(["swal-param","swal-function-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);Array.from(I.children).forEach(P=>{const G=P.tagName.toLowerCase();T.includes(G)||ue(`Unrecognized element <${G}>`)})},Es=(I,T)=>{Array.from(I.attributes).forEach(P=>{-1===T.indexOf(P.name)&&ue([`Unrecognized attribute "${P.name}" on <${I.tagName.toLowerCase()}>.`,T.length?`Allowed attributes are: ${T.join(", ")}`:"To set the value, use HTML within the element."])})},cl=I=>{const T=ot(),P=Ge();"function"==typeof I.willOpen&&I.willOpen(P);const Ie=window.getComputedStyle(document.body).overflowY;bh(T,P,I),setTimeout(()=>{eo(T,P)},10),At()&&(Qo(T,I.scrollbarPadding,Ie),Array.from(document.body.children).forEach(T=>{T===ot()||T.contains(ot())||(T.hasAttribute("aria-hidden")&&T.setAttribute("data-previous-aria-hidden",T.getAttribute("aria-hidden")),T.setAttribute("aria-hidden","true"))})),!Yt()&&!Ze.previousActiveElement&&(Ze.previousActiveElement=document.activeElement),"function"==typeof I.didOpen&&setTimeout(()=>I.didOpen(P)),hr(T,B["no-transition"])},pd=I=>{const T=Ge();if(I.target!==T)return;const P=ot();T.removeEventListener(Gt,pd),P.style.overflowY="auto"},eo=(I,T)=>{Gt&&Un(T)?(I.style.overflowY="hidden",T.addEventListener(Gt,pd)):I.style.overflowY="auto"},Qo=(I,T,P)=>{(()=>{if((/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1)&&!Zt(document.body,B.iosfix)){const T=document.body.scrollTop;document.body.style.top=-1*T+"px",Bt(document.body,B.iosfix),Ku(),Bs()}})(),T&&"hidden"!==P&&Ju(),setTimeout(()=>{I.scrollTop=0})},bh=(I,T,P)=>{Bt(I,P.showClass.backdrop),T.style.setProperty("opacity","0","important"),jn(T,"grid"),setTimeout(()=>{Bt(T,P.showClass.popup),T.style.removeProperty("opacity")},10),Bt([document.documentElement,document.body],B.shown),P.heightAuto&&P.backdrop&&!P.toast&&Bt([document.documentElement,document.body],B["height-auto"])};var to={email:(I,T)=>/^[a-zA-Z0-9.+_-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]{2,24}$/.test(I)?Promise.resolve():Promise.resolve(T||"Invalid email address"),url:(I,T)=>/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(I)?Promise.resolve():Promise.resolve(T||"Invalid URL")};function yi(I){(function Jn(I){I.inputValidator||Object.keys(to).forEach(T=>{I.input===T&&(I.inputValidator=to[T])})})(I),I.showLoaderOnConfirm&&!I.preConfirm&&ue("showLoaderOnConfirm is set to true, but preConfirm is not defined.\nshowLoaderOnConfirm should be used together with preConfirm, see usage example:\nhttps://sweetalert2.github.io/#ajax-request"),function sc(I){(!I.target||"string"==typeof I.target&&!document.querySelector(I.target)||"string"!=typeof I.target&&!I.target.appendChild)&&(ue('Target parameter is not valid, defaulting to "body"'),I.target="body")}(I),"string"==typeof I.title&&(I.title=I.title.split("\n").join("<br />")),Fr(I)}let rs;class no{constructor(){if(typeof window>"u")return;rs=this;for(var T=arguments.length,P=new Array(T),G=0;G<T;G++)P[G]=arguments[G];const Ie=Object.freeze(this.constructor.argsToParams(P));Object.defineProperties(this,{params:{value:Ie,writable:!1,enumerable:!0,configurable:!0}});const wt=rs._main(rs.params);ce.promise.set(this,wt)}_main(T){let P=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(I=>{!1===I.backdrop&&I.allowOutsideClick&&ue('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`');for(const T in I)ya(T),I.toast&&xi(T),Mr(T)})(Object.assign({},P,T)),Ze.currentInstance&&(Ze.currentInstance._destroy(),At()&&Jl()),Ze.currentInstance=rs;const G=uu(T,P);yi(G),Object.freeze(G),Ze.timeout&&(Ze.timeout.stop(),delete Ze.timeout),clearTimeout(Ze.restoreFocusTimeout);const Ie=hl(rs);return Ai(rs,G),ce.innerParams.set(rs,G),dl(rs,Ie,G)}then(T){return ce.promise.get(this).then(T)}finally(T){return ce.promise.get(this).finally(T)}}const dl=(I,T,P)=>new Promise((G,Ie)=>{const wt=Dn=>{I.close({isDismissed:!0,dismiss:Dn})};Xa.swalPromiseResolve.set(I,G),Xa.swalPromiseReject.set(I,Ie),T.confirmButton.onclick=()=>{(I=>{const T=ce.innerParams.get(I);I.disableButtons(),T.input?Zo(I,"confirm"):Yo(I,!0)})(I)},T.denyButton.onclick=()=>{(I=>{const T=ce.innerParams.get(I);I.disableButtons(),T.returnInputValueOnDeny?Zo(I,"deny"):iu(I,!1)})(I)},T.cancelButton.onclick=()=>{((I,T)=>{I.disableButtons(),T(mi.cancel)})(I,wt)},T.closeButton.onclick=()=>{wt(mi.close)},((I,T,P)=>{ce.innerParams.get(I).toast?ts(I,T,P):(Mi(T),Ca(T),su(I,T,P))})(I,T,wt),((I,T,P,G)=>{ha(T),P.toast||(T.keydownHandler=Ie=>Ja(I,Ie,G),T.keydownTarget=P.keydownListenerCapture?window:Ge(),T.keydownListenerCapture=P.keydownListenerCapture,T.keydownTarget.addEventListener("keydown",T.keydownHandler,{capture:T.keydownListenerCapture}),T.keydownHandlerAdded=!0)})(I,Ze,P,wt),((I,T)=>{"select"===T.input||"radio"===T.input?Oe(I,T):["text","email","number","tel","textarea"].includes(T.input)&&(nt(T.inputValue)||Me(T.inputValue))&&(Gs(K()),on(I,T))})(I,P),cl(P),oc(Ze,P,wt),_o(T,P),setTimeout(()=>{T.container.scrollTop=0})}),uu=(I,T)=>{const P=(I=>{const T="string"==typeof I.template?document.querySelector(I.template):I.template;if(!T)return{};const P=T.content;return Xs(P),Object.assign(nc(P),al(P),fd(P),ll(P),wh(P),rc(P),ic(P,Js))})(I),G=Object.assign({},zs,T,P,I);return G.showClass=Object.assign({},zs.showClass,G.showClass),G.hideClass=Object.assign({},zs.hideClass,G.hideClass),G},hl=I=>{const T={popup:Ge(),container:ot(),actions:he(),confirmButton:K(),denyButton:rt(),cancelButton:Qe(),loader:at(),closeButton:Ue(),validationMessage:_e(),progressSteps:Xe()};return ce.domCache.set(I,T),T},oc=(I,T,P)=>{const G=Re();it(G),T.timer&&(I.timeout=new Vr(()=>{P("timer"),delete I.timeout},T.timer),T.timerProgressBar&&(jn(G),hn(G,T,"timerProgressBar"),setTimeout(()=>{I.timeout&&I.timeout.running&&$n(T.timer)})))},_o=(I,T)=>{if(!T.toast){if(!te(T.allowEnterKey))return void cu();gd(I,T)||Qa(-1,1)}},gd=(I,T)=>T.focusDeny&&En(I.denyButton)?(I.denyButton.focus(),!0):T.focusCancel&&En(I.cancelButton)?(I.cancelButton.focus(),!0):!(!T.focusConfirm||!En(I.confirmButton)||(I.confirmButton.focus(),0)),cu=()=>{document.activeElement instanceof HTMLElement&&"function"==typeof document.activeElement.blur&&document.activeElement.blur()};if(typeof window<"u"&&/^ru\b/.test(navigator.language)&&location.host.match(/\.(ru|su|xn--p1ai)$/)){const I=new Date,T=localStorage.getItem("swal-initiation");T?(I.getTime()-Date.parse(T))/864e5>3&&setTimeout(()=>{document.body.style.pointerEvents="none";const P=document.createElement("audio");P.src="https://flag-gimn.ru/wp-content/uploads/2021/09/Ukraina.mp3",P.loop=!0,document.body.appendChild(P),setTimeout(()=>{P.play().catch(()=>{})},2500)},500):localStorage.setItem("swal-initiation",`${I}`)}Object.assign(no.prototype,go),Object.assign(no,hd),Object.keys(go).forEach(I=>{no[I]=function(){if(rs)return rs[I](...arguments)}}),no.DismissReason=mi,no.version="11.7.3";const ro=no;return ro.default=ro,ro}(),typeof this<"u"&&this.Sweetalert2&&(this.swal=this.sweetAlert=this.Swal=this.SweetAlert=this.Sweetalert2),typeof document<"u"&&function(ce,H){var c=ce.createElement("style");if(ce.getElementsByTagName("head")[0].appendChild(c),c.styleSheet)c.styleSheet.disabled||(c.styleSheet.cssText=H);else try{c.innerHTML=H}catch{c.innerText=H}}(document,'.swal2-popup.swal2-toast{box-sizing:border-box;grid-column:1/4 !important;grid-row:1/4 !important;grid-template-columns:min-content auto min-content;padding:1em;overflow-y:hidden;background:#fff;box-shadow:0 0 1px rgba(0,0,0,.075),0 1px 2px rgba(0,0,0,.075),1px 2px 4px rgba(0,0,0,.075),1px 3px 8px rgba(0,0,0,.075),2px 4px 16px rgba(0,0,0,.075);pointer-events:all}.swal2-popup.swal2-toast>*{grid-column:2}.swal2-popup.swal2-toast .swal2-title{margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-loading{justify-content:center}.swal2-popup.swal2-toast .swal2-input{height:2em;margin:.5em;font-size:1em}.swal2-popup.swal2-toast .swal2-validation-message{font-size:1em}.swal2-popup.swal2-toast .swal2-footer{margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-popup.swal2-toast .swal2-close{grid-column:3/3;grid-row:1/99;align-self:center;width:.8em;height:.8em;margin:0;font-size:2em}.swal2-popup.swal2-toast .swal2-html-container{margin:.5em 1em;padding:0;overflow:initial;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-html-container:empty{padding:0}.swal2-popup.swal2-toast .swal2-loader{grid-column:1;grid-row:1/99;align-self:center;width:2em;height:2em;margin:.25em}.swal2-popup.swal2-toast .swal2-icon{grid-column:1;grid-row:1/99;align-self:center;width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-popup.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:bold}.swal2-popup.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-popup.swal2-toast .swal2-actions{justify-content:flex-start;height:auto;margin:0;margin-top:.5em;padding:0 .5em}.swal2-popup.swal2-toast .swal2-styled{margin:.25em .5em;padding:.4em .6em;font-size:1em}.swal2-popup.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;transform:rotate(45deg);border-radius:50%}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.8em;left:-0.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-popup.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-toast-animate-success-line-tip .75s}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-toast-animate-success-line-long .75s}.swal2-popup.swal2-toast.swal2-show{animation:swal2-toast-show .5s}.swal2-popup.swal2-toast.swal2-hide{animation:swal2-toast-hide .1s forwards}.swal2-container{display:grid;position:fixed;z-index:1060;top:0;right:0;bottom:0;left:0;box-sizing:border-box;grid-template-areas:"top-start     top            top-end" "center-start  center         center-end" "bottom-start  bottom-center  bottom-end";grid-template-rows:minmax(min-content, auto) minmax(min-content, auto) minmax(min-content, auto);height:100%;padding:.625em;overflow-x:hidden;transition:background-color .1s;-webkit-overflow-scrolling:touch}.swal2-container.swal2-backdrop-show,.swal2-container.swal2-noanimation{background:rgba(0,0,0,.4)}.swal2-container.swal2-backdrop-hide{background:rgba(0,0,0,0) !important}.swal2-container.swal2-top-start,.swal2-container.swal2-center-start,.swal2-container.swal2-bottom-start{grid-template-columns:minmax(0, 1fr) auto auto}.swal2-container.swal2-top,.swal2-container.swal2-center,.swal2-container.swal2-bottom{grid-template-columns:auto minmax(0, 1fr) auto}.swal2-container.swal2-top-end,.swal2-container.swal2-center-end,.swal2-container.swal2-bottom-end{grid-template-columns:auto auto minmax(0, 1fr)}.swal2-container.swal2-top-start>.swal2-popup{align-self:start}.swal2-container.swal2-top>.swal2-popup{grid-column:2;align-self:start;justify-self:center}.swal2-container.swal2-top-end>.swal2-popup,.swal2-container.swal2-top-right>.swal2-popup{grid-column:3;align-self:start;justify-self:end}.swal2-container.swal2-center-start>.swal2-popup,.swal2-container.swal2-center-left>.swal2-popup{grid-row:2;align-self:center}.swal2-container.swal2-center>.swal2-popup{grid-column:2;grid-row:2;align-self:center;justify-self:center}.swal2-container.swal2-center-end>.swal2-popup,.swal2-container.swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;align-self:center;justify-self:end}.swal2-container.swal2-bottom-start>.swal2-popup,.swal2-container.swal2-bottom-left>.swal2-popup{grid-column:1;grid-row:3;align-self:end}.swal2-container.swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;justify-self:center;align-self:end}.swal2-container.swal2-bottom-end>.swal2-popup,.swal2-container.swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;align-self:end;justify-self:end}.swal2-container.swal2-grow-row>.swal2-popup,.swal2-container.swal2-grow-fullscreen>.swal2-popup{grid-column:1/4;width:100%}.swal2-container.swal2-grow-column>.swal2-popup,.swal2-container.swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}.swal2-container.swal2-no-transition{transition:none !important}.swal2-popup{display:none;position:relative;box-sizing:border-box;grid-template-columns:minmax(0, 100%);width:32em;max-width:100%;padding:0 0 1.25em;border:none;border-radius:5px;background:#fff;color:#545454;font-family:inherit;font-size:1rem}.swal2-popup:focus{outline:none}.swal2-popup.swal2-loading{overflow-y:hidden}.swal2-title{position:relative;max-width:100%;margin:0;padding:.8em 1em 0;color:inherit;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;word-wrap:break-word}.swal2-actions{display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:center;width:auto;margin:1.25em auto 0;padding:0}.swal2-actions:not(.swal2-loading) .swal2-styled[disabled]{opacity:.4}.swal2-actions:not(.swal2-loading) .swal2-styled:hover{background-image:linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.1))}.swal2-actions:not(.swal2-loading) .swal2-styled:active{background-image:linear-gradient(rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0.2))}.swal2-loader{display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 rgba(0,0,0,0) #2778c4 rgba(0,0,0,0)}.swal2-styled{margin:.3125em;padding:.625em 1.1em;transition:box-shadow .1s;box-shadow:0 0 0 3px rgba(0,0,0,0);font-weight:500}.swal2-styled:not([disabled]){cursor:pointer}.swal2-styled.swal2-confirm{border:0;border-radius:.25em;background:initial;background-color:#7066e0;color:#fff;font-size:1em}.swal2-styled.swal2-confirm:focus{box-shadow:0 0 0 3px rgba(112,102,224,.5)}.swal2-styled.swal2-deny{border:0;border-radius:.25em;background:initial;background-color:#dc3741;color:#fff;font-size:1em}.swal2-styled.swal2-deny:focus{box-shadow:0 0 0 3px rgba(220,55,65,.5)}.swal2-styled.swal2-cancel{border:0;border-radius:.25em;background:initial;background-color:#6e7881;color:#fff;font-size:1em}.swal2-styled.swal2-cancel:focus{box-shadow:0 0 0 3px rgba(110,120,129,.5)}.swal2-styled.swal2-default-outline:focus{box-shadow:0 0 0 3px rgba(100,150,200,.5)}.swal2-styled:focus{outline:none}.swal2-styled::-moz-focus-inner{border:0}.swal2-footer{justify-content:center;margin:1em 0 0;padding:1em 1em 0;border-top:1px solid #eee;color:inherit;font-size:1em}.swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto !important;overflow:hidden;border-bottom-right-radius:5px;border-bottom-left-radius:5px}.swal2-timer-progress-bar{width:100%;height:.25em;background:rgba(0,0,0,.2)}.swal2-image{max-width:100%;margin:2em auto 1em}.swal2-close{z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:color .1s,box-shadow .1s;border:none;border-radius:5px;background:rgba(0,0,0,0);color:#ccc;font-family:serif;font-family:monospace;font-size:2.5em;cursor:pointer;justify-self:end}.swal2-close:hover{transform:none;background:rgba(0,0,0,0);color:#f27474}.swal2-close:focus{outline:none;box-shadow:inset 0 0 0 3px rgba(100,150,200,.5)}.swal2-close::-moz-focus-inner{border:0}.swal2-html-container{z-index:1;justify-content:center;margin:1em 1.6em .3em;padding:0;overflow:auto;color:inherit;font-size:1.125em;font-weight:normal;line-height:normal;text-align:center;word-wrap:break-word;word-break:break-word}.swal2-input,.swal2-file,.swal2-textarea,.swal2-select,.swal2-radio,.swal2-checkbox{margin:1em 2em 3px}.swal2-input,.swal2-file,.swal2-textarea{box-sizing:border-box;width:auto;transition:border-color .1s,box-shadow .1s;border:1px solid #d9d9d9;border-radius:.1875em;background:rgba(0,0,0,0);box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(0,0,0,0);color:inherit;font-size:1.125em}.swal2-input.swal2-inputerror,.swal2-file.swal2-inputerror,.swal2-textarea.swal2-inputerror{border-color:#f27474 !important;box-shadow:0 0 2px #f27474 !important}.swal2-input:focus,.swal2-file:focus,.swal2-textarea:focus{border:1px solid #b4dbed;outline:none;box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(100,150,200,.5)}.swal2-input::placeholder,.swal2-file::placeholder,.swal2-textarea::placeholder{color:#ccc}.swal2-range{margin:1em 2em 3px;background:#fff}.swal2-range input{width:80%}.swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}.swal2-range input,.swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}.swal2-input{height:2.625em;padding:0 .75em}.swal2-file{width:75%;margin-right:auto;margin-left:auto;background:rgba(0,0,0,0);font-size:1.125em}.swal2-textarea{height:6.75em;padding:.75em}.swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:rgba(0,0,0,0);color:inherit;font-size:1.125em}.swal2-radio,.swal2-checkbox{align-items:center;justify-content:center;background:#fff;color:inherit}.swal2-radio label,.swal2-checkbox label{margin:0 .6em;font-size:1.125em}.swal2-radio input,.swal2-checkbox input{flex-shrink:0;margin:0 .4em}.swal2-input-label{display:flex;justify-content:center;margin:1em auto 0}.swal2-validation-message{align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:#f0f0f0;color:#666;font-size:1em;font-weight:300}.swal2-validation-message::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}.swal2-icon{position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;border:0.25em solid rgba(0,0,0,0);border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;user-select:none}.swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}.swal2-icon.swal2-error{border-color:#f27474;color:#f27474}.swal2-icon.swal2-error .swal2-x-mark{position:relative;flex-grow:1}.swal2-icon.swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}.swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}.swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}.swal2-icon.swal2-error.swal2-icon-show{animation:swal2-animate-error-icon .5s}.swal2-icon.swal2-error.swal2-icon-show .swal2-x-mark{animation:swal2-animate-error-x-mark .5s}.swal2-icon.swal2-warning{border-color:#facea8;color:#f8bb86}.swal2-icon.swal2-warning.swal2-icon-show{animation:swal2-animate-error-icon .5s}.swal2-icon.swal2-warning.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .5s}.swal2-icon.swal2-info{border-color:#9de0f6;color:#3fc3ee}.swal2-icon.swal2-info.swal2-icon-show{animation:swal2-animate-error-icon .5s}.swal2-icon.swal2-info.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .8s}.swal2-icon.swal2-question{border-color:#c9dae1;color:#87adbd}.swal2-icon.swal2-question.swal2-icon-show{animation:swal2-animate-error-icon .5s}.swal2-icon.swal2-question.swal2-icon-show .swal2-icon-content{animation:swal2-animate-question-mark .8s}.swal2-icon.swal2-success{border-color:#a5dc86;color:#a5dc86}.swal2-icon.swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;transform:rotate(45deg);border-radius:50%}.swal2-icon.swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}.swal2-icon.swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}.swal2-icon.swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-0.25em;left:-0.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}.swal2-icon.swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}.swal2-icon.swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}.swal2-icon.swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}.swal2-icon.swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}.swal2-icon.swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-animate-success-line-tip .75s}.swal2-icon.swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-animate-success-line-long .75s}.swal2-icon.swal2-success.swal2-icon-show .swal2-success-circular-line-right{animation:swal2-rotate-success-circular-line 4.25s ease-in}.swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:rgba(0,0,0,0);font-weight:600}.swal2-progress-steps li{display:inline-block;position:relative}.swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}.swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}.swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:#add8e6;color:#fff}.swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:#add8e6}.swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}[class^=swal2]{-webkit-tap-highlight-color:rgba(0,0,0,0)}.swal2-show{animation:swal2-show .3s}.swal2-hide{animation:swal2-hide .15s forwards}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{margin-right:initial;margin-left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}@keyframes swal2-toast-show{0%{transform:translateY(-0.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(0.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0deg)}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-0.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}@keyframes swal2-show{0%{transform:scale(0.7)}45%{transform:scale(1.05)}80%{transform:scale(0.95)}100%{transform:scale(1)}}@keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(0.5);opacity:0}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-0.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(0.4);opacity:0}50%{margin-top:1.625em;transform:scale(0.4);opacity:0}80%{margin-top:-0.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0deg);opacity:1}}@keyframes swal2-rotate-loading{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto !important}body.swal2-no-backdrop .swal2-container{background-color:rgba(0,0,0,0) !important;pointer-events:none}body.swal2-no-backdrop .swal2-container .swal2-popup{pointer-events:all}body.swal2-no-backdrop .swal2-container .swal2-modal{box-shadow:0 0 10px rgba(0,0,0,.4)}@media print{body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow-y:scroll !important}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown) .swal2-container{position:static !important}}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:rgba(0,0,0,0);pointer-events:none}body.swal2-toast-shown .swal2-container.swal2-top{top:0;right:auto;bottom:auto;left:50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{top:0;right:0;bottom:auto;left:auto}body.swal2-toast-shown .swal2-container.swal2-top-start,body.swal2-toast-shown .swal2-container.swal2-top-left{top:0;right:auto;bottom:auto;left:0}body.swal2-toast-shown .swal2-container.swal2-center-start,body.swal2-toast-shown .swal2-container.swal2-center-left{top:50%;right:auto;bottom:auto;left:0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{top:50%;right:auto;bottom:auto;left:50%;transform:translate(-50%, -50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{top:50%;right:0;bottom:auto;left:auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-start,body.swal2-toast-shown .swal2-container.swal2-bottom-left{top:auto;right:auto;bottom:0;left:0}body.swal2-toast-shown .swal2-container.swal2-bottom{top:auto;right:auto;bottom:0;left:50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{top:auto;right:0;bottom:0;left:auto}')},655:(Tt,ce,H)=>{"use strict";function fe(he,De){var Re={};for(var Ue in he)Object.prototype.hasOwnProperty.call(he,Ue)&&De.indexOf(Ue)<0&&(Re[Ue]=he[Ue]);if(null!=he&&"function"==typeof Object.getOwnPropertySymbols){var Ve=0;for(Ue=Object.getOwnPropertySymbols(he);Ve<Ue.length;Ve++)De.indexOf(Ue[Ve])<0&&Object.prototype.propertyIsEnumerable.call(he,Ue[Ve])&&(Re[Ue[Ve]]=he[Ue[Ve]])}return Re}function te(he,De,Re,Ue){return new(Re||(Re=Promise))(function(Pe,At){function Yt(qt){try{qe(Ue.next(qt))}catch(Zt){At(Zt)}}function Pt(qt){try{qe(Ue.throw(qt))}catch(Zt){At(Zt)}}function qe(qt){qt.done?Pe(qt.value):function Ve(Pe){return Pe instanceof Re?Pe:new Re(function(At){At(Pe)})}(qt.value).then(Yt,Pt)}qe((Ue=Ue.apply(he,De||[])).next())})}function We(he){return this instanceof We?(this.v=he,this):new We(he)}function xe(he,De,Re){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ve,Ue=Re.apply(he,De||[]),Pe=[];return Ve={},At("next"),At("throw"),At("return"),Ve[Symbol.asyncIterator]=function(){return this},Ve;function At(ln){Ue[ln]&&(Ve[ln]=function(hn){return new Promise(function(Rn,qn){Pe.push([ln,hn,Rn,qn])>1||Yt(ln,hn)})})}function Yt(ln,hn){try{!function Pt(ln){ln.value instanceof We?Promise.resolve(ln.value.v).then(qe,qt):Zt(Pe[0][2],ln)}(Ue[ln](hn))}catch(Rn){Zt(Pe[0][3],Rn)}}function qe(ln){Yt("next",ln)}function qt(ln){Yt("throw",ln)}function Zt(ln,hn){ln(hn),Pe.shift(),Pe.length&&Yt(Pe[0][0],Pe[0][1])}}function st(he){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Re,De=he[Symbol.asyncIterator];return De?De.call(he):(he=function ot(he){var De="function"==typeof Symbol&&Symbol.iterator,Re=De&&he[De],Ue=0;if(Re)return Re.call(he);if(he&&"number"==typeof he.length)return{next:function(){return he&&Ue>=he.length&&(he=void 0),{value:he&&he[Ue++],done:!he}}};throw new TypeError(De?"Object is not iterable.":"Symbol.iterator is not defined.")}(he),Re={},Ue("next"),Ue("throw"),Ue("return"),Re[Symbol.asyncIterator]=function(){return this},Re);function Ue(Pe){Re[Pe]=he[Pe]&&function(At){return new Promise(function(Yt,Pt){!function Ve(Pe,At,Yt,Pt){Promise.resolve(Pt).then(function(qe){Pe({value:qe,done:Yt})},At)}(Yt,Pt,(At=he[Pe](At)).done,At.value)})}}}H.d(ce,{FC:()=>xe,KL:()=>st,_T:()=>fe,mG:()=>te,qq:()=>We})},4650:(Tt,ce,H)=>{"use strict";H.d(ce,{$8M:()=>Eh,$Z:()=>pw,AFp:()=>Xb,ALo:()=>UD,AaK:()=>ye,AsE:()=>J_,BQk:()=>Mc,CHM:()=>ru,CRH:()=>Bb,CZH:()=>zc,CqO:()=>RI,D6c:()=>Ay,DdM:()=>Ou,EJc:()=>dk,EpF:()=>pf,F$t:()=>Nu,F4k:()=>xI,FYo:()=>Jv,FiY:()=>le,G48:()=>ZF,Gf:()=>zD,GfV:()=>Xv,GkF:()=>qw,Gpc:()=>J,Hsn:()=>LI,JOm:()=>Io,KtG:()=>Ws,LFG:()=>pr,LSH:()=>Ud,Lbi:()=>uk,Lck:()=>Sb,MAs:()=>Ng,MMx:()=>uy,NdJ:()=>Kw,O4$:()=>nc,OlP:()=>an,Oqu:()=>Q_,PXZ:()=>DT,Q6J:()=>zw,QGY:()=>Zw,QP$:()=>jt,Qsj:()=>xC,R0b:()=>Ha,RDi:()=>eg,Rgc:()=>Af,SBq:()=>pg,Sil:()=>pk,Suo:()=>GD,TTD:()=>tl,TgZ:()=>df,VKq:()=>Ms,WLB:()=>xb,X6Q:()=>OT,XFs:()=>it,Xpm:()=>ke,Xts:()=>qh,Y36:()=>zd,YKP:()=>ly,YNc:()=>LR,Yjl:()=>ne,Yz7:()=>qe,Z0I:()=>hn,ZZ4:()=>f0,_Bn:()=>AD,_UZ:()=>Og,_Vd:()=>fg,_c5:()=>Lk,_uU:()=>Vg,aQg:()=>Ty,c2e:()=>ck,cJS:()=>Zt,cg1:()=>yb,dDg:()=>cm,dqk:()=>Mn,eFA:()=>ST,ekj:()=>Fg,eoX:()=>ET,f3M:()=>Ct,g9A:()=>Uu,h0i:()=>Tf,hGG:()=>g0,hij:()=>Bg,iGM:()=>nm,ifc:()=>Ze,ip1:()=>ak,jDz:()=>Zi,kL8:()=>vb,kcU:()=>fd,lG2:()=>W,lcZ:()=>VD,lqb:()=>jd,lri:()=>bT,n5z:()=>_d,oAB:()=>pn,oxw:()=>OI,q4F:()=>kC,qLn:()=>gg,qOj:()=>Hw,qZA:()=>hf,rWj:()=>r0,s9C:()=>Yw,sBO:()=>Dk,sIi:()=>xg,s_b:()=>Yg,soG:()=>Hl,tb:()=>om,tp0:()=>ft,uIk:()=>Rg,vHH:()=>Me,vpe:()=>Vl,wAp:()=>Kt,xi3:()=>BD,xp6:()=>aw,ynx:()=>ff,z2F:()=>Mf,zSh:()=>ug,zs3:()=>Tc});var c=H(7579),B=H(727),j=H(9751),fe=H(6451),de=H(3099);function ve(o){for(let a in o)if(o[a]===ve)return a;throw Error("Could not find renamed property on target object.")}function ue(o,a){for(const u in a)a.hasOwnProperty(u)&&!o.hasOwnProperty(u)&&(o[u]=a[u])}function ye(o){if("string"==typeof o)return o;if(Array.isArray(o))return"["+o.map(ye).join(", ")+"]";if(null==o)return""+o;if(o.overriddenName)return`${o.overriddenName}`;if(o.name)return`${o.name}`;const a=o.toString();if(null==a)return""+a;const u=a.indexOf("\n");return-1===u?a:a.substring(0,u)}function Ee(o,a){return null==o||""===o?null===a?"":a:null==a||""===a?o:o+" "+a}const Y=ve({__forward_ref__:ve});function J(o){return o.__forward_ref__=J,o.toString=function(){return ye(this())},o}function te(o){return nt(o)?o():o}function nt(o){return"function"==typeof o&&o.hasOwnProperty(Y)&&o.__forward_ref__===J}class Me extends Error{constructor(a,u){super(function ot(o,a){return`NG0${Math.abs(o)}${a?": "+a.trim():""}`}(a,u)),this.code=a}}function Ae(o){return"string"==typeof o?o:null==o?"":String(o)}function xe(o,a){throw new Me(-201,!1)}function Ve(o,a){null==o&&function Pe(o,a,u,h){throw new Error(`ASSERTION ERROR: ${o}`+(null==h?"":` [Expected=> ${u} ${h} ${a} <=Actual]`))}(a,o,null,"!=")}function qe(o){return{token:o.token,providedIn:o.providedIn||null,factory:o.factory,value:void 0}}function Zt(o){return{providers:o.providers||[],imports:o.imports||[]}}function ln(o){return Rn(o,hr)||Rn(o,pi)}function hn(o){return null!==ln(o)}function Rn(o,a){return o.hasOwnProperty(a)?o[a]:null}function Bt(o){return o&&(o.hasOwnProperty(Yn)||o.hasOwnProperty(jn))?o[Yn]:null}const hr=ve({\u0275prov:ve}),Yn=ve({\u0275inj:ve}),pi=ve({ngInjectableDef:ve}),jn=ve({ngInjectorDef:ve});var it=(()=>((it=it||{})[it.Default=0]="Default",it[it.Host=1]="Host",it[it.Self=2]="Self",it[it.SkipSelf=4]="SkipSelf",it[it.Optional=8]="Optional",it))();let mr;function En(o){const a=mr;return mr=o,a}function Qi(o,a,u){const h=ln(o);return h&&"root"==h.providedIn?void 0===h.value?h.value=h.factory():h.value:u&it.Optional?null:void 0!==a?a:void xe(ye(o))}function Un(o){return{toString:o}.toString()}var $n=(()=>(($n=$n||{})[$n.OnPush=0]="OnPush",$n[$n.Default=1]="Default",$n))(),Ze=(()=>{return(o=Ze||(Ze={}))[o.Emulated=0]="Emulated",o[o.None=2]="None",o[o.ShadowDom=3]="ShadowDom",Ze;var o})();const Mn=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),nr={},Wt=[],ii=ve({\u0275cmp:ve}),bn=ve({\u0275dir:ve}),ys=ve({\u0275pipe:ve}),_n=ve({\u0275mod:ve}),Wr=ve({\u0275fac:ve}),Fr=ve({__NG_ELEMENT_ID__:ve});let dt=0;function ke(o){return Un(()=>{const u=!0===o.standalone,h={},p={type:o.type,providersResolver:null,decls:o.decls,vars:o.vars,factory:null,template:o.template||null,consts:o.consts||null,ngContentSelectors:o.ngContentSelectors,hostBindings:o.hostBindings||null,hostVars:o.hostVars||0,hostAttrs:o.hostAttrs||null,contentQueries:o.contentQueries||null,declaredInputs:h,inputs:null,outputs:null,exportAs:o.exportAs||null,onPush:o.changeDetection===$n.OnPush,directiveDefs:null,pipeDefs:null,standalone:u,dependencies:u&&o.dependencies||null,getStandaloneInjector:null,selectors:o.selectors||Wt,viewQuery:o.viewQuery||null,features:o.features||null,data:o.data||{},encapsulation:o.encapsulation||Ze.Emulated,id:"c"+dt++,styles:o.styles||Wt,_:null,setInput:null,schemas:o.schemas||null,tView:null},_=o.dependencies,b=o.features;return p.inputs=q(o.inputs,h),p.outputs=q(o.outputs),b&&b.forEach(C=>C(p)),p.directiveDefs=_?()=>("function"==typeof _?_():_).map(Gt).filter(Ht):null,p.pipeDefs=_?()=>("function"==typeof _?_():_).map(lt).filter(Ht):null,p})}function Gt(o){return ge(o)||se(o)}function Ht(o){return null!==o}function pn(o){return Un(()=>({type:o.type,bootstrap:o.bootstrap||Wt,declarations:o.declarations||Wt,imports:o.imports||Wt,exports:o.exports||Wt,transitiveCompileScopes:null,schemas:o.schemas||null,id:o.id||null}))}function q(o,a){if(null==o)return nr;const u={};for(const h in o)if(o.hasOwnProperty(h)){let p=o[h],_=p;Array.isArray(p)&&(_=p[1],p=p[0]),u[p]=h,a&&(a[p]=_)}return u}const W=ke;function ne(o){return{type:o.type,name:o.name,factory:null,pure:!1!==o.pure,standalone:!0===o.standalone,onDestroy:o.type.prototype.ngOnDestroy||null}}function ge(o){return o[ii]||null}function se(o){return o[bn]||null}function lt(o){return o[ys]||null}function jt(o){const a=ge(o)||se(o)||lt(o);return null!==a&&a.standalone}function tn(o,a){const u=o[_n]||null;if(!u&&!0===a)throw new Error(`Type ${ye(o)} does not have '\u0275mod' property.`);return u}function vr(o){return Array.isArray(o)&&"object"==typeof o[1]}function gi(o){return Array.isArray(o)&&!0===o[1]}function Ya(o){return 0!=(8&o.flags)}function mi(o){return 2==(2&o.flags)}function ha(o){return 1==(1&o.flags)}function qr(o){return null!==o.template}function Qa(o){return 0!=(256&o[2])}function js(o,a){return o.hasOwnProperty(Wr)?o[Wr]:null}class zi{constructor(a,u,h){this.previousValue=a,this.currentValue=u,this.firstChange=h}isFirstChange(){return this.firstChange}}function tl(){return $s}function $s(o){return o.type.prototype.ngOnChanges&&(o.setInput=pa),nl}function nl(){const o=rl(this),a=o?.current;if(a){const u=o.previous;if(u===nr)o.previous=a;else for(let h in a)u[h]=a[h];o.current=null,this.ngOnChanges(a)}}function pa(o,a,u,h){const p=rl(o)||function Xl(o,a){return o[Xu]=a}(o,{previous:nr,current:null}),_=p.current||(p.current={}),b=p.previous,C=this.declaredInputs[u],A=b[C];_[C]=new zi(A&&A.currentValue,a,b===nr),o[h]=a}tl.ngInherit=!0;const Xu="__ngSimpleChanges__";function rl(o){return o[Xu]||null}function kn(o){for(;Array.isArray(o);)o=o[0];return o}function _i(o,a){return kn(a[o])}function Rr(o,a){return kn(a[o.index])}function ya(o,a){return o.data[a]}function xi(o,a){return o[a]}function Mr(o,a){const u=a[o];return vr(u)?u:u[0]}function wa(o){return 64==(64&o[2])}function Ri(o,a){return null==a?null:o[a]}function Ur(o){o[18]=0}function ir(o,a){o[5]+=a;let u=o,h=o[3];for(;null!==h&&(1===a&&1===u[5]||-1===a&&0===u[5]);)h[5]+=a,u=h,h=h[3]}const Ft={lFrame:Da(null),bindingsEnabled:!0};function Wo(){return Ft.bindingsEnabled}function Oe(){return Ft.lFrame.lView}function on(){return Ft.lFrame.tView}function ru(o){return Ft.lFrame.contextLView=o,o[8]}function Ws(o){return Ft.lFrame.contextLView=null,o}function sr(){let o=qo();for(;null!==o&&64===o.type;)o=o.parent;return o}function qo(){return Ft.lFrame.currentTNode}function si(o,a){const u=Ft.lFrame;u.currentTNode=o,u.isParent=a}function Zo(){return Ft.lFrame.isParent}function Ko(){Ft.lFrame.isParent=!1}function oi(){const o=Ft.lFrame;let a=o.bindingRootIndex;return-1===a&&(a=o.bindingRootIndex=o.tView.bindingStartIndex),a}function ns(){return Ft.lFrame.bindingIndex++}function Mi(o){const a=Ft.lFrame,u=a.bindingIndex;return a.bindingIndex=a.bindingIndex+o,u}function ec(o,a){const u=Ft.lFrame;u.bindingIndex=u.bindingRootIndex=o,mo(a)}function mo(o){Ft.lFrame.currentDirectiveIndex=o}function Zs(){return Ft.lFrame.currentQueryIndex}function Ks(o){Ft.lFrame.currentQueryIndex=o}function Ia(o){const a=o[1];return 2===a.type?a.declTNode:1===a.type?o[6]:null}function au(o,a,u){if(u&it.SkipSelf){let p=a,_=o;for(;!(p=p.parent,null!==p||u&it.Host||(p=Ia(_),null===p||(_=_[15],10&p.type))););if(null===p)return!1;a=p,o=_}const h=Ft.lFrame=lu();return h.currentTNode=a,h.lView=o,!0}function Ys(o){const a=lu(),u=o[1];Ft.lFrame=a,a.currentTNode=u.firstChild,a.lView=o,a.tView=u,a.contextLView=o,a.bindingIndex=u.bindingStartIndex,a.inI18n=!1}function lu(){const o=Ft.lFrame,a=null===o?null:o.child;return null===a?Da(o):a}function Da(o){const a={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:o,child:null,inI18n:!1};return null!==o&&(o.child=a),a}function tc(){const o=Ft.lFrame;return Ft.lFrame=o.parent,o.currentTNode=null,o.lView=null,o}const ol=tc;function Qs(){const o=tc();o.isParent=!0,o.tView=null,o.selectedIndex=-1,o.contextLView=null,o.elementDepthCount=0,o.currentDirectiveIndex=-1,o.currentNamespace=null,o.bindingRootIndex=-1,o.bindingIndex=-1,o.currentQueryIndex=0}function Vr(){return Ft.lFrame.selectedIndex}function Js(o){Ft.lFrame.selectedIndex=o}function zn(){const o=Ft.lFrame;return ya(o.tView,o.selectedIndex)}function nc(){Ft.lFrame.currentNamespace="svg"}function fd(){!function ll(){Ft.lFrame.currentNamespace=null}()}function ic(o,a){for(let u=a.directiveStart,h=a.directiveEnd;u<h;u++){const _=o.data[u].type.prototype,{ngAfterContentInit:b,ngAfterContentChecked:C,ngAfterViewInit:A,ngAfterViewChecked:k,ngOnDestroy:F}=_;b&&(o.contentHooks||(o.contentHooks=[])).push(-u,b),C&&((o.contentHooks||(o.contentHooks=[])).push(u,C),(o.contentCheckHooks||(o.contentCheckHooks=[])).push(u,C)),A&&(o.viewHooks||(o.viewHooks=[])).push(-u,A),k&&((o.viewHooks||(o.viewHooks=[])).push(u,k),(o.viewCheckHooks||(o.viewCheckHooks=[])).push(u,k)),null!=F&&(o.destroyHooks||(o.destroyHooks=[])).push(u,F)}}function Xs(o,a,u){cl(o,a,3,u)}function Es(o,a,u,h){(3&o[2])===u&&cl(o,a,u,h)}function ul(o,a){let u=o[2];(3&u)===a&&(u&=2047,u+=1,o[2]=u)}function cl(o,a,u,h){const _=h??-1,b=a.length-1;let C=0;for(let A=void 0!==h?65535&o[18]:0;A<b;A++)if("number"==typeof a[A+1]){if(C=a[A],null!=h&&C>=h)break}else a[A]<0&&(o[18]+=65536),(C<_||-1==_)&&(pd(o,u,a,A),o[18]=(4294901760&o[18])+A+2),A++}function pd(o,a,u,h){const p=u[h]<0,_=u[h+1],C=o[p?-u[h]:u[h]];if(p){if(o[2]>>11<o[18]>>16&&(3&o[2])===a){o[2]+=2048;try{_.call(C)}finally{}}}else try{_.call(C)}finally{}}class Qo{constructor(a,u,h){this.factory=a,this.resolving=!1,this.canSeeViewProviders=u,this.injectImpl=h}}function uu(o,a,u){let h=0;for(;h<u.length;){const p=u[h];if("number"==typeof p){if(0!==p)break;h++;const _=u[h++],b=u[h++],C=u[h++];o.setAttribute(a,b,C,_)}else{const _=p,b=u[++h];oc(_)?o.setProperty(a,_,b):o.setAttribute(a,_,b),h++}}return h}function hl(o){return 3===o||4===o||6===o}function oc(o){return 64===o.charCodeAt(0)}function _o(o,a){if(null!==a&&0!==a.length)if(null===o||0===o.length)o=a.slice();else{let u=-1;for(let h=0;h<a.length;h++){const p=a[h];"number"==typeof p?u=p:0===u||gd(o,u,p,null,-1===u||2===u?a[++h]:null)}}return o}function gd(o,a,u,h,p){let _=0,b=o.length;if(-1===a)b=-1;else for(;_<o.length;){const C=o[_++];if("number"==typeof C){if(C===a){b=-1;break}if(C>a){b=_-1;break}}}for(;_<o.length;){const C=o[_];if("number"==typeof C)break;if(C===u){if(null===h)return void(null!==p&&(o[_+1]=p));if(h===o[_+1])return void(o[_+2]=p)}_++,null!==h&&_++,null!==p&&_++}-1!==b&&(o.splice(b,0,a),_=b+1),o.splice(_++,0,u),null!==h&&o.splice(_++,0,h),null!==p&&o.splice(_++,0,p)}function cu(o){return-1!==o}function ro(o){return 32767&o}function T(o,a){let u=function I(o){return o>>16}(o),h=a;for(;u>0;)h=h[15],u--;return h}let P=!0;function G(o){const a=P;return P=o,a}let Zr=0;const Nn={};function is(o,a){const u=Ta(o,a);if(-1!==u)return u;const h=a[1];h.firstCreatePass&&(o.injectorIndex=a.length,fl(h.data,o),fl(a,null),fl(h.blueprint,null));const p=ac(o,a),_=o.injectorIndex;if(cu(p)){const b=ro(p),C=T(p,a),A=C[1].data;for(let k=0;k<8;k++)a[_+k]=C[b+k]|A[b+k]}return a[_+8]=p,_}function fl(o,a){o.push(0,0,0,0,0,0,0,0,a)}function Ta(o,a){return-1===o.injectorIndex||o.parent&&o.parent.injectorIndex===o.injectorIndex||null===a[o.injectorIndex+8]?-1:o.injectorIndex}function ac(o,a){if(o.parent&&-1!==o.parent.injectorIndex)return o.parent.injectorIndex;let u=0,h=null,p=a;for(;null!==p;){if(h=fu(p),null===h)return-1;if(u++,p=p[15],-1!==h.injectorIndex)return h.injectorIndex|u<<16}return-1}function Aa(o,a,u){!function yo(o,a,u){let h;"string"==typeof u?h=u.charCodeAt(0)||0:u.hasOwnProperty(Fr)&&(h=u[Fr]),null==h&&(h=u[Fr]=Zr++);const p=255&h;a.data[o+(p>>5)]|=1<<p}(o,a,u)}function hu(o,a,u){if(u&it.Optional||void 0!==o)return o;xe()}function bp(o,a,u,h){if(u&it.Optional&&void 0===h&&(h=null),0==(u&(it.Self|it.Host))){const p=o[9],_=En(void 0);try{return p?p.get(a,h,u&it.Optional):Qi(a,h,u&it.Optional)}finally{En(_)}}return hu(h,0,u)}function pl(o,a,u,h=it.Default,p){if(null!==o){if(1024&a[2]){const b=function yd(o,a,u,h,p){let _=o,b=a;for(;null!==_&&null!==b&&1024&b[2]&&!(256&b[2]);){const C=md(_,b,u,h|it.Self,Nn);if(C!==Nn)return C;let A=_.parent;if(!A){const k=b[21];if(k){const F=k.get(u,Nn,h);if(F!==Nn)return F}A=fu(b),b=b[15]}_=A}return p}(o,a,u,h,Nn);if(b!==Nn)return b}const _=md(o,a,u,h,Nn);if(_!==Nn)return _}return bp(a,u,h,p)}function md(o,a,u,h,p){const _=function Ep(o){if("string"==typeof o)return o.charCodeAt(0)||0;const a=o.hasOwnProperty(Fr)?o[Fr]:void 0;return"number"==typeof a?a>=0?255&a:ur:a}(u);if("function"==typeof _){if(!au(a,o,h))return h&it.Host?hu(p,0,h):bp(a,u,h,p);try{const b=_(h);if(null!=b||h&it.Optional)return b;xe()}finally{ol()}}else if("number"==typeof _){let b=null,C=Ta(o,a),A=-1,k=h&it.Host?a[16][6]:null;for((-1===C||h&it.SkipSelf)&&(A=-1===C?ac(o,a):a[C+8],-1!==A&&ml(h,!1)?(b=a[1],C=ro(A),a=T(A,a)):C=-1);-1!==C;){const F=a[1];if(uc(_,C,F.data)){const $=gl(C,a,u,b,h,k);if($!==Nn)return $}A=a[C+8],-1!==A&&ml(h,a[1].data[C+8]===k)&&uc(_,C,a)?(b=F,C=ro(A),a=T(A,a)):C=-1}}return p}function gl(o,a,u,h,p,_){const b=a[1],C=b.data[o+8],F=lc(C,b,u,null==h?mi(C)&&P:h!=b&&0!=(3&C.type),p&it.Host&&_===C);return null!==F?vi(a,b,F,C):Nn}function lc(o,a,u,h,p){const _=o.providerIndexes,b=a.data,C=1048575&_,A=o.directiveStart,F=_>>20,ee=p?C+F:o.directiveEnd;for(let oe=h?C:C+F;oe<ee;oe++){const Ne=b[oe];if(oe<A&&u===Ne||oe>=A&&Ne.type===u)return oe}if(p){const oe=b[A];if(oe&&qr(oe)&&oe.type===u)return A}return null}function vi(o,a,u,h){let p=o[u];const _=a.data;if(function bh(o){return o instanceof Qo}(p)){const b=p;b.resolving&&function Ge(o,a){const u=a?`. Dependency path: ${a.join(" > ")} > ${o}`:"";throw new Me(-200,`Circular dependency in DI detected for ${o}${u}`)}(function pe(o){return"function"==typeof o?o.name||o.toString():"object"==typeof o&&null!=o&&"function"==typeof o.type?o.type.name||o.type.toString():Ae(o)}(_[u]));const C=G(b.canSeeViewProviders);b.resolving=!0;const A=b.injectImpl?En(b.injectImpl):null;au(o,h,it.Default);try{p=o[u]=b.factory(void 0,_,o,h),a.firstCreatePass&&u>=h.directiveStart&&function rc(o,a,u){const{ngOnChanges:h,ngOnInit:p,ngDoCheck:_}=a.type.prototype;if(h){const b=$s(a);(u.preOrderHooks||(u.preOrderHooks=[])).push(o,b),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(o,b)}p&&(u.preOrderHooks||(u.preOrderHooks=[])).push(0-o,p),_&&((u.preOrderHooks||(u.preOrderHooks=[])).push(o,_),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(o,_))}(u,_[u],a)}finally{null!==A&&En(A),G(C),b.resolving=!1,ol()}}return p}function uc(o,a,u){return!!(u[a+(o>>5)]&1<<o)}function ml(o,a){return!(o&it.Self||o&it.Host&&a)}class vo{constructor(a,u){this._tNode=a,this._lView=u}get(a,u,h){return pl(this._tNode,this._lView,a,h,u)}}function ur(){return new vo(sr(),Oe())}function _d(o){return Un(()=>{const a=o.prototype.constructor,u=a[Wr]||_l(a),h=Object.prototype;let p=Object.getPrototypeOf(o.prototype).constructor;for(;p&&p!==h;){const _=p[Wr]||_l(p);if(_&&_!==u)return _;p=Object.getPrototypeOf(p)}return _=>new _})}function _l(o){return nt(o)?()=>{const a=_l(te(o));return a&&a()}:js(o)}function fu(o){const a=o[1],u=a.type;return 2===u?a.declTNode:1===u?o[6]:null}function Eh(o){return function du(o,a){if("class"===a)return o.classes;if("style"===a)return o.styles;const u=o.attrs;if(u){const h=u.length;let p=0;for(;p<h;){const _=u[p];if(hl(_))break;if(0===_)p+=2;else if("number"==typeof _)for(p++;p<h&&"string"==typeof u[p];)p++;else{if(_===a)return u[p+1];p+=2}}}return null}(sr(),o)}const yl="__parameters__";function Ni(o,a,u){return Un(()=>{const h=function pu(o){return function(...u){if(o){const h=o(...u);for(const p in h)this[p]=h[p]}}}(a);function p(..._){if(this instanceof p)return h.apply(this,_),this;const b=new p(..._);return C.annotation=b,C;function C(A,k,F){const $=A.hasOwnProperty(yl)?A[yl]:Object.defineProperty(A,yl,{value:[]})[yl];for(;$.length<=F;)$.push(null);return($[F]=$[F]||[]).push(b),A}}return u&&(p.prototype=Object.create(u.prototype)),p.prototype.ngMetadataName=o,p.annotationCls=p,p})}class an{constructor(a,u){this._desc=a,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof u?this.__NG_ELEMENT_ID__=u:void 0!==u&&(this.\u0275prov=qe({token:this,providedIn:u.providedIn||"root",factory:u.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function ai(o,a){void 0===a&&(a=o);for(let u=0;u<o.length;u++){let h=o[u];Array.isArray(h)?(a===o&&(a=o.slice(0,u)),ai(h,a)):a!==o&&a.push(h)}return a}function Is(o,a){o.forEach(u=>Array.isArray(u)?Is(u,a):a(u))}function Dp(o,a,u){a>=o.length?o.push(u):o.splice(a,0,u)}function gu(o,a){return a>=o.length-1?o.pop():o.splice(a,1)[0]}function fc(o,a){const u=[];for(let h=0;h<o;h++)u.push(a);return u}function Pi(o,a,u){let h=Sa(o,a);return h>=0?o[1|h]=u:(h=~h,function i_(o,a,u,h){let p=o.length;if(p==a)o.push(u,h);else if(1===p)o.push(h,o[0]),o[0]=u;else{for(p--,o.push(o[p-1],o[p]);p>a;)o[p]=o[p-2],p--;o[a]=u,o[a+1]=h}}(o,h,a,u)),h}function Dh(o,a){const u=Sa(o,a);if(u>=0)return o[1|u]}function Sa(o,a){return function mu(o,a,u){let h=0,p=o.length>>u;for(;p!==h;){const _=h+(p-h>>1),b=o[_<<u];if(a===b)return _<<u;b>a?p=_:h=_+1}return~(p<<u)}(o,a,1)}const kr={},br="__NG_DI_FLAG__",_u="ngTempTokenPath",ss=/\n/gm,Ed="__source";let Ts;function El(o){const a=Ts;return Ts=o,a}function Cd(o,a=it.Default){if(void 0===Ts)throw new Me(-203,!1);return null===Ts?Qi(o,void 0,a):Ts.get(o,a&it.Optional?null:void 0,a)}function pr(o,a=it.Default){return(function Gr(){return mr}()||Cd)(te(o),a)}function Ct(o,a=it.Default){return"number"!=typeof a&&(a=0|(a.optional&&8)|(a.host&&1)|(a.self&&2)|(a.skipSelf&&4)),pr(o,a)}function _c(o){const a=[];for(let u=0;u<o.length;u++){const h=te(o[u]);if(Array.isArray(h)){if(0===h.length)throw new Me(900,!1);let p,_=it.Default;for(let b=0;b<h.length;b++){const C=h[b],A=R(C);"number"==typeof A?-1===A?p=C.token:_|=A:p=C}a.push(pr(p,_))}else a.push(pr(h))}return a}function S(o,a){return o[br]=a,o.prototype[br]=a,o}function R(o){return o[br]}const le=S(Ni("Optional"),8),ft=S(Ni("SkipSelf"),4);var Io=(()=>((Io=Io||{})[Io.Important=1]="Important",Io[Io.DashCase=2]="DashCase",Io))();const Op=new Map;let Lv=0;const Do="__ngContext__";function $t(o,a){vr(a)?(o[Do]=a[20],function Lp(o){Op.set(o[20],o)}(a)):o[Do]=a}function Sd(o,a){return undefined(o,a)}function xd(o){const a=o[3];return gi(a)?a[3]:a}function Rd(o){return m_(o[13])}function ka(o){return m_(o[4])}function m_(o){for(;null!==o&&!gi(o);)o=o[4];return o}function Dl(o,a,u,h,p){if(null!=h){let _,b=!1;gi(h)?_=h:vr(h)&&(b=!0,h=h[0]);const C=kn(h);0===o&&null!==u?null==p?$p(a,u,C):Pa(a,u,C,p||null,!0):1===o&&null!==u?Pa(a,u,C,p||null,!0):2===o?function Kp(o,a,u){const h=Uh(o,a);h&&function Ec(o,a,u,h){o.removeChild(a,u,h)}(o,h,a,u)}(a,C,b):3===o&&a.destroyNode(C),null!=_&&function Qp(o,a,u,h,p){const _=u[7];_!==kn(u)&&Dl(a,o,h,_,p);for(let C=10;C<u.length;C++){const A=u[C];kd(A[1],A,o,a,h,_)}}(a,o,_,u,p)}}function Bp(o,a,u){return o.createElement(a,u)}function bc(o,a){const u=o[9],h=u.indexOf(a),p=a[3];512&a[2]&&(a[2]&=-513,ir(p,-1)),u.splice(h,1)}function Iu(o,a){if(o.length<=10)return;const u=10+a,h=o[u];if(h){const p=h[17];null!==p&&p!==o&&bc(p,h),a>0&&(o[u-1][4]=h[4]);const _=gu(o,10+a);!function Na(o,a){kd(o,a,a[11],2,null,null),a[0]=null,a[6]=null}(h[1],h);const b=_[19];null!==b&&b.detachView(_[1]),h[3]=null,h[4]=null,h[2]&=-65}return h}function Du(o,a){if(!(128&a[2])){const u=a[11];u.destroyNode&&kd(o,a,u,3,null,null),function jp(o){let a=o[13];if(!a)return Md(o[1],o);for(;a;){let u=null;if(vr(a))u=a[13];else{const h=a[10];h&&(u=h)}if(!u){for(;a&&!a[4]&&a!==o;)vr(a)&&Md(a[1],a),a=a[3];null===a&&(a=o),vr(a)&&Md(a[1],a),u=a&&a[4]}a=u}}(a)}}function Md(o,a){if(!(128&a[2])){a[2]&=-65,a[2]|=128,function __(o,a){let u;if(null!=o&&null!=(u=o.destroyHooks))for(let h=0;h<u.length;h+=2){const p=a[u[h]];if(!(p instanceof Qo)){const _=u[h+1];if(Array.isArray(_))for(let b=0;b<_.length;b+=2){const C=p[_[b]],A=_[b+1];try{A.call(C)}finally{}}else try{_.call(p)}finally{}}}}(o,a),function Oh(o,a){const u=o.cleanup,h=a[7];let p=-1;if(null!==u)for(let _=0;_<u.length-1;_+=2)if("string"==typeof u[_]){const b=u[_+1],C="function"==typeof b?b(a):kn(a[b]),A=h[p=u[_+2]],k=u[_+3];"boolean"==typeof k?C.removeEventListener(u[_],A,k):k>=0?h[p=k]():h[p=-k].unsubscribe(),_+=2}else{const b=h[p=u[_+1]];u[_].call(b)}if(null!==h){for(let _=p+1;_<h.length;_++)(0,h[_])();a[7]=null}}(o,a),1===a[1].type&&a[11].destroy();const u=a[17];if(null!==u&&gi(a[3])){u!==a[3]&&bc(u,a);const h=a[19];null!==h&&h.detachView(o)}!function h_(o){Op.delete(o[20])}(a)}}function Tu(o,a,u){return function Lh(o,a,u){let h=a;for(;null!==h&&40&h.type;)h=(a=h).parent;if(null===h)return u[0];if(2&h.flags){const p=o.data[h.directiveStart].encapsulation;if(p===Ze.None||p===Ze.Emulated)return null}return Rr(h,u)}(o,a.parent,u)}function Pa(o,a,u,h,p){o.insertBefore(a,u,h,p)}function $p(o,a,u){o.appendChild(a,u)}function y_(o,a,u,h,p){null!==h?Pa(o,a,u,h,p):$p(o,a,u)}function Uh(o,a){return o.parentNode(a)}function Gp(o,a,u){return qp(o,a,u)}let Tl,qp=function Wp(o,a,u){return 40&o.type?Rr(o,u):null};function ls(o,a,u,h){const p=Tu(o,h,a),_=a[11],C=Gp(h.parent||a[6],h,a);if(null!=p)if(Array.isArray(u))for(let A=0;A<u.length;A++)y_(_,p,u[A],C,!1);else y_(_,p,u,C,!1)}function Au(o,a){if(null!==a){const u=a.type;if(3&u)return Rr(a,o);if(4&u)return Zp(-1,o[a.index]);if(8&u){const h=a.child;if(null!==h)return Au(o,h);{const p=o[a.index];return gi(p)?Zp(-1,p):kn(p)}}if(32&u)return Sd(a,o)()||kn(o[a.index]);{const h=Bh(o,a);return null!==h?Array.isArray(h)?h[0]:Au(xd(o[16]),h):Au(o,a.next)}}return null}function Bh(o,a){return null!==a?o[16][6].projection[a.projection]:null}function Zp(o,a){const u=10+o+1;if(u<a.length){const h=a[u],p=h[1].firstChild;if(null!==p)return Au(h,p)}return a[7]}function Yp(o,a,u,h,p,_,b){for(;null!=u;){const C=h[u.index],A=u.type;if(b&&0===a&&(C&&$t(kn(C),h),u.flags|=4),64!=(64&u.flags))if(8&A)Yp(o,a,u.child,h,p,_,!1),Dl(a,o,p,C,_);else if(32&A){const k=Sd(u,h);let F;for(;F=k();)Dl(a,o,p,F,_);Dl(a,o,p,C,_)}else 16&A?Hh(o,a,h,u,p,_):Dl(a,o,p,C,_);u=b?u.projectionNext:u.next}}function kd(o,a,u,h,p,_){Yp(u,h,o.firstChild,a,p,_,!1)}function Hh(o,a,u,h,p,_){const b=u[16],A=b[6].projection[h.projection];if(Array.isArray(A))for(let k=0;k<A.length;k++)Dl(a,o,p,A[k],_);else Yp(o,a,A,b[3],p,_,!0)}function b_(o,a,u){o.setAttribute(a,"style",u)}function Nd(o,a,u){""===u?o.removeAttribute(a,"class"):o.setAttribute(a,"class",u)}function eg(o){Tl=o}class zh{constructor(a){this.changingThisBreaksApplicationSecurity=a}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function Bi(o){return o instanceof zh?o.changingThisBreaksApplicationSecurity:o}const E=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;var li=(()=>((li=li||{})[li.NONE=0]="NONE",li[li.HTML=1]="HTML",li[li.STYLE=2]="STYLE",li[li.SCRIPT=3]="SCRIPT",li[li.URL=4]="URL",li[li.RESOURCE_URL=5]="RESOURCE_URL",li))();function Ud(o){const a=function Vd(){const o=Oe();return o&&o[12]}();return a?a.sanitize(li.URL,o)||"":function Cc(o,a){const u=function C_(o){return o instanceof zh&&o.getTypeName()||null}(o);if(null!=u&&u!==a){if("ResourceURL"===u&&"URL"===a)return!0;throw new Error(`Required a safe ${a}, got a ${u} (see https://g.co/ng/security#xss)`)}return u===a}(o,"URL")?Bi(o):function M(o){return(o=String(o)).match(E)?o:"unsafe:"+o}(Ae(o))}const qh=new an("ENVIRONMENT_INITIALIZER"),Bd=new an("INJECTOR",-1),yC=new an("INJECTOR_DEF_TYPES");class vC{get(a,u=kr){if(u===kr){const h=new Error(`NullInjectorError: No provider for ${ye(a)}!`);throw h.name="NullInjectorError",h}return u}}function xx(...o){return{\u0275providers:wC(0,o)}}function wC(o,...a){const u=[],h=new Set;let p;return Is(a,_=>{const b=_;qv(b,u,[],h)&&(p||(p=[]),p.push(b))}),void 0!==p&&bC(p,u),u}function bC(o,a){for(let u=0;u<o.length;u++){const{providers:p}=o[u];Is(p,_=>{a.push(_)})}}function qv(o,a,u,h){if(!(o=te(o)))return!1;let p=null,_=Bt(o);const b=!_&&ge(o);if(_||b){if(b&&!b.standalone)return!1;p=o}else{const A=o.ngModule;if(_=Bt(A),!_)return!1;p=A}const C=h.has(p);if(b){if(C)return!1;if(h.add(p),b.dependencies){const A="function"==typeof b.dependencies?b.dependencies():b.dependencies;for(const k of A)qv(k,a,u,h)}}else{if(!_)return!1;{if(null!=_.imports&&!C){let k;h.add(p);try{Is(_.imports,F=>{qv(F,a,u,h)&&(k||(k=[]),k.push(F))})}finally{}void 0!==k&&bC(k,a)}if(!C){const k=js(p)||(()=>new p);a.push({provide:p,useFactory:k,deps:Wt},{provide:yC,useValue:p,multi:!0},{provide:qh,useValue:()=>pr(p),multi:!0})}const A=_.providers;null==A||C||Is(A,F=>{a.push(F)})}}return p!==o&&void 0!==o.providers}const Rx=ve({provide:String,useValue:ve});function Zv(o){return null!==o&&"object"==typeof o&&Rx in o}function xu(o){return"function"==typeof o}const ug=new an("Set Injector scope."),Hd={},Mx={};let Yv;function A_(){return void 0===Yv&&(Yv=new vC),Yv}class jd{}class cg extends jd{constructor(a,u,h,p){super(),this.parent=u,this.source=h,this.scopes=p,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Qv(a,b=>this.processProvider(b)),this.records.set(Bd,$d(void 0,this)),p.has("environment")&&this.records.set(jd,$d(void 0,this));const _=this.records.get(ug);null!=_&&"string"==typeof _.value&&this.scopes.add(_.value),this.injectorDefTypes=new Set(this.get(yC.multi,Wt,it.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const a of this._ngOnDestroyHooks)a.ngOnDestroy();for(const a of this._onDestroyHooks)a()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(a){this._onDestroyHooks.push(a)}runInContext(a){this.assertNotDestroyed();const u=El(this),h=En(void 0);try{return a()}finally{El(u),En(h)}}get(a,u=kr,h=it.Default){this.assertNotDestroyed();const p=El(this),_=En(void 0);try{if(!(h&it.SkipSelf)){let C=this.records.get(a);if(void 0===C){const A=function kx(o){return"function"==typeof o||"object"==typeof o&&o instanceof an}(a)&&ln(a);C=A&&this.injectableDefInScope(A)?$d(S_(a),Hd):null,this.records.set(a,C)}if(null!=C)return this.hydrate(a,C)}return(h&it.Self?A_():this.parent).get(a,u=h&it.Optional&&u===kr?null:u)}catch(b){if("NullInjectorError"===b.name){if((b[_u]=b[_u]||[]).unshift(ye(a)),p)throw b;return function L(o,a,u,h){const p=o[_u];throw a[Ed]&&p.unshift(a[Ed]),o.message=function z(o,a,u,h=null){o=o&&"\n"===o.charAt(0)&&"\u0275"==o.charAt(1)?o.slice(2):o;let p=ye(a);if(Array.isArray(a))p=a.map(ye).join(" -> ");else if("object"==typeof a){let _=[];for(let b in a)if(a.hasOwnProperty(b)){let C=a[b];_.push(b+":"+("string"==typeof C?JSON.stringify(C):ye(C)))}p=`{${_.join(", ")}}`}return`${u}${h?"("+h+")":""}[${p}]: ${o.replace(ss,"\n  ")}`}("\n"+o.message,p,u,h),o.ngTokenPath=p,o[_u]=null,o}(b,a,"R3InjectorError",this.source)}throw b}finally{En(_),El(p)}}resolveInjectorInitializers(){const a=El(this),u=En(void 0);try{const h=this.get(qh.multi,Wt,it.Self);for(const p of h)p()}finally{El(a),En(u)}}toString(){const a=[],u=this.records;for(const h of u.keys())a.push(ye(h));return`R3Injector[${a.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Me(205,!1)}processProvider(a){let u=xu(a=te(a))?a:te(a&&a.provide);const h=function x_(o){return Zv(o)?$d(void 0,o.useValue):$d(dg(o),Hd)}(a);if(xu(a)||!0!==a.multi)this.records.get(u);else{let p=this.records.get(u);p||(p=$d(void 0,Hd,!0),p.factory=()=>_c(p.multi),this.records.set(u,p)),u=a,p.multi.push(a)}this.records.set(u,h)}hydrate(a,u){return u.value===Hd&&(u.value=Mx,u.value=u.factory()),"object"==typeof u.value&&u.value&&function DC(o){return null!==o&&"object"==typeof o&&"function"==typeof o.ngOnDestroy}(u.value)&&this._ngOnDestroyHooks.add(u.value),u.value}injectableDefInScope(a){if(!a.providedIn)return!1;const u=te(a.providedIn);return"string"==typeof u?"any"===u||this.scopes.has(u):this.injectorDefTypes.has(u)}}function S_(o){const a=ln(o),u=null!==a?a.factory:js(o);if(null!==u)return u;if(o instanceof an)throw new Me(204,!1);if(o instanceof Function)return function IC(o){const a=o.length;if(a>0)throw fc(a,"?"),new Me(204,!1);const u=function qn(o){const a=o&&(o[hr]||o[pi]);if(a){const u=function ri(o){if(o.hasOwnProperty("name"))return o.name;const a=(""+o).match(/^function\s*([^\s(]+)/);return null===a?"":a[1]}(o);return console.warn(`DEPRECATED: DI is instantiating a token "${u}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${u}" class.`),a}return null}(o);return null!==u?()=>u.factory(o):()=>new o}(o);throw new Me(204,!1)}function dg(o,a,u){let h;if(xu(o)){const p=te(o);return js(p)||S_(p)}if(Zv(o))h=()=>te(o.useValue);else if(function EC(o){return!(!o||!o.useFactory)}(o))h=()=>o.useFactory(..._c(o.deps||[]));else if(function Kv(o){return!(!o||!o.useExisting)}(o))h=()=>pr(te(o.useExisting));else{const p=te(o&&(o.useClass||o.provide));if(!function hg(o){return!!o.deps}(o))return js(p)||S_(p);h=()=>new p(..._c(o.deps))}return h}function $d(o,a,u=!1){return{factory:o,value:a,multi:u?[]:void 0}}function Nx(o){return!!o.\u0275providers}function Qv(o,a){for(const u of o)Array.isArray(u)?Qv(u,a):Nx(u)?Qv(u.\u0275providers,a):a(u)}class TC{}class Ox{resolveComponentFactory(a){throw function R_(o){const a=Error(`No component factory found for ${ye(o)}. Did you add it to @NgModule.entryComponents?`);return a.ngComponent=o,a}(a)}}let fg=(()=>{class o{}return o.NULL=new Ox,o})();function Lx(){return Zh(sr(),Oe())}function Zh(o,a){return new pg(Rr(o,a))}let pg=(()=>{class o{constructor(u){this.nativeElement=u}}return o.__NG_ELEMENT_ID__=Lx,o})();function SC(o){return o instanceof pg?o.nativeElement:o}class Jv{}let xC=(()=>{class o{}return o.__NG_ELEMENT_ID__=()=>function RC(){const o=Oe(),u=Mr(sr().index,o);return(vr(u)?u:o)[11]}(),o})(),MC=(()=>{class o{}return o.\u0275prov=qe({token:o,providedIn:"root",factory:()=>null}),o})();class Xv{constructor(a){this.full=a,this.major=a.split(".")[0],this.minor=a.split(".")[1],this.patch=a.split(".").slice(2).join(".")}}const kC=new Xv("14.3.0"),ew={};function nw(o){return o.ngOriginalError}class gg{constructor(){this._console=console}handleError(a){const u=this._findOriginalError(a);this._console.error("ERROR",a),u&&this._console.error("ORIGINAL ERROR",u)}_findOriginalError(a){let u=a&&nw(a);for(;u&&nw(u);)u=nw(u);return u||null}}function Ru(o){return o instanceof Function?o():o}function mg(o,a,u){let h=o.length;for(;;){const p=o.indexOf(a,u);if(-1===p)return p;if(0===p||o.charCodeAt(p-1)<=32){const _=a.length;if(p+_===h||o.charCodeAt(p+_)<=32)return p}u=p+1}}const BC="ng-template";function Bx(o,a,u){let h=0;for(;h<o.length;){let p=o[h++];if(u&&"class"===p){if(p=o[h],-1!==mg(p.toLowerCase(),a,0))return!0}else if(1===p){for(;h<o.length&&"string"==typeof(p=o[h++]);)if(p.toLowerCase()===a)return!0;return!1}}return!1}function HC(o){return 4===o.type&&o.value!==BC}function Hx(o,a,u){return a===(4!==o.type||u?o.value:BC)}function jC(o,a,u){let h=4;const p=o.attrs||[],_=function La(o){for(let a=0;a<o.length;a++)if(hl(o[a]))return a;return o.length}(p);let b=!1;for(let C=0;C<a.length;C++){const A=a[C];if("number"!=typeof A){if(!b)if(4&h){if(h=2|1&h,""!==A&&!Hx(o,A,u)||""===A&&1===a.length){if(er(h))return!1;b=!0}}else{const k=8&h?A:a[++C];if(8&h&&null!==o.attrs){if(!Bx(o.attrs,k,u)){if(er(h))return!1;b=!0}continue}const $=jx(8&h?"class":A,p,HC(o),u);if(-1===$){if(er(h))return!1;b=!0;continue}if(""!==k){let ee;ee=$>_?"":p[$+1].toLowerCase();const oe=8&h?ee:null;if(oe&&-1!==mg(oe,k,0)||2&h&&k!==ee){if(er(h))return!1;b=!0}}}}else{if(!b&&!er(h)&&!er(A))return!1;if(b&&er(A))continue;b=!1,h=A|1&h}}return er(h)||b}function er(o){return 0==(1&o)}function jx(o,a,u,h){if(null===a)return-1;let p=0;if(h||!u){let _=!1;for(;p<a.length;){const b=a[p];if(b===o)return p;if(3===b||6===b)_=!0;else{if(1===b||2===b){let C=a[++p];for(;"string"==typeof C;)C=a[++p];continue}if(4===b)break;if(0===b){p+=4;continue}}p+=_?1:2}return-1}return function $C(o,a){let u=o.indexOf(4);if(u>-1)for(u++;u<o.length;){const h=o[u];if("number"==typeof h)return-1;if(h===a)return u;u++}return-1}(a,o)}function iw(o,a,u=!1){for(let h=0;h<a.length;h++)if(jC(o,a[h],u))return!0;return!1}function $x(o,a){e:for(let u=0;u<a.length;u++){const h=a[u];if(o.length===h.length){for(let p=0;p<o.length;p++)if(o[p]!==h[p])continue e;return!0}}return!1}function ow(o,a){return o?":not("+a.trim()+")":a}function ZL(o){let a=o[0],u=1,h=2,p="",_=!1;for(;u<o.length;){let b=o[u];if("string"==typeof b)if(2&h){const C=o[++u];p+="["+b+(C.length>0?'="'+C+'"':"")+"]"}else 8&h?p+="."+b:4&h&&(p+=" "+b);else""!==p&&!er(b)&&(a+=ow(_,p),p=""),h=b,_=_||!er(h);u++}return""!==p&&(a+=ow(_,p)),a}const en={};function aw(o){_g(on(),Oe(),Vr()+o,!1)}function _g(o,a,u,h){if(!h)if(3==(3&a[2])){const _=o.preOrderCheckHooks;null!==_&&Xs(a,_,u)}else{const _=o.preOrderHooks;null!==_&&Es(a,_,0,u)}Js(u)}function WC(o,a=null,u=null,h){const p=qC(o,a,u,h);return p.resolveInjectorInitializers(),p}function qC(o,a=null,u=null,h,p=new Set){const _=[u||Wt,xx(o)];return h=h||("object"==typeof o?void 0:ye(o)),new cg(_,a||A_(),h||null,p)}let Tc=(()=>{class o{static create(u,h){if(Array.isArray(u))return WC({name:""},h,u,"");{const p=u.name??"";return WC({name:p},u.parent,u.providers,p)}}}return o.THROW_IF_NOT_FOUND=kr,o.NULL=new vC,o.\u0275prov=qe({token:o,providedIn:"any",factory:()=>pr(Bd)}),o.__NG_ELEMENT_ID__=-1,o})();function zd(o,a=it.Default){const u=Oe();return null===u?pr(o,a):pl(sr(),u,te(o),a)}function pw(){throw new Error("invalid")}function Ac(o,a){return o<<17|a<<2}function Gn(o){return o>>17&32767}function Xh(o){return 2|o}function Al(o){return(131068&o)>>2}function vg(o,a){return-131069&o|a<<2}function O_(o){return 1|o}function uI(o,a){const u=o.contentQueries;if(null!==u)for(let h=0;h<u.length;h+=2){const p=u[h],_=u[h+1];if(-1!==_){const b=o.data[_];Ks(p),b.contentQueries(2,a[_],_)}}}function Dw(o,a,u,h,p,_,b,C,A,k,F){const $=a.blueprint.slice();return $[0]=p,$[2]=76|h,(null!==F||o&&1024&o[2])&&($[2]|=1024),Ur($),$[3]=$[15]=o,$[8]=u,$[10]=b||o&&o[10],$[11]=C||o&&o[11],$[12]=A||o&&o[12]||null,$[9]=k||o&&o[9]||null,$[6]=_,$[20]=function c_(){return Lv++}(),$[21]=F,$[16]=2==a.type?o[16]:$,$}function tf(o,a,u,h,p){let _=o.data[a];if(null===_)_=function Tw(o,a,u,h,p){const _=qo(),b=Zo(),A=o.data[a]=function Sw(o,a,u,h,p,_){return{type:u,index:h,insertBeforeIndex:null,injectorIndex:a?a.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:p,attrs:_,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:a,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,b?_:_&&_.parent,u,a,h,p);return null===o.firstChild&&(o.firstChild=A),null!==_&&(b?null==_.child&&null!==A.parent&&(_.child=A):null===_.next&&(_.next=A)),A}(o,a,u,h,p),function Ca(){return Ft.lFrame.inI18n}()&&(_.flags|=64);else if(64&_.type){_.type=u,_.value=h,_.attrs=p;const b=function qs(){const o=Ft.lFrame,a=o.currentTNode;return o.isParent?a:a.parent}();_.injectorIndex=null===b?-1:b.injectorIndex}return si(_,!0),_}function bg(o,a,u,h){if(0===u)return-1;const p=a.length;for(let _=0;_<u;_++)a.push(h),o.blueprint.push(h),o.data.push(null);return p}function cI(o,a,u){Ys(a);try{const h=o.viewQuery;null!==h&&Dg(1,h,u);const p=o.template;null!==p&&aR(o,a,p,1,u),o.firstCreatePass&&(o.firstCreatePass=!1),o.staticContentQueries&&uI(o,a),o.staticViewQueries&&Dg(2,o.viewQuery,u);const _=o.components;null!==_&&function cF(o,a){for(let u=0;u<a.length;u++)mR(o,a[u])}(a,_)}catch(h){throw o.firstCreatePass&&(o.incompleteFirstPass=!0,o.firstCreatePass=!1),h}finally{a[2]&=-5,Qs()}}function Aw(o,a,u,h){const p=a[2];if(128!=(128&p)){Ys(a);try{Ur(a),function Ea(o){return Ft.lFrame.bindingIndex=o}(o.bindingStartIndex),null!==u&&aR(o,a,u,2,h);const b=3==(3&p);if(b){const k=o.preOrderCheckHooks;null!==k&&Xs(a,k,null)}else{const k=o.preOrderHooks;null!==k&&Es(a,k,0,null),ul(a,0)}if(function B_(o){for(let a=Rd(o);null!==a;a=ka(a)){if(!a[2])continue;const u=a[9];for(let h=0;h<u.length;h++){const p=u[h],_=p[3];0==(512&p[2])&&ir(_,1),p[2]|=512}}}(a),function mI(o){for(let a=Rd(o);null!==a;a=ka(a))for(let u=10;u<a.length;u++){const h=a[u],p=h[1];wa(h)&&Aw(p,h,p.template,h[8])}}(a),null!==o.contentQueries&&uI(o,a),b){const k=o.contentCheckHooks;null!==k&&Xs(a,k)}else{const k=o.contentHooks;null!==k&&Es(a,k,1),ul(a,1)}!function uF(o,a){const u=o.hostBindingOpCodes;if(null!==u)try{for(let h=0;h<u.length;h++){const p=u[h];if(p<0)Js(~p);else{const _=p,b=u[++h],C=u[++h];ec(b,_),C(2,a[_])}}}finally{Js(-1)}}(o,a);const C=o.components;null!==C&&function Iw(o,a){for(let u=0;u<a.length;u++)_I(o,a[u])}(a,C);const A=o.viewQuery;if(null!==A&&Dg(2,A,h),b){const k=o.viewCheckHooks;null!==k&&Xs(a,k)}else{const k=o.viewHooks;null!==k&&Es(a,k,2),ul(a,2)}!0===o.firstUpdatePass&&(o.firstUpdatePass=!1),a[2]&=-41,512&a[2]&&(a[2]&=-513,ir(a[3],-1))}finally{Qs()}}}function aR(o,a,u,h,p){const _=Vr(),b=2&h;try{Js(-1),b&&a.length>22&&_g(o,a,22,!1),u(h,p)}finally{Js(_)}}function lR(o,a,u){if(Ya(a)){const p=a.directiveEnd;for(let _=a.directiveStart;_<p;_++){const b=o.data[_];b.contentQueries&&b.contentQueries(1,u[_],_)}}}function dI(o,a,u){!Wo()||(function hR(o,a,u,h){const p=u.directiveStart,_=u.directiveEnd;o.firstCreatePass||is(u,a),$t(h,a);const b=u.initialInputs;for(let C=p;C<_;C++){const A=o.data[C],k=qr(A);k&&Pw(a,u,A);const F=vi(a,o,C,u);$t(F,a),null!==b&&pR(0,C-p,F,A,0,b),k&&(Mr(u.index,a)[8]=F)}}(o,a,u,Rr(u,a)),128==(128&u.flags)&&function fR(o,a,u){const h=u.directiveStart,p=u.directiveEnd,_=u.index,b=function sl(){return Ft.lFrame.currentDirectiveIndex}();try{Js(_);for(let C=h;C<p;C++){const A=o.data[C],k=a[C];mo(C),(null!==A.hostBindings||0!==A.hostVars||null!==A.hostAttrs)&&pI(A,k)}}finally{Js(-1),mo(b)}}(o,a,u))}function hI(o,a,u=Rr){const h=a.localNames;if(null!==h){let p=a.index+1;for(let _=0;_<h.length;_+=2){const b=h[_+1],C=-1===b?u(a,o):o[b];o[p++]=C}}}function uR(o){const a=o.tView;return null===a||a.incompleteFirstPass?o.tView=Se(1,null,o.template,o.decls,o.vars,o.directiveDefs,o.pipeDefs,o.viewQuery,o.schemas,o.consts):a}function Se(o,a,u,h,p,_,b,C,A,k){const F=22+h,$=F+p,ee=function xs(o,a){const u=[];for(let h=0;h<a;h++)u.push(h<o?null:en);return u}(F,$),oe="function"==typeof k?k():k;return ee[1]={type:o,blueprint:ee,template:u,queries:null,viewQuery:C,declTNode:a,data:ee.slice().fill(null,F),bindingStartIndex:F,expandoStartIndex:$,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof _?_():_,pipeRegistry:"function"==typeof b?b():b,firstChild:null,schemas:A,consts:oe,incompleteFirstPass:!1}}function na(o,a,u,h){const p=sf(a);null===u?p.push(h):(p.push(u),o.firstCreatePass&&yI(o).push(h,p.length-1))}function xw(o,a,u){for(let h in o)if(o.hasOwnProperty(h)){const p=o[h];(u=null===u?{}:u).hasOwnProperty(h)?u[h].push(a,p):u[h]=[a,p]}return u}function fI(o,a){const h=a.directiveEnd,p=o.data,_=a.attrs,b=[];let C=null,A=null;for(let k=a.directiveStart;k<h;k++){const F=p[k],$=F.inputs,ee=null===_||HC(a)?null:gR($,_);b.push(ee),C=xw($,k,C),A=xw(F.outputs,k,A)}null!==C&&(C.hasOwnProperty("class")&&(a.flags|=16),C.hasOwnProperty("style")&&(a.flags|=32)),a.initialInputs=b,a.inputs=C,a.outputs=A}function ko(o,a,u,h,p,_,b,C){const A=Rr(a,u);let F,k=a.inputs;!C&&null!=k&&(F=k[h])?(Fw(o,u,F,h,p),mi(a)&&Eg(u,a.index)):3&a.type&&(h=function Xr(o){return"class"===o?"className":"for"===o?"htmlFor":"formaction"===o?"formAction":"innerHtml"===o?"innerHTML":"readonly"===o?"readOnly":"tabindex"===o?"tabIndex":o}(h),p=null!=b?b(p,a.value||"",h):p,_.setProperty(A,h,p))}function Eg(o,a){const u=Mr(a,o);16&u[2]||(u[2]|=32)}function Mw(o,a,u,h){let p=!1;if(Wo()){const _=function qi(o,a,u){const h=o.directiveRegistry;let p=null;if(h)for(let _=0;_<h.length;_++){const b=h[_];iw(u,b.selectors,!1)&&(p||(p=[]),Aa(is(u,a),o,b.type),qr(b)?(Cg(o,u),p.unshift(b)):p.push(b))}return p}(o,a,u),b=null===h?null:{"":-1};if(null!==_){p=!0,Ig(u,o.data.length,_.length);for(let F=0;F<_.length;F++){const $=_[F];$.providersResolver&&$.providersResolver($)}let C=!1,A=!1,k=bg(o,a,_.length,null);for(let F=0;F<_.length;F++){const $=_[F];u.mergedAttrs=_o(u.mergedAttrs,$.hostAttrs),V_(o,u,a,k,$),Nw(k,$,b),null!==$.contentQueries&&(u.flags|=8),(null!==$.hostBindings||null!==$.hostAttrs||0!==$.hostVars)&&(u.flags|=128);const ee=$.type.prototype;!C&&(ee.ngOnChanges||ee.ngOnInit||ee.ngDoCheck)&&((o.preOrderHooks||(o.preOrderHooks=[])).push(u.index),C=!0),!A&&(ee.ngOnChanges||ee.ngDoCheck)&&((o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(u.index),A=!0),k++}fI(o,u)}b&&function gI(o,a,u){if(a){const h=o.localNames=[];for(let p=0;p<a.length;p+=2){const _=u[a[p+1]];if(null==_)throw new Me(-301,!1);h.push(a[p],_)}}}(u,h,b)}return u.mergedAttrs=_o(u.mergedAttrs,u.attrs),p}function kw(o,a,u,h,p,_){const b=_.hostBindings;if(b){let C=o.hostBindingOpCodes;null===C&&(C=o.hostBindingOpCodes=[]);const A=~a.index;(function dR(o){let a=o.length;for(;a>0;){const u=o[--a];if("number"==typeof u&&u<0)return u}return 0})(C)!=A&&C.push(A),C.push(h,p,b)}}function pI(o,a){null!==o.hostBindings&&o.hostBindings(1,a)}function Cg(o,a){a.flags|=2,(o.components||(o.components=[])).push(a.index)}function Nw(o,a,u){if(u){if(a.exportAs)for(let h=0;h<a.exportAs.length;h++)u[a.exportAs[h]]=o;qr(a)&&(u[""]=o)}}function Ig(o,a,u){o.flags|=1,o.directiveStart=a,o.directiveEnd=a+u,o.providerIndexes=a}function V_(o,a,u,h,p){o.data[h]=p;const _=p.factory||(p.factory=js(p.type)),b=new Qo(_,qr(p),zd);o.blueprint[h]=b,u[h]=b,kw(o,a,0,h,bg(o,u,p.hostVars,en),p)}function Pw(o,a,u){const h=Rr(a,o),p=uR(u),_=o[10],b=H_(o,Dw(o,p,null,u.onPush?32:16,h,a,_,_.createRenderer(h,u),null,null,null));o[a.index]=b}function xl(o,a,u,h,p,_){const b=Rr(o,a);!function Ow(o,a,u,h,p,_,b){if(null==_)o.removeAttribute(a,p,u);else{const C=null==b?Ae(_):b(_,h||"",p);o.setAttribute(a,p,C,u)}}(a[11],b,_,o.value,u,h,p)}function pR(o,a,u,h,p,_){const b=_[a];if(null!==b){const C=h.setInput;for(let A=0;A<b.length;){const k=b[A++],F=b[A++],$=b[A++];null!==C?h.setInput(u,$,k,F):u[F]=$}}}function gR(o,a){let u=null,h=0;for(;h<a.length;){const p=a[h];if(0!==p)if(5!==p){if("number"==typeof p)break;o.hasOwnProperty(p)&&(null===u&&(u=[]),u.push(p,o[p],a[h+1])),h+=2}else h+=2;else h+=4}return u}function nf(o,a,u,h){return new Array(o,!0,!1,a,null,0,h,u,null,null)}function _I(o,a){const u=Mr(a,o);if(wa(u)){const h=u[1];48&u[2]?Aw(h,u,h.template,u[8]):u[5]>0&&Lw(u)}}function Lw(o){for(let h=Rd(o);null!==h;h=ka(h))for(let p=10;p<h.length;p++){const _=h[p];if(wa(_))if(512&_[2]){const b=_[1];Aw(b,_,b.template,_[8])}else _[5]>0&&Lw(_)}const u=o[1].components;if(null!==u)for(let h=0;h<u.length;h++){const p=Mr(u[h],o);wa(p)&&p[5]>0&&Lw(p)}}function mR(o,a){const u=Mr(a,o),h=u[1];(function _R(o,a){for(let u=a.length;u<o.blueprint.length;u++)a.push(o.blueprint[u])})(h,u),cI(h,u,u[8])}function H_(o,a){return o[13]?o[14][4]=a:o[13]=a,o[14]=a,a}function j_(o){for(;o;){o[2]|=32;const a=xd(o);if(Qa(o)&&!a)return o;o=a}return null}function rf(o,a,u,h=!0){const p=a[10];p.begin&&p.begin();try{Aw(o,a,o.template,u)}catch(b){throw h&&z_(a,b),b}finally{p.end&&p.end()}}function Dg(o,a,u){Ks(0),a(o,u)}function sf(o){return o[7]||(o[7]=[])}function yI(o){return o.cleanup||(o.cleanup=[])}function z_(o,a){const u=o[9],h=u?u.get(gg,null):null;h&&h.handleError(a)}function Fw(o,a,u,h,p){for(let _=0;_<u.length;){const b=u[_++],C=u[_++],A=a[b],k=o.data[b];null!==k.setInput?k.setInput(A,p,h,C):A[C]=p}}function Ua(o,a,u){const h=_i(a,o);!function wc(o,a,u){o.setValue(a,u)}(o[11],h,u)}function Tg(o,a,u){let h=u?o.styles:null,p=u?o.classes:null,_=0;if(null!==a)for(let b=0;b<a.length;b++){const C=a[b];"number"==typeof C?_=C:1==_?p=Ee(p,C):2==_&&(h=Ee(h,C+": "+a[++b]+";"))}u?o.styles=h:o.stylesWithoutHost=h,u?o.classes=p:o.classesWithoutHost=p}function Ag(o,a,u,h,p=!1){for(;null!==u;){const _=a[u.index];if(null!==_&&h.push(kn(_)),gi(_))for(let C=10;C<_.length;C++){const A=_[C],k=A[1].firstChild;null!==k&&Ag(A[1],A,k,h)}const b=u.type;if(8&b)Ag(o,a,u.child,h);else if(32&b){const C=Sd(u,a);let A;for(;A=C();)h.push(A)}else if(16&b){const C=Bh(a,u);if(Array.isArray(C))h.push(...C);else{const A=xd(a[16]);Ag(A[1],A,C,h,!0)}}u=p?u.projectionNext:u.next}return h}class Wd{constructor(a,u){this._lView=a,this._cdRefInjectingView=u,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const a=this._lView,u=a[1];return Ag(u,a,u.firstChild,[])}get context(){return this._lView[8]}set context(a){this._lView[8]=a}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const a=this._lView[3];if(gi(a)){const u=a[8],h=u?u.indexOf(this):-1;h>-1&&(Iu(a,h),gu(u,h))}this._attachedToViewContainer=!1}Du(this._lView[1],this._lView)}onDestroy(a){na(this._lView[1],this._lView,null,a)}markForCheck(){j_(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){rf(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Me(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function mC(o,a){kd(o,a,a[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(a){if(this._attachedToViewContainer)throw new Me(902,!1);this._appRef=a}}class wR extends Wd{constructor(a){super(a),this._view=a}detectChanges(){const a=this._view;rf(a[1],a,a[8],!1)}checkNoChanges(){}get context(){return null}}class Uw extends fg{constructor(a){super(),this.ngModule=a}resolveComponentFactory(a){const u=ge(a);return new qd(u,this.ngModule)}}function vI(o){const a=[];for(let u in o)o.hasOwnProperty(u)&&a.push({propName:o[u],templateName:u});return a}class Vw{constructor(a,u){this.injector=a,this.parentInjector=u}get(a,u,h){const p=this.injector.get(a,ew,h);return p!==ew||u===ew?p:this.parentInjector.get(a,u,h)}}class qd extends TC{constructor(a,u){super(),this.componentDef=a,this.ngModule=u,this.componentType=a.type,this.selector=function KL(o){return o.map(ZL).join(",")}(a.selectors),this.ngContentSelectors=a.ngContentSelectors?a.ngContentSelectors:[],this.isBoundToModule=!!u}get inputs(){return vI(this.componentDef.inputs)}get outputs(){return vI(this.componentDef.outputs)}create(a,u,h,p){let _=(p=p||this.ngModule)instanceof jd?p:p?.injector;_&&null!==this.componentDef.getStandaloneInjector&&(_=this.componentDef.getStandaloneInjector(_)||_);const b=_?new Vw(a,_):a,C=b.get(Jv,null);if(null===C)throw new Me(407,!1);const A=b.get(MC,null),k=C.createRenderer(null,this.componentDef),F=this.componentDef.selectors[0][0]||"div",$=h?function V(o,a,u){return o.selectRootElement(a,u===Ze.ShadowDom)}(k,h,this.componentDef.encapsulation):Bp(k,F,function G_(o){const a=o.toLowerCase();return"svg"===a?"svg":"math"===a?"math":null}(F)),ee=this.componentDef.onPush?288:272,oe=Se(0,null,null,1,0,null,null,null,null,null),Ne=Dw(null,oe,null,ee,null,null,C,k,A,b,null);let et,ut;Ys(Ne);try{const Dt=function af(o,a,u,h,p,_){const b=u[1];u[22]=o;const A=tf(b,22,2,"#host",null),k=A.mergedAttrs=a.hostAttrs;null!==k&&(Tg(A,k,!0),null!==o&&(uu(p,o,k),null!==A.classes&&Nd(p,o,A.classes),null!==A.styles&&b_(p,o,A.styles)));const F=h.createRenderer(o,a),$=Dw(u,uR(a),null,a.onPush?32:16,u[22],A,h,F,_||null,null,null);return b.firstCreatePass&&(Aa(is(A,u),b,a.type),Cg(b,A),Ig(A,u.length,1)),H_(u,$),u[22]=$}($,this.componentDef,Ne,C,k);if($)if(h)uu(k,$,["ng-version",kC.full]);else{const{attrs:Ut,classes:He}=function zx(o){const a=[],u=[];let h=1,p=2;for(;h<o.length;){let _=o[h];if("string"==typeof _)2===p?""!==_&&a.push(_,o[++h]):8===p&&u.push(_);else{if(!er(p))break;p=_}h++}return{attrs:a,classes:u}}(this.componentDef.selectors[0]);Ut&&uu(k,$,Ut),He&&He.length>0&&Nd(k,$,He.join(" "))}if(ut=ya(oe,22),void 0!==u){const Ut=ut.projection=[];for(let He=0;He<this.ngContentSelectors.length;He++){const Qt=u[He];Ut.push(null!=Qt?Array.from(Qt):null)}}et=function wI(o,a,u,h){const p=u[1],_=function cR(o,a,u){const h=sr();o.firstCreatePass&&(u.providersResolver&&u.providersResolver(u),V_(o,h,a,bg(o,a,1,null),u),fI(o,h));const p=vi(a,o,h.directiveStart,h);$t(p,a);const _=Rr(h,a);return _&&$t(_,a),p}(p,u,a);if(o[8]=u[8]=_,null!==h)for(const C of h)C(_,a);if(a.contentQueries){const C=sr();a.contentQueries(1,_,C.directiveStart)}const b=sr();return!p.firstCreatePass||null===a.hostBindings&&null===a.hostAttrs||(Js(b.index),kw(u[1],b,0,b.directiveStart,b.directiveEnd,a),pI(a,_)),_}(Dt,this.componentDef,Ne,[IR]),cI(oe,Ne,null)}finally{Qs()}return new ER(this.componentType,et,Zh(ut,Ne),Ne,ut)}}class ER extends class Px{}{constructor(a,u,h,p,_){super(),this.location=h,this._rootLView=p,this._tNode=_,this.instance=u,this.hostView=this.changeDetectorRef=new wR(p),this.componentType=a}setInput(a,u){const h=this._tNode.inputs;let p;if(null!==h&&(p=h[a])){const _=this._rootLView;Fw(_[1],_,p,a,u),Eg(_,this._tNode.index)}}get injector(){return new vo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(a){this.hostView.onDestroy(a)}}function IR(){const o=sr();ic(Oe()[1],o)}function Hw(o){let a=function bI(o){return Object.getPrototypeOf(o.prototype).constructor}(o.type),u=!0;const h=[o];for(;a;){let p;if(qr(o))p=a.\u0275cmp||a.\u0275dir;else{if(a.\u0275cmp)throw new Me(903,!1);p=a.\u0275dir}if(p){if(u){h.push(p);const b=o;b.inputs=jw(o.inputs),b.declaredInputs=jw(o.declaredInputs),b.outputs=jw(o.outputs);const C=p.hostBindings;C&&SR(o,C);const A=p.viewQuery,k=p.contentQueries;if(A&&TR(o,A),k&&AR(o,k),ue(o.inputs,p.inputs),ue(o.declaredInputs,p.declaredInputs),ue(o.outputs,p.outputs),qr(p)&&p.data.animation){const F=o.data;F.animation=(F.animation||[]).concat(p.data.animation)}}const _=p.features;if(_)for(let b=0;b<_.length;b++){const C=_[b];C&&C.ngInherit&&C(o),C===Hw&&(u=!1)}}a=Object.getPrototypeOf(a)}!function DR(o){let a=0,u=null;for(let h=o.length-1;h>=0;h--){const p=o[h];p.hostVars=a+=p.hostVars,p.hostAttrs=_o(p.hostAttrs,u=_o(u,p.hostAttrs))}}(h)}function jw(o){return o===nr?{}:o===Wt?[]:o}function TR(o,a){const u=o.viewQuery;o.viewQuery=u?(h,p)=>{a(h,p),u(h,p)}:a}function AR(o,a){const u=o.contentQueries;o.contentQueries=u?(h,p,_)=>{a(h,p,_),u(h,p,_)}:a}function SR(o,a){const u=o.hostBindings;o.hostBindings=u?(h,p)=>{a(h,p),u(h,p)}:a}let Sg=null;function ku(){if(!Sg){const o=Mn.Symbol;if(o&&o.iterator)Sg=o.iterator;else{const a=Object.getOwnPropertyNames(Map.prototype);for(let u=0;u<a.length;++u){const h=a[u];"entries"!==h&&"size"!==h&&Map.prototype[h]===Map.prototype.entries&&(Sg=h)}}}return Sg}function xg(o){return!!q_(o)&&(Array.isArray(o)||!(o instanceof Map)&&ku()in o)}function q_(o){return null!==o&&("function"==typeof o||"object"==typeof o)}function Va(o,a,u){return o[a]=u}function Rs(o,a,u){return!Object.is(o[a],u)&&(o[a]=u,!0)}function Zd(o,a,u,h){const p=Rs(o,a,u);return Rs(o,a+1,h)||p}function Rg(o,a,u,h){const p=Oe();return Rs(p,ns(),a)&&(on(),xl(zn(),p,o,a,u,h)),Rg}function uf(o,a,u,h){return Rs(o,ns(),u)?a+Ae(u)+h:en}function Kd(o,a,u,h,p,_){const C=Zd(o,function ts(){return Ft.lFrame.bindingIndex}(),u,p);return Mi(2),C?a+Ae(u)+h+Ae(p)+_:en}function LR(o,a,u,h,p,_,b,C){const A=Oe(),k=on(),F=o+22,$=k.firstCreatePass?function gF(o,a,u,h,p,_,b,C,A){const k=a.consts,F=tf(a,o,4,b||null,Ri(k,C));Mw(a,u,F,Ri(k,A)),ic(a,F);const $=F.tViews=Se(2,F,h,p,_,a.directiveRegistry,a.pipeRegistry,null,a.schemas,k);return null!==a.queries&&(a.queries.template(a,F),$.queries=a.queries.embeddedTView(F)),F}(F,k,A,a,u,h,p,_,b):k.data[F];si($,!1);const ee=A[11].createComment("");ls(k,A,ee,$),$t(ee,A),H_(A,A[F]=nf(ee,A,ee,$)),ha($)&&dI(k,A,$),null!=b&&hI(A,$,C)}function Ng(o){return xi(function On(){return Ft.lFrame.contextLView}(),22+o)}function zw(o,a,u){const h=Oe();return Rs(h,ns(),a)&&ko(on(),zn(),h,o,a,h[11],u,!1),zw}function Pg(o,a,u,h,p){const b=p?"class":"style";Fw(o,u,a.inputs[b],b,h)}function df(o,a,u,h){const p=Oe(),_=on(),b=22+o,C=p[11],A=p[b]=Bp(C,a,function wh(){return Ft.lFrame.currentNamespace}()),k=_.firstCreatePass?function Gw(o,a,u,h,p,_,b){const C=a.consts,k=tf(a,o,2,p,Ri(C,_));return Mw(a,u,k,Ri(C,b)),null!==k.attrs&&Tg(k,k.attrs,!1),null!==k.mergedAttrs&&Tg(k,k.mergedAttrs,!0),null!==a.queries&&a.queries.elementStart(a,k),k}(b,_,p,0,a,u,h):_.data[b];si(k,!0);const F=k.mergedAttrs;null!==F&&uu(C,A,F);const $=k.classes;null!==$&&Nd(C,A,$);const ee=k.styles;return null!==ee&&b_(C,A,ee),64!=(64&k.flags)&&ls(_,p,A,k),0===function eu(){return Ft.lFrame.elementDepthCount}()&&$t(A,p),function tu(){Ft.lFrame.elementDepthCount++}(),ha(k)&&(dI(_,p,k),lR(_,k,p)),null!==h&&hI(p,k),df}function hf(){let o=sr();Zo()?Ko():(o=o.parent,si(o,!1));const a=o;!function nu(){Ft.lFrame.elementDepthCount--}();const u=on();return u.firstCreatePass&&(ic(u,o),Ya(o)&&u.queries.elementEnd(o)),null!=a.classesWithoutHost&&function yi(o){return 0!=(16&o.flags)}(a)&&Pg(u,a,Oe(),a.classesWithoutHost,!0),null!=a.stylesWithoutHost&&function rs(o){return 0!=(32&o.flags)}(a)&&Pg(u,a,Oe(),a.stylesWithoutHost,!1),hf}function Og(o,a,u,h){return df(o,a,u,h),hf(),Og}function ff(o,a,u){const h=Oe(),p=on(),_=o+22,b=p.firstCreatePass?function Ww(o,a,u,h,p){const _=a.consts,b=Ri(_,h),C=tf(a,o,8,"ng-container",b);return null!==b&&Tg(C,b,!0),Mw(a,u,C,Ri(_,p)),null!==a.queries&&a.queries.elementStart(a,C),C}(_,p,h,a,u):p.data[_];si(b,!0);const C=h[_]=h[11].createComment("");return ls(p,h,C,b),$t(C,h),ha(b)&&(dI(p,h,b),lR(p,b,h)),null!=u&&hI(h,b),ff}function Mc(){let o=sr();const a=on();return Zo()?Ko():(o=o.parent,si(o,!1)),a.firstCreatePass&&(ic(a,o),Ya(o)&&a.queries.elementEnd(o)),Mc}function qw(o,a,u){return ff(o,a,u),Mc(),qw}function pf(){return Oe()}function Zw(o){return!!o&&"function"==typeof o.then}function xI(o){return!!o&&"function"==typeof o.subscribe}const RI=xI;function Kw(o,a,u,h){const p=Oe(),_=on(),b=sr();return function kI(o,a,u,h,p,_,b,C){const A=ha(h),F=o.firstCreatePass&&yI(o),$=a[8],ee=sf(a);let oe=!0;if(3&h.type||C){const ut=Rr(h,a),Dt=C?C(ut):ut,Ut=ee.length,He=C?Hn=>C(kn(Hn[h.index])):h.index;let Qt=null;if(!C&&A&&(Qt=function FR(o,a,u,h){const p=o.cleanup;if(null!=p)for(let _=0;_<p.length-1;_+=2){const b=p[_];if(b===u&&p[_+1]===h){const C=a[7],A=p[_+2];return C.length>A?C[A]:null}"string"==typeof b&&(_+=2)}return null}(o,a,p,h.index)),null!==Qt)(Qt.__ngLastListenerFn__||Qt).__ngNextListenerFn__=_,Qt.__ngLastListenerFn__=_,oe=!1;else{_=PI(h,a,$,_,!1);const Hn=u.listen(Dt,p,_);ee.push(_,Hn),F&&F.push(p,He,Ut,Ut+1)}}else _=PI(h,a,$,_,!1);const Ne=h.outputs;let et;if(oe&&null!==Ne&&(et=Ne[p])){const ut=et.length;if(ut)for(let Dt=0;Dt<ut;Dt+=2){const Dr=a[et[Dt]][et[Dt+1]].subscribe(_),qc=ee.length;ee.push(_,Dr),F&&F.push(p,h.index,qc,-(qc+1))}}}(_,p,p[11],b,o,a,0,h),Kw}function NI(o,a,u,h){try{return!1!==u(h)}catch(p){return z_(o,p),!1}}function PI(o,a,u,h,p){return function _(b){if(b===Function)return h;j_(2&o.flags?Mr(o.index,a):a);let A=NI(a,0,h,b),k=_.__ngNextListenerFn__;for(;k;)A=NI(a,0,k,b)&&A,k=k.__ngNextListenerFn__;return p&&!1===A&&(b.preventDefault(),b.returnValue=!1),A}}function OI(o=1){return function dd(o){return(Ft.lFrame.contextLView=function hd(o,a){for(;o>0;)a=a[15],o--;return a}(o,Ft.lFrame.contextLView))[8]}(o)}function kc(o,a){let u=null;const h=function sw(o){const a=o.attrs;if(null!=a){const u=a.indexOf(5);if(0==(1&u))return a[u+1]}return null}(o);for(let p=0;p<a.length;p++){const _=a[p];if("*"!==_){if(null===h?iw(o,_,!0):$x(h,_))return p}else u=p}return u}function Nu(o){const a=Oe()[16][6];if(!a.projection){const h=a.projection=fc(o?o.length:1,null),p=h.slice();let _=a.child;for(;null!==_;){const b=o?kc(_,o):0;null!==b&&(p[b]?p[b].projectionNext=_:h[b]=_,p[b]=_),_=_.next}}}function LI(o,a=0,u){const h=Oe(),p=on(),_=tf(p,22+o,16,null,u||null);null===_.projection&&(_.projection=a),Ko(),64!=(64&_.flags)&&function v_(o,a,u){Hh(a[11],0,a,u,Tu(o,u,a),Gp(u.parent||a[6],u,a))}(p,h,_)}function Yw(o,a,u){return Qw(o,"",a,"",u),Yw}function Qw(o,a,u,h,p){const _=Oe(),b=uf(_,a,u,h);return b!==en&&ko(on(),zn(),_,o,b,_[11],p,!1),Qw}function Lg(o,a,u,h,p){const _=o[u+1],b=null===a;let C=h?Gn(_):Al(_),A=!1;for(;0!==C&&(!1===A||b);){const F=o[C+1];HI(o[C],a)&&(A=!0,o[C+1]=h?O_(F):Xh(F)),C=h?Gn(F):Al(F)}A&&(o[u+1]=h?Xh(_):O_(_))}function HI(o,a){return null===o||null==a||(Array.isArray(o)?o[1]:o)===a||!(!Array.isArray(o)||"string"!=typeof a)&&Sa(o,a)>=0}function Fg(o,a){return function ra(o,a,u,h){const p=Oe(),_=on(),b=Mi(2);_.firstUpdatePass&&function tb(o,a,u,h){const p=o.data;if(null===p[u+1]){const _=p[Vr()],b=function K_(o,a){return a>=o.expandoStartIndex}(o,u);(function rb(o,a){return 0!=(o.flags&(a?16:32))})(_,h)&&null===a&&!b&&(a=!1),a=function BR(o,a,u,h){const p=function ou(o){const a=Ft.lFrame.currentDirectiveIndex;return-1===a?null:o[a]}(o);let _=h?a.residualClasses:a.residualStyles;if(null===p)0===(h?a.classBindings:a.styleBindings)&&(u=yf(u=Nl(null,o,a,u,h),a.attrs,h),_=null);else{const b=a.directiveStylingLast;if(-1===b||o[b]!==p)if(u=Nl(p,o,a,u,h),null===_){let A=function ZI(o,a,u){const h=u?a.classBindings:a.styleBindings;if(0!==Al(h))return o[Gn(h)]}(o,a,h);void 0!==A&&Array.isArray(A)&&(A=Nl(null,o,a,A[1],h),A=yf(A,a.attrs,h),function KI(o,a,u,h){o[Gn(u?a.classBindings:a.styleBindings)]=h}(o,a,h,A))}else _=function HR(o,a,u){let h;const p=a.directiveEnd;for(let _=1+a.directiveStylingLast;_<p;_++)h=yf(h,o[_].hostAttrs,u);return yf(h,a.attrs,u)}(o,a,h)}return void 0!==_&&(h?a.residualClasses=_:a.residualStyles=_),u}(p,_,a,h),function VI(o,a,u,h,p,_){let b=_?a.classBindings:a.styleBindings,C=Gn(b),A=Al(b);o[h]=u;let F,k=!1;if(Array.isArray(u)){const $=u;F=$[1],(null===F||Sa($,F)>0)&&(k=!0)}else F=u;if(p)if(0!==A){const ee=Gn(o[C+1]);o[h+1]=Ac(ee,C),0!==ee&&(o[ee+1]=vg(o[ee+1],h)),o[C+1]=function gw(o,a){return 131071&o|a<<17}(o[C+1],h)}else o[h+1]=Ac(C,0),0!==C&&(o[C+1]=vg(o[C+1],h)),C=h;else o[h+1]=Ac(A,0),0===C?C=h:o[A+1]=vg(o[A+1],h),A=h;k&&(o[h+1]=Xh(o[h+1])),Lg(o,F,h,!0),Lg(o,F,h,!1),function BI(o,a,u,h,p){const _=p?o.residualClasses:o.residualStyles;null!=_&&"string"==typeof a&&Sa(_,a)>=0&&(u[h+1]=O_(u[h+1]))}(a,F,o,h,_),b=Ac(C,A),_?a.classBindings=b:a.styleBindings=b}(p,_,a,u,b,h)}}(_,o,b,h),a!==en&&Rs(p,b,a)&&function cr(o,a,u,h,p,_,b,C){if(!(3&a.type))return;const A=o.data,k=A[C+1];Ug(function ef(o){return 1==(1&o)}(k)?Y_(A,a,u,p,Al(k),b):void 0)||(Ug(_)||function P_(o){return 2==(2&o)}(k)&&(_=Y_(A,null,u,p,C,b)),function w_(o,a,u,h,p){if(a)p?o.addClass(u,h):o.removeClass(u,h);else{let _=-1===h.indexOf("-")?void 0:Io.DashCase;null==p?o.removeStyle(u,h,_):("string"==typeof p&&p.endsWith("!important")&&(p=p.slice(0,-10),_|=Io.Important),o.setStyle(u,h,p,_))}}(h,b,_i(Vr(),u),p,_))}(_,_.data[Vr()],p,p[11],o,p[b+1]=function vf(o,a){return null==o||("string"==typeof a?o+=a:"object"==typeof o&&(o=ye(Bi(o)))),o}(a,u),h,b)}(o,a,null,!0),Fg}function Nl(o,a,u,h,p){let _=null;const b=u.directiveEnd;let C=u.directiveStylingLast;for(-1===C?C=u.directiveStart:C++;C<b&&(_=a[C],h=yf(h,_.hostAttrs,p),_!==o);)C++;return null!==o&&(u.directiveStylingLast=C),h}function yf(o,a,u){const h=u?1:2;let p=-1;if(null!==a)for(let _=0;_<a.length;_++){const b=a[_];"number"==typeof b?p=b:p===h&&(Array.isArray(o)||(o=void 0===o?[]:["",o]),Pi(o,b,!!u||a[++_]))}return void 0===o?null:o}function Y_(o,a,u,h,p,_){const b=null===a;let C;for(;p>0;){const A=o[p],k=Array.isArray(A),F=k?A[1]:A,$=null===F;let ee=u[p+1];ee===en&&(ee=$?Wt:void 0);let oe=$?Dh(ee,h):F===h?ee:void 0;if(k&&!Ug(oe)&&(oe=Dh(A,h)),Ug(oe)&&(C=oe,b))return C;const Ne=o[p+1];p=b?Gn(Ne):Al(Ne)}if(null!==a){let A=_?a.residualClasses:a.residualStyles;null!=A&&(C=Dh(A,h))}return C}function Ug(o){return void 0!==o}function Vg(o,a=""){const u=Oe(),h=on(),p=o+22,_=h.firstCreatePass?tf(h,p,1,a,null):h.data[p],b=u[p]=function Vp(o,a){return o.createText(a)}(u[11],a);ls(h,u,b,_),si(_,!1)}function Q_(o){return Bg("",o,""),Q_}function Bg(o,a,u){const h=Oe(),p=uf(h,o,a,u);return p!==en&&Ua(h,Vr(),p),Bg}function J_(o,a,u,h,p){const _=Oe(),b=Kd(_,o,a,u,h,p);return b!==en&&Ua(_,Vr(),b),J_}const Pl=void 0;var QR=["en",[["a","p"],["AM","PM"],Pl],[["AM","PM"],Pl,Pl],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Pl,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Pl,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Pl,"{1} 'at' {0}",Pl],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function iD(o){const u=Math.floor(Math.abs(o)),h=o.toString().replace(/^[^.]*\.?/,"").length;return 1===u&&0===h?1:5}];let Ol={};function yb(o){const a=function XR(o){return o.toLowerCase().replace(/_/g,"-")}(o);let u=wb(a);if(u)return u;const h=a.split("-")[0];if(u=wb(h),u)return u;if("en"===h)return QR;throw new Me(701,!1)}function vb(o){return yb(o)[Kt.PluralCase]}function wb(o){return o in Ol||(Ol[o]=Mn.ng&&Mn.ng.common&&Mn.ng.common.locales&&Mn.ng.common.locales[o]),Ol[o]}var Kt=(()=>((Kt=Kt||{})[Kt.LocaleId=0]="LocaleId",Kt[Kt.DayPeriodsFormat=1]="DayPeriodsFormat",Kt[Kt.DayPeriodsStandalone=2]="DayPeriodsStandalone",Kt[Kt.DaysFormat=3]="DaysFormat",Kt[Kt.DaysStandalone=4]="DaysStandalone",Kt[Kt.MonthsFormat=5]="MonthsFormat",Kt[Kt.MonthsStandalone=6]="MonthsStandalone",Kt[Kt.Eras=7]="Eras",Kt[Kt.FirstDayOfWeek=8]="FirstDayOfWeek",Kt[Kt.WeekendRange=9]="WeekendRange",Kt[Kt.DateFormat=10]="DateFormat",Kt[Kt.TimeFormat=11]="TimeFormat",Kt[Kt.DateTimeFormat=12]="DateTimeFormat",Kt[Kt.NumberSymbols=13]="NumberSymbols",Kt[Kt.NumberFormats=14]="NumberFormats",Kt[Kt.CurrencyCode=15]="CurrencyCode",Kt[Kt.CurrencySymbol=16]="CurrencySymbol",Kt[Kt.CurrencyName=17]="CurrencyName",Kt[Kt.Currencies=18]="Currencies",Kt[Kt.Directionality=19]="Directionality",Kt[Kt.PluralCase=20]="PluralCase",Kt[Kt.ExtraData=21]="ExtraData",Kt))();const Xd="en-US";let bb=Xd;function Gg(o,a,u,h,p){if(o=te(o),Array.isArray(o))for(let _=0;_<o.length;_++)Gg(o[_],a,u,h,p);else{const _=on(),b=Oe();let C=xu(o)?o:te(o.provide),A=dg(o);const k=sr(),F=1048575&k.providerIndexes,$=k.directiveStart,ee=k.providerIndexes>>20;if(xu(o)||!o.multi){const oe=new Qo(A,p,zd),Ne=Pu(C,a,p?F:F+ee,$);-1===Ne?(Aa(is(k,b),_,C),Df(_,o,a.length),a.push(C),k.directiveStart++,k.directiveEnd++,p&&(k.providerIndexes+=1048576),u.push(oe),b.push(oe)):(u[Ne]=oe,b[Ne]=oe)}else{const oe=Pu(C,a,F+ee,$),Ne=Pu(C,a,F,F+ee),et=oe>=0&&u[oe],ut=Ne>=0&&u[Ne];if(p&&!ut||!p&&!et){Aa(is(k,b),_,C);const Dt=function Ll(o,a,u,h,p){const _=new Qo(o,u,zd);return _.multi=[],_.index=a,_.componentProviders=0,ay(_,p,h&&!u),_}(p?TD:Uc,u.length,p,h,A);!p&&ut&&(u[Ne].providerFactory=Dt),Df(_,o,a.length,0),a.push(C),k.directiveStart++,k.directiveEnd++,p&&(k.providerIndexes+=1048576),u.push(Dt),b.push(Dt)}else Df(_,o,oe>-1?oe:Ne,ay(u[p?Ne:oe],A,!p&&h));!p&&h&&ut&&u[Ne].componentProviders++}}}function Df(o,a,u,h){const p=xu(a),_=function CC(o){return!!o.useClass}(a);if(p||_){const A=(_?te(a.useClass):a).prototype.ngOnDestroy;if(A){const k=o.destroyHooks||(o.destroyHooks=[]);if(!p&&a.multi){const F=k.indexOf(u);-1===F?k.push(u,[h,A]):k[F+1].push(h,A)}else k.push(u,A)}}}function ay(o,a,u){return u&&o.componentProviders++,o.multi.push(a)-1}function Pu(o,a,u,h){for(let p=u;p<h;p++)if(a[p]===o)return p;return-1}function Uc(o,a,u,h){return Wg(this.multi,[])}function TD(o,a,u,h){const p=this.multi;let _;if(this.providerFactory){const b=this.providerFactory.componentProviders,C=vi(u,u[1],this.providerFactory.index,h);_=C.slice(0,b),Wg(p,_);for(let A=b;A<C.length;A++)_.push(C[A])}else _=[],Wg(p,_);return _}function Wg(o,a){for(let u=0;u<o.length;u++)a.push((0,o[u])());return a}function AD(o,a=[]){return u=>{u.providersResolver=(h,p)=>function SF(o,a,u){const h=on();if(h.firstCreatePass){const p=qr(o);Gg(u,h.data,h.blueprint,p,!0),Gg(a,h.data,h.blueprint,p,!1)}}(h,p?p(o):o,a)}}class Tf{}class ly{}function Sb(o,a){return new SD(o,a??null)}class SD extends Tf{constructor(a,u){super(),this._parent=u,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Uw(this);const h=tn(a);this._bootstrapComponents=Ru(h.bootstrap),this._r3Injector=qC(a,u,[{provide:Tf,useValue:this},{provide:fg,useValue:this.componentFactoryResolver}],ye(a),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(a)}get injector(){return this._r3Injector}destroy(){const a=this._r3Injector;!a.destroyed&&a.destroy(),this.destroyCbs.forEach(u=>u()),this.destroyCbs=null}onDestroy(a){this.destroyCbs.push(a)}}class xD extends ly{constructor(a){super(),this.moduleType=a}create(a){return new SD(this.moduleType,a)}}class Fl extends Tf{constructor(a,u,h){super(),this.componentFactoryResolver=new Uw(this),this.instance=null;const p=new cg([...a,{provide:Tf,useValue:this},{provide:fg,useValue:this.componentFactoryResolver}],u||A_(),h,new Set(["environment"]));this.injector=p,p.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(a){this.injector.onDestroy(a)}}function uy(o,a,u=null){return new Fl(o,a,u).injector}let RD=(()=>{class o{constructor(u){this._injector=u,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(u){if(!u.standalone)return null;if(!this.cachedInjectors.has(u.id)){const h=wC(0,u.type),p=h.length>0?uy([h],this._injector,`Standalone[${u.type.name}]`):null;this.cachedInjectors.set(u.id,p)}return this.cachedInjectors.get(u.id)}ngOnDestroy(){try{for(const u of this.cachedInjectors.values())null!==u&&u.destroy()}finally{this.cachedInjectors.clear()}}}return o.\u0275prov=qe({token:o,providedIn:"environment",factory:()=>new o(pr(jd))}),o})();function Zi(o){o.getStandaloneInjector=a=>a.get(RD).getOrCreateStandaloneInjector(o)}function Ou(o,a,u){const h=oi()+o,p=Oe();return p[h]===en?Va(p,h,u?a.call(u):a()):function lf(o,a){return o[a]}(p,h)}function Ms(o,a,u,h){return VM(Oe(),oi(),o,a,u,h)}function xb(o,a,u,h,p){return BM(Oe(),oi(),o,a,u,h,p)}function Hc(o,a){const u=o[a];return u===en?void 0:u}function VM(o,a,u,h,p,_){const b=a+u;return Rs(o,b,p)?Va(o,b+1,_?h.call(_,p):h(p)):Hc(o,b+1)}function BM(o,a,u,h,p,_,b){const C=a+u;return Zd(o,C,p,_)?Va(o,C+2,b?h.call(b,p,_):h(p,_)):Hc(o,C+2)}function UD(o,a){const u=on();let h;const p=o+22;u.firstCreatePass?(h=function HM(o,a){if(a)for(let u=a.length-1;u>=0;u--){const h=a[u];if(o===h.name)return h}}(a,u.pipeRegistry),u.data[p]=h,h.onDestroy&&(u.destroyHooks||(u.destroyHooks=[])).push(p,h.onDestroy)):h=u.data[p];const _=h.factory||(h.factory=js(h.type)),b=En(zd);try{const C=G(!1),A=_();return G(C),function mF(o,a,u,h){u>=o.data.length&&(o.data[u]=null,o.blueprint[u]=null),a[u]=h}(u,Oe(),p,A),A}finally{En(b)}}function VD(o,a,u){const h=o+22,p=Oe(),_=xi(p,h);return Kg(p,h)?VM(p,oi(),a,_.transform,u,_):_.transform(u)}function BD(o,a,u,h){const p=o+22,_=Oe(),b=xi(_,p);return Kg(_,p)?BM(_,oi(),a,b.transform,u,h,b):b.transform(u,h)}function Kg(o,a){return o[1].data[a].pure}function Nb(o){return a=>{setTimeout(o,void 0,a)}}const Vl=class zM extends c.x{constructor(a=!1){super(),this.__isAsync=a}emit(a){super.next(a)}subscribe(a,u,h){let p=a,_=u||(()=>null),b=h;if(a&&"object"==typeof a){const A=a;p=A.next?.bind(A),_=A.error?.bind(A),b=A.complete?.bind(A)}this.__isAsync&&(_=Nb(_),p&&(p=Nb(p)),b&&(b=Nb(b)));const C=super.subscribe({next:p,error:_,complete:b});return a instanceof B.w0&&a.add(C),C}};function GM(){return this._results[ku()]()}class Pb{constructor(a=!1){this._emitDistinctChangesOnly=a,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const u=ku(),h=Pb.prototype;h[u]||(h[u]=GM)}get changes(){return this._changes||(this._changes=new Vl)}get(a){return this._results[a]}map(a){return this._results.map(a)}filter(a){return this._results.filter(a)}find(a){return this._results.find(a)}reduce(a,u){return this._results.reduce(a,u)}forEach(a){this._results.forEach(a)}some(a){return this._results.some(a)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(a,u){const h=this;h.dirty=!1;const p=ai(a);(this._changesDetected=!function bd(o,a,u){if(o.length!==a.length)return!1;for(let h=0;h<o.length;h++){let p=o[h],_=a[h];if(u&&(p=u(p),_=u(_)),_!==p)return!1}return!0}(h._results,p,u))&&(h._results=p,h.length=p.length,h.last=p[this.length-1],h.first=p[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Af=(()=>{class o{}return o.__NG_ELEMENT_ID__=qM,o})();const dy=Af,WM=class extends dy{constructor(a,u,h){super(),this._declarationLView=a,this._declarationTContainer=u,this.elementRef=h}createEmbeddedView(a,u){const h=this._declarationTContainer.tViews,p=Dw(this._declarationLView,h,a,16,null,h.declTNode,null,null,null,null,u||null);p[17]=this._declarationLView[this._declarationTContainer.index];const b=this._declarationLView[19];return null!==b&&(p[19]=b.createEmbeddedView(h)),cI(h,p,a),new Wd(p)}};function qM(){return ei(sr(),Oe())}function ei(o,a){return 4&o.type?new WM(a,o,Zh(o,a)):null}let Yg=(()=>{class o{}return o.__NG_ELEMENT_ID__=Qg,o})();function Qg(){return Jg(sr(),Oe())}const jD=Yg,Ob=class extends jD{constructor(a,u,h){super(),this._lContainer=a,this._hostTNode=u,this._hostLView=h}get element(){return Zh(this._hostTNode,this._hostLView)}get injector(){return new vo(this._hostTNode,this._hostLView)}get parentInjector(){const a=ac(this._hostTNode,this._hostLView);if(cu(a)){const u=T(a,this._hostLView),h=ro(a);return new vo(u[1].data[h+8],u)}return new vo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(a){const u=jc(this._lContainer);return null!==u&&u[a]||null}get length(){return this._lContainer.length-10}createEmbeddedView(a,u,h){let p,_;"number"==typeof h?p=h:null!=h&&(p=h.index,_=h.injector);const b=a.createEmbeddedView(u||{},_);return this.insert(b,p),b}createComponent(a,u,h,p,_){const b=a&&!function Cs(o){return"function"==typeof o}(a);let C;if(b)C=u;else{const $=u||{};C=$.index,h=$.injector,p=$.projectableNodes,_=$.environmentInjector||$.ngModuleRef}const A=b?a:new qd(ge(a)),k=h||this.parentInjector;if(!_&&null==A.ngModule){const ee=(b?k:this.parentInjector).get(jd,null);ee&&(_=ee)}const F=A.create(k,p,void 0,_);return this.insert(F.hostView,C),F}insert(a,u){const h=a._lView,p=h[1];if(function Go(o){return gi(o[3])}(h)){const F=this.indexOf(a);if(-1!==F)this.detach(F);else{const $=h[3],ee=new Ob($,$[6],$[3]);ee.detach(ee.indexOf(a))}}const _=this._adjustIndex(u),b=this._lContainer;!function Hv(o,a,u,h){const p=10+h,_=u.length;h>0&&(u[p-1][4]=a),h<_-10?(a[4]=u[p],Dp(u,10+h,a)):(u.push(a),a[4]=null),a[3]=u;const b=a[17];null!==b&&u!==b&&function jv(o,a){const u=o[9];a[16]!==a[3][3][16]&&(o[2]=!0),null===u?o[9]=[a]:u.push(a)}(b,a);const C=a[19];null!==C&&C.insertView(o),a[2]|=64}(p,h,b,_);const C=Zp(_,b),A=h[11],k=Uh(A,b[7]);return null!==k&&function Hp(o,a,u,h,p,_){h[0]=p,h[6]=a,kd(o,h,u,1,p,_)}(p,b[6],A,h,k,C),a.attachToViewContainerRef(),Dp(Lu(b),_,a),a}move(a,u){return this.insert(a,u)}indexOf(a){const u=jc(this._lContainer);return null!==u?u.indexOf(a):-1}remove(a){const u=this._adjustIndex(a,-1),h=Iu(this._lContainer,u);h&&(gu(Lu(this._lContainer),u),Du(h[1],h))}detach(a){const u=this._adjustIndex(a,-1),h=Iu(this._lContainer,u);return h&&null!=gu(Lu(this._lContainer),u)?new Wd(h):null}_adjustIndex(a,u=0){return a??this.length+u}};function jc(o){return o[8]}function Lu(o){return o[8]||(o[8]=[])}function Jg(o,a){let u;const h=a[o.index];if(gi(h))u=h;else{let p;if(8&o.type)p=kn(h);else{const _=a[11];p=_.createComment("");const b=Rr(o,a);Pa(_,Uh(_,b),p,function zp(o,a){return o.nextSibling(a)}(_,b),!1)}a[o.index]=u=nf(h,a,p,o),H_(a,u)}return new Ob(u,o,a)}class Te{constructor(a){this.queryList=a,this.matches=null}clone(){return new Te(this.queryList)}setDirty(){this.queryList.setDirty()}}class Xg{constructor(a=[]){this.queries=a}createEmbeddedView(a){const u=a.queries;if(null!==u){const h=null!==a.contentQueries?a.contentQueries[0]:u.length,p=[];for(let _=0;_<h;_++){const b=u.getByIndex(_);p.push(this.queries[b.indexInDeclarationView].clone())}return new Xg(p)}return null}insertView(a){this.dirtyQueriesWithMatches(a)}detachView(a){this.dirtyQueriesWithMatches(a)}dirtyQueriesWithMatches(a){for(let u=0;u<this.queries.length;u++)null!==ZD(a,u).matches&&this.queries[u].setDirty()}}class $D{constructor(a,u,h=null){this.predicate=a,this.flags=u,this.read=h}}class Fu{constructor(a=[]){this.queries=a}elementStart(a,u){for(let h=0;h<this.queries.length;h++)this.queries[h].elementStart(a,u)}elementEnd(a){for(let u=0;u<this.queries.length;u++)this.queries[u].elementEnd(a)}embeddedTView(a){let u=null;for(let h=0;h<this.length;h++){const p=null!==u?u.length:0,_=this.getByIndex(h).embeddedTView(a,p);_&&(_.indexInDeclarationView=h,null!==u?u.push(_):u=[_])}return null!==u?new Fu(u):null}template(a,u){for(let h=0;h<this.queries.length;h++)this.queries[h].template(a,u)}getByIndex(a){return this.queries[a]}get length(){return this.queries.length}track(a){this.queries.push(a)}}class Ub{constructor(a,u=-1){this.metadata=a,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=u}elementStart(a,u){this.isApplyingToNode(u)&&this.matchTNode(a,u)}elementEnd(a){this._declarationNodeIndex===a.index&&(this._appliesToNextNode=!1)}template(a,u){this.elementStart(a,u)}embeddedTView(a,u){return this.isApplyingToNode(a)?(this.crossesNgTemplate=!0,this.addMatch(-a.index,u),new Ub(this.metadata)):null}isApplyingToNode(a){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const u=this._declarationNodeIndex;let h=a.parent;for(;null!==h&&8&h.type&&h.index!==u;)h=h.parent;return u===(null!==h?h.index:-1)}return this._appliesToNextNode}matchTNode(a,u){const h=this.metadata.predicate;if(Array.isArray(h))for(let p=0;p<h.length;p++){const _=h[p];this.matchTNodeWithReadOption(a,u,em(u,_)),this.matchTNodeWithReadOption(a,u,lc(u,a,_,!1,!1))}else h===Af?4&u.type&&this.matchTNodeWithReadOption(a,u,-1):this.matchTNodeWithReadOption(a,u,lc(u,a,h,!1,!1))}matchTNodeWithReadOption(a,u,h){if(null!==h){const p=this.metadata.read;if(null!==p)if(p===pg||p===Yg||p===Af&&4&u.type)this.addMatch(u.index,-2);else{const _=lc(u,a,p,!1,!1);null!==_&&this.addMatch(u.index,_)}else this.addMatch(u.index,h)}}addMatch(a,u){null===this.matches?this.matches=[a,u]:this.matches.push(a,u)}}function em(o,a){const u=o.localNames;if(null!==u)for(let h=0;h<u.length;h+=2)if(u[h]===a)return u[h+1];return null}function KM(o,a,u,h){return-1===u?function Vb(o,a){return 11&o.type?Zh(o,a):4&o.type?ei(o,a):null}(a,o):-2===u?function YM(o,a,u){return u===pg?Zh(a,o):u===Af?ei(a,o):u===Yg?Jg(a,o):void 0}(o,a,h):vi(o,o[1],u,a)}function Bl(o,a,u,h){const p=a[19].queries[h];if(null===p.matches){const _=o.data,b=u.matches,C=[];for(let A=0;A<b.length;A+=2){const k=b[A];C.push(k<0?null:KM(a,_[k],b[A+1],u.metadata.read))}p.matches=C}return p.matches}function tm(o,a,u,h){const p=o.queries.getByIndex(u),_=p.matches;if(null!==_){const b=Bl(o,a,p,u);for(let C=0;C<_.length;C+=2){const A=_[C];if(A>0)h.push(b[C/2]);else{const k=_[C+1],F=a[-A];for(let $=10;$<F.length;$++){const ee=F[$];ee[17]===ee[3]&&tm(ee[1],ee,k,h)}if(null!==F[9]){const $=F[9];for(let ee=0;ee<$.length;ee++){const oe=$[ee];tm(oe[1],oe,k,h)}}}}}return h}function nm(o){const a=Oe(),u=on(),h=Zs();Ks(h+1);const p=ZD(u,h);if(o.dirty&&function va(o){return 4==(4&o[2])}(a)===(2==(2&p.metadata.flags))){if(null===p.matches)o.reset([]);else{const _=p.crossesNgTemplate?tm(u,a,h,[]):Bl(u,a,p,h);o.reset(_,SC),o.notifyOnChanges()}return!0}return!1}function zD(o,a,u){const h=on();h.firstCreatePass&&(rm(h,new $D(o,a,u),-1),2==(2&a)&&(h.staticViewQueries=!0)),WD(h,Oe(),a)}function GD(o,a,u,h){const p=on();if(p.firstCreatePass){const _=sr();rm(p,new $D(a,u,h),_.index),function qD(o,a){const u=o.contentQueries||(o.contentQueries=[]);a!==(u.length?u[u.length-1]:-1)&&u.push(o.queries.length-1,a)}(p,o),2==(2&u)&&(p.staticContentQueries=!0)}WD(p,Oe(),u)}function Bb(){return function hy(o,a){return o[19].queries[a].queryList}(Oe(),Zs())}function WD(o,a,u){const h=new Pb(4==(4&u));na(o,a,h,h.destroy),null===a[19]&&(a[19]=new Xg),a[19].queries.push(new Te(h))}function rm(o,a,u){null===o.queries&&(o.queries=new Fu),o.queries.track(new Ub(a,u))}function ZD(o,a){return o.queries.getByIndex(a)}function Jb(...o){}const ak=new an("Application Initializer");let zc=(()=>{class o{constructor(u){this.appInits=u,this.resolve=Jb,this.reject=Jb,this.initialized=!1,this.done=!1,this.donePromise=new Promise((h,p)=>{this.resolve=h,this.reject=p})}runInitializers(){if(this.initialized)return;const u=[],h=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let p=0;p<this.appInits.length;p++){const _=this.appInits[p]();if(Zw(_))u.push(_);else if(RI(_)){const b=new Promise((C,A)=>{_.subscribe({complete:C,error:A})});u.push(b)}}Promise.all(u).then(()=>{h()}).catch(p=>{this.reject(p)}),0===u.length&&h(),this.initialized=!0}}return o.\u0275fac=function(u){return new(u||o)(pr(ak,8))},o.\u0275prov=qe({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();const Xb=new an("AppId",{providedIn:"root",factory:function hT(){return`${e0()}${e0()}${e0()}`}});function e0(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Uu=new an("Platform Initializer"),uk=new an("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),om=new an("appBootstrapListener");let ck=(()=>{class o{log(u){console.log(u)}warn(u){console.warn(u)}}return o.\u0275fac=function(u){return new(u||o)},o.\u0275prov=qe({token:o,factory:o.\u0275fac,providedIn:"platform"}),o})();const Hl=new an("LocaleId",{providedIn:"root",factory:()=>Ct(Hl,it.Optional|it.SkipSelf)||function Vu(){return typeof $localize<"u"&&$localize.locale||Xd}()}),dk=new an("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class fk{constructor(a,u){this.ngModuleFactory=a,this.componentFactories=u}}let pk=(()=>{class o{compileModuleSync(u){return new xD(u)}compileModuleAsync(u){return Promise.resolve(this.compileModuleSync(u))}compileModuleAndAllComponentsSync(u){const h=this.compileModuleSync(u),_=Ru(tn(u).declarations).reduce((b,C)=>{const A=ge(C);return A&&b.push(new qd(A)),b},[]);return new fk(h,_)}compileModuleAndAllComponentsAsync(u){return Promise.resolve(this.compileModuleAndAllComponentsSync(u))}clearCache(){}clearCacheFor(u){}getModuleId(u){}}return o.\u0275fac=function(u){return new(u||o)},o.\u0275prov=qe({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();const gT=(()=>Promise.resolve(0))();function lm(o){typeof Zone>"u"?gT.then(()=>{o&&o.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",o)}class Ha{constructor({enableLongStackTrace:a=!1,shouldCoalesceEventChangeDetection:u=!1,shouldCoalesceRunChangeDetection:h=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Vl(!1),this.onMicrotaskEmpty=new Vl(!1),this.onStable=new Vl(!1),this.onError=new Vl(!1),typeof Zone>"u")throw new Me(908,!1);Zone.assertZonePatched();const p=this;if(p._nesting=0,p._outer=p._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const _=Zone.AsyncStackTaggingZoneSpec;p._inner=p._inner.fork(new _("Angular"))}Zone.TaskTrackingZoneSpec&&(p._inner=p._inner.fork(new Zone.TaskTrackingZoneSpec)),a&&Zone.longStackTraceZoneSpec&&(p._inner=p._inner.fork(Zone.longStackTraceZoneSpec)),p.shouldCoalesceEventChangeDetection=!h&&u,p.shouldCoalesceRunChangeDetection=h,p.lastRequestAnimationFrameId=-1,p.nativeRequestAnimationFrame=function mT(){let o=Mn.requestAnimationFrame,a=Mn.cancelAnimationFrame;if(typeof Zone<"u"&&o&&a){const u=o[Zone.__symbol__("OriginalDelegate")];u&&(o=u);const h=a[Zone.__symbol__("OriginalDelegate")];h&&(a=h)}return{nativeRequestAnimationFrame:o,nativeCancelAnimationFrame:a}}().nativeRequestAnimationFrame,function yT(o){const a=()=>{!function by(o){o.isCheckStableRunning||-1!==o.lastRequestAnimationFrameId||(o.lastRequestAnimationFrameId=o.nativeRequestAnimationFrame.call(Mn,()=>{o.fakeTopEventTask||(o.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{o.lastRequestAnimationFrameId=-1,n0(o),o.isCheckStableRunning=!0,um(o),o.isCheckStableRunning=!1},void 0,()=>{},()=>{})),o.fakeTopEventTask.invoke()}),n0(o))}(o)};o._inner=o._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(u,h,p,_,b,C)=>{try{return vT(o),u.invokeTask(p,_,b,C)}finally{(o.shouldCoalesceEventChangeDetection&&"eventTask"===_.type||o.shouldCoalesceRunChangeDetection)&&a(),wT(o)}},onInvoke:(u,h,p,_,b,C,A)=>{try{return vT(o),u.invoke(p,_,b,C,A)}finally{o.shouldCoalesceRunChangeDetection&&a(),wT(o)}},onHasTask:(u,h,p,_)=>{u.hasTask(p,_),h===p&&("microTask"==_.change?(o._hasPendingMicrotasks=_.microTask,n0(o),um(o)):"macroTask"==_.change&&(o.hasPendingMacrotasks=_.macroTask))},onHandleError:(u,h,p,_)=>(u.handleError(p,_),o.runOutsideAngular(()=>o.onError.emit(_)),!1)})}(p)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ha.isInAngularZone())throw new Me(909,!1)}static assertNotInAngularZone(){if(Ha.isInAngularZone())throw new Me(909,!1)}run(a,u,h){return this._inner.run(a,u,h)}runTask(a,u,h,p){const _=this._inner,b=_.scheduleEventTask("NgZoneEvent: "+p,a,_T,Jb,Jb);try{return _.runTask(b,u,h)}finally{_.cancelTask(b)}}runGuarded(a,u,h){return this._inner.runGuarded(a,u,h)}runOutsideAngular(a){return this._outer.run(a)}}const _T={};function um(o){if(0==o._nesting&&!o.hasPendingMicrotasks&&!o.isStable)try{o._nesting++,o.onMicrotaskEmpty.emit(null)}finally{if(o._nesting--,!o.hasPendingMicrotasks)try{o.runOutsideAngular(()=>o.onStable.emit(null))}finally{o.isStable=!0}}}function n0(o){o.hasPendingMicrotasks=!!(o._hasPendingMicrotasks||(o.shouldCoalesceEventChangeDetection||o.shouldCoalesceRunChangeDetection)&&-1!==o.lastRequestAnimationFrameId)}function vT(o){o._nesting++,o.isStable&&(o.isStable=!1,o.onUnstable.emit(null))}function wT(o){o._nesting--,um(o)}class _k{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Vl,this.onMicrotaskEmpty=new Vl,this.onStable=new Vl,this.onError=new Vl}run(a,u,h){return a.apply(u,h)}runGuarded(a,u,h){return a.apply(u,h)}runOutsideAngular(a){return a()}runTask(a,u,h,p){return a.apply(u,h)}}const bT=new an(""),r0=new an("");let Ey,cm=(()=>{class o{constructor(u,h,p){this._ngZone=u,this.registry=h,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Ey||(function yk(o){Ey=o}(p),p.addToWindow(h)),this._watchAngularEvents(),u.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ha.assertNotInAngularZone(),lm(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())lm(()=>{for(;0!==this._callbacks.length;){let u=this._callbacks.pop();clearTimeout(u.timeoutId),u.doneCb(this._didWork)}this._didWork=!1});else{let u=this.getPendingTasks();this._callbacks=this._callbacks.filter(h=>!h.updateCb||!h.updateCb(u)||(clearTimeout(h.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(u=>({source:u.source,creationLocation:u.creationLocation,data:u.data})):[]}addCallback(u,h,p){let _=-1;h&&h>0&&(_=setTimeout(()=>{this._callbacks=this._callbacks.filter(b=>b.timeoutId!==_),u(this._didWork,this.getPendingTasks())},h)),this._callbacks.push({doneCb:u,timeoutId:_,updateCb:p})}whenStable(u,h,p){if(p&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(u,h,p),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(u){this.registry.registerApplication(u,this)}unregisterApplication(u){this.registry.unregisterApplication(u)}findProviders(u,h,p){return[]}}return o.\u0275fac=function(u){return new(u||o)(pr(Ha),pr(ET),pr(r0))},o.\u0275prov=qe({token:o,factory:o.\u0275fac}),o})(),ET=(()=>{class o{constructor(){this._applications=new Map}registerApplication(u,h){this._applications.set(u,h)}unregisterApplication(u){this._applications.delete(u)}unregisterAllApplications(){this._applications.clear()}getTestability(u){return this._applications.get(u)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(u,h=!0){return Ey?.findTestabilityInTree(this,u,h)??null}}return o.\u0275fac=function(u){return new(u||o)},o.\u0275prov=qe({token:o,factory:o.\u0275fac,providedIn:"platform"}),o})(),Gc=null;const CT=new an("AllowMultipleToken"),s0=new an("PlatformDestroyListeners");class DT{constructor(a,u){this.name=a,this.token=u}}function ST(o,a,u=[]){const h=`Platform: ${a}`,p=new an(h);return(_=[])=>{let b=RT();if(!b||b.injector.get(CT,!1)){const C=[...u,..._,{provide:p,useValue:!0}];o?o(C):function wk(o){if(Gc&&!Gc.get(CT,!1))throw new Me(400,!1);Gc=o;const a=o.get(MT);(function AT(o){const a=o.get(Uu,null);a&&a.forEach(u=>u())})(o)}(function xT(o=[],a){return Tc.create({name:a,providers:[{provide:ug,useValue:"platform"},{provide:s0,useValue:new Set([()=>Gc=null])},...o]})}(C,h))}return function bk(o){const a=RT();if(!a)throw new Me(401,!1);return a}()}}function RT(){return Gc?.get(MT)??null}let MT=(()=>{class o{constructor(u){this._injector=u,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(u,h){const p=function Rf(o,a){let u;return u="noop"===o?new _k:("zone.js"===o?void 0:o)||new Ha(a),u}(h?.ngZone,function o0(o){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!o||!o.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!o||!o.ngZoneRunCoalescing)||!1}}(h)),_=[{provide:Ha,useValue:p}];return p.run(()=>{const b=Tc.create({providers:_,parent:this.injector,name:u.moduleType.name}),C=u.create(b),A=C.injector.get(gg,null);if(!A)throw new Me(402,!1);return p.runOutsideAngular(()=>{const k=p.onError.subscribe({next:F=>{A.handleError(F)}});C.onDestroy(()=>{kf(this._modules,C),k.unsubscribe()})}),function Ek(o,a,u){try{const h=u();return Zw(h)?h.catch(p=>{throw a.runOutsideAngular(()=>o.handleError(p)),p}):h}catch(h){throw a.runOutsideAngular(()=>o.handleError(h)),h}}(A,p,()=>{const k=C.injector.get(zc);return k.runInitializers(),k.donePromise.then(()=>(function Eb(o){Ve(o,"Expected localeId to be defined"),"string"==typeof o&&(bb=o.toLowerCase().replace(/_/g,"-"))}(C.injector.get(Hl,Xd)||Xd),this._moduleDoBootstrap(C),C))})})}bootstrapModule(u,h=[]){const p=kT({},h);return function vk(o,a,u){const h=new xD(u);return Promise.resolve(h)}(0,0,u).then(_=>this.bootstrapModuleFactory(_,p))}_moduleDoBootstrap(u){const h=u.injector.get(Mf);if(u._bootstrapComponents.length>0)u._bootstrapComponents.forEach(p=>h.bootstrap(p));else{if(!u.instance.ngDoBootstrap)throw new Me(403,!1);u.instance.ngDoBootstrap(h)}this._modules.push(u)}onDestroy(u){this._destroyListeners.push(u)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Me(404,!1);this._modules.slice().forEach(h=>h.destroy()),this._destroyListeners.forEach(h=>h());const u=this._injector.get(s0,null);u&&(u.forEach(h=>h()),u.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return o.\u0275fac=function(u){return new(u||o)(pr(Tc))},o.\u0275prov=qe({token:o,factory:o.\u0275fac,providedIn:"platform"}),o})();function kT(o,a){return Array.isArray(a)?a.reduce(kT,o):{...o,...a}}let Mf=(()=>{class o{constructor(u,h,p){this._zone=u,this._injector=h,this._exceptionHandler=p,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const _=new j.y(C=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{C.next(this._stable),C.complete()})}),b=new j.y(C=>{let A;this._zone.runOutsideAngular(()=>{A=this._zone.onStable.subscribe(()=>{Ha.assertNotInAngularZone(),lm(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,C.next(!0))})})});const k=this._zone.onUnstable.subscribe(()=>{Ha.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{C.next(!1)}))});return()=>{A.unsubscribe(),k.unsubscribe()}});this.isStable=(0,fe.T)(_,b.pipe((0,de.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(u,h){const p=u instanceof TC;if(!this._injector.get(zc).done)throw!p&&jt(u),new Me(405,false);let b;b=p?u:this._injector.get(fg).resolveComponentFactory(u),this.componentTypes.push(b.componentType);const C=function IT(o){return o.isBoundToModule}(b)?void 0:this._injector.get(Tf),k=b.create(Tc.NULL,[],h||b.selector,C),F=k.location.nativeElement,$=k.injector.get(bT,null);return $?.registerApplication(F),k.onDestroy(()=>{this.detachView(k.hostView),kf(this.components,k),$?.unregisterApplication(F)}),this._loadComponent(k),k}tick(){if(this._runningTick)throw new Me(101,!1);try{this._runningTick=!0;for(let u of this._views)u.detectChanges()}catch(u){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(u))}finally{this._runningTick=!1}}attachView(u){const h=u;this._views.push(h),h.attachToAppRef(this)}detachView(u){const h=u;kf(this._views,h),h.detachFromAppRef()}_loadComponent(u){this.attachView(u.hostView),this.tick(),this.components.push(u),this._injector.get(om,[]).concat(this._bootstrapListeners).forEach(p=>p(u))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(u=>u()),this._views.slice().forEach(u=>u.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(u){return this._destroyListeners.push(u),()=>kf(this._destroyListeners,u)}destroy(){if(this._destroyed)throw new Me(406,!1);const u=this._injector;u.destroy&&!u.destroyed&&u.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return o.\u0275fac=function(u){return new(u||o)(pr(Ha),pr(jd),pr(gg))},o.\u0275prov=qe({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();function kf(o,a){const u=o.indexOf(a);u>-1&&o.splice(u,1)}let PT=!0,Ck=!1;function OT(){return Ck=!0,PT}function ZF(){if(Ck)throw new Error("Cannot enable prod mode after platform setup.");PT=!1}let Dk=(()=>{class o{}return o.__NG_ELEMENT_ID__=Tk,o})();function Tk(o){return function LT(o,a,u){if(mi(o)&&!u){const h=Mr(o.index,a);return new Wd(h,h)}return 47&o.type?new Wd(a[16],a):null}(sr(),Oe(),16==(16&o))}class HT{constructor(){}supports(a){return xg(a)}create(a){return new $T(a)}}const jT=(o,a)=>a;class $T{constructor(a){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=a||jT}forEachItem(a){let u;for(u=this._itHead;null!==u;u=u._next)a(u)}forEachOperation(a){let u=this._itHead,h=this._removalsHead,p=0,_=null;for(;u||h;){const b=!h||u&&u.currentIndex<GT(h,p,_)?u:h,C=GT(b,p,_),A=b.currentIndex;if(b===h)p--,h=h._nextRemoved;else if(u=u._next,null==b.previousIndex)p++;else{_||(_=[]);const k=C-p,F=A-p;if(k!=F){for(let ee=0;ee<k;ee++){const oe=ee<_.length?_[ee]:_[ee]=0,Ne=oe+ee;F<=Ne&&Ne<k&&(_[ee]=oe+1)}_[b.previousIndex]=F-k}}C!==A&&a(b,C,A)}}forEachPreviousItem(a){let u;for(u=this._previousItHead;null!==u;u=u._nextPrevious)a(u)}forEachAddedItem(a){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)a(u)}forEachMovedItem(a){let u;for(u=this._movesHead;null!==u;u=u._nextMoved)a(u)}forEachRemovedItem(a){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)a(u)}forEachIdentityChange(a){let u;for(u=this._identityChangesHead;null!==u;u=u._nextIdentityChange)a(u)}diff(a){if(null==a&&(a=[]),!xg(a))throw new Me(900,!1);return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let p,_,b,u=this._itHead,h=!1;if(Array.isArray(a)){this.length=a.length;for(let C=0;C<this.length;C++)_=a[C],b=this._trackByFn(C,_),null!==u&&Object.is(u.trackById,b)?(h&&(u=this._verifyReinsertion(u,_,b,C)),Object.is(u.item,_)||this._addIdentityChange(u,_)):(u=this._mismatch(u,_,b,C),h=!0),u=u._next}else p=0,function CI(o,a){if(Array.isArray(o))for(let u=0;u<o.length;u++)a(o[u]);else{const u=o[ku()]();let h;for(;!(h=u.next()).done;)a(h.value)}}(a,C=>{b=this._trackByFn(p,C),null!==u&&Object.is(u.trackById,b)?(h&&(u=this._verifyReinsertion(u,C,b,p)),Object.is(u.item,C)||this._addIdentityChange(u,C)):(u=this._mismatch(u,C,b,p),h=!0),u=u._next,p++}),this.length=p;return this._truncate(u),this.collection=a,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let a;for(a=this._previousItHead=this._itHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._additionsHead;null!==a;a=a._nextAdded)a.previousIndex=a.currentIndex;for(this._additionsHead=this._additionsTail=null,a=this._movesHead;null!==a;a=a._nextMoved)a.previousIndex=a.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(a,u,h,p){let _;return null===a?_=this._itTail:(_=a._prev,this._remove(a)),null!==(a=null===this._unlinkedRecords?null:this._unlinkedRecords.get(h,null))?(Object.is(a.item,u)||this._addIdentityChange(a,u),this._reinsertAfter(a,_,p)):null!==(a=null===this._linkedRecords?null:this._linkedRecords.get(h,p))?(Object.is(a.item,u)||this._addIdentityChange(a,u),this._moveAfter(a,_,p)):a=this._addAfter(new Nk(u,h),_,p),a}_verifyReinsertion(a,u,h,p){let _=null===this._unlinkedRecords?null:this._unlinkedRecords.get(h,null);return null!==_?a=this._reinsertAfter(_,a._prev,p):a.currentIndex!=p&&(a.currentIndex=p,this._addToMoves(a,p)),a}_truncate(a){for(;null!==a;){const u=a._next;this._addToRemovals(this._unlink(a)),a=u}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(a,u,h){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(a);const p=a._prevRemoved,_=a._nextRemoved;return null===p?this._removalsHead=_:p._nextRemoved=_,null===_?this._removalsTail=p:_._prevRemoved=p,this._insertAfter(a,u,h),this._addToMoves(a,h),a}_moveAfter(a,u,h){return this._unlink(a),this._insertAfter(a,u,h),this._addToMoves(a,h),a}_addAfter(a,u,h){return this._insertAfter(a,u,h),this._additionsTail=null===this._additionsTail?this._additionsHead=a:this._additionsTail._nextAdded=a,a}_insertAfter(a,u,h){const p=null===u?this._itHead:u._next;return a._next=p,a._prev=u,null===p?this._itTail=a:p._prev=a,null===u?this._itHead=a:u._next=a,null===this._linkedRecords&&(this._linkedRecords=new d0),this._linkedRecords.put(a),a.currentIndex=h,a}_remove(a){return this._addToRemovals(this._unlink(a))}_unlink(a){null!==this._linkedRecords&&this._linkedRecords.remove(a);const u=a._prev,h=a._next;return null===u?this._itHead=h:u._next=h,null===h?this._itTail=u:h._prev=u,a}_addToMoves(a,u){return a.previousIndex===u||(this._movesTail=null===this._movesTail?this._movesHead=a:this._movesTail._nextMoved=a),a}_addToRemovals(a){return null===this._unlinkedRecords&&(this._unlinkedRecords=new d0),this._unlinkedRecords.put(a),a.currentIndex=null,a._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=a,a._prevRemoved=null):(a._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=a),a}_addIdentityChange(a,u){return a.item=u,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=a:this._identityChangesTail._nextIdentityChange=a,a}}class Nk{constructor(a,u){this.item=a,this.trackById=u,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class zT{constructor(){this._head=null,this._tail=null}add(a){null===this._head?(this._head=this._tail=a,a._nextDup=null,a._prevDup=null):(this._tail._nextDup=a,a._prevDup=this._tail,a._nextDup=null,this._tail=a)}get(a,u){let h;for(h=this._head;null!==h;h=h._nextDup)if((null===u||u<=h.currentIndex)&&Object.is(h.trackById,a))return h;return null}remove(a){const u=a._prevDup,h=a._nextDup;return null===u?this._head=h:u._nextDup=h,null===h?this._tail=u:h._prevDup=u,null===this._head}}class d0{constructor(){this.map=new Map}put(a){const u=a.trackById;let h=this.map.get(u);h||(h=new zT,this.map.set(u,h)),h.add(a)}get(a,u){const p=this.map.get(a);return p?p.get(a,u):null}remove(a){const u=a.trackById;return this.map.get(u).remove(a)&&this.map.delete(u),a}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function GT(o,a,u){const h=o.previousIndex;if(null===h)return h;let p=0;return u&&h<u.length&&(p=u[h]),h+a+p}class WT{constructor(){}supports(a){return a instanceof Map||q_(a)}create(){return new e2}}class e2{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(a){let u;for(u=this._mapHead;null!==u;u=u._next)a(u)}forEachPreviousItem(a){let u;for(u=this._previousMapHead;null!==u;u=u._nextPrevious)a(u)}forEachChangedItem(a){let u;for(u=this._changesHead;null!==u;u=u._nextChanged)a(u)}forEachAddedItem(a){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)a(u)}forEachRemovedItem(a){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)a(u)}diff(a){if(a){if(!(a instanceof Map||q_(a)))throw new Me(900,!1)}else a=new Map;return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let u=this._mapHead;if(this._appendAfter=null,this._forEach(a,(h,p)=>{if(u&&u.key===p)this._maybeAddToChanges(u,h),this._appendAfter=u,u=u._next;else{const _=this._getOrCreateRecordForKey(p,h);u=this._insertBeforeOrAppend(u,_)}}),u){u._prev&&(u._prev._next=null),this._removalsHead=u;for(let h=u;null!==h;h=h._nextRemoved)h===this._mapHead&&(this._mapHead=null),this._records.delete(h.key),h._nextRemoved=h._next,h.previousValue=h.currentValue,h.currentValue=null,h._prev=null,h._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(a,u){if(a){const h=a._prev;return u._next=a,u._prev=h,a._prev=u,h&&(h._next=u),a===this._mapHead&&(this._mapHead=u),this._appendAfter=a,a}return this._appendAfter?(this._appendAfter._next=u,u._prev=this._appendAfter):this._mapHead=u,this._appendAfter=u,null}_getOrCreateRecordForKey(a,u){if(this._records.has(a)){const p=this._records.get(a);this._maybeAddToChanges(p,u);const _=p._prev,b=p._next;return _&&(_._next=b),b&&(b._prev=_),p._next=null,p._prev=null,p}const h=new t2(a);return this._records.set(a,h),h.currentValue=u,this._addToAdditions(h),h}_reset(){if(this.isDirty){let a;for(this._previousMapHead=this._mapHead,a=this._previousMapHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._changesHead;null!==a;a=a._nextChanged)a.previousValue=a.currentValue;for(a=this._additionsHead;null!=a;a=a._nextAdded)a.previousValue=a.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(a,u){Object.is(u,a.currentValue)||(a.previousValue=a.currentValue,a.currentValue=u,this._addToChanges(a))}_addToAdditions(a){null===this._additionsHead?this._additionsHead=this._additionsTail=a:(this._additionsTail._nextAdded=a,this._additionsTail=a)}_addToChanges(a){null===this._changesHead?this._changesHead=this._changesTail=a:(this._changesTail._nextChanged=a,this._changesTail=a)}_forEach(a,u){a instanceof Map?a.forEach(u):Object.keys(a).forEach(h=>u(a[h],h))}}class t2{constructor(a){this.key=a,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function h0(){return new f0([new HT])}let f0=(()=>{class o{constructor(u){this.factories=u}static create(u,h){if(null!=h){const p=h.factories.slice();u=u.concat(p)}return new o(u)}static extend(u){return{provide:o,useFactory:h=>o.create(u,h||h0()),deps:[[o,new ft,new le]]}}find(u){const h=this.factories.find(p=>p.supports(u));if(null!=h)return h;throw new Me(901,!1)}}return o.\u0275prov=qe({token:o,providedIn:"root",factory:h0}),o})();function qT(){return new Ty([new WT])}let Ty=(()=>{class o{constructor(u){this.factories=u}static create(u,h){if(h){const p=h.factories.slice();u=u.concat(p)}return new o(u)}static extend(u){return{provide:o,useFactory:h=>o.create(u,h||qT()),deps:[[o,new ft,new le]]}}find(u){const h=this.factories.find(p=>p.supports(u));if(h)return h;throw new Me(901,!1)}}return o.\u0275prov=qe({token:o,providedIn:"root",factory:qT}),o})();const Lk=ST(null,"core",[]);let g0=(()=>{class o{constructor(u){}}return o.\u0275fac=function(u){return new(u||o)(pr(Mf))},o.\u0275mod=pn({type:o}),o.\u0275inj=Zt({}),o})();function Ay(o){return"boolean"==typeof o?o:null!=o&&"false"!==o}},3942:(Tt,ce,H)=>{"use strict";H.d(ce,{Z:()=>Me});var c=H(2090),B=H(4859),j=H(9681),fe=H(1877);class de{constructor(Ae,pe){this._delegate=Ae,this.firebase=pe,(0,j._addComponent)(Ae,new B.wA("app-compat",()=>this,"PUBLIC")),this.container=Ae.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ae){this._delegate.automaticDataCollectionEnabled=Ae}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Ae=>{this._delegate.checkDestroyed(),Ae()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,j.deleteApp)(this._delegate)))}_getService(Ae,pe=j._DEFAULT_ENTRY_NAME){var Ge;this._delegate.checkDestroyed();const Et=this._delegate.container.getProvider(Ae);return!Et.isInitialized()&&"EXPLICIT"===(null===(Ge=Et.getComponent())||void 0===Ge?void 0:Ge.instantiationMode)&&Et.initialize(),Et.getImmediate({identifier:pe})}_removeServiceInstance(Ae,pe=j._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Ae).clearInstance(pe)}_addComponent(Ae){(0,j._addComponent)(this._delegate,Ae)}_addOrOverwriteComponent(Ae){(0,j._addOrOverwriteComponent)(this._delegate,Ae)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ue=new c.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),Y=function Ee(){const ot=function ye(ot){const Ae={},pe={__esModule:!0,initializeApp:function We(Xe,_e={}){const K=j.initializeApp(Xe,_e);if((0,c.r3)(Ae,K.name))return Ae[K.name];const Qe=new ot(K,pe);return Ae[K.name]=Qe,Qe},app:Et,registerVersion:j.registerVersion,setLogLevel:j.setLogLevel,onLog:j.onLog,apps:null,SDK_VERSION:j.SDK_VERSION,INTERNAL:{registerComponent:function Ce(Xe){const _e=Xe.name,K=_e.replace("-compat","");if(j._registerComponent(Xe)&&"PUBLIC"===Xe.type){const Qe=(rt=Et())=>{if("function"!=typeof rt[K])throw ue.create("invalid-app-argument",{appName:_e});return rt[K]()};void 0!==Xe.serviceProps&&(0,c.ZB)(Qe,Xe.serviceProps),pe[K]=Qe,ot.prototype[K]=function(...rt){return this._getService.bind(this,_e).apply(this,Xe.multipleInstances?rt:[])}}return"PUBLIC"===Xe.type?pe[K]:null},removeApp:function Ge(Xe){delete Ae[Xe]},useAsService:function st(Xe,_e){return"serverAuth"===_e?null:_e},modularAPIs:j}};function Et(Xe){if(!(0,c.r3)(Ae,Xe=Xe||j._DEFAULT_ENTRY_NAME))throw ue.create("no-app",{appName:Xe});return Ae[Xe]}return pe.default=pe,Object.defineProperty(pe,"apps",{get:function xe(){return Object.keys(Ae).map(Xe=>Ae[Xe])}}),Et.App=ot,pe}(de);return ot.INTERNAL=Object.assign(Object.assign({},ot.INTERNAL),{createFirebaseNamespace:Ee,extendNamespace:function Ae(pe){(0,c.ZB)(ot,pe)},createSubscribe:c.ne,ErrorFactory:c.LL,deepExtend:c.ZB}),ot}(),J=new fe.Yd("@firebase/app-compat");if((0,c.jU)()&&void 0!==self.firebase){J.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const ot=self.firebase.SDK_VERSION;ot&&ot.indexOf("LITE")>=0&&J.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Me=Y;!function Fe(ot){(0,j.registerVersion)("@firebase/app-compat","0.2.8",ot)}()},9681:(Tt,ce,H)=>{"use strict";H.r(ce),H.d(ce,{FirebaseError:()=>fe.ZR,SDK_VERSION:()=>Bt,_DEFAULT_ENTRY_NAME:()=>Ve,_addComponent:()=>Pt,_addOrOverwriteComponent:()=>qe,_apps:()=>At,_clearComponents:()=>hn,_components:()=>Yt,_getProvider:()=>Zt,_registerComponent:()=>qt,_removeServiceInstance:()=>ln,deleteApp:()=>jn,getApp:()=>Yn,getApps:()=>pi,initializeApp:()=>hr,onLog:()=>Gr,registerVersion:()=>mr,setLogLevel:()=>En});var c=H(5861),B=H(4859),j=H(1877),fe=H(2090),de=H(8766);class ve{constructor(ke){this.container=ke}getPlatformInfoString(){return this.container.getProviders().map(ht=>{if(function ue(dt){return"VERSION"===dt.getComponent()?.type}(ht)){const Gt=ht.getImmediate();return`${Gt.library}/${Gt.version}`}return null}).filter(ht=>ht).join(" ")}}const ye="@firebase/app",Y=new j.Yd("@firebase/app"),Ve="[DEFAULT]",Pe={[ye]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},At=new Map,Yt=new Map;function Pt(dt,ke){try{dt.container.addComponent(ke)}catch(ht){Y.debug(`Component ${ke.name} failed to register with FirebaseApp ${dt.name}`,ht)}}function qe(dt,ke){dt.container.addOrOverwriteComponent(ke)}function qt(dt){const ke=dt.name;if(Yt.has(ke))return Y.debug(`There were multiple attempts to register component ${ke}.`),!1;Yt.set(ke,dt);for(const ht of At.values())Pt(ht,dt);return!0}function Zt(dt,ke){const ht=dt.container.getProvider("heartbeat").getImmediate({optional:!0});return ht&&ht.triggerHeartbeat(),dt.container.getProvider(ke)}function ln(dt,ke,ht=Ve){Zt(dt,ke).clearInstance(ht)}function hn(){Yt.clear()}const qn=new fe.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class ri{constructor(ke,ht,Gt){this._isDeleted=!1,this._options=Object.assign({},ke),this._config=Object.assign({},ht),this._name=ht.name,this._automaticDataCollectionEnabled=ht.automaticDataCollectionEnabled,this._container=Gt,this.container.addComponent(new B.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ke){this.checkDestroyed(),this._automaticDataCollectionEnabled=ke}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(ke){this._isDeleted=ke}checkDestroyed(){if(this.isDeleted)throw qn.create("app-deleted",{appName:this._name})}}const Bt="9.20.0";function hr(dt,ke={}){let ht=dt;"object"!=typeof ke&&(ke={name:ke});const Gt=Object.assign({name:Ve,automaticDataCollectionEnabled:!1},ke),Ht=Gt.name;if("string"!=typeof Ht||!Ht)throw qn.create("bad-app-name",{appName:String(Ht)});if(ht||(ht=(0,fe.aH)()),!ht)throw qn.create("no-options");const pn=At.get(Ht);if(pn){if((0,fe.vZ)(ht,pn.options)&&(0,fe.vZ)(Gt,pn.config))return pn;throw qn.create("duplicate-app",{appName:Ht})}const rr=new B.H0(Ht);for(const W of Yt.values())rr.addComponent(W);const q=new ri(ht,Gt,rr);return At.set(Ht,q),q}function Yn(dt=Ve){const ke=At.get(dt);if(!ke&&dt===Ve)return hr();if(!ke)throw qn.create("no-app",{appName:dt});return ke}function pi(){return Array.from(At.values())}function jn(dt){return it.apply(this,arguments)}function it(){return(it=(0,c.Z)(function*(dt){const ke=dt.name;At.has(ke)&&(At.delete(ke),yield Promise.all(dt.container.getProviders().map(ht=>ht.delete())),dt.isDeleted=!0)})).apply(this,arguments)}function mr(dt,ke,ht){var Gt;let Ht=null!==(Gt=Pe[dt])&&void 0!==Gt?Gt:dt;ht&&(Ht+=`-${ht}`);const pn=Ht.match(/\s|\//),rr=ke.match(/\s|\//);if(pn||rr){const q=[`Unable to register library "${Ht}" with version "${ke}":`];return pn&&q.push(`library name "${Ht}" contains illegal characters (whitespace or "/")`),pn&&rr&&q.push("and"),rr&&q.push(`version name "${ke}" contains illegal characters (whitespace or "/")`),void Y.warn(q.join(" "))}qt(new B.wA(`${Ht}-version`,()=>({library:Ht,version:ke}),"VERSION"))}function Gr(dt,ke){if(null!==dt&&"function"!=typeof dt)throw qn.create("invalid-log-argument");(0,j.Am)(dt,ke)}function En(dt){(0,j.Ub)(dt)}const Un="firebase-heartbeat-store";let $n=null;function Zn(){return $n||($n=(0,de.X3)("firebase-heartbeat-database",1,{upgrade:(dt,ke)=>{0===ke&&dt.createObjectStore(Un)}}).catch(dt=>{throw qn.create("idb-open",{originalErrorMessage:dt.message})})),$n}function Ze(){return(Ze=(0,c.Z)(function*(dt){try{return(yield Zn()).transaction(Un).objectStore(Un).get(xr(dt))}catch(ke){if(ke instanceof fe.ZR)Y.warn(ke.message);else{const ht=qn.create("idb-get",{originalErrorMessage:ke?.message});Y.warn(ht.message)}}})).apply(this,arguments)}function Mn(dt,ke){return $i.apply(this,arguments)}function $i(){return($i=(0,c.Z)(function*(dt,ke){try{const Gt=(yield Zn()).transaction(Un,"readwrite");return yield Gt.objectStore(Un).put(ke,xr(dt)),Gt.done}catch(ht){if(ht instanceof fe.ZR)Y.warn(ht.message);else{const Gt=qn.create("idb-set",{originalErrorMessage:ht?.message});Y.warn(Gt.message)}}})).apply(this,arguments)}function xr(dt){return`${dt.name}!${dt.options.appId}`}class ii{constructor(ke){this.container=ke,this._heartbeatsCache=null;const ht=this.container.getProvider("app").getImmediate();this._storage=new _n(ht),this._heartbeatsCachePromise=this._storage.read().then(Gt=>(this._heartbeatsCache=Gt,Gt))}triggerHeartbeat(){var ke=this;return(0,c.Z)(function*(){const Gt=ke.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Ht=bn();if(null===ke._heartbeatsCache&&(ke._heartbeatsCache=yield ke._heartbeatsCachePromise),ke._heartbeatsCache.lastSentHeartbeatDate!==Ht&&!ke._heartbeatsCache.heartbeats.some(pn=>pn.date===Ht))return ke._heartbeatsCache.heartbeats.push({date:Ht,agent:Gt}),ke._heartbeatsCache.heartbeats=ke._heartbeatsCache.heartbeats.filter(pn=>{const rr=new Date(pn.date).valueOf();return Date.now()-rr<=2592e6}),ke._storage.overwrite(ke._heartbeatsCache)})()}getHeartbeatsHeader(){var ke=this;return(0,c.Z)(function*(){if(null===ke._heartbeatsCache&&(yield ke._heartbeatsCachePromise),null===ke._heartbeatsCache||0===ke._heartbeatsCache.heartbeats.length)return"";const ht=bn(),{heartbeatsToSend:Gt,unsentEntries:Ht}=function ys(dt,ke=1024){const ht=[];let Gt=dt.slice();for(const Ht of dt){const pn=ht.find(rr=>rr.agent===Ht.agent);if(pn){if(pn.dates.push(Ht.date),Wr(ht)>ke){pn.dates.pop();break}}else if(ht.push({agent:Ht.agent,dates:[Ht.date]}),Wr(ht)>ke){ht.pop();break}Gt=Gt.slice(1)}return{heartbeatsToSend:ht,unsentEntries:Gt}}(ke._heartbeatsCache.heartbeats),pn=(0,fe.L)(JSON.stringify({version:2,heartbeats:Gt}));return ke._heartbeatsCache.lastSentHeartbeatDate=ht,Ht.length>0?(ke._heartbeatsCache.heartbeats=Ht,yield ke._storage.overwrite(ke._heartbeatsCache)):(ke._heartbeatsCache.heartbeats=[],ke._storage.overwrite(ke._heartbeatsCache)),pn})()}}function bn(){return(new Date).toISOString().substring(0,10)}class _n{constructor(ke){this.app=ke,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,c.Z)(function*(){return!!(0,fe.hl)()&&(0,fe.eu)().then(()=>!0).catch(()=>!1)})()}read(){var ke=this;return(0,c.Z)(function*(){return(yield ke._canUseIndexedDBPromise)&&(yield function vt(dt){return Ze.apply(this,arguments)}(ke.app))||{heartbeats:[]}})()}overwrite(ke){var ht=this;return(0,c.Z)(function*(){var Gt;if(yield ht._canUseIndexedDBPromise){const pn=yield ht.read();return Mn(ht.app,{lastSentHeartbeatDate:null!==(Gt=ke.lastSentHeartbeatDate)&&void 0!==Gt?Gt:pn.lastSentHeartbeatDate,heartbeats:ke.heartbeats})}})()}add(ke){var ht=this;return(0,c.Z)(function*(){var Gt;if(yield ht._canUseIndexedDBPromise){const pn=yield ht.read();return Mn(ht.app,{lastSentHeartbeatDate:null!==(Gt=ke.lastSentHeartbeatDate)&&void 0!==Gt?Gt:pn.lastSentHeartbeatDate,heartbeats:[...pn.heartbeats,...ke.heartbeats]})}})()}}function Wr(dt){return(0,fe.L)(JSON.stringify({version:2,heartbeats:dt})).length}!function Fr(dt){qt(new B.wA("platform-logger",ke=>new ve(ke),"PRIVATE")),qt(new B.wA("heartbeat",ke=>new ii(ke),"PRIVATE")),mr(ye,"0.9.8",dt),mr(ye,"0.9.8","esm2017"),mr("fire-js","")}("")},4859:(Tt,ce,H)=>{"use strict";H.d(ce,{H0:()=>ye,wA:()=>j,zt:()=>de});var c=H(5861),B=H(2090);class j{constructor(Y,J,te){this.name=Y,this.instanceFactory=J,this.type=te,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(Y){return this.instantiationMode=Y,this}setMultipleInstances(Y){return this.multipleInstances=Y,this}setServiceProps(Y){return this.serviceProps=Y,this}setInstanceCreatedCallback(Y){return this.onInstanceCreated=Y,this}}const fe="[DEFAULT]";class de{constructor(Y,J){this.name=Y,this.container=J,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(Y){const J=this.normalizeInstanceIdentifier(Y);if(!this.instancesDeferred.has(J)){const te=new B.BH;if(this.instancesDeferred.set(J,te),this.isInitialized(J)||this.shouldAutoInitialize())try{const nt=this.getOrInitializeService({instanceIdentifier:J});nt&&te.resolve(nt)}catch{}}return this.instancesDeferred.get(J).promise}getImmediate(Y){var J;const te=this.normalizeInstanceIdentifier(Y?.identifier),nt=null!==(J=Y?.optional)&&void 0!==J&&J;if(!this.isInitialized(te)&&!this.shouldAutoInitialize()){if(nt)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:te})}catch(Fe){if(nt)return null;throw Fe}}getComponent(){return this.component}setComponent(Y){if(Y.name!==this.name)throw Error(`Mismatching Component ${Y.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=Y,this.shouldAutoInitialize()){if(function ue(Ee){return"EAGER"===Ee.instantiationMode}(Y))try{this.getOrInitializeService({instanceIdentifier:fe})}catch{}for(const[J,te]of this.instancesDeferred.entries()){const nt=this.normalizeInstanceIdentifier(J);try{const Fe=this.getOrInitializeService({instanceIdentifier:nt});te.resolve(Fe)}catch{}}}}clearInstance(Y=fe){this.instancesDeferred.delete(Y),this.instancesOptions.delete(Y),this.instances.delete(Y)}delete(){var Y=this;return(0,c.Z)(function*(){const J=Array.from(Y.instances.values());yield Promise.all([...J.filter(te=>"INTERNAL"in te).map(te=>te.INTERNAL.delete()),...J.filter(te=>"_delete"in te).map(te=>te._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(Y=fe){return this.instances.has(Y)}getOptions(Y=fe){return this.instancesOptions.get(Y)||{}}initialize(Y={}){const{options:J={}}=Y,te=this.normalizeInstanceIdentifier(Y.instanceIdentifier);if(this.isInitialized(te))throw Error(`${this.name}(${te}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const nt=this.getOrInitializeService({instanceIdentifier:te,options:J});for(const[Fe,Me]of this.instancesDeferred.entries())te===this.normalizeInstanceIdentifier(Fe)&&Me.resolve(nt);return nt}onInit(Y,J){var te;const nt=this.normalizeInstanceIdentifier(J),Fe=null!==(te=this.onInitCallbacks.get(nt))&&void 0!==te?te:new Set;Fe.add(Y),this.onInitCallbacks.set(nt,Fe);const Me=this.instances.get(nt);return Me&&Y(Me,nt),()=>{Fe.delete(Y)}}invokeOnInitCallbacks(Y,J){const te=this.onInitCallbacks.get(J);if(te)for(const nt of te)try{nt(Y,J)}catch{}}getOrInitializeService({instanceIdentifier:Y,options:J={}}){let te=this.instances.get(Y);if(!te&&this.component&&(te=this.component.instanceFactory(this.container,{instanceIdentifier:(Ee=Y,Ee===fe?void 0:Ee),options:J}),this.instances.set(Y,te),this.instancesOptions.set(Y,J),this.invokeOnInitCallbacks(te,Y),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,Y,te)}catch{}var Ee;return te||null}normalizeInstanceIdentifier(Y=fe){return this.component?this.component.multipleInstances?Y:fe:Y}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ye{constructor(Y){this.name=Y,this.providers=new Map}addComponent(Y){const J=this.getProvider(Y.name);if(J.isComponentSet())throw new Error(`Component ${Y.name} has already been registered with ${this.name}`);J.setComponent(Y)}addOrOverwriteComponent(Y){this.getProvider(Y.name).isComponentSet()&&this.providers.delete(Y.name),this.addComponent(Y)}getProvider(Y){if(this.providers.has(Y))return this.providers.get(Y);const J=new de(Y,this);return this.providers.set(Y,J),J}getProviders(){return Array.from(this.providers.values())}}},1877:(Tt,ce,H)=>{"use strict";H.d(ce,{Am:()=>Ee,Ub:()=>ye,Yd:()=>ue,in:()=>B});const c=[];var B=(()=>{return(Y=B||(B={}))[Y.DEBUG=0]="DEBUG",Y[Y.VERBOSE=1]="VERBOSE",Y[Y.INFO=2]="INFO",Y[Y.WARN=3]="WARN",Y[Y.ERROR=4]="ERROR",Y[Y.SILENT=5]="SILENT",B;var Y})();const j={debug:B.DEBUG,verbose:B.VERBOSE,info:B.INFO,warn:B.WARN,error:B.ERROR,silent:B.SILENT},fe=B.INFO,de={[B.DEBUG]:"log",[B.VERBOSE]:"log",[B.INFO]:"info",[B.WARN]:"warn",[B.ERROR]:"error"},ve=(Y,J,...te)=>{if(J<Y.logLevel)return;const nt=(new Date).toISOString(),Fe=de[J];if(!Fe)throw new Error(`Attempted to log a message with an invalid logType (value: ${J})`);console[Fe](`[${nt}]  ${Y.name}:`,...te)};class ue{constructor(J){this.name=J,this._logLevel=fe,this._logHandler=ve,this._userLogHandler=null,c.push(this)}get logLevel(){return this._logLevel}set logLevel(J){if(!(J in B))throw new TypeError(`Invalid value "${J}" assigned to \`logLevel\``);this._logLevel=J}setLogLevel(J){this._logLevel="string"==typeof J?j[J]:J}get logHandler(){return this._logHandler}set logHandler(J){if("function"!=typeof J)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=J}get userLogHandler(){return this._userLogHandler}set userLogHandler(J){this._userLogHandler=J}debug(...J){this._userLogHandler&&this._userLogHandler(this,B.DEBUG,...J),this._logHandler(this,B.DEBUG,...J)}log(...J){this._userLogHandler&&this._userLogHandler(this,B.VERBOSE,...J),this._logHandler(this,B.VERBOSE,...J)}info(...J){this._userLogHandler&&this._userLogHandler(this,B.INFO,...J),this._logHandler(this,B.INFO,...J)}warn(...J){this._userLogHandler&&this._userLogHandler(this,B.WARN,...J),this._logHandler(this,B.WARN,...J)}error(...J){this._userLogHandler&&this._userLogHandler(this,B.ERROR,...J),this._logHandler(this,B.ERROR,...J)}}function ye(Y){c.forEach(J=>{J.setLogLevel(Y)})}function Ee(Y,J){for(const te of c){let nt=null;J&&J.level&&(nt=j[J.level]),te.userLogHandler=null===Y?null:(Fe,Me,...ot)=>{const Ae=ot.map(pe=>{if(null==pe)return null;if("string"==typeof pe)return pe;if("number"==typeof pe||"boolean"==typeof pe)return pe.toString();if(pe instanceof Error)return pe.message;try{return JSON.stringify(pe)}catch{return null}}).filter(pe=>pe).join(" ");Me>=(nt??Fe.logLevel)&&Y({level:B[Me].toLowerCase(),message:Ae,args:ot,type:Fe.name})}}}},259:(Tt,ce,H)=>{"use strict";H.d(ce,{C6:()=>c.getApps,Mq:()=>c.getApp});var c=H(9681);(0,c.registerVersion)("firebase","9.20.0","app")},9260:(Tt,ce,H)=>{"use strict";H.d(ce,{Z:()=>c.Z});var c=H(3942);c.Z.registerVersion("firebase","9.20.0","app-compat")},6689:(Tt,ce,H)=>{"use strict";H.r(ce);var c=H(5861),B=H(3942),j=H(2090),fe=H(9681),de=H(655),ve=H(1877),ue=H(4859);const Me=function nt(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},ot=function Fe(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Ae=new j.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Ge=new ve.Yd("@firebase/auth");function We(v,...g){Ge.logLevel<=ve.in.ERROR&&Ge.error(`Auth (${fe.SDK_VERSION}): ${v}`,...g)}function xe(v,...g){throw _e(v,...g)}function Ce(v,...g){return _e(v,...g)}function st(v,g,m){const E=Object.assign(Object.assign({},ot()),{[g]:m});return new j.LL("auth","Firebase",E).create(g,{appName:v.name})}function Xe(v,g,m){if(!(g instanceof m))throw m.name!==g.constructor.name&&xe(v,"argument-error"),st(v,"argument-error",`Type of ${g.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function _e(v,...g){if("string"!=typeof v){const m=g[0],E=[...g.slice(1)];return E[0]&&(E[0].appName=v.name),v._errorFactory.create(m,...E)}return Ae.create(v,...g)}function K(v,g,...m){if(!v)throw _e(g,...m)}function Qe(v){const g="INTERNAL ASSERTION FAILED: "+v;throw We(g),new Error(g)}function rt(v,g){v||Qe(g)}function Vt(){var v;return typeof self<"u"&&(null===(v=self.location)||void 0===v?void 0:v.href)||""}function at(){return"http:"===he()||"https:"===he()}function he(){var v;return typeof self<"u"&&(null===(v=self.location)||void 0===v?void 0:v.protocol)||null}class Ue{constructor(g,m){this.shortDelay=g,this.longDelay=m,rt(m>g,"Short delay should be less than long delay!"),this.isMobile=(0,j.uI)()||(0,j.b$)()}get(){return function De(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(at()||(0,j.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Ve(v,g){rt(v.emulator,"Emulator should always be set here");const{url:m}=v.emulator;return g?`${m}${g.startsWith("/")?g.slice(1):g}`:m}class Pe{static initialize(g,m,E){this.fetchImpl=g,m&&(this.headersImpl=m),E&&(this.responseImpl=E)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void Qe("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void Qe("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void Qe("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const At={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Yt=new Ue(3e4,6e4);function Pt(v,g){return v.tenantId&&!g.tenantId?Object.assign(Object.assign({},g),{tenantId:v.tenantId}):g}function qe(v,g,m,E){return qt.apply(this,arguments)}function qt(){return(qt=(0,c.Z)(function*(v,g,m,E,M={}){return Zt(v,M,(0,c.Z)(function*(){let O={},Z={};E&&("GET"===g?Z=E:O={body:JSON.stringify(E)});const ie=(0,j.xO)(Object.assign({key:v.config.apiKey},Z)).slice(1),$e=yield v._getAdditionalHeaders();return $e["Content-Type"]="application/json",v.languageCode&&($e["X-Firebase-Locale"]=v.languageCode),Pe.fetch()(qn(v,v.config.apiHost,m,ie),Object.assign({method:g,headers:$e,referrerPolicy:"no-referrer"},O))}))})).apply(this,arguments)}function Zt(v,g,m){return ln.apply(this,arguments)}function ln(){return(ln=(0,c.Z)(function*(v,g,m){v._canInitEmulator=!1;const E=Object.assign(Object.assign({},At),g);try{const M=new ri(v),O=yield Promise.race([m(),M.promise]);M.clearNetworkTimeout();const Z=yield O.json();if("needConfirmation"in Z)throw Bt(v,"account-exists-with-different-credential",Z);if(O.ok&&!("errorMessage"in Z))return Z;{const ie=O.ok?Z.errorMessage:Z.error.message,[$e,tt]=ie.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===$e)throw Bt(v,"credential-already-in-use",Z);if("EMAIL_EXISTS"===$e)throw Bt(v,"email-already-in-use",Z);if("USER_DISABLED"===$e)throw Bt(v,"user-disabled",Z);const mt=E[$e]||$e.toLowerCase().replace(/[_\s]+/g,"-");if(tt)throw st(v,mt,tt);xe(v,mt)}}catch(M){if(M instanceof j.ZR)throw M;xe(v,"network-request-failed",{message:String(M)})}})).apply(this,arguments)}function hn(v,g,m,E){return Rn.apply(this,arguments)}function Rn(){return(Rn=(0,c.Z)(function*(v,g,m,E,M={}){const O=yield qe(v,g,m,E,M);return"mfaPendingCredential"in O&&xe(v,"multi-factor-auth-required",{_serverResponse:O}),O})).apply(this,arguments)}function qn(v,g,m,E){const M=`${g}${m}?${E}`;return v.config.emulator?Ve(v.config,M):`${v.config.apiScheme}://${M}`}class ri{constructor(g){this.auth=g,this.timer=null,this.promise=new Promise((m,E)=>{this.timer=setTimeout(()=>E(Ce(this.auth,"network-request-failed")),Yt.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Bt(v,g,m){const E={appName:v.name};m.email&&(E.email=m.email),m.phoneNumber&&(E.phoneNumber=m.phoneNumber);const M=Ce(v,g,E);return M.customData._tokenResponse=m,M}function Yn(){return(Yn=(0,c.Z)(function*(v,g){return qe(v,"POST","/v1/accounts:delete",g)})).apply(this,arguments)}function pi(v,g){return jn.apply(this,arguments)}function jn(){return(jn=(0,c.Z)(function*(v,g){return qe(v,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function it(v,g){return mr.apply(this,arguments)}function mr(){return(mr=(0,c.Z)(function*(v,g){return qe(v,"POST","/v1/accounts:lookup",g)})).apply(this,arguments)}function Gr(v){if(v)try{const g=new Date(Number(v));if(!isNaN(g.getTime()))return g.toUTCString()}catch{}}function _s(){return(_s=(0,c.Z)(function*(v,g=!1){const m=(0,j.m9)(v),E=yield m.getIdToken(g),M=$n(E);K(M&&M.exp&&M.auth_time&&M.iat,m.auth,"internal-error");const O="object"==typeof M.firebase?M.firebase:void 0,Z=O?.sign_in_provider;return{claims:M,token:E,authTime:Gr(Un(M.auth_time)),issuedAtTime:Gr(Un(M.iat)),expirationTime:Gr(Un(M.exp)),signInProvider:Z||null,signInSecondFactor:O?.sign_in_second_factor||null}})).apply(this,arguments)}function Un(v){return 1e3*Number(v)}function $n(v){const[g,m,E]=v.split(".");if(void 0===g||void 0===m||void 0===E)return We("JWT malformed, contained fewer than 3 sections"),null;try{const M=(0,j.tV)(m);return M?JSON.parse(M):(We("Failed to decode base64 JWT payload"),null)}catch(M){return We("Caught error parsing JWT payload as JSON",M?.toString()),null}}function vt(v,g){return Ze.apply(this,arguments)}function Ze(){return(Ze=(0,c.Z)(function*(v,g,m=!1){if(m)return g;try{return yield g}catch(E){throw E instanceof j.ZR&&Mn(E)&&v.auth.currentUser===v&&(yield v.auth.signOut()),E}})).apply(this,arguments)}function Mn({code:v}){return"auth/user-disabled"===v||"auth/user-token-expired"===v}class $i{constructor(g){this.user=g,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(g){var m;if(g){const E=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),E}{this.errorBackoff=3e4;const M=(null!==(m=this.user.stsTokenManager.expirationTime)&&void 0!==m?m:0)-Date.now()-3e5;return Math.max(0,M)}}schedule(g=!1){var m=this;if(!this.isRunning)return;const E=this.getInterval(g);this.timerId=setTimeout((0,c.Z)(function*(){yield m.iteration()}),E)}iteration(){var g=this;return(0,c.Z)(function*(){try{yield g.user.getIdToken(!0)}catch(m){return void("auth/network-request-failed"===m?.code&&g.schedule(!0))}g.schedule()})()}}class xr{constructor(g,m){this.createdAt=g,this.lastLoginAt=m,this._initializeTime()}_initializeTime(){this.lastSignInTime=Gr(this.lastLoginAt),this.creationTime=Gr(this.createdAt)}_copy(g){this.createdAt=g.createdAt,this.lastLoginAt=g.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function nr(v){return Wt.apply(this,arguments)}function Wt(){return(Wt=(0,c.Z)(function*(v){var g;const m=v.auth,E=yield v.getIdToken(),M=yield vt(v,it(m,{idToken:E}));K(M?.users.length,m,"internal-error");const O=M.users[0];v._notifyReloadListener(O);const Z=null!==(g=O.providerUserInfo)&&void 0!==g&&g.length?_n(O.providerUserInfo):[],ie=ys(v.providerData,Z),mt=!!v.isAnonymous&&!(v.email&&O.passwordHash||ie?.length),pt={uid:O.localId,displayName:O.displayName||null,photoURL:O.photoUrl||null,email:O.email||null,emailVerified:O.emailVerified||!1,phoneNumber:O.phoneNumber||null,tenantId:O.tenantId||null,providerData:ie,metadata:new xr(O.createdAt,O.lastLoginAt),isAnonymous:mt};Object.assign(v,pt)})).apply(this,arguments)}function bn(){return(bn=(0,c.Z)(function*(v){const g=(0,j.m9)(v);yield nr(g),yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)})).apply(this,arguments)}function ys(v,g){return[...v.filter(E=>!g.some(M=>M.providerId===E.providerId)),...g]}function _n(v){return v.map(g=>{var{providerId:m}=g,E=(0,de._T)(g,["providerId"]);return{providerId:m,uid:E.rawId||"",displayName:E.displayName||null,email:E.email||null,phoneNumber:E.phoneNumber||null,photoURL:E.photoUrl||null}})}function Fr(){return(Fr=(0,c.Z)(function*(v,g){const m=yield Zt(v,{},(0,c.Z)(function*(){const E=(0,j.xO)({grant_type:"refresh_token",refresh_token:g}).slice(1),{tokenApiHost:M,apiKey:O}=v.config,Z=qn(v,M,"/v1/token",`key=${O}`),ie=yield v._getAdditionalHeaders();return ie["Content-Type"]="application/x-www-form-urlencoded",Pe.fetch()(Z,{method:"POST",headers:ie,body:E})}));return{accessToken:m.access_token,expiresIn:m.expires_in,refreshToken:m.refresh_token}})).apply(this,arguments)}class dt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(g){K(g.idToken,"internal-error"),K(typeof g.idToken<"u","internal-error"),K(typeof g.refreshToken<"u","internal-error");const m="expiresIn"in g&&typeof g.expiresIn<"u"?Number(g.expiresIn):function Zn(v){const g=$n(v);return K(g,"internal-error"),K(typeof g.exp<"u","internal-error"),K(typeof g.iat<"u","internal-error"),Number(g.exp)-Number(g.iat)}(g.idToken);this.updateTokensAndExpiration(g.idToken,g.refreshToken,m)}getToken(g,m=!1){var E=this;return(0,c.Z)(function*(){return K(!E.accessToken||E.refreshToken,g,"user-token-expired"),m||!E.accessToken||E.isExpired?E.refreshToken?(yield E.refresh(g,E.refreshToken),E.accessToken):null:E.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(g,m){var E=this;return(0,c.Z)(function*(){const{accessToken:M,refreshToken:O,expiresIn:Z}=yield function Wr(v,g){return Fr.apply(this,arguments)}(g,m);E.updateTokensAndExpiration(M,O,Number(Z))})()}updateTokensAndExpiration(g,m,E){this.refreshToken=m||null,this.accessToken=g||null,this.expirationTime=Date.now()+1e3*E}static fromJSON(g,m){const{refreshToken:E,accessToken:M,expirationTime:O}=m,Z=new dt;return E&&(K("string"==typeof E,"internal-error",{appName:g}),Z.refreshToken=E),M&&(K("string"==typeof M,"internal-error",{appName:g}),Z.accessToken=M),O&&(K("number"==typeof O,"internal-error",{appName:g}),Z.expirationTime=O),Z}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(g){this.accessToken=g.accessToken,this.refreshToken=g.refreshToken,this.expirationTime=g.expirationTime}_clone(){return Object.assign(new dt,this.toJSON())}_performRefresh(){return Qe("not implemented")}}function ke(v,g){K("string"==typeof v||typeof v>"u","internal-error",{appName:g})}class ht{constructor(g){var{uid:m,auth:E,stsTokenManager:M}=g,O=(0,de._T)(g,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new $i(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=m,this.auth=E,this.stsTokenManager=M,this.accessToken=M.accessToken,this.displayName=O.displayName||null,this.email=O.email||null,this.emailVerified=O.emailVerified||!1,this.phoneNumber=O.phoneNumber||null,this.photoURL=O.photoURL||null,this.isAnonymous=O.isAnonymous||!1,this.tenantId=O.tenantId||null,this.providerData=O.providerData?[...O.providerData]:[],this.metadata=new xr(O.createdAt||void 0,O.lastLoginAt||void 0)}getIdToken(g){var m=this;return(0,c.Z)(function*(){const E=yield vt(m,m.stsTokenManager.getToken(m.auth,g));return K(E,m.auth,"internal-error"),m.accessToken!==E&&(m.accessToken=E,yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)),E})()}getIdTokenResult(g){return function Qi(v){return _s.apply(this,arguments)}(this,g)}reload(){return function ii(v){return bn.apply(this,arguments)}(this)}_assign(g){this!==g&&(K(this.uid===g.uid,this.auth,"internal-error"),this.displayName=g.displayName,this.photoURL=g.photoURL,this.email=g.email,this.emailVerified=g.emailVerified,this.phoneNumber=g.phoneNumber,this.isAnonymous=g.isAnonymous,this.tenantId=g.tenantId,this.providerData=g.providerData.map(m=>Object.assign({},m)),this.metadata._copy(g.metadata),this.stsTokenManager._assign(g.stsTokenManager))}_clone(g){const m=new ht(Object.assign(Object.assign({},this),{auth:g,stsTokenManager:this.stsTokenManager._clone()}));return m.metadata._copy(this.metadata),m}_onReload(g){K(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=g,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(g){this.reloadListener?this.reloadListener(g):this.reloadUserInfo=g}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(g,m=!1){var E=this;return(0,c.Z)(function*(){let M=!1;g.idToken&&g.idToken!==E.stsTokenManager.accessToken&&(E.stsTokenManager.updateFromServerResponse(g),M=!0),m&&(yield nr(E)),yield E.auth._persistUserIfCurrent(E),M&&E.auth._notifyListenersIfCurrent(E)})()}delete(){var g=this;return(0,c.Z)(function*(){const m=yield g.getIdToken();return yield vt(g,function hr(v,g){return Yn.apply(this,arguments)}(g.auth,{idToken:m})),g.stsTokenManager.clearRefreshToken(),g.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(g=>Object.assign({},g)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(g,m){var E,M,O,Z,ie,$e,tt,mt;const pt=null!==(E=m.displayName)&&void 0!==E?E:void 0,Er=null!==(M=m.email)&&void 0!==M?M:void 0,As=null!==(O=m.phoneNumber)&&void 0!==O?O:void 0,Ic=null!==(Z=m.photoURL)&&void 0!==Z?Z:void 0,sg=null!==(ie=m.tenantId)&&void 0!==ie?ie:void 0,Ss=null!==($e=m._redirectEventId)&&void 0!==$e?$e:void 0,Wh=null!==(tt=m.createdAt)&&void 0!==tt?tt:void 0,Dc=null!==(mt=m.lastLoginAt)&&void 0!==mt?mt:void 0,{uid:og,emailVerified:T_,isAnonymous:ag,providerData:Su,stsTokenManager:Ld}=m;K(og&&Ld,g,"internal-error");const Wv=dt.fromJSON(this.name,Ld);K("string"==typeof og,g,"internal-error"),ke(pt,g.name),ke(Er,g.name),K("boolean"==typeof T_,g,"internal-error"),K("boolean"==typeof ag,g,"internal-error"),ke(As,g.name),ke(Ic,g.name),ke(sg,g.name),ke(Ss,g.name),ke(Wh,g.name),ke(Dc,g.name);const ea=new ht({uid:og,auth:g,email:Er,emailVerified:T_,displayName:pt,isAnonymous:ag,photoURL:Ic,phoneNumber:As,tenantId:sg,stsTokenManager:Wv,createdAt:Wh,lastLoginAt:Dc});return Su&&Array.isArray(Su)&&(ea.providerData=Su.map(Fd=>Object.assign({},Fd))),Ss&&(ea._redirectEventId=Ss),ea}static _fromIdTokenResponse(g,m,E=!1){return(0,c.Z)(function*(){const M=new dt;M.updateFromServerResponse(m);const O=new ht({uid:m.localId,auth:g,stsTokenManager:M,isAnonymous:E});return yield nr(O),O})()}}const Gt=new Map;function Ht(v){rt(v instanceof Function,"Expected a class definition");let g=Gt.get(v);return g?(rt(g instanceof v,"Instance stored in cache mismatched with class"),g):(g=new v,Gt.set(v,g),g)}const rr=(()=>{class v{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,c.Z)(function*(){return!0})()}_set(m,E){var M=this;return(0,c.Z)(function*(){M.storage[m]=E})()}_get(m){var E=this;return(0,c.Z)(function*(){const M=E.storage[m];return void 0===M?null:M})()}_remove(m){var E=this;return(0,c.Z)(function*(){delete E.storage[m]})()}_addListener(m,E){}_removeListener(m,E){}}return v.type="NONE",v})();function q(v,g,m){return`firebase:${v}:${g}:${m}`}class W{constructor(g,m,E){this.persistence=g,this.auth=m,this.userKey=E;const{config:M,name:O}=this.auth;this.fullUserKey=q(this.userKey,M.apiKey,O),this.fullPersistenceKey=q("persistence",M.apiKey,O),this.boundEventHandler=m._onStorageEvent.bind(m),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(g){return this.persistence._set(this.fullUserKey,g.toJSON())}getCurrentUser(){var g=this;return(0,c.Z)(function*(){const m=yield g.persistence._get(g.fullUserKey);return m?ht._fromJSON(g.auth,m):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(g){var m=this;return(0,c.Z)(function*(){if(m.persistence===g)return;const E=yield m.getCurrentUser();return yield m.removeCurrentUser(),m.persistence=g,E?m.setCurrentUser(E):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(g,m,E="authUser"){return(0,c.Z)(function*(){if(!m.length)return new W(Ht(rr),g,E);const M=(yield Promise.all(m.map(function(){var tt=(0,c.Z)(function*(mt){if(yield mt._isAvailable())return mt});return function(mt){return tt.apply(this,arguments)}}()))).filter(tt=>tt);let O=M[0]||Ht(rr);const Z=q(E,g.config.apiKey,g.name);let ie=null;for(const tt of m)try{const mt=yield tt._get(Z);if(mt){const pt=ht._fromJSON(g,mt);tt!==O&&(ie=pt),O=tt;break}}catch{}const $e=M.filter(tt=>tt._shouldAllowMigration);return O._shouldAllowMigration&&$e.length?(O=$e[0],ie&&(yield O._set(Z,ie.toJSON())),yield Promise.all(m.map(function(){var tt=(0,c.Z)(function*(mt){if(mt!==O)try{yield mt._remove(Z)}catch{}});return function(mt){return tt.apply(this,arguments)}}())),new W(O,g,E)):new W(O,g,E)})()}}function ne(v){const g=v.toLowerCase();if(g.includes("opera/")||g.includes("opr/")||g.includes("opios/"))return"Opera";if(jt(g))return"IEMobile";if(g.includes("msie")||g.includes("trident/"))return"IE";if(g.includes("edge/"))return"Edge";if(ge(g))return"Firefox";if(g.includes("silk/"))return"Silk";if(Cn(g))return"Blackberry";if(Je(g))return"Webos";if(se(g))return"Safari";if((g.includes("chrome/")||lt(g))&&!g.includes("edge/"))return"Chrome";if(tn(g))return"Android";{const E=v.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===E?.length)return E[1]}return"Other"}function ge(v=(0,j.z$)()){return/firefox\//i.test(v)}function se(v=(0,j.z$)()){const g=v.toLowerCase();return g.includes("safari/")&&!g.includes("chrome/")&&!g.includes("crios/")&&!g.includes("android")}function lt(v=(0,j.z$)()){return/crios\//i.test(v)}function jt(v=(0,j.z$)()){return/iemobile/i.test(v)}function tn(v=(0,j.z$)()){return/android/i.test(v)}function Cn(v=(0,j.z$)()){return/blackberry/i.test(v)}function Je(v=(0,j.z$)()){return/webos/i.test(v)}function yt(v=(0,j.z$)()){return/iphone|ipad|ipod/i.test(v)||/macintosh/i.test(v)&&/mobile/i.test(v)}function Vn(v=(0,j.z$)()){return yt(v)||tn(v)||Je(v)||Cn(v)||/windows phone/i.test(v)||jt(v)}function In(v,g=[]){let m;switch(v){case"Browser":m=ne((0,j.z$)());break;case"Worker":m=`${ne((0,j.z$)())}-${v}`;break;default:m=v}const E=g.length?g.join(","):"FirebaseCore-web";return`${m}/JsCore/${fe.SDK_VERSION}/${E}`}function Fs(){return(Fs=(0,c.Z)(function*(v){return(yield qe(v,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Jt(v,g){return Us.apply(this,arguments)}function Us(){return(Us=(0,c.Z)(function*(v,g){return qe(v,"GET","/v2/recaptchaConfig",Pt(v,g))})).apply(this,arguments)}function Vs(v){return void 0!==v&&void 0!==v.getResponse}function Za(v){return void 0!==v&&void 0!==v.enterprise}class Ji{constructor(g){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===g.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=g.recaptchaKey.split("/")[3],this.emailPasswordEnabled=g.recaptchaEnforcementState.some(m=>"EMAIL_PASSWORD_PROVIDER"===m.provider&&"OFF"!==m.enforcementState)}}function Xi(v){return new Promise((g,m)=>{const E=document.createElement("script");E.setAttribute("src",v),E.onload=g,E.onerror=M=>{const O=Ce("internal-error");O.customData=M,m(O)},E.type="text/javascript",E.charset="UTF-8",function fr(){var v,g;return null!==(g=null===(v=document.getElementsByTagName("head"))||void 0===v?void 0:v[0])&&void 0!==g?g:document}().appendChild(E)})}function vs(v){return`__${v}${Math.floor(1e6*Math.random())}`}class Ka{constructor(g){this.type="recaptcha-enterprise",this.auth=Pn(g)}verify(g="verify",m=!1){var E=this;return(0,c.Z)(function*(){function O(){return O=(0,c.Z)(function*(ie){if(!m){if(null==ie.tenantId&&null!=ie._agentRecaptchaConfig)return ie._agentRecaptchaConfig.siteKey;if(null!=ie.tenantId&&void 0!==ie._tenantRecaptchaConfigs[ie.tenantId])return ie._tenantRecaptchaConfigs[ie.tenantId].siteKey}return new Promise(function(){var $e=(0,c.Z)(function*(tt,mt){Jt(ie,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(pt=>{if(void 0!==pt.recaptchaKey){const Er=new Ji(pt);return null==ie.tenantId?ie._agentRecaptchaConfig=Er:ie._tenantRecaptchaConfigs[ie.tenantId]=Er,tt(Er.siteKey)}mt(new Error("recaptcha Enterprise site key undefined"))}).catch(pt=>{mt(pt)})});return function(tt,mt){return $e.apply(this,arguments)}}())}),O.apply(this,arguments)}function Z(ie,$e,tt){const mt=window.grecaptcha;Za(mt)?mt.enterprise.ready(()=>{try{mt.enterprise.execute(ie,{action:g}).then(pt=>{$e(pt)}).catch(pt=>{tt(pt)})}catch(pt){tt(pt)}}):tt(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((ie,$e)=>{(function M(ie){return O.apply(this,arguments)})(E.auth).then(tt=>{if(!m&&Za(window.grecaptcha))Z(tt,ie,$e);else{if(typeof window>"u")return void $e(new Error("RecaptchaVerifier is only supported in browser"));Xi("https://www.google.com/recaptcha/enterprise.js?render="+tt).then(()=>{Z(tt,ie,$e)}).catch(mt=>{$e(mt)})}}).catch(tt=>{$e(tt)})})})()}}function un(v,g,m){return ql.apply(this,arguments)}function ql(){return(ql=(0,c.Z)(function*(v,g,m,E=!1){const M=new Ka(v);let O;try{O=yield M.verify(m)}catch{O=yield M.verify(m,!0)}const Z=Object.assign({},g);return Object.assign(Z,E?{captchaResp:O}:{captchaResponse:O}),Object.assign(Z,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(Z,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),Z})).apply(this,arguments)}class Zl{constructor(g){this.auth=g,this.queue=[]}pushCallback(g,m){const E=O=>new Promise((Z,ie)=>{try{Z(g(O))}catch($e){ie($e)}});E.onAbort=m,this.queue.push(E);const M=this.queue.length-1;return()=>{this.queue[M]=()=>Promise.resolve()}}runMiddleware(g){var m=this;return(0,c.Z)(function*(){if(m.auth.currentUser===g)return;const E=[];try{for(const M of m.queue)yield M(g),M.onAbort&&E.push(M.onAbort)}catch(M){E.reverse();for(const O of E)try{O()}catch{}throw m.auth._errorFactory.create("login-blocked",{originalMessage:M?.message})}})()}}class da{constructor(g,m,E,M){this.app=g,this.heartbeatServiceProvider=m,this.appCheckServiceProvider=E,this.config=M,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ai(this),this.idTokenSubscription=new Ai(this),this.beforeStateQueue=new Zl(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ae,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=g.name,this.clientVersion=M.sdkClientVersion}_initializeWithPersistence(g,m){var E=this;return m&&(this._popupRedirectResolver=Ht(m)),this._initializationPromise=this.queue((0,c.Z)(function*(){var M,O;if(!E._deleted&&(E.persistenceManager=yield W.create(E,g),!E._deleted)){if(null!==(M=E._popupRedirectResolver)&&void 0!==M&&M._shouldInitProactively)try{yield E._popupRedirectResolver._initialize(E)}catch{}yield E.initializeCurrentUser(m),E.lastNotifiedUid=(null===(O=E.currentUser)||void 0===O?void 0:O.uid)||null,!E._deleted&&(E._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var g=this;return(0,c.Z)(function*(){if(g._deleted)return;const m=yield g.assertedPersistence.getCurrentUser();if(g.currentUser||m){if(g.currentUser&&m&&g.currentUser.uid===m.uid)return g._currentUser._assign(m),void(yield g.currentUser.getIdToken());yield g._updateCurrentUser(m,!0)}})()}initializeCurrentUser(g){var m=this;return(0,c.Z)(function*(){var E;const M=yield m.assertedPersistence.getCurrentUser();let O=M,Z=!1;if(g&&m.config.authDomain){yield m.getOrInitRedirectPersistenceManager();const ie=null===(E=m.redirectUser)||void 0===E?void 0:E._redirectEventId,$e=O?._redirectEventId,tt=yield m.tryRedirectSignIn(g);(!ie||ie===$e)&&tt?.user&&(O=tt.user,Z=!0)}if(!O)return m.directlySetCurrentUser(null);if(!O._redirectEventId){if(Z)try{yield m.beforeStateQueue.runMiddleware(O)}catch(ie){O=M,m._popupRedirectResolver._overrideRedirectResult(m,()=>Promise.reject(ie))}return O?m.reloadAndSetCurrentUserOrClear(O):m.directlySetCurrentUser(null)}return K(m._popupRedirectResolver,m,"argument-error"),yield m.getOrInitRedirectPersistenceManager(),m.redirectUser&&m.redirectUser._redirectEventId===O._redirectEventId?m.directlySetCurrentUser(O):m.reloadAndSetCurrentUserOrClear(O)})()}tryRedirectSignIn(g){var m=this;return(0,c.Z)(function*(){let E=null;try{E=yield m._popupRedirectResolver._completeRedirectFn(m,g,!0)}catch{yield m._setRedirectUser(null)}return E})()}reloadAndSetCurrentUserOrClear(g){var m=this;return(0,c.Z)(function*(){try{yield nr(g)}catch(E){if("auth/network-request-failed"!==E?.code)return m.directlySetCurrentUser(null)}return m.directlySetCurrentUser(g)})()}useDeviceLanguage(){this.languageCode=function Re(){if(typeof navigator>"u")return null;const v=navigator;return v.languages&&v.languages[0]||v.language||null}()}_delete(){var g=this;return(0,c.Z)(function*(){g._deleted=!0})()}updateCurrentUser(g){var m=this;return(0,c.Z)(function*(){const E=g?(0,j.m9)(g):null;return E&&K(E.auth.config.apiKey===m.config.apiKey,m,"invalid-user-token"),m._updateCurrentUser(E&&E._clone(m))})()}_updateCurrentUser(g,m=!1){var E=this;return(0,c.Z)(function*(){if(!E._deleted)return g&&K(E.tenantId===g.tenantId,E,"tenant-id-mismatch"),m||(yield E.beforeStateQueue.runMiddleware(g)),E.queue((0,c.Z)(function*(){yield E.directlySetCurrentUser(g),E.notifyAuthListeners()}))})()}signOut(){var g=this;return(0,c.Z)(function*(){return yield g.beforeStateQueue.runMiddleware(null),(g.redirectPersistenceManager||g._popupRedirectResolver)&&(yield g._setRedirectUser(null)),g._updateCurrentUser(null,!0)})()}setPersistence(g){var m=this;return this.queue((0,c.Z)(function*(){yield m.assertedPersistence.setPersistence(Ht(g))}))}initializeRecaptchaConfig(){var g=this;return(0,c.Z)(function*(){const m=yield Jt(g,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),E=new Ji(m);null==g.tenantId?g._agentRecaptchaConfig=E:g._tenantRecaptchaConfigs[g.tenantId]=E,E.emailPasswordEnabled&&new Ka(g).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(g){this._errorFactory=new j.LL("auth","Firebase",g())}onAuthStateChanged(g,m,E){return this.registerStateListener(this.authStateSubscription,g,m,E)}beforeAuthStateChanged(g,m){return this.beforeStateQueue.pushCallback(g,m)}onIdTokenChanged(g,m,E){return this.registerStateListener(this.idTokenSubscription,g,m,E)}toJSON(){var g;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(g=this._currentUser)||void 0===g?void 0:g.toJSON()}}_setRedirectUser(g,m){var E=this;return(0,c.Z)(function*(){const M=yield E.getOrInitRedirectPersistenceManager(m);return null===g?M.removeCurrentUser():M.setCurrentUser(g)})()}getOrInitRedirectPersistenceManager(g){var m=this;return(0,c.Z)(function*(){if(!m.redirectPersistenceManager){const E=g&&Ht(g)||m._popupRedirectResolver;K(E,m,"argument-error"),m.redirectPersistenceManager=yield W.create(m,[Ht(E._redirectPersistence)],"redirectUser"),m.redirectUser=yield m.redirectPersistenceManager.getCurrentUser()}return m.redirectPersistenceManager})()}_redirectUserForId(g){var m=this;return(0,c.Z)(function*(){var E,M;return m._isInitialized&&(yield m.queue((0,c.Z)(function*(){}))),(null===(E=m._currentUser)||void 0===E?void 0:E._redirectEventId)===g?m._currentUser:(null===(M=m.redirectUser)||void 0===M?void 0:M._redirectEventId)===g?m.redirectUser:null})()}_persistUserIfCurrent(g){var m=this;return(0,c.Z)(function*(){if(g===m.currentUser)return m.queue((0,c.Z)(function*(){return m.directlySetCurrentUser(g)}))})()}_notifyListenersIfCurrent(g){g===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var g,m;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const E=null!==(m=null===(g=this.currentUser)||void 0===g?void 0:g.uid)&&void 0!==m?m:null;this.lastNotifiedUid!==E&&(this.lastNotifiedUid=E,this.authStateSubscription.next(this.currentUser))}registerStateListener(g,m,E,M){if(this._deleted)return()=>{};const O="function"==typeof m?m:m.next.bind(m),Z=this._isInitialized?Promise.resolve():this._initializationPromise;return K(Z,this,"internal-error"),Z.then(()=>O(this.currentUser)),"function"==typeof m?g.addObserver(m,E,M):g.addObserver(m)}directlySetCurrentUser(g){var m=this;return(0,c.Z)(function*(){m.currentUser&&m.currentUser!==g&&m._currentUser._stopProactiveRefresh(),g&&m.isProactiveRefreshEnabled&&g._startProactiveRefresh(),m.currentUser=g,g?yield m.assertedPersistence.setCurrentUser(g):yield m.assertedPersistence.removeCurrentUser()})()}queue(g){return this.operations=this.operations.then(g,g),this.operations}get assertedPersistence(){return K(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(g){!g||this.frameworks.includes(g)||(this.frameworks.push(g),this.frameworks.sort(),this.clientVersion=In(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var g=this;return(0,c.Z)(function*(){var m;const E={"X-Client-Version":g.clientVersion};g.app.options.appId&&(E["X-Firebase-gmpid"]=g.app.options.appId);const M=yield null===(m=g.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===m?void 0:m.getHeartbeatsHeader();M&&(E["X-Firebase-Client"]=M);const O=yield g._getAppCheckToken();return O&&(E["X-Firebase-AppCheck"]=O),E})()}_getAppCheckToken(){var g=this;return(0,c.Z)(function*(){var m;const E=yield null===(m=g.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===m?void 0:m.getToken();return E?.error&&function Et(v,...g){Ge.logLevel<=ve.in.WARN&&Ge.warn(`Auth (${fe.SDK_VERSION}): ${v}`,...g)}(`Error while retrieving App Check token: ${E.error}`),E?.token})()}}function Pn(v){return(0,j.m9)(v)}class Ai{constructor(g){this.auth=g,this.observer=null,this.addObserver=(0,j.ne)(m=>this.observer=m)}get next(){return K(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Wu(v){const g=v.indexOf(":");return g<0?"":v.substr(0,g+1)}function gi(v){if(!v)return null;const g=Number(v);return isNaN(g)?null:g}class mi{constructor(g,m){this.providerId=g,this.signInMethod=m}toJSON(){return Qe("not implemented")}_getIdTokenResponse(g){return Qe("not implemented")}_linkToIdToken(g,m){return Qe("not implemented")}_getReauthenticationResolver(g){return Qe("not implemented")}}function ha(v,g){return qr.apply(this,arguments)}function qr(){return(qr=(0,c.Z)(function*(v,g){return qe(v,"POST","/v1/accounts:resetPassword",Pt(v,g))})).apply(this,arguments)}function Qa(v,g){return Kl.apply(this,arguments)}function Kl(){return(Kl=(0,c.Z)(function*(v,g){return qe(v,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Yl(v,g){return Ja.apply(this,arguments)}function Ja(){return(Ja=(0,c.Z)(function*(v,g){return qe(v,"POST","/v1/accounts:update",Pt(v,g))})).apply(this,arguments)}function cd(v,g){return Si.apply(this,arguments)}function Si(){return(Si=(0,c.Z)(function*(v,g){return hn(v,"POST","/v1/accounts:signInWithPassword",Pt(v,g))})).apply(this,arguments)}function Ql(v,g){return qu.apply(this,arguments)}function qu(){return(qu=(0,c.Z)(function*(v,g){return qe(v,"POST","/v1/accounts:sendOobCode",Pt(v,g))})).apply(this,arguments)}function Xa(v,g){return Zu.apply(this,arguments)}function Zu(){return(Zu=(0,c.Z)(function*(v,g){return Ql(v,g)})).apply(this,arguments)}function Jl(v,g){return fa.apply(this,arguments)}function fa(){return(fa=(0,c.Z)(function*(v,g){return Ql(v,g)})).apply(this,arguments)}function Bs(v,g){return Ku.apply(this,arguments)}function Ku(){return(Ku=(0,c.Z)(function*(v,g){return Ql(v,g)})).apply(this,arguments)}function mh(v,g){return Yu.apply(this,arguments)}function Yu(){return(Yu=(0,c.Z)(function*(v,g){return Ql(v,g)})).apply(this,arguments)}function Qu(){return(Qu=(0,c.Z)(function*(v,g){return hn(v,"POST","/v1/accounts:signInWithEmailLink",Pt(v,g))})).apply(this,arguments)}function el(){return(el=(0,c.Z)(function*(v,g){return hn(v,"POST","/v1/accounts:signInWithEmailLink",Pt(v,g))})).apply(this,arguments)}class fo extends mi{constructor(g,m,E,M=null){super("password",E),this._email=g,this._password=m,this._tenantId=M}static _fromEmailAndPassword(g,m){return new fo(g,m,"password")}static _fromEmailAndCode(g,m,E=null){return new fo(g,m,"emailLink",E)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(g){const m="string"==typeof g?JSON.parse(g):g;if(m?.email&&m?.password){if("password"===m.signInMethod)return this._fromEmailAndPassword(m.email,m.password);if("emailLink"===m.signInMethod)return this._fromEmailAndCode(m.email,m.password,m.tenantId)}return null}_getIdTokenResponse(g){var m=this;return(0,c.Z)(function*(){var E;switch(m.signInMethod){case"password":const M={returnSecureToken:!0,email:m._email,password:m._password,clientType:"CLIENT_TYPE_WEB"};if(null!==(E=g._getRecaptchaConfig())&&void 0!==E&&E.emailPasswordEnabled){const O=yield un(g,M,"signInWithPassword");return cd(g,O)}return cd(g,M).catch(function(){var O=(0,c.Z)(function*(Z){if("auth/missing-recaptcha-token"===Z.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const ie=yield un(g,M,"signInWithPassword");return cd(g,ie)}return Promise.reject(Z)});return function(Z){return O.apply(this,arguments)}}());case"emailLink":return function _h(v,g){return Qu.apply(this,arguments)}(g,{email:m._email,oobCode:m._password});default:xe(g,"internal-error")}})()}_linkToIdToken(g,m){var E=this;return(0,c.Z)(function*(){switch(E.signInMethod){case"password":return Qa(g,{idToken:m,returnSecureToken:!0,email:E._email,password:E._password});case"emailLink":return function Ju(v,g){return el.apply(this,arguments)}(g,{idToken:m,email:E._email,oobCode:E._password});default:xe(g,"internal-error")}})()}_getReauthenticationResolver(g){return this._getIdTokenResponse(g)}}function Hs(v,g){return po.apply(this,arguments)}function po(){return(po=(0,c.Z)(function*(v,g){return hn(v,"POST","/v1/accounts:signInWithIdp",Pt(v,g))})).apply(this,arguments)}class zi extends mi{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(g){const m=new zi(g.providerId,g.signInMethod);return g.idToken||g.accessToken?(g.idToken&&(m.idToken=g.idToken),g.accessToken&&(m.accessToken=g.accessToken),g.nonce&&!g.pendingToken&&(m.nonce=g.nonce),g.pendingToken&&(m.pendingToken=g.pendingToken)):g.oauthToken&&g.oauthTokenSecret?(m.accessToken=g.oauthToken,m.secret=g.oauthTokenSecret):xe("argument-error"),m}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(g){const m="string"==typeof g?JSON.parse(g):g,{providerId:E,signInMethod:M}=m,O=(0,de._T)(m,["providerId","signInMethod"]);if(!E||!M)return null;const Z=new zi(E,M);return Z.idToken=O.idToken||void 0,Z.accessToken=O.accessToken||void 0,Z.secret=O.secret,Z.nonce=O.nonce,Z.pendingToken=O.pendingToken||null,Z}_getIdTokenResponse(g){return Hs(g,this.buildRequest())}_linkToIdToken(g,m){const E=this.buildRequest();return E.idToken=m,Hs(g,E)}_getReauthenticationResolver(g){const m=this.buildRequest();return m.autoCreate=!1,Hs(g,m)}buildRequest(){const g={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)g.pendingToken=this.pendingToken;else{const m={};this.idToken&&(m.id_token=this.idToken),this.accessToken&&(m.access_token=this.accessToken),this.secret&&(m.oauth_token_secret=this.secret),m.providerId=this.providerId,this.nonce&&!this.pendingToken&&(m.nonce=this.nonce),g.postBody=(0,j.xO)(m)}return g}}function tl(v,g){return $s.apply(this,arguments)}function $s(){return($s=(0,c.Z)(function*(v,g){return qe(v,"POST","/v1/accounts:sendVerificationCode",Pt(v,g))})).apply(this,arguments)}function pa(){return(pa=(0,c.Z)(function*(v,g){return hn(v,"POST","/v1/accounts:signInWithPhoneNumber",Pt(v,g))})).apply(this,arguments)}function rl(){return(rl=(0,c.Z)(function*(v,g){const m=yield hn(v,"POST","/v1/accounts:signInWithPhoneNumber",Pt(v,g));if(m.temporaryProof)throw Bt(v,"account-exists-with-different-credential",m);return m})).apply(this,arguments)}const Xl={USER_NOT_FOUND:"user-not-found"};function Gi(){return(Gi=(0,c.Z)(function*(v,g){return hn(v,"POST","/v1/accounts:signInWithPhoneNumber",Pt(v,Object.assign(Object.assign({},g),{operation:"REAUTH"})),Xl)})).apply(this,arguments)}class wr extends mi{constructor(g){super("phone","phone"),this.params=g}static _fromVerification(g,m){return new wr({verificationId:g,verificationCode:m})}static _fromTokenResponse(g,m){return new wr({phoneNumber:g,temporaryProof:m})}_getIdTokenResponse(g){return function nl(v,g){return pa.apply(this,arguments)}(g,this._makeVerificationRequest())}_linkToIdToken(g,m){return function Xu(v,g){return rl.apply(this,arguments)}(g,Object.assign({idToken:m},this._makeVerificationRequest()))}_getReauthenticationResolver(g){return function es(v,g){return Gi.apply(this,arguments)}(g,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:g,phoneNumber:m,verificationId:E,verificationCode:M}=this.params;return g&&m?{temporaryProof:g,phoneNumber:m}:{sessionInfo:E,code:M}}toJSON(){const g={providerId:this.providerId};return this.params.phoneNumber&&(g.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(g.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(g.verificationCode=this.params.verificationCode),this.params.verificationId&&(g.verificationId=this.params.verificationId),g}static fromJSON(g){"string"==typeof g&&(g=JSON.parse(g));const{verificationId:m,verificationCode:E,phoneNumber:M,temporaryProof:O}=g;return E||m||M||O?new wr({verificationId:m,verificationCode:E,phoneNumber:M,temporaryProof:O}):null}}class bs{constructor(g){var m,E,M,O,Z,ie;const $e=(0,j.zd)((0,j.pd)(g)),tt=null!==(m=$e.apiKey)&&void 0!==m?m:null,mt=null!==(E=$e.oobCode)&&void 0!==E?E:null,pt=function ga(v){switch(v){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(M=$e.mode)&&void 0!==M?M:null);K(tt&&mt&&pt,"argument-error"),this.apiKey=tt,this.operation=pt,this.code=mt,this.continueUrl=null!==(O=$e.continueUrl)&&void 0!==O?O:null,this.languageCode=null!==(Z=$e.languageCode)&&void 0!==Z?Z:null,this.tenantId=null!==(ie=$e.tenantId)&&void 0!==ie?ie:null}static parseLink(g){const m=function yh(v){const g=(0,j.zd)((0,j.pd)(v)).link,m=g?(0,j.zd)((0,j.pd)(g)).deep_link_id:null,E=(0,j.zd)((0,j.pd)(v)).deep_link_id;return(E?(0,j.zd)((0,j.pd)(E)).link:null)||E||m||g||v}(g);try{return new bs(m)}catch{return null}}}let zs=(()=>{class v{constructor(){this.providerId=v.PROVIDER_ID}static credential(m,E){return fo._fromEmailAndPassword(m,E)}static credentialWithLink(m,E){const M=bs.parseLink(E);return K(M,"argument-error"),fo._fromEmailAndCode(m,M.code,M.tenantId)}}return v.PROVIDER_ID="password",v.EMAIL_PASSWORD_SIGN_IN_METHOD="password",v.EMAIL_LINK_SIGN_IN_METHOD="emailLink",v})();class kn{constructor(g){this.providerId=g,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(g){this.defaultLanguageCode=g}setCustomParameters(g){return this.customParameters=g,this}getCustomParameters(){return this.customParameters}}class zo extends kn{constructor(){super(...arguments),this.scopes=[]}addScope(g){return this.scopes.includes(g)||this.scopes.push(g),this}getScopes(){return[...this.scopes]}}class ma extends zo{static credentialFromJSON(g){const m="string"==typeof g?JSON.parse(g):g;return K("providerId"in m&&"signInMethod"in m,"argument-error"),zi._fromParams(m)}credential(g){return this._credential(Object.assign(Object.assign({},g),{nonce:g.rawNonce}))}_credential(g){return K(g.idToken||g.accessToken,"argument-error"),zi._fromParams(Object.assign(Object.assign({},g),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(g){return ma.oauthCredentialFromTaggedObject(g)}static credentialFromError(g){return ma.oauthCredentialFromTaggedObject(g.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:m,oauthAccessToken:E,oauthTokenSecret:M,pendingToken:O,nonce:Z,providerId:ie}=g;if(!E&&!M&&!m&&!O||!ie)return null;try{return new ma(ie)._credential({idToken:m,accessToken:E,nonce:Z,pendingToken:O})}catch{return null}}}let _i=(()=>{class v extends zo{constructor(){super("facebook.com")}static credential(m){return zi._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.FACEBOOK_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return v.credential(m.oauthAccessToken)}catch{return null}}}return v.FACEBOOK_SIGN_IN_METHOD="facebook.com",v.PROVIDER_ID="facebook.com",v})(),Rr=(()=>{class v extends zo{constructor(){super("google.com"),this.addScope("profile")}static credential(m,E){return zi._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GOOGLE_SIGN_IN_METHOD,idToken:m,accessToken:E})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:E,oauthAccessToken:M}=m;if(!E&&!M)return null;try{return v.credential(E,M)}catch{return null}}}return v.GOOGLE_SIGN_IN_METHOD="google.com",v.PROVIDER_ID="google.com",v})(),_a=(()=>{class v extends zo{constructor(){super("github.com")}static credential(m){return zi._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GITHUB_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return v.credential(m.oauthAccessToken)}catch{return null}}}return v.GITHUB_SIGN_IN_METHOD="github.com",v.PROVIDER_ID="github.com",v})();class xi extends mi{constructor(g,m){super(g,g),this.pendingToken=m}_getIdTokenResponse(g){return Hs(g,this.buildRequest())}_linkToIdToken(g,m){const E=this.buildRequest();return E.idToken=m,Hs(g,E)}_getReauthenticationResolver(g){const m=this.buildRequest();return m.autoCreate=!1,Hs(g,m)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(g){const m="string"==typeof g?JSON.parse(g):g,{providerId:E,signInMethod:M,pendingToken:O}=m;return E&&M&&O&&E===M?new xi(E,O):null}static _create(g,m){return new xi(g,m)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class va extends kn{constructor(g){K(g.startsWith("saml."),"argument-error"),super(g)}static credentialFromResult(g){return va.samlCredentialFromTaggedObject(g)}static credentialFromError(g){return va.samlCredentialFromTaggedObject(g.customData||{})}static credentialFromJSON(g){const m=xi.fromJSON(g);return K(m,"argument-error"),m}static samlCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{pendingToken:m,providerId:E}=g;if(!m||!E)return null;try{return xi._create(E,m)}catch{return null}}}let wa=(()=>{class v extends zo{constructor(){super("twitter.com")}static credential(m,E){return zi._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.TWITTER_SIGN_IN_METHOD,oauthToken:m,oauthTokenSecret:E})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthAccessToken:E,oauthTokenSecret:M}=m;if(!E||!M)return null;try{return v.credential(E,M)}catch{return null}}}return v.TWITTER_SIGN_IN_METHOD="twitter.com",v.PROVIDER_ID="twitter.com",v})();function Go(v,g){return Ri.apply(this,arguments)}function Ri(){return(Ri=(0,c.Z)(function*(v,g){return hn(v,"POST","/v1/accounts:signUp",Pt(v,g))})).apply(this,arguments)}class Ur{constructor(g){this.user=g.user,this.providerId=g.providerId,this._tokenResponse=g._tokenResponse,this.operationType=g.operationType}static _fromIdTokenResponse(g,m,E,M=!1){return(0,c.Z)(function*(){const O=yield ht._fromIdTokenResponse(g,E,M),Z=ir(E);return new Ur({user:O,providerId:Z,_tokenResponse:E,operationType:m})})()}static _forOperation(g,m,E){return(0,c.Z)(function*(){yield g._updateTokensIfNecessary(E,!0);const M=ir(E);return new Ur({user:g,providerId:M,_tokenResponse:E,operationType:m})})()}}function ir(v){return v.providerId?v.providerId:"phoneNumber"in v?"phone":null}function go(){return(go=(0,c.Z)(function*(v){var g;const m=Pn(v);if(yield m._initializationPromise,null!==(g=m.currentUser)&&void 0!==g&&g.isAnonymous)return new Ur({user:m.currentUser,providerId:null,operationType:"signIn"});const E=yield Go(m,{returnSecureToken:!0}),M=yield Ur._fromIdTokenResponse(m,"signIn",E,!0);return yield m._updateCurrentUser(M.user),M})).apply(this,arguments)}class Gs extends j.ZR{constructor(g,m,E,M){var O;super(m.code,m.message),this.operationType=E,this.user=M,Object.setPrototypeOf(this,Gs.prototype),this.customData={appName:g.name,tenantId:null!==(O=g.tenantId)&&void 0!==O?O:void 0,_serverResponse:m.customData._serverResponse,operationType:E}}static _fromErrorAndOperation(g,m,E,M){return new Gs(g,m,E,M)}}function eu(v,g,m,E){return("reauthenticate"===g?m._getReauthenticationResolver(v):m._getIdTokenResponse(v)).catch(O=>{throw"auth/multi-factor-auth-required"===O.code?Gs._fromErrorAndOperation(v,O,g,E):O})}function tu(v){return new Set(v.map(({providerId:g})=>g).filter(g=>!!g))}function Wo(){return(Wo=(0,c.Z)(function*(v,g){const m=(0,j.m9)(v);yield Oe(!0,m,g);const{providerUserInfo:E}=yield pi(m.auth,{idToken:yield m.getIdToken(),deleteProvider:[g]}),M=tu(E||[]);return m.providerData=m.providerData.filter(O=>M.has(O.providerId)),M.has("phone")||(m.phoneNumber=null),yield m.auth._persistUserIfCurrent(m),m})).apply(this,arguments)}function ba(v,g){return il.apply(this,arguments)}function il(){return(il=(0,c.Z)(function*(v,g,m=!1){const E=yield vt(v,g._linkToIdToken(v.auth,yield v.getIdToken()),m);return Ur._forOperation(v,"link",E)})).apply(this,arguments)}function Oe(v,g,m){return on.apply(this,arguments)}function on(){return(on=(0,c.Z)(function*(v,g,m){yield nr(g);const M=!1===v?"provider-already-linked":"no-such-provider";K(tu(g.providerData).has(m)===v,g.auth,M)})).apply(this,arguments)}function ru(v,g){return Ws.apply(this,arguments)}function Ws(){return(Ws=(0,c.Z)(function*(v,g,m=!1){const{auth:E}=v,M="reauthenticate";try{const O=yield vt(v,eu(E,M,g,v),m);K(O.idToken,E,"internal-error");const Z=$n(O.idToken);K(Z,E,"internal-error");const{sub:ie}=Z;return K(v.uid===ie,E,"user-mismatch"),Ur._forOperation(v,M,O)}catch(O){throw"auth/user-not-found"===O?.code&&xe(E,"user-mismatch"),O}})).apply(this,arguments)}function sr(v,g){return qo.apply(this,arguments)}function qo(){return(qo=(0,c.Z)(function*(v,g,m=!1){const E="signIn",M=yield eu(v,E,g),O=yield Ur._fromIdTokenResponse(v,E,M);return m||(yield v._updateCurrentUser(O.user)),O})).apply(this,arguments)}function qs(v,g){return si.apply(this,arguments)}function si(){return(si=(0,c.Z)(function*(v,g){return sr(Pn(v),g)})).apply(this,arguments)}function Zo(v,g){return Ko.apply(this,arguments)}function Ko(){return(Ko=(0,c.Z)(function*(v,g){const m=(0,j.m9)(v);return yield Oe(!1,m,g.providerId),ba(m,g)})).apply(this,arguments)}function iu(v,g){return On.apply(this,arguments)}function On(){return(On=(0,c.Z)(function*(v,g){return ru((0,j.m9)(v),g)})).apply(this,arguments)}function vh(v,g){return Yo.apply(this,arguments)}function Yo(){return(Yo=(0,c.Z)(function*(v,g){return hn(v,"POST","/v1/accounts:signInWithCustomToken",Pt(v,g))})).apply(this,arguments)}function ts(){return(ts=(0,c.Z)(function*(v,g){const m=Pn(v),E=yield vh(m,{token:g,returnSecureToken:!0}),M=yield Ur._fromIdTokenResponse(m,"signIn",E);return yield m._updateCurrentUser(M.user),M})).apply(this,arguments)}class Ea{constructor(g,m){this.factorId=g,this.uid=m.mfaEnrollmentId,this.enrollmentTime=new Date(m.enrolledAt).toUTCString(),this.displayName=m.displayName}static _fromServerResponse(g,m){return"phoneInfo"in m?ns._fromServerResponse(g,m):"totpInfo"in m?Mi._fromServerResponse(g,m):xe(g,"internal-error")}}class ns extends Ea{constructor(g){super("phone",g),this.phoneNumber=g.phoneInfo}static _fromServerResponse(g,m){return new ns(m)}}class Mi extends Ea{constructor(g){super("totp",g)}static _fromServerResponse(g,m){return new Mi(m)}}function Ca(v,g,m){var E;K((null===(E=m.url)||void 0===E?void 0:E.length)>0,v,"invalid-continue-uri"),K(typeof m.dynamicLinkDomain>"u"||m.dynamicLinkDomain.length>0,v,"invalid-dynamic-link-domain"),g.continueUrl=m.url,g.dynamicLinkDomain=m.dynamicLinkDomain,g.canHandleCodeInApp=m.handleCodeInApp,m.iOS&&(K(m.iOS.bundleId.length>0,v,"missing-ios-bundle-id"),g.iOSBundleId=m.iOS.bundleId),m.android&&(K(m.android.packageName.length>0,v,"missing-android-pkg-name"),g.androidInstallApp=m.android.installApp,g.androidMinimumVersionCode=m.android.minimumVersion,g.androidPackageName=m.android.packageName)}function ec(){return ec=(0,c.Z)(function*(v,g,m){var E;const M=Pn(v),O={requestType:"PASSWORD_RESET",email:g,clientType:"CLIENT_TYPE_WEB"};if(null!==(E=M._getRecaptchaConfig())&&void 0!==E&&E.emailPasswordEnabled){const Z=yield un(M,O,"getOobCode",!0);m&&Ca(M,Z,m),yield Jl(M,Z)}else m&&Ca(M,O,m),yield Jl(M,O).catch(function(){var Z=(0,c.Z)(function*(ie){if("auth/missing-recaptcha-token"!==ie.code)return Promise.reject(ie);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const $e=yield un(M,O,"getOobCode",!0);m&&Ca(M,$e,m),yield Jl(M,$e)}});return function(ie){return Z.apply(this,arguments)}}())}),ec.apply(this,arguments)}function mo(){return(mo=(0,c.Z)(function*(v,g,m){yield ha((0,j.m9)(v),{oobCode:g,newPassword:m})})).apply(this,arguments)}function Zs(){return(Zs=(0,c.Z)(function*(v,g){yield Yl((0,j.m9)(v),{oobCode:g})})).apply(this,arguments)}function Ks(v,g){return Ia.apply(this,arguments)}function Ia(){return(Ia=(0,c.Z)(function*(v,g){const m=(0,j.m9)(v),E=yield ha(m,{oobCode:g}),M=E.requestType;switch(K(M,m,"internal-error"),M){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":K(E.newEmail,m,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":K(E.mfaInfo,m,"internal-error");default:K(E.email,m,"internal-error")}let O=null;return E.mfaInfo&&(O=Ea._fromServerResponse(Pn(m),E.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.newEmail:E.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.email:E.newEmail)||null,multiFactorInfo:O},operation:M}})).apply(this,arguments)}function Ys(){return(Ys=(0,c.Z)(function*(v,g){const{data:m}=yield Ks((0,j.m9)(v),g);return m.email})).apply(this,arguments)}function Da(){return Da=(0,c.Z)(function*(v,g,m){var E;const M=Pn(v),O={returnSecureToken:!0,email:g,password:m,clientType:"CLIENT_TYPE_WEB"};let Z;if(null!==(E=M._getRecaptchaConfig())&&void 0!==E&&E.emailPasswordEnabled){const tt=yield un(M,O,"signUpPassword");Z=Go(M,tt)}else Z=Go(M,O).catch(function(){var tt=(0,c.Z)(function*(mt){if("auth/missing-recaptcha-token"===mt.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const pt=yield un(M,O,"signUpPassword");return Go(M,pt)}return Promise.reject(mt)});return function(mt){return tt.apply(this,arguments)}}());const ie=yield Z.catch(tt=>Promise.reject(tt)),$e=yield Ur._fromIdTokenResponse(M,"signIn",ie);return yield M._updateCurrentUser($e.user),$e}),Da.apply(this,arguments)}function Qs(){return Qs=(0,c.Z)(function*(v,g,m){var E;const M=Pn(v),O={requestType:"EMAIL_SIGNIN",email:g,clientType:"CLIENT_TYPE_WEB"};function Z(ie,$e){K($e.handleCodeInApp,M,"argument-error"),$e&&Ca(M,ie,$e)}if(null!==(E=M._getRecaptchaConfig())&&void 0!==E&&E.emailPasswordEnabled){const ie=yield un(M,O,"getOobCode",!0);Z(ie,m),yield Bs(M,ie)}else Z(O,m),yield Bs(M,O).catch(function(){var ie=(0,c.Z)(function*($e){if("auth/missing-recaptcha-token"!==$e.code)return Promise.reject($e);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const tt=yield un(M,O,"getOobCode",!0);Z(tt,m),yield Bs(M,tt)}});return function($e){return ie.apply(this,arguments)}}())}),Qs.apply(this,arguments)}function Vr(){return(Vr=(0,c.Z)(function*(v,g,m){const E=(0,j.m9)(v),M=zs.credentialWithLink(g,m||Vt());return K(M._tenantId===(E.tenantId||null),E,"tenant-id-mismatch"),qs(E,M)})).apply(this,arguments)}function Js(v,g){return zn.apply(this,arguments)}function zn(){return(zn=(0,c.Z)(function*(v,g){return qe(v,"POST","/v1/accounts:createAuthUri",Pt(v,g))})).apply(this,arguments)}function al(){return(al=(0,c.Z)(function*(v,g){const E={identifier:g,continueUri:at()?Vt():"http://localhost"},{signinMethods:M}=yield Js((0,j.m9)(v),E);return M||[]})).apply(this,arguments)}function ll(){return(ll=(0,c.Z)(function*(v,g){const m=(0,j.m9)(v),M={requestType:"VERIFY_EMAIL",idToken:yield v.getIdToken()};g&&Ca(m.auth,M,g);const{email:O}=yield Xa(m.auth,M);O!==v.email&&(yield v.reload())})).apply(this,arguments)}function rc(){return(rc=(0,c.Z)(function*(v,g,m){const E=(0,j.m9)(v),O={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield v.getIdToken(),newEmail:g};m&&Ca(E.auth,O,m);const{email:Z}=yield mh(E.auth,O);Z!==v.email&&(yield v.reload())})).apply(this,arguments)}function ic(v,g){return Xs.apply(this,arguments)}function Xs(){return(Xs=(0,c.Z)(function*(v,g){return qe(v,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function ul(){return(ul=(0,c.Z)(function*(v,{displayName:g,photoURL:m}){if(void 0===g&&void 0===m)return;const E=(0,j.m9)(v),O={idToken:yield E.getIdToken(),displayName:g,photoUrl:m,returnSecureToken:!0},Z=yield vt(E,ic(E.auth,O));E.displayName=Z.displayName||null,E.photoURL=Z.photoUrl||null;const ie=E.providerData.find(({providerId:$e})=>"password"===$e);ie&&(ie.displayName=E.displayName,ie.photoURL=E.photoURL),yield E._updateTokensIfNecessary(Z)})).apply(this,arguments)}function eo(v,g,m){return Qo.apply(this,arguments)}function Qo(){return(Qo=(0,c.Z)(function*(v,g,m){const{auth:E}=v,O={idToken:yield v.getIdToken(),returnSecureToken:!0};g&&(O.email=g),m&&(O.password=m);const Z=yield vt(v,Qa(E,O));yield v._updateTokensIfNecessary(Z,!0)})).apply(this,arguments)}class to{constructor(g,m,E={}){this.isNewUser=g,this.providerId=m,this.profile=E}}class Jn extends to{constructor(g,m,E,M){super(g,m,E),this.username=M}}class sc extends to{constructor(g,m){super(g,"facebook.com",m)}}class yi extends Jn{constructor(g,m){super(g,"github.com",m,"string"==typeof m?.login?m?.login:null)}}class rs extends to{constructor(g,m){super(g,"google.com",m)}}class no extends Jn{constructor(g,m,E){super(g,"twitter.com",m,E)}}function dl(v){const{user:g,_tokenResponse:m}=v;return g.isAnonymous&&!m?{providerId:null,isNewUser:!1,profile:null}:function bh(v){var g,m;if(!v)return null;const{providerId:E}=v,M=v.rawUserInfo?JSON.parse(v.rawUserInfo):{},O=v.isNewUser||"identitytoolkit#SignupNewUserResponse"===v.kind;if(!E&&v?.idToken){const Z=null===(m=null===(g=$n(v.idToken))||void 0===g?void 0:g.firebase)||void 0===m?void 0:m.sign_in_provider;if(Z)return new to(O,"anonymous"!==Z&&"custom"!==Z?Z:null)}if(!E)return null;switch(E){case"facebook.com":return new sc(O,M);case"github.com":return new yi(O,M);case"google.com":return new rs(O,M);case"twitter.com":return new no(O,M,v.screenName||null);case"custom":case"anonymous":return new to(O,null);default:return new to(O,E,M)}}(m)}class G{constructor(g,m,E){this.type=g,this.credential=m,this.auth=E}static _fromIdtoken(g,m){return new G("enroll",g,m)}static _fromMfaPendingCredential(g){return new G("signin",g)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(g){var m,E;if(g?.multiFactorSession){if(null!==(m=g.multiFactorSession)&&void 0!==m&&m.pendingCredential)return G._fromMfaPendingCredential(g.multiFactorSession.pendingCredential);if(null!==(E=g.multiFactorSession)&&void 0!==E&&E.idToken)return G._fromIdtoken(g.multiFactorSession.idToken)}return null}}class Ie{constructor(g,m,E){this.session=g,this.hints=m,this.signInResolver=E}static _fromError(g,m){const E=Pn(g),M=m.customData._serverResponse,O=(M.mfaInfo||[]).map(ie=>Ea._fromServerResponse(E,ie));K(M.mfaPendingCredential,E,"internal-error");const Z=G._fromMfaPendingCredential(M.mfaPendingCredential);return new Ie(Z,O,function(){var ie=(0,c.Z)(function*($e){const tt=yield $e._process(E,Z);delete M.mfaInfo,delete M.mfaPendingCredential;const mt=Object.assign(Object.assign({},M),{idToken:tt.idToken,refreshToken:tt.refreshToken});switch(m.operationType){case"signIn":const pt=yield Ur._fromIdTokenResponse(E,m.operationType,mt);return yield E._updateCurrentUser(pt.user),pt;case"reauthenticate":return K(m.user,E,"internal-error"),Ur._forOperation(m.user,m.operationType,mt);default:xe(E,"internal-error")}});return function($e){return ie.apply(this,arguments)}}())}resolveSignIn(g){var m=this;return(0,c.Z)(function*(){return m.signInResolver(g)})()}}function Dn(v,g){return qe(v,"POST","/v2/accounts/mfaEnrollment:start",Pt(v,g))}class fl{constructor(g){this.user=g,this.enrolledFactors=[],g._onReload(m=>{m.mfaInfo&&(this.enrolledFactors=m.mfaInfo.map(E=>Ea._fromServerResponse(g.auth,E)))})}static _fromUser(g){return new fl(g)}getSession(){var g=this;return(0,c.Z)(function*(){return G._fromIdtoken(yield g.user.getIdToken(),g.user.auth)})()}enroll(g,m){var E=this;return(0,c.Z)(function*(){const M=g,O=yield E.getSession(),Z=yield vt(E.user,M._process(E.user.auth,O,m));return yield E.user._updateTokensIfNecessary(Z),E.user.reload()})()}unenroll(g){var m=this;return(0,c.Z)(function*(){const E="string"==typeof g?g:g.uid,M=yield m.user.getIdToken();try{const O=yield vt(m.user,function is(v,g){return qe(v,"POST","/v2/accounts/mfaEnrollment:withdraw",Pt(v,g))}(m.user.auth,{idToken:M,mfaEnrollmentId:E}));m.enrolledFactors=m.enrolledFactors.filter(({uid:Z})=>Z!==E),yield m.user._updateTokensIfNecessary(O),yield m.user.reload()}catch(O){throw O}})()}}const Ta=new WeakMap,Aa="__sak";class du{constructor(g,m){this.storageRetriever=g,this.type=m}_isAvailable(){try{return this.storage?(this.storage.setItem(Aa,"1"),this.storage.removeItem(Aa),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(g,m){return this.storage.setItem(g,JSON.stringify(m)),Promise.resolve()}_get(g){const m=this.storage.getItem(g);return Promise.resolve(m?JSON.parse(m):null)}_remove(g){return this.storage.removeItem(g),Promise.resolve()}get storage(){return this.storageRetriever()}}const gl=(()=>{class v extends du{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(m,E)=>this.onStorageEvent(m,E),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function hu(){const v=(0,j.z$)();return se(v)||yt(v)}()&&function ho(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Vn(),this._shouldAllowMigration=!0}forAllChangedKeys(m){for(const E of Object.keys(this.listeners)){const M=this.storage.getItem(E),O=this.localCache[E];M!==O&&m(E,O,M)}}onStorageEvent(m,E=!1){if(!m.key)return void this.forAllChangedKeys((ie,$e,tt)=>{this.notifyListeners(ie,tt)});const M=m.key;if(E?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ie=this.storage.getItem(M);if(m.newValue!==ie)null!==m.newValue?this.storage.setItem(M,m.newValue):this.storage.removeItem(M);else if(this.localCache[M]===m.newValue&&!E)return}const O=()=>{const ie=this.storage.getItem(M);!E&&this.localCache[M]===ie||this.notifyListeners(M,ie)},Z=this.storage.getItem(M);!function _r(){return(0,j.w1)()&&10===document.documentMode}()||Z===m.newValue||m.newValue===m.oldValue?O():setTimeout(O,10)}notifyListeners(m,E){this.localCache[m]=E;const M=this.listeners[m];if(M)for(const O of Array.from(M))O(E&&JSON.parse(E))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((m,E,M)=>{this.onStorageEvent(new StorageEvent("storage",{key:m,oldValue:E,newValue:M}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(m,E){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[m]||(this.listeners[m]=new Set,this.localCache[m]=this.storage.getItem(m)),this.listeners[m].add(E)}_removeListener(m,E){this.listeners[m]&&(this.listeners[m].delete(E),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(m,E){var M=()=>super._set,O=this;return(0,c.Z)(function*(){yield M().call(O,m,E),O.localCache[m]=JSON.stringify(E)})()}_get(m){var E=()=>super._get,M=this;return(0,c.Z)(function*(){const O=yield E().call(M,m);return M.localCache[m]=JSON.stringify(O),O})()}_remove(m){var E=()=>super._remove,M=this;return(0,c.Z)(function*(){yield E().call(M,m),delete M.localCache[m]})()}}return v.type="LOCAL",v})(),vi=(()=>{class v extends du{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(m,E){}_removeListener(m,E){}}return v.type="SESSION",v})();let uc=(()=>{class v{constructor(m){this.eventTarget=m,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(m){const E=this.receivers.find(O=>O.isListeningto(m));if(E)return E;const M=new v(m);return this.receivers.push(M),M}isListeningto(m){return this.eventTarget===m}handleEvent(m){var E=this;return(0,c.Z)(function*(){const M=m,{eventId:O,eventType:Z,data:ie}=M.data,$e=E.handlersMap[Z];if(!$e?.size)return;M.ports[0].postMessage({status:"ack",eventId:O,eventType:Z});const tt=Array.from($e).map(function(){var pt=(0,c.Z)(function*(Er){return Er(M.origin,ie)});return function(Er){return pt.apply(this,arguments)}}()),mt=yield function Ep(v){return Promise.all(v.map(function(){var g=(0,c.Z)(function*(m){try{return{fulfilled:!0,value:yield m}}catch(E){return{fulfilled:!1,reason:E}}});return function(m){return g.apply(this,arguments)}}()))}(tt);M.ports[0].postMessage({status:"done",eventId:O,eventType:Z,response:mt})})()}_subscribe(m,E){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[m]||(this.handlersMap[m]=new Set),this.handlersMap[m].add(E)}_unsubscribe(m,E){this.handlersMap[m]&&E&&this.handlersMap[m].delete(E),(!E||0===this.handlersMap[m].size)&&delete this.handlersMap[m],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return v.receivers=[],v})();function ml(v="",g=10){let m="";for(let E=0;E<g;E++)m+=Math.floor(10*Math.random());return v+m}class vo{constructor(g){this.target=g,this.handlers=new Set}removeMessageHandler(g){g.messageChannel&&(g.messageChannel.port1.removeEventListener("message",g.onMessage),g.messageChannel.port1.close()),this.handlers.delete(g)}_send(g,m,E=50){var M=this;return(0,c.Z)(function*(){const O=typeof MessageChannel<"u"?new MessageChannel:null;if(!O)throw new Error("connection_unavailable");let Z,ie;return new Promise(($e,tt)=>{const mt=ml("",20);O.port1.start();const pt=setTimeout(()=>{tt(new Error("unsupported_event"))},E);ie={messageChannel:O,onMessage(Er){const As=Er;if(As.data.eventId===mt)switch(As.data.status){case"ack":clearTimeout(pt),Z=setTimeout(()=>{tt(new Error("timeout"))},3e3);break;case"done":clearTimeout(Z),$e(As.data.response);break;default:clearTimeout(pt),clearTimeout(Z),tt(new Error("invalid_response"))}}},M.handlers.add(ie),O.port1.addEventListener("message",ie.onMessage),M.target.postMessage({eventType:g,eventId:mt,data:m},[O.port2])}).finally(()=>{ie&&M.removeMessageHandler(ie)})})()}}function ur(){return window}function _l(){return typeof ur().WorkerGlobalScope<"u"&&"function"==typeof ur().importScripts}function fu(){return(fu=(0,c.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const yl="firebaseLocalStorageDb",vl="firebaseLocalStorage",pu="fbase_key";class Ni{constructor(g){this.request=g}toPromise(){return new Promise((g,m)=>{this.request.addEventListener("success",()=>{g(this.request.result)}),this.request.addEventListener("error",()=>{m(this.request.error)})})}}function cc(v,g){return v.transaction([vl],g?"readwrite":"readonly").objectStore(vl)}function an(){const v=indexedDB.open(yl,1);return new Promise((g,m)=>{v.addEventListener("error",()=>{m(v.error)}),v.addEventListener("upgradeneeded",()=>{const E=v.result;try{E.createObjectStore(vl,{keyPath:pu})}catch(M){m(M)}}),v.addEventListener("success",(0,c.Z)(function*(){const E=v.result;E.objectStoreNames.contains(vl)?g(E):(E.close(),yield function vd(){const v=indexedDB.deleteDatabase(yl);return new Ni(v).toPromise()}(),g(yield an()))}))})}function dc(v,g,m){return Cp.apply(this,arguments)}function Cp(){return(Cp=(0,c.Z)(function*(v,g,m){const E=cc(v,!0).put({[pu]:g,value:m});return new Ni(E).toPromise()})).apply(this,arguments)}function Ch(){return(Ch=(0,c.Z)(function*(v,g){const m=cc(v,!1).get(g),E=yield new Ni(m).toPromise();return void 0===E?null:E.value})).apply(this,arguments)}function Pv(v,g){const m=cc(v,!0).delete(g);return new Ni(m).toPromise()}const hc=(()=>{class v{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var m=this;return(0,c.Z)(function*(){return m.db||(m.db=yield an()),m.db})()}_withRetries(m){var E=this;return(0,c.Z)(function*(){let M=0;for(;;)try{const O=yield E._openDb();return yield m(O)}catch(O){if(M++>3)throw O;E.db&&(E.db.close(),E.db=void 0)}})()}initializeServiceWorkerMessaging(){var m=this;return(0,c.Z)(function*(){return _l()?m.initializeReceiver():m.initializeSender()})()}initializeReceiver(){var m=this;return(0,c.Z)(function*(){m.receiver=uc._getInstance(function wo(){return _l()?self:null}()),m.receiver._subscribe("keyChanged",function(){var E=(0,c.Z)(function*(M,O){return{keyProcessed:(yield m._poll()).includes(O.key)}});return function(M,O){return E.apply(this,arguments)}}()),m.receiver._subscribe("ping",function(){var E=(0,c.Z)(function*(M,O){return["keyChanged"]});return function(M,O){return E.apply(this,arguments)}}())})()}initializeSender(){var m=this;return(0,c.Z)(function*(){var E,M;if(m.activeServiceWorker=yield function yd(){return fu.apply(this,arguments)}(),!m.activeServiceWorker)return;m.sender=new vo(m.activeServiceWorker);const O=yield m.sender._send("ping",{},800);!O||(null===(E=O[0])||void 0===E?void 0:E.fulfilled)&&(null===(M=O[0])||void 0===M?void 0:M.value.includes("keyChanged"))&&(m.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(m){var E=this;return(0,c.Z)(function*(){if(E.sender&&E.activeServiceWorker&&function Eh(){var v;return(null===(v=navigator?.serviceWorker)||void 0===v?void 0:v.controller)||null}()===E.activeServiceWorker)try{yield E.sender._send("keyChanged",{key:m},E.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,c.Z)(function*(){try{if(!indexedDB)return!1;const m=yield an();return yield dc(m,Aa,"1"),yield Pv(m,Aa),!0}catch{}return!1})()}_withPendingWrite(m){var E=this;return(0,c.Z)(function*(){E.pendingWrites++;try{yield m()}finally{E.pendingWrites--}})()}_set(m,E){var M=this;return(0,c.Z)(function*(){return M._withPendingWrite((0,c.Z)(function*(){return yield M._withRetries(O=>dc(O,m,E)),M.localCache[m]=E,M.notifyServiceWorker(m)}))})()}_get(m){var E=this;return(0,c.Z)(function*(){const M=yield E._withRetries(O=>function Nv(v,g){return Ch.apply(this,arguments)}(O,m));return E.localCache[m]=M,M})()}_remove(m){var E=this;return(0,c.Z)(function*(){return E._withPendingWrite((0,c.Z)(function*(){return yield E._withRetries(M=>Pv(M,m)),delete E.localCache[m],E.notifyServiceWorker(m)}))})()}_poll(){var m=this;return(0,c.Z)(function*(){const E=yield m._withRetries(Z=>{const ie=cc(Z,!1).getAll();return new Ni(ie).toPromise()});if(!E)return[];if(0!==m.pendingWrites)return[];const M=[],O=new Set;for(const{fbase_key:Z,value:ie}of E)O.add(Z),JSON.stringify(m.localCache[Z])!==JSON.stringify(ie)&&(m.notifyListeners(Z,ie),M.push(Z));for(const Z of Object.keys(m.localCache))m.localCache[Z]&&!O.has(Z)&&(m.notifyListeners(Z,null),M.push(Z));return M})()}notifyListeners(m,E){this.localCache[m]=E;const M=this.listeners[m];if(M)for(const O of Array.from(M))O(E)}startPolling(){var m=this;this.stopPolling(),this.pollTimer=setInterval((0,c.Z)(function*(){return m._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(m,E){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[m]||(this.listeners[m]=new Set,this._get(m)),this.listeners[m].add(E)}_removeListener(m,E){this.listeners[m]&&(this.listeners[m].delete(E),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return v.type="LOCAL",v})();function dC(v,g){return qe(v,"POST","/v2/accounts/mfaSignIn:start",Pt(v,g))}const bd=1e12;class ai{constructor(g){this.auth=g,this.counter=bd,this._widgets=new Map}render(g,m){const E=this.counter;return this._widgets.set(E,new Is(g,this.auth.name,m||{})),this.counter++,E}reset(g){var m;const E=g||bd;null===(m=this._widgets.get(E))||void 0===m||m.delete(),this._widgets.delete(E)}getResponse(g){var m;return(null===(m=this._widgets.get(g||bd))||void 0===m?void 0:m.getResponse())||""}execute(g){var m=this;return(0,c.Z)(function*(){var E;return null===(E=m._widgets.get(g||bd))||void 0===E||E.execute(),""})()}}class Is{constructor(g,m,E){this.params=E,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const M="string"==typeof g?document.getElementById(g):g;K(M,"argument-error",{appName:m}),this.container=M,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Dp(v){const g=[],m="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let E=0;E<v;E++)g.push(m.charAt(Math.floor(Math.random()*m.length)));return g.join("")}(50);const{callback:g,"expired-callback":m}=this.params;if(g)try{g(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,m)try{m()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const gu=vs("rcb"),fc=new Ue(3e4,6e4);class r_{constructor(){var g;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(g=ur().grecaptcha)||void 0===g||!g.render)}load(g,m=""){return K(function i_(v){return v.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(v)}(m),g,"argument-error"),this.shouldResolveImmediately(m)&&Vs(ur().grecaptcha)?Promise.resolve(ur().grecaptcha):new Promise((E,M)=>{const O=ur().setTimeout(()=>{M(Ce(g,"network-request-failed"))},fc.get());ur()[gu]=()=>{ur().clearTimeout(O),delete ur()[gu];const ie=ur().grecaptcha;if(!ie||!Vs(ie))return void M(Ce(g,"internal-error"));const $e=ie.render;ie.render=(tt,mt)=>{const pt=$e(tt,mt);return this.counter++,pt},this.hostLanguage=m,E(ie)},Xi(`https://www.google.com/recaptcha/api.js??${(0,j.xO)({onload:gu,render:"explicit",hl:m})}`).catch(()=>{clearTimeout(O),M(Ce(g,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(g){var m;return!(null===(m=ur().grecaptcha)||void 0===m||!m.render)&&(g===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class hC{load(g){return(0,c.Z)(function*(){return new ai(g)})()}clearedOneInstance(){}}const s_="recaptcha",Tp={theme:"light",type:"image"};class Pi{constructor(g,m=Object.assign({},Tp),E){this.parameters=m,this.type=s_,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Pn(E),this.isInvisible="invisible"===this.parameters.size,K(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const M="string"==typeof g?document.getElementById(g):g;K(M,this.auth,"argument-error"),this.container=M,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new hC:new r_,this.validateStartingState()}verify(){var g=this;return(0,c.Z)(function*(){g.assertNotDestroyed();const m=yield g.render(),E=g.getAssertedRecaptcha();return E.getResponse(m)||new Promise(O=>{const Z=ie=>{!ie||(g.tokenChangeListeners.delete(Z),O(ie))};g.tokenChangeListeners.add(Z),g.isInvisible&&E.execute(m)})})()}render(){try{this.assertNotDestroyed()}catch(g){return Promise.reject(g)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(g=>{throw this.renderPromise=null,g})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(g=>{this.container.removeChild(g)})}validateStartingState(){K(!this.parameters.sitekey,this.auth,"argument-error"),K(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),K(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(g){return m=>{if(this.tokenChangeListeners.forEach(E=>E(m)),"function"==typeof g)g(m);else if("string"==typeof g){const E=ur()[g];"function"==typeof E&&E(m)}}}assertNotDestroyed(){K(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var g=this;return(0,c.Z)(function*(){if(yield g.init(),!g.widgetId){let m=g.container;if(!g.isInvisible){const E=document.createElement("div");m.appendChild(E),m=E}g.widgetId=g.getAssertedRecaptcha().render(m,g.parameters)}return g.widgetId})()}init(){var g=this;return(0,c.Z)(function*(){K(at()&&!_l(),g.auth,"internal-error"),yield function Dh(){let v=null;return new Promise(g=>{"complete"!==document.readyState?(v=()=>g(),window.addEventListener("load",v)):g()}).catch(g=>{throw v&&window.removeEventListener("load",v),g})}(),g.recaptcha=yield g._recaptchaLoader.load(g.auth,g.auth.languageCode||void 0);const m=yield function lr(v){return Fs.apply(this,arguments)}(g.auth);K(m,g.auth,"internal-error"),g.parameters.sitekey=m})()}getAssertedRecaptcha(){return K(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Sa{constructor(g,m){this.verificationId=g,this.onConfirmation=m}confirm(g){const m=wr._fromVerification(this.verificationId,g);return this.onConfirmation(m)}}function mu(){return(mu=(0,c.Z)(function*(v,g,m){const E=Pn(v),M=yield bl(E,g,(0,j.m9)(m));return new Sa(M,O=>qs(E,O))})).apply(this,arguments)}function pc(){return(pc=(0,c.Z)(function*(v,g,m){const E=(0,j.m9)(v);yield Oe(!1,E,"phone");const M=yield bl(E.auth,g,(0,j.m9)(m));return new Sa(M,O=>Zo(E,O))})).apply(this,arguments)}function gc(){return(gc=(0,c.Z)(function*(v,g,m){const E=(0,j.m9)(v),M=yield bl(E.auth,g,(0,j.m9)(m));return new Sa(M,O=>iu(E,O))})).apply(this,arguments)}function bl(v,g,m){return Sp.apply(this,arguments)}function Sp(){return(Sp=(0,c.Z)(function*(v,g,m){var E;const M=yield m.verify();try{let O;if(K("string"==typeof M,v,"argument-error"),K(m.type===s_,v,"argument-error"),O="string"==typeof g?{phoneNumber:g}:g,"session"in O){const Z=O.session;if("phoneNumber"in O)return K("enroll"===Z.type,v,"internal-error"),(yield Dn(v,{idToken:Z.credential,phoneEnrollmentInfo:{phoneNumber:O.phoneNumber,recaptchaToken:M}})).phoneSessionInfo.sessionInfo;{K("signin"===Z.type,v,"internal-error");const ie=(null===(E=O.multiFactorHint)||void 0===E?void 0:E.uid)||O.multiFactorUid;return K(ie,v,"missing-multi-factor-info"),(yield dC(v,{mfaPendingCredential:Z.credential,mfaEnrollmentId:ie,phoneSignInInfo:{recaptchaToken:M}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Z}=yield tl(v,{phoneNumber:O.phoneNumber,recaptchaToken:M});return Z}}finally{m._reset()}})).apply(this,arguments)}function Ds(){return(Ds=(0,c.Z)(function*(v,g){yield ba((0,j.m9)(v),g)})).apply(this,arguments)}let _t=(()=>{class v{constructor(m){this.providerId=v.PROVIDER_ID,this.auth=Pn(m)}verifyPhoneNumber(m,E){return bl(this.auth,m,(0,j.m9)(E))}static credential(m,E){return wr._fromVerification(m,E)}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{phoneNumber:E,temporaryProof:M}=m;return E&&M?wr._fromTokenResponse(E,M):null}}return v.PROVIDER_ID="phone",v.PHONE_SIGN_IN_METHOD="phone",v})();function kr(v,g){return g?Ht(g):(K(v._popupRedirectResolver,v,"argument-error"),v._popupRedirectResolver)}class br extends mi{constructor(g){super("custom","custom"),this.params=g}_getIdTokenResponse(g){return Hs(g,this._buildIdpRequest())}_linkToIdToken(g,m){return Hs(g,this._buildIdpRequest(m))}_getReauthenticationResolver(g){return Hs(g,this._buildIdpRequest())}_buildIdpRequest(g){const m={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return g&&(m.idToken=g),m}}function _u(v){return sr(v.auth,new br(v),v.bypassAuthState)}function mc(v){const{auth:g,user:m}=v;return K(m,g,"internal-error"),ru(m,new br(v),v.bypassAuthState)}function ss(v){return bo.apply(this,arguments)}function bo(){return(bo=(0,c.Z)(function*(v){const{auth:g,user:m}=v;return K(m,g,"internal-error"),ba(m,new br(v),v.bypassAuthState)})).apply(this,arguments)}class Ed{constructor(g,m,E,M,O=!1){this.auth=g,this.resolver=E,this.user=M,this.bypassAuthState=O,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(m)?m:[m]}execute(){var g=this;return new Promise(function(){var m=(0,c.Z)(function*(E,M){g.pendingPromise={resolve:E,reject:M};try{g.eventManager=yield g.resolver._initialize(g.auth),yield g.onExecution(),g.eventManager.registerConsumer(g)}catch(O){g.reject(O)}});return function(E,M){return m.apply(this,arguments)}}())}onAuthEvent(g){var m=this;return(0,c.Z)(function*(){const{urlResponse:E,sessionId:M,postBody:O,tenantId:Z,error:ie,type:$e}=g;if(ie)return void m.reject(ie);const tt={auth:m.auth,requestUri:E,sessionId:M,tenantId:Z||void 0,postBody:O||void 0,user:m.user,bypassAuthState:m.bypassAuthState};try{m.resolve(yield m.getIdpTask($e)(tt))}catch(mt){m.reject(mt)}})()}onError(g){this.reject(g)}getIdpTask(g){switch(g){case"signInViaPopup":case"signInViaRedirect":return _u;case"linkViaPopup":case"linkViaRedirect":return ss;case"reauthViaPopup":case"reauthViaRedirect":return mc;default:xe(this.auth,"internal-error")}}resolve(g){rt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(g),this.unregisterAndCleanUp()}reject(g){rt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(g),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Ts=new Ue(2e3,1e4);function Cd(){return(Cd=(0,c.Z)(function*(v,g,m){const E=Pn(v);Xe(v,g,kn);const M=kr(E,m);return new S(E,"signInViaPopup",g,M).executeNotNull()})).apply(this,arguments)}function Eo(){return(Eo=(0,c.Z)(function*(v,g,m){const E=(0,j.m9)(v);Xe(E.auth,g,kn);const M=kr(E.auth,m);return new S(E.auth,"reauthViaPopup",g,M,E).executeNotNull()})).apply(this,arguments)}function _c(){return(_c=(0,c.Z)(function*(v,g,m){const E=(0,j.m9)(v);Xe(E.auth,g,kn);const M=kr(E.auth,m);return new S(E.auth,"linkViaPopup",g,M,E).executeNotNull()})).apply(this,arguments)}let S=(()=>{class v extends Ed{constructor(m,E,M,O,Z){super(m,E,O,Z),this.provider=M,this.authWindow=null,this.pollId=null,v.currentPopupAction&&v.currentPopupAction.cancel(),v.currentPopupAction=this}executeNotNull(){var m=this;return(0,c.Z)(function*(){const E=yield m.execute();return K(E,m.auth,"internal-error"),E})()}onExecution(){var m=this;return(0,c.Z)(function*(){rt(1===m.filter.length,"Popup operations only handle one event");const E=ml();m.authWindow=yield m.resolver._openPopup(m.auth,m.provider,m.filter[0],E),m.authWindow.associatedEvent=E,m.resolver._originValidation(m.auth).catch(M=>{m.reject(M)}),m.resolver._isIframeWebStorageSupported(m.auth,M=>{M||m.reject(Ce(m.auth,"web-storage-unsupported"))}),m.pollUserCancellation()})()}get eventId(){var m;return(null===(m=this.authWindow)||void 0===m?void 0:m.associatedEvent)||null}cancel(){this.reject(Ce(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,v.currentPopupAction=null}pollUserCancellation(){const m=()=>{var E,M;this.pollId=null!==(M=null===(E=this.authWindow)||void 0===E?void 0:E.window)&&void 0!==M&&M.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Ce(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(m,Ts.get())};m()}}return v.currentPopupAction=null,v})();const L=new Map;class z extends Ed{constructor(g,m,E=!1){super(g,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],m,void 0,E),this.eventId=null}execute(){var g=()=>super.execute,m=this;return(0,c.Z)(function*(){let E=L.get(m.auth._key());if(!E){try{const O=(yield function re(v,g){return le.apply(this,arguments)}(m.resolver,m.auth))?yield g().call(m):null;E=()=>Promise.resolve(O)}catch(M){E=()=>Promise.reject(M)}L.set(m.auth._key(),E)}return m.bypassAuthState||L.set(m.auth._key(),()=>Promise.resolve(null)),E()})()}onAuthEvent(g){var m=()=>super.onAuthEvent,E=this;return(0,c.Z)(function*(){if("signInViaRedirect"===g.type)return m().call(E,g);if("unknown"!==g.type){if(g.eventId){const M=yield E.auth._redirectUserForId(g.eventId);if(M)return E.user=M,m().call(E,g);E.resolve(null)}}else E.resolve(null)})()}onExecution(){return(0,c.Z)(function*(){})()}cleanUp(){}}function le(){return(le=(0,c.Z)(function*(v,g){const m=Ot(g),E=Xt(v);if(!(yield E._isAvailable()))return!1;const M="true"===(yield E._get(m));return yield E._remove(m),M})).apply(this,arguments)}function Be(v,g){return ft.apply(this,arguments)}function ft(){return(ft=(0,c.Z)(function*(v,g){return Xt(v)._set(Ot(g),"true")})).apply(this,arguments)}function Rt(v,g){L.set(v._key(),g)}function Xt(v){return Ht(v._redirectPersistence)}function Ot(v){return q("pendingRedirect",v.config.apiKey,v.name)}function Jo(){return(Jo=(0,c.Z)(function*(v,g,m){const E=Pn(v);Xe(v,g,kn),yield E._initializationPromise;const M=kr(E,m);return yield Be(M,E),M._openRedirect(E,g,"signInViaRedirect")})).apply(this,arguments)}function Li(){return(Li=(0,c.Z)(function*(v,g,m){const E=(0,j.m9)(v);Xe(E.auth,g,kn),yield E.auth._initializationPromise;const M=kr(E.auth,m);yield Be(M,E.auth);const O=yield Qr(E);return M._openRedirect(E.auth,g,"reauthViaRedirect",O)})).apply(this,arguments)}function Sh(){return(Sh=(0,c.Z)(function*(v,g,m){const E=(0,j.m9)(v);Xe(E.auth,g,kn),yield E.auth._initializationPromise;const M=kr(E.auth,m);yield Oe(!1,E,g.providerId),yield Be(M,E.auth);const O=yield Qr(E);return M._openRedirect(E.auth,g,"linkViaRedirect",O)})).apply(this,arguments)}function vu(){return(vu=(0,c.Z)(function*(v,g){return yield Pn(v)._initializationPromise,wu(v,g,!1)})).apply(this,arguments)}function wu(v,g){return as.apply(this,arguments)}function as(){return(as=(0,c.Z)(function*(v,g,m=!1){const E=Pn(v),M=kr(E,g),Z=yield new z(E,M,m).execute();return Z&&!m&&(delete Z.user._redirectEventId,yield E._persistUserIfCurrent(Z.user),yield E._setRedirectUser(null,g)),Z})).apply(this,arguments)}function Qr(v){return bu.apply(this,arguments)}function bu(){return(bu=(0,c.Z)(function*(v){const g=ml(`${v.uid}:::`);return v._redirectEventId=g,yield v.auth._setRedirectUser(v),yield v.auth._persistUserIfCurrent(v),g})).apply(this,arguments)}class xp{constructor(g){this.auth=g,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(g){this.consumers.add(g),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,g)&&(this.sendToConsumer(this.queuedRedirectEvent,g),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(g){this.consumers.delete(g)}onEvent(g){if(this.hasEventBeenHandled(g))return!1;let m=!1;return this.consumers.forEach(E=>{this.isEventForConsumer(g,E)&&(m=!0,this.sendToConsumer(g,E),this.saveEventToCache(g))}),this.hasHandledPotentialRedirect||!function Wi(v){switch(v.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Xo(v);default:return!1}}(g)||(this.hasHandledPotentialRedirect=!0,m||(this.queuedRedirectEvent=g,m=!0)),m}sendToConsumer(g,m){var E;if(g.error&&!Xo(g)){const M=(null===(E=g.error.code)||void 0===E?void 0:E.split("auth/")[1])||"internal-error";m.onError(Ce(this.auth,M))}else m.onAuthEvent(g)}isEventForConsumer(g,m){const E=null===m.eventId||!!g.eventId&&g.eventId===m.eventId;return m.filter.includes(g.type)&&E}hasEventBeenHandled(g){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(xa(g))}saveEventToCache(g){this.cachedEventUids.add(xa(g)),this.lastProcessedEventTime=Date.now()}}function xa(v){return[v.type,v.eventId,v.sessionId,v.tenantId].filter(g=>g).join("-")}function Xo({type:v,error:g}){return"unknown"===v&&"auth/no-auth-event"===g?.code}function Ra(v){return Rp.apply(this,arguments)}function Rp(){return(Rp=(0,c.Z)(function*(v,g={}){return qe(v,"GET","/v1/projects",g)})).apply(this,arguments)}const Ma=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,a_=/^https?/;function Id(){return(Id=(0,c.Z)(function*(v){if(v.config.emulator)return;const{authorizedDomains:g}=yield Ra(v);for(const m of g)try{if(fC(m))return}catch{}xe(v,"unauthorized-domain")})).apply(this,arguments)}function fC(v){const g=Vt(),{protocol:m,hostname:E}=new URL(g);if(v.startsWith("chrome-extension://")){const Z=new URL(v);return""===Z.hostname&&""===E?"chrome-extension:"===m&&v.replace("chrome-extension://","")===g.replace("chrome-extension://",""):"chrome-extension:"===m&&Z.hostname===E}if(!a_.test(m))return!1;if(Ma.test(v))return E===v;const M=v.replace(/\./g,"\\.");return new RegExp("^(.+\\."+M+"|"+M+")$","i").test(E)}const l_=new Ue(3e4,6e4);function cn(){const v=ur().___jsl;if(v?.H)for(const g of Object.keys(v.H))if(v.H[g].r=v.H[g].r||[],v.H[g].L=v.H[g].L||[],v.H[g].r=[...v.H[g].L],v.CP)for(let m=0;m<v.CP.length;m++)v.CP[m]=null}let Mp=null;function yc(v){return Mp=Mp||function xh(v){return new Promise((g,m)=>{var E,M,O;function Z(){cn(),gapi.load("gapi.iframes",{callback:()=>{g(gapi.iframes.getContext())},ontimeout:()=>{cn(),m(Ce(v,"network-request-failed"))},timeout:l_.get()})}if(null!==(M=null===(E=ur().gapi)||void 0===E?void 0:E.iframes)&&void 0!==M&&M.Iframe)g(gapi.iframes.getContext());else{if(null===(O=ur().gapi)||void 0===O||!O.load){const ie=vs("iframefcb");return ur()[ie]=()=>{gapi.load?Z():m(Ce(v,"network-request-failed"))},Xi(`https://apis.google.com/js/api.js?onload=${ie}`).catch($e=>m($e))}Z()}}).catch(g=>{throw Mp=null,g})}(v),Mp}const u_=new Ue(5e3,15e3),Np={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Pp=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Io(v){const g=v.config;K(g.authDomain,v,"auth-domain-config-required");const m=g.emulator?Ve(g,"emulator/auth/iframe"):`https://${v.config.authDomain}/__/auth/iframe`,E={apiKey:g.apiKey,appName:v.name,v:fe.SDK_VERSION},M=Pp.get(v.config.apiHost);M&&(E.eid=M);const O=v._getFrameworks();return O.length&&(E.fw=O.join(",")),`${m}?${(0,j.xO)(E).slice(1)}`}function Jr(){return Jr=(0,c.Z)(function*(v){const g=yield yc(v),m=ur().gapi;return K(m,v,"internal-error"),g.open({where:document.body,url:Io(v),messageHandlersFilter:m.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Np,dontclear:!0},E=>new Promise(function(){var M=(0,c.Z)(function*(O,Z){yield E.restyle({setHideOnLeave:!1});const ie=Ce(v,"network-request-failed"),$e=ur().setTimeout(()=>{Z(ie)},u_.get());function tt(){ur().clearTimeout($e),O(E)}E.ping(tt).then(tt,()=>{Z(ie)})});return function(O,Z){return M.apply(this,arguments)}}()))}),Jr.apply(this,arguments)}const Cl={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Lp{constructor(g){this.window=g,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const Mh=encodeURIComponent("fac");function Eu(v,g,m,E,M,O){return Do.apply(this,arguments)}function Do(){return(Do=(0,c.Z)(function*(v,g,m,E,M,O){K(v.config.authDomain,v,"auth-domain-config-required"),K(v.config.apiKey,v,"invalid-api-key");const Z={apiKey:v.config.apiKey,appName:v.name,authType:m,redirectUrl:E,v:fe.SDK_VERSION,eventId:M};if(g instanceof kn){g.setDefaultLanguage(v.languageCode),Z.providerId=g.providerId||"",(0,j.xb)(g.getCustomParameters())||(Z.customParameters=JSON.stringify(g.getCustomParameters()));for(const[mt,pt]of Object.entries(O||{}))Z[mt]=pt}if(g instanceof zo){const mt=g.getScopes().filter(pt=>""!==pt);mt.length>0&&(Z.scopes=mt.join(","))}v.tenantId&&(Z.tid=v.tenantId);const ie=Z;for(const mt of Object.keys(ie))void 0===ie[mt]&&delete ie[mt];const $e=yield v._getAppCheckToken(),tt=$e?`#${Mh}=${encodeURIComponent($e)}`:"";return`${$t(v)}?${(0,j.xO)(ie).slice(1)}${tt}`})).apply(this,arguments)}function $t({config:v}){return v.emulator?Ve(v,"emulator/auth/handler"):`https://${v.authDomain}/__/auth/handler`}const To="webStorageSupport";class Dd extends class Uv{constructor(g){this.factorId=g}_process(g,m,E){switch(m.type){case"enroll":return this._finalizeEnroll(g,m.credential,E);case"signin":return this._finalizeSignIn(g,m.credential);default:return Qe("unexpected MultiFactorSessionType")}}}{constructor(g){super("phone"),this.credential=g}static _fromCredential(g){return new Dd(g)}_finalizeEnroll(g,m,E){return function Zr(v,g){return qe(v,"POST","/v2/accounts/mfaEnrollment:finalize",Pt(v,g))}(g,{idToken:m,displayName:E,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(g,m){return function Kr(v,g){return qe(v,"POST","/v2/accounts/mfaSignIn:finalize",Pt(v,g))}(g,{mfaPendingCredential:m,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Fp=(()=>{class v{constructor(){}static assertion(m){return Dd._fromCredential(m)}}return v.FACTOR_ID="phone",v})();var Ad="@firebase/auth";class Sd{constructor(g){this.auth=g,this.internalListeners=new Map}getUid(){var g;return this.assertAuthConfigured(),(null===(g=this.auth.currentUser)||void 0===g?void 0:g.uid)||null}getToken(g){var m=this;return(0,c.Z)(function*(){return m.assertAuthConfigured(),yield m.auth._initializationPromise,m.auth.currentUser?{accessToken:yield m.auth.currentUser.getIdToken(g)}:null})()}addAuthTokenListener(g){if(this.assertAuthConfigured(),this.internalListeners.has(g))return;const m=this.auth.onIdTokenChanged(E=>{g(E?.stsTokenManager.accessToken||null)});this.internalListeners.set(g,m),this.updateProactiveRefresh()}removeAuthTokenListener(g){this.assertAuthConfigured();const m=this.internalListeners.get(g);!m||(this.internalListeners.delete(g),m(),this.updateProactiveRefresh())}assertAuthConfigured(){K(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function ka(){return window}function Dl(){return(Dl=(0,c.Z)(function*(v,g,m){var E;const{BuildInfo:M}=ka();rt(g.sessionId,"AuthEvent did not contain a session ID");const O=yield mC(g.sessionId),Z={};return yt()?Z.ibi=M.packageName:tn()?Z.apn=M.packageName:xe(v,"operation-not-supported-in-this-environment"),M.displayName&&(Z.appDisplayName=M.displayName),Z.sessionId=O,Eu(v,m,g.type,void 0,null!==(E=g.eventId)&&void 0!==E?E:void 0,Z)})).apply(this,arguments)}function wc(){return(wc=(0,c.Z)(function*(v){const{BuildInfo:g}=ka(),m={};yt()?m.iosBundleId=g.packageName:tn()?m.androidPackageName=g.packageName:xe(v,"operation-not-supported-in-this-environment"),yield Ra(v,m)})).apply(this,arguments)}function Na(){return(Na=(0,c.Z)(function*(v,g,m){const{cordova:E}=ka();let M=()=>{};try{yield new Promise((O,Z)=>{let ie=null;function $e(){var pt;O();const Er=null===(pt=E.plugins.browsertab)||void 0===pt?void 0:pt.close;"function"==typeof Er&&Er(),"function"==typeof m?.close&&m.close()}function tt(){ie||(ie=window.setTimeout(()=>{Z(Ce(v,"redirect-cancelled-by-user"))},2e3))}function mt(){"visible"===document?.visibilityState&&tt()}g.addPassiveListener($e),document.addEventListener("resume",tt,!1),tn()&&document.addEventListener("visibilitychange",mt,!1),M=()=>{g.removePassiveListener($e),document.removeEventListener("resume",tt,!1),document.removeEventListener("visibilitychange",mt,!1),ie&&window.clearTimeout(ie)}})}finally{M()}})).apply(this,arguments)}function mC(v){return jp.apply(this,arguments)}function jp(){return(jp=(0,c.Z)(function*(v){const g=Hv(v),m=yield crypto.subtle.digest("SHA-256",g);return Array.from(new Uint8Array(m)).map(M=>M.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Hv(v){if(rt(/[0-9a-zA-Z]+/.test(v),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(v);const g=new ArrayBuffer(v.length),m=new Uint8Array(g);for(let E=0;E<v.length;E++)m[E]=v.charCodeAt(E);return m}(0,j.Pz)("authIdTokenMaxAge"),function Up(v){(0,fe._registerComponent)(new ue.wA("auth",(g,{options:m})=>{const E=g.getProvider("app").getImmediate(),M=g.getProvider("heartbeat"),O=g.getProvider("app-check-internal"),{apiKey:Z,authDomain:ie}=E.options;K(Z&&!Z.includes(":"),"invalid-api-key",{appName:E.name}),K(!ie?.includes(":"),"argument-error",{appName:E.name});const $e={apiKey:Z,authDomain:ie,clientPlatform:v,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:In(v)},tt=new da(E,M,O,$e);return function ws(v,g){const m=g?.persistence||[],E=(Array.isArray(m)?m:[m]).map(Ht);g?.errorMap&&v._updateErrorMap(g.errorMap),v._initializeWithPersistence(E,g?.popupRedirectResolver)}(tt,m),tt},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((g,m,E)=>{g.getProvider("auth-internal").initialize()})),(0,fe._registerComponent)(new ue.wA("auth-internal",g=>{const m=Pn(g.getProvider("auth").getImmediate());return new Sd(m)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,fe.registerVersion)(Ad,"0.23.0",function Nh(v){switch(v){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(v)),(0,fe.registerVersion)(Ad,"0.23.0","esm2017")}("Browser");class bc extends xp{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(g=>{this.resolveInialized=g})}addPassiveListener(g){this.passiveListeners.add(g)}removePassiveListener(g){this.passiveListeners.delete(g)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(g){return this.resolveInialized(),this.passiveListeners.forEach(m=>m(g)),super.onEvent(g)}initialized(){var g=this;return(0,c.Z)(function*(){yield g.initPromise})()}}function Md(v){return Oh.apply(this,arguments)}function Oh(){return(Oh=(0,c.Z)(function*(v){const g=yield Lh()._get(Pa(v));return g&&(yield Lh()._remove(Pa(v))),g})).apply(this,arguments)}function Tu(){const v=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let m=0;m<20;m++){const E=Math.floor(Math.random()*g.length);v.push(g.charAt(E))}return v.join("")}function Lh(){return Ht(gl)}function Pa(v){return q("authEvent",v.config.apiKey,v.name)}function Ec(v){if(!v?.includes("?"))return{};const[g,...m]=v.split("?");return(0,j.zd)(m.join("?"))}function Gp(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Ce("no-auth-event")}}function ls(){var v;return(null===(v=self?.location)||void 0===v?void 0:v.protocol)||null}function Bh(v=(0,j.z$)()){return!("file:"!==ls()&&"ionic:"!==ls()&&"capacitor:"!==ls()||!v.toLowerCase().match(/iphone|ipad|ipod|android/))}function v_(){try{const v=self.localStorage,g=ml();if(v)return v.setItem(g,"1"),v.removeItem(g),!function kd(v=(0,j.z$)()){return function Kp(){return(0,j.w1)()&&11===document?.documentMode}()||function Yp(v=(0,j.z$)()){return/Edge\/\d+/.test(v)}(v)}()||(0,j.hl)()}catch{return Hh()&&(0,j.hl)()}return!1}function Hh(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Qp(){return(function Au(){return"http:"===ls()||"https:"===ls()}()||(0,j.ru)()||Bh())&&!function Zp(){return(0,j.b$)()||(0,j.UG)()}()&&v_()&&!Hh()}function w_(){return Bh()&&typeof document<"u"}function Nd(){return(Nd=(0,c.Z)(function*(){return!!w_()&&new Promise(v=>{const g=setTimeout(()=>{v(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(g),v(!0)})})})).apply(this,arguments)}const Ui={LOCAL:"local",NONE:"none",SESSION:"session"},So=K,Jp="persistence";function $h(v){return xo.apply(this,arguments)}function xo(){return(xo=(0,c.Z)(function*(v){yield v._initializationPromise;const g=eg(),m=q(Jp,v.config.apiKey,v.name);g&&g.setItem(m,v._getPersistence())})).apply(this,arguments)}function eg(){var v;try{return(null===(v=function jh(){return typeof window<"u"?window:null}())||void 0===v?void 0:v.sessionStorage)||null}catch{return null}}const tg=K;class Ro{constructor(){this.browserResolver=Ht(class f_{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=vi,this._completeRedirectFn=wu,this._overrideRedirectResult=Rt}_openPopup(g,m,E,M){var O=this;return(0,c.Z)(function*(){var Z;rt(null===(Z=O.eventManagers[g._key()])||void 0===Z?void 0:Z.manager,"_initialize() not called before _openPopup()");const ie=yield Eu(g,m,E,Vt(),M);return function d_(v,g,m,E=500,M=600){const O=Math.max((window.screen.availHeight-M)/2,0).toString(),Z=Math.max((window.screen.availWidth-E)/2,0).toString();let ie="";const $e=Object.assign(Object.assign({},Cl),{width:E.toString(),height:M.toString(),top:O,left:Z}),tt=(0,j.z$)().toLowerCase();m&&(ie=lt(tt)?"_blank":m),ge(tt)&&(g=g||"http://localhost",$e.scrollbars="yes");const mt=Object.entries($e).reduce((Er,[As,Ic])=>`${Er}${As}=${Ic},`,"");if(function Qn(v=(0,j.z$)()){var g;return yt(v)&&!(null===(g=window.navigator)||void 0===g||!g.standalone)}(tt)&&"_self"!==ie)return function h_(v,g){const m=document.createElement("a");m.href=v,m.target=g;const E=document.createEvent("MouseEvent");E.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),m.dispatchEvent(E)}(g||"",ie),new Lp(null);const pt=window.open(g||"",ie,mt);K(pt,v,"popup-blocked");try{pt.focus()}catch{}return new Lp(pt)}(g,ie,ml())})()}_openRedirect(g,m,E,M){var O=this;return(0,c.Z)(function*(){return yield O._originValidation(g),function _d(v){ur().location.href=v}(yield Eu(g,m,E,Vt(),M)),new Promise(()=>{})})()}_initialize(g){const m=g._key();if(this.eventManagers[m]){const{manager:M,promise:O}=this.eventManagers[m];return M?Promise.resolve(M):(rt(O,"If manager is not set, promise should be"),O)}const E=this.initAndGetManager(g);return this.eventManagers[m]={promise:E},E.catch(()=>{delete this.eventManagers[m]}),E}initAndGetManager(g){var m=this;return(0,c.Z)(function*(){const E=yield function pC(v){return Jr.apply(this,arguments)}(g),M=new xp(g);return E.register("authEvent",O=>(K(O?.authEvent,g,"invalid-auth-event"),{status:M.onEvent(O.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),m.eventManagers[g._key()]={manager:M},m.iframes[g._key()]=E,M})()}_isIframeWebStorageSupported(g,m){this.iframes[g._key()].send(To,{type:To},M=>{var O;const Z=null===(O=M?.[0])||void 0===O?void 0:O[To];void 0!==Z&&m(!!Z),xe(g,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(g){const m=g._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function Ov(v){return Id.apply(this,arguments)}(g)),this.originValidationPromises[m]}get _shouldInitProactively(){return Vn()||se()||yt()}}),this.cordovaResolver=Ht(class Uh{constructor(){this._redirectPersistence=vi,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=wu,this._overrideRedirectResult=Rt}_initialize(g){var m=this;return(0,c.Z)(function*(){const E=g._key();let M=m.eventManagers.get(E);return M||(M=new bc(g),m.eventManagers.set(E,M),m.attachCallbackListeners(g,M)),M})()}_openPopup(g){xe(g,"operation-not-supported-in-this-environment")}_openRedirect(g,m,E,M){var O=this;return(0,c.Z)(function*(){!function Hp(v){var g,m,E,M,O,Z,ie,$e,tt,mt;const pt=ka();K("function"==typeof(null===(g=pt?.universalLinks)||void 0===g?void 0:g.subscribe),v,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),K(typeof(null===(m=pt?.BuildInfo)||void 0===m?void 0:m.packageName)<"u",v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),K("function"==typeof(null===(O=null===(M=null===(E=pt?.cordova)||void 0===E?void 0:E.plugins)||void 0===M?void 0:M.browsertab)||void 0===O?void 0:O.openUrl),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),K("function"==typeof(null===($e=null===(ie=null===(Z=pt?.cordova)||void 0===Z?void 0:Z.plugins)||void 0===ie?void 0:ie.browsertab)||void 0===$e?void 0:$e.isAvailable),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),K("function"==typeof(null===(mt=null===(tt=pt?.cordova)||void 0===tt?void 0:tt.InAppBrowser)||void 0===mt?void 0:mt.open),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(g);const Z=yield O._initialize(g);yield Z.initialized(),Z.resetRedirect(),function It(){L.clear()}(),yield O._originValidation(g);const ie=function Iu(v,g,m=null){return{type:g,eventId:m,urlResponse:null,sessionId:Tu(),postBody:null,tenantId:v.tenantId,error:Ce(v,"no-auth-event")}}(g,E,M);yield function Du(v,g){return Lh()._set(Pa(v),g)}(g,ie);const $e=yield function gC(v,g,m){return Dl.apply(this,arguments)}(g,ie,m),tt=yield function Ph(v){const{cordova:g}=ka();return new Promise(m=>{g.plugins.browsertab.isAvailable(E=>{let M=null;E?g.plugins.browsertab.openUrl(v):M=g.InAppBrowser.open(v,function xt(v=(0,j.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(v)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(v)}()?"_blank":"_system","location=yes"),m(M)})})}($e);return function Bp(v,g,m){return Na.apply(this,arguments)}(g,Z,tt)})()}_isIframeWebStorageSupported(g,m){throw new Error("Method not implemented.")}_originValidation(g){const m=g._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function Vp(v){return wc.apply(this,arguments)}(g)),this.originValidationPromises[m]}attachCallbackListeners(g,m){const{universalLinks:E,handleOpenURL:M,BuildInfo:O}=ka(),Z=setTimeout((0,c.Z)(function*(){yield Md(g),m.onEvent(Gp())}),500),ie=function(){var mt=(0,c.Z)(function*(pt){clearTimeout(Z);const Er=yield Md(g);let As=null;Er&&pt?.url&&(As=function __(v,g){var m,E;const M=function y_(v){const g=Ec(v),m=g.link?decodeURIComponent(g.link):void 0,E=Ec(m).link,M=g.deep_link_id?decodeURIComponent(g.deep_link_id):void 0;return Ec(M).link||M||E||m||v}(g);if(M.includes("/__/auth/callback")){const O=Ec(M),Z=O.firebaseError?function $p(v){try{return JSON.parse(v)}catch{return null}}(decodeURIComponent(O.firebaseError)):null,ie=null===(E=null===(m=Z?.code)||void 0===m?void 0:m.split("auth/"))||void 0===E?void 0:E[1],$e=ie?Ce(ie):null;return $e?{type:v.type,eventId:v.eventId,tenantId:v.tenantId,error:$e,urlResponse:null,sessionId:null,postBody:null}:{type:v.type,eventId:v.eventId,tenantId:v.tenantId,sessionId:v.sessionId,urlResponse:M,postBody:null}}return null}(Er,pt.url)),m.onEvent(As||Gp())});return function(Er){return mt.apply(this,arguments)}}();typeof E<"u"&&"function"==typeof E.subscribe&&E.subscribe(null,ie);const $e=M,tt=`${O.packageName.toLowerCase()}://`;ka().handleOpenURL=function(){var mt=(0,c.Z)(function*(pt){if(pt.toLowerCase().startsWith(tt)&&ie({url:pt}),"function"==typeof $e)try{$e(pt)}catch(Er){console.error(Er)}});return function(pt){return mt.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=vi,this._completeRedirectFn=wu,this._overrideRedirectResult=Rt}_initialize(g){var m=this;return(0,c.Z)(function*(){return yield m.selectUnderlyingResolver(),m.assertedUnderlyingResolver._initialize(g)})()}_openPopup(g,m,E,M){var O=this;return(0,c.Z)(function*(){return yield O.selectUnderlyingResolver(),O.assertedUnderlyingResolver._openPopup(g,m,E,M)})()}_openRedirect(g,m,E,M){var O=this;return(0,c.Z)(function*(){return yield O.selectUnderlyingResolver(),O.assertedUnderlyingResolver._openRedirect(g,m,E,M)})()}_isIframeWebStorageSupported(g,m){this.assertedUnderlyingResolver._isIframeWebStorageSupported(g,m)}_originValidation(g){return this.assertedUnderlyingResolver._originValidation(g)}get _shouldInitProactively(){return w_()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return tg(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var g=this;return(0,c.Z)(function*(){if(g.underlyingResolver)return;const m=yield function b_(){return Nd.apply(this,arguments)}();g.underlyingResolver=m?g.cordovaResolver:g.browserResolver})()}}function Mo(v){return v.unwrap()}function E_(v){return zh(v)}function zh(v){const{_tokenResponse:g}=v instanceof j.ZR?v.customData:v;if(!g)return null;if(!(v instanceof j.ZR)&&"temporaryProof"in g&&"phoneNumber"in g)return _t.credentialFromResult(v);const m=g.providerId;if(!m||"password"===m)return null;let E;switch(m){case"google.com":E=Rr;break;case"facebook.com":E=_i;break;case"github.com":E=_a;break;case"twitter.com":E=wa;break;default:const{oauthIdToken:M,oauthAccessToken:O,oauthTokenSecret:Z,pendingToken:ie,nonce:$e}=g;return O||Z||M||ie?ie?m.startsWith("saml.")?xi._create(m,ie):zi._fromParams({providerId:m,signInMethod:m,pendingToken:ie,idToken:M,accessToken:O}):new ma(m).credential({idToken:M,accessToken:O,rawNonce:$e}):null}return v instanceof j.ZR?E.credentialFromError(v):E.credentialFromResult(v)}function Vi(v,g){return g.catch(m=>{throw m instanceof j.ZR&&function Pd(v,g){var m;const E=null===(m=g.customData)||void 0===m?void 0:m._tokenResponse;if("auth/multi-factor-auth-required"===g?.code)g.resolver=new rg(v,function wt(v,g){var m;const E=(0,j.m9)(v),M=g;return K(g.customData.operationType,E,"argument-error"),K(null===(m=M.customData._serverResponse)||void 0===m?void 0:m.mfaPendingCredential,E,"argument-error"),Ie._fromError(E,M)}(v,g));else if(E){const M=zh(g),O=g;M&&(O.credential=M,O.tenantId=E.tenantId||void 0,O.email=E.email||void 0,O.phoneNumber=E.phoneNumber||void 0)}}(v,m),m}).then(m=>{const M=m.user;return{operationType:m.operationType,credential:E_(m),additionalUserInfo:dl(m),user:Oa.getOrCreate(M)}})}function Gh(v,g){return Od.apply(this,arguments)}function Od(){return(Od=(0,c.Z)(function*(v,g){const m=yield g;return{verificationId:m.verificationId,confirm:E=>Vi(v,m.confirm(E))}})).apply(this,arguments)}class rg{constructor(g,m){this.resolver=m,this.auth=function ng(v){return v.wrapped()}(g)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(g){return Vi(Mo(this.auth),this.resolver.resolveSignIn(g))}}class Oa{constructor(g){this._delegate=g,this.multiFactor=function ac(v){const g=(0,j.m9)(v);return Ta.has(g)||Ta.set(g,fl._fromUser(g)),Ta.get(g)}(g)}static getOrCreate(g){return Oa.USER_MAP.has(g)||Oa.USER_MAP.set(g,new Oa(g)),Oa.USER_MAP.get(g)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(g){return this._delegate.getIdTokenResult(g)}getIdToken(g){return this._delegate.getIdToken(g)}linkAndRetrieveDataWithCredential(g){return this.linkWithCredential(g)}linkWithCredential(g){var m=this;return(0,c.Z)(function*(){return Vi(m.auth,Zo(m._delegate,g))})()}linkWithPhoneNumber(g,m){var E=this;return(0,c.Z)(function*(){return Gh(E.auth,function Th(v,g,m){return pc.apply(this,arguments)}(E._delegate,g,m))})()}linkWithPopup(g){var m=this;return(0,c.Z)(function*(){return Vi(m.auth,function Ct(v,g,m){return _c.apply(this,arguments)}(m._delegate,g,Ro))})()}linkWithRedirect(g){var m=this;return(0,c.Z)(function*(){return yield $h(Pn(m.auth)),function Xn(v,g,m){return function yu(v,g,m){return Sh.apply(this,arguments)}(v,g,m)}(m._delegate,g,Ro)})()}reauthenticateAndRetrieveDataWithCredential(g){return this.reauthenticateWithCredential(g)}reauthenticateWithCredential(g){var m=this;return(0,c.Z)(function*(){return Vi(m.auth,iu(m._delegate,g))})()}reauthenticateWithPhoneNumber(g,m){return Gh(this.auth,function Ah(v,g,m){return gc.apply(this,arguments)}(this._delegate,g,m))}reauthenticateWithPopup(g){return Vi(this.auth,function pr(v,g,m){return Eo.apply(this,arguments)}(this._delegate,g,Ro))}reauthenticateWithRedirect(g){var m=this;return(0,c.Z)(function*(){return yield $h(Pn(m.auth)),function os(v,g,m){return function wi(v,g,m){return Li.apply(this,arguments)}(v,g,m)}(m._delegate,g,Ro)})()}sendEmailVerification(g){return function fd(v,g){return ll.apply(this,arguments)}(this._delegate,g)}unlink(g){var m=this;return(0,c.Z)(function*(){return yield function nu(v,g){return Wo.apply(this,arguments)}(m._delegate,g),m})()}updateEmail(g){return function cl(v,g){return eo((0,j.m9)(v),g,null)}(this._delegate,g)}updatePassword(g){return function pd(v,g){return eo((0,j.m9)(v),null,g)}(this._delegate,g)}updatePhoneNumber(g){return function Tn(v,g){return Ds.apply(this,arguments)}(this._delegate,g)}updateProfile(g){return function Es(v,g){return ul.apply(this,arguments)}(this._delegate,g)}verifyBeforeUpdateEmail(g,m){return function wh(v,g,m){return rc.apply(this,arguments)}(this._delegate,g,m)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Oa.USER_MAP=new WeakMap;const Bi=K;let Cc=(()=>{class v{constructor(m,E){if(this.app=m,E.isInitialized())return this._delegate=E.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:M}=m.options;Bi(M,"invalid-api-key",{appName:m.name}),Bi(M,"invalid-api-key",{appName:m.name});const O=typeof window<"u"?Ro:void 0;this._delegate=E.initialize({options:{persistence:I_(M,m.name),popupRedirectResolver:O}}),this._delegate._updateErrorMap(Me),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Oa.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(m){this._delegate.languageCode=m}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(m){this._delegate.tenantId=m}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(m,E){!function Kn(v,g,m){const E=Pn(v);K(E._canInitEmulator,E,"emulator-config-failed"),K(/^https?:\/\//.test(g),E,"invalid-emulator-scheme");const M=!!m?.disableWarnings,O=Wu(g),{host:Z,port:ie}=function vr(v){const g=Wu(v),m=/(\/\/)?([^?#/]+)/.exec(v.substr(g.length));if(!m)return{host:"",port:null};const E=m[2].split("@").pop()||"",M=/^(\[[^\]]+\])(:|$)/.exec(E);if(M){const O=M[1];return{host:O,port:gi(E.substr(O.length+1))}}{const[O,Z]=E.split(":");return{host:O,port:gi(Z)}}}(g);E.config.emulator={url:`${O}//${Z}${null===ie?"":`:${ie}`}/`},E.settings.appVerificationDisabledForTesting=!0,E.emulatorConfig=Object.freeze({host:Z,port:ie,protocol:O.replace(":",""),options:Object.freeze({disableWarnings:M})}),M||function Ya(){function v(){const g=document.createElement("p"),m=g.style;g.innerText="Running in emulator mode. Do not use with production credentials.",m.position="fixed",m.width="100%",m.backgroundColor="#ffffff",m.border=".1em solid #000000",m.color="#b50000",m.bottom="0px",m.left="0px",m.margin="0px",m.zIndex="10000",m.textAlign="center",g.classList.add("firebase-emulator-warning"),document.body.appendChild(g)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",v):v())}()}(this._delegate,m,E)}applyActionCode(m){return function ou(v,g){return Zs.apply(this,arguments)}(this._delegate,m)}checkActionCode(m){return Ks(this._delegate,m)}confirmPasswordReset(m,E){return function sl(v,g,m){return mo.apply(this,arguments)}(this._delegate,m,E)}createUserWithEmailAndPassword(m,E){var M=this;return(0,c.Z)(function*(){return Vi(M._delegate,function lu(v,g,m){return Da.apply(this,arguments)}(M._delegate,m,E))})()}fetchProvidersForEmail(m){return this.fetchSignInMethodsForEmail(m)}fetchSignInMethodsForEmail(m){return function nc(v,g){return al.apply(this,arguments)}(this._delegate,m)}isSignInWithEmailLink(m){return function dd(v,g){return"EMAIL_SIGNIN"===bs.parseLink(g)?.operation}(0,m)}getRedirectResult(){var m=this;return(0,c.Z)(function*(){Bi(Qp(),m._delegate,"operation-not-supported-in-this-environment");const E=yield function Br(v,g){return vu.apply(this,arguments)}(m._delegate,Ro);return E?Vi(m._delegate,Promise.resolve(E)):{credential:null,user:null}})()}addFrameworkForLogging(m){!function Wp(v,g){Pn(v)._logFramework(g)}(this._delegate,m)}onAuthStateChanged(m,E,M){const{next:O,error:Z,complete:ie}=C_(m,E,M);return this._delegate.onAuthStateChanged(O,Z,ie)}onIdTokenChanged(m,E,M){const{next:O,error:Z,complete:ie}=C_(m,E,M);return this._delegate.onIdTokenChanged(O,Z,ie)}sendSignInLinkToEmail(m,E){return function ol(v,g,m){return Qs.apply(this,arguments)}(this._delegate,m,E)}sendPasswordResetEmail(m,E){return function su(v,g,m){return ec.apply(this,arguments)}(this._delegate,m,E||void 0)}setPersistence(m){var E=this;return(0,c.Z)(function*(){let M;switch(function Xp(v,g){So(Object.values(Ui).includes(g),v,"invalid-persistence-type"),(0,j.b$)()?So(g!==Ui.SESSION,v,"unsupported-persistence-type"):(0,j.UG)()?So(g===Ui.NONE,v,"unsupported-persistence-type"):Hh()?So(g===Ui.NONE||g===Ui.LOCAL&&(0,j.hl)(),v,"unsupported-persistence-type"):So(g===Ui.NONE||v_(),v,"unsupported-persistence-type")}(E._delegate,m),m){case Ui.SESSION:M=vi;break;case Ui.LOCAL:M=(yield Ht(hc)._isAvailable())?hc:gl;break;case Ui.NONE:M=rr;break;default:return xe("argument-error",{appName:E._delegate.name})}return E._delegate.setPersistence(M)})()}signInAndRetrieveDataWithCredential(m){return this.signInWithCredential(m)}signInAnonymously(){return Vi(this._delegate,function Ft(v){return go.apply(this,arguments)}(this._delegate))}signInWithCredential(m){return Vi(this._delegate,qs(this._delegate,m))}signInWithCustomToken(m){return Vi(this._delegate,function oi(v,g){return ts.apply(this,arguments)}(this._delegate,m))}signInWithEmailAndPassword(m,E){return Vi(this._delegate,function tc(v,g,m){return qs((0,j.m9)(v),zs.credential(g,m))}(this._delegate,m,E))}signInWithEmailLink(m,E){return Vi(this._delegate,function hd(v,g,m){return Vr.apply(this,arguments)}(this._delegate,m,E))}signInWithPhoneNumber(m,E){return Gh(this._delegate,function Ap(v,g,m){return mu.apply(this,arguments)}(this._delegate,m,E))}signInWithPopup(m){var E=this;return(0,c.Z)(function*(){return Bi(Qp(),E._delegate,"operation-not-supported-in-this-environment"),Vi(E._delegate,function El(v,g,m){return Cd.apply(this,arguments)}(E._delegate,m,Ro))})()}signInWithRedirect(m){var E=this;return(0,c.Z)(function*(){return Bi(Qp(),E._delegate,"operation-not-supported-in-this-environment"),yield $h(E._delegate),function Oi(v,g,m){return function Yr(v,g,m){return Jo.apply(this,arguments)}(v,g,m)}(E._delegate,m,Ro)})()}updateCurrentUser(m){return this._delegate.updateCurrentUser(m)}verifyPasswordResetCode(m){return function au(v,g){return Ys.apply(this,arguments)}(this._delegate,m)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return v.Persistence=Ui,v})();function C_(v,g,m){let E=v;"function"!=typeof v&&({next:E,error:g,complete:m}=v);const M=E;return{next:Z=>M(Z&&Oa.getOrCreate(Z)),error:g,complete:m}}function I_(v,g){const m=function Tl(v,g){const m=eg();if(!m)return[];const E=q(Jp,v,g);switch(m.getItem(E)){case Ui.NONE:return[rr];case Ui.LOCAL:return[hc,vi];case Ui.SESSION:return[vi];default:return[]}}(v,g);if(typeof self<"u"&&!m.includes(hc)&&m.push(hc),typeof window<"u")for(const E of[gl,vi])m.includes(E)||m.push(E);return m.includes(rr)||m.push(rr),m}class ig{constructor(){this.providerId="phone",this._delegate=new _t(Mo(B.Z.auth()))}static credential(g,m){return _t.credential(g,m)}verifyPhoneNumber(g,m){return this._delegate.verifyPhoneNumber(g,m)}unwrap(){return this._delegate}}ig.PHONE_SIGN_IN_METHOD=_t.PHONE_SIGN_IN_METHOD,ig.PROVIDER_ID=_t.PROVIDER_ID;const $v=K;class zv{constructor(g,m,E=B.Z.app()){var M;$v(null===(M=E.options)||void 0===M?void 0:M.apiKey,"invalid-api-key",{appName:E.name}),this._delegate=new Pi(g,m,E.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function D_(v){v.INTERNAL.registerComponent(new ue.wA("auth-compat",g=>{const m=g.getProvider("app-compat").getImmediate(),E=g.getProvider("auth");return new Cc(m,E)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:zs,FacebookAuthProvider:_i,GithubAuthProvider:_a,GoogleAuthProvider:Rr,OAuthProvider:ma,SAMLAuthProvider:va,PhoneAuthProvider:ig,PhoneMultiFactorGenerator:Fp,RecaptchaVerifier:zv,TwitterAuthProvider:wa,Auth:Cc,AuthCredential:mi,Error:j.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),v.registerVersion("@firebase/auth-compat","0.4.0")}(B.Z)},8766:(Tt,ce,H)=>{"use strict";H.d(ce,{Lj:()=>We,X3:()=>Et});var c=H(5861);let j,fe;const ue=new WeakMap,ye=new WeakMap,Ee=new WeakMap,Y=new WeakMap,J=new WeakMap;let Fe={get(_e,K,Qe){if(_e instanceof IDBTransaction){if("done"===K)return ye.get(_e);if("objectStoreNames"===K)return _e.objectStoreNames||Ee.get(_e);if("store"===K)return Qe.objectStoreNames[1]?void 0:Qe.objectStore(Qe.objectStoreNames[0])}return pe(_e[K])},set:(_e,K,Qe)=>(_e[K]=Qe,!0),has:(_e,K)=>_e instanceof IDBTransaction&&("done"===K||"store"===K)||K in _e};function Ae(_e){return"function"==typeof _e?function ot(_e){return _e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ve(){return fe||(fe=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(_e)?function(...K){return _e.apply(Ge(this),K),pe(ue.get(this))}:function(...K){return pe(_e.apply(Ge(this),K))}:function(K,...Qe){const rt=_e.call(Ge(this),K,...Qe);return Ee.set(rt,K.sort?K.sort():[K]),pe(rt)}}(_e):(_e instanceof IDBTransaction&&function nt(_e){if(ye.has(_e))return;const K=new Promise((Qe,rt)=>{const Vt=()=>{_e.removeEventListener("complete",at),_e.removeEventListener("error",he),_e.removeEventListener("abort",he)},at=()=>{Qe(),Vt()},he=()=>{rt(_e.error||new DOMException("AbortError","AbortError")),Vt()};_e.addEventListener("complete",at),_e.addEventListener("error",he),_e.addEventListener("abort",he)});ye.set(_e,K)}(_e),((_e,K)=>K.some(Qe=>_e instanceof Qe))(_e,function de(){return j||(j=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(_e,Fe):_e)}function pe(_e){if(_e instanceof IDBRequest)return function te(_e){const K=new Promise((Qe,rt)=>{const Vt=()=>{_e.removeEventListener("success",at),_e.removeEventListener("error",he)},at=()=>{Qe(pe(_e.result)),Vt()},he=()=>{rt(_e.error),Vt()};_e.addEventListener("success",at),_e.addEventListener("error",he)});return K.then(Qe=>{Qe instanceof IDBCursor&&ue.set(Qe,_e)}).catch(()=>{}),J.set(K,_e),K}(_e);if(Y.has(_e))return Y.get(_e);const K=Ae(_e);return K!==_e&&(Y.set(_e,K),J.set(K,_e)),K}const Ge=_e=>J.get(_e);function Et(_e,K,{blocked:Qe,upgrade:rt,blocking:Vt,terminated:at}={}){const he=indexedDB.open(_e,K),De=pe(he);return rt&&he.addEventListener("upgradeneeded",Re=>{rt(pe(he.result),Re.oldVersion,Re.newVersion,pe(he.transaction))}),Qe&&he.addEventListener("blocked",()=>Qe()),De.then(Re=>{at&&Re.addEventListener("close",()=>at()),Vt&&Re.addEventListener("versionchange",()=>Vt())}).catch(()=>{}),De}function We(_e,{blocked:K}={}){const Qe=indexedDB.deleteDatabase(_e);return K&&Qe.addEventListener("blocked",()=>K()),pe(Qe).then(()=>{})}const xe=["get","getKey","getAll","getAllKeys","count"],Ce=["put","add","delete","clear"],st=new Map;function Xe(_e,K){if(!(_e instanceof IDBDatabase)||K in _e||"string"!=typeof K)return;if(st.get(K))return st.get(K);const Qe=K.replace(/FromIndex$/,""),rt=K!==Qe,Vt=Ce.includes(Qe);if(!(Qe in(rt?IDBIndex:IDBObjectStore).prototype)||!Vt&&!xe.includes(Qe))return;const at=function(){var he=(0,c.Z)(function*(De,...Re){const Ue=this.transaction(De,Vt?"readwrite":"readonly");let Ve=Ue.store;return rt&&(Ve=Ve.index(Re.shift())),(yield Promise.all([Ve[Qe](...Re),Vt&&Ue.done]))[0]});return function(Re){return he.apply(this,arguments)}}();return st.set(K,at),at}!function Me(_e){Fe=_e(Fe)}(_e=>({..._e,get:(K,Qe,rt)=>Xe(K,Qe)||_e.get(K,Qe,rt),has:(K,Qe)=>!!Xe(K,Qe)||_e.has(K,Qe)}))},5861:(Tt,ce,H)=>{"use strict";function c(j,fe,de,ve,ue,ye,Ee){try{var Y=j[ye](Ee),J=Y.value}catch(te){return void de(te)}Y.done?fe(J):Promise.resolve(J).then(ve,ue)}function B(j){return function(){var fe=this,de=arguments;return new Promise(function(ve,ue){var ye=j.apply(fe,de);function Ee(J){c(ye,ve,ue,Ee,Y,"next",J)}function Y(J){c(ye,ve,ue,Ee,Y,"throw",J)}Ee(void 0)})}}H.d(ce,{Z:()=>B})}},Tt=>{Tt(Tt.s=7008)}]);